{"version":3,"mappings":"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","names":["d","t","u","h","s","e","o","n","i","r","l","c","p","a","v","m","y","x","j","k","w","f","RangeChangedEvent","range","VisibilityChangedEvent","UnpinnedEvent","ScrollerShim","element","node","ScrollerController","client","p1","p2","options","retarget","end","top","left","coordinates","scrollTop","scrollLeft","topDiff","leftDiff","_ResizeObserver","virtualizerRef","SIZER_ATTRIBUTE","DefaultLayoutConstructor","Virtualizer","config","items","layoutConfig","hostElement","includeSelf","getClippingAncestors","ancestor","child","target","_a","_b","_c","_d","style","sizer","Ctor","copy","__vitePreload","message","now","timeElapsed","virtualizationTime","mm","children","fn","idx","width","height","getMargins","method","state","_rangeChanged","_itemsChanged","event","arr","next","scrollingElement","layout","bottom","right","hostElementBounds","ancestorBounds","bounds","scrollingElementBounds","offsetWithinScroller","totalScrollSize","size","pos","xOffset","yOffset","index","_first","_last","_firstVisible","_lastVisible","behavior","resolve","reject","reason","changes","change","el","getMarginValue","value","float","getParentElement","parentNode","getElementAncestors","ancestors","parent","foundFixed","defaultKeyFunction","item","defaultRenderItem","html","VirtualizeDirective","AsyncDirective","part","PartType","itemsToRender","repeat","itemsChanged","noChange","renderItem","keyFunction","scroller","virtualize","directive","LitVirtualizer","LitElement","position","__decorate","property","__defProp","__getOwnPropDesc","__decorateClass","decorators","key","kind","result","decorator","selectTokenStyle","css","selectTokenContext","createContext","SelectTokenContext","ReplaySubject","BehaviorSubject","Subject","mergeMap","chainId","TokenController","combineLatest","switchMap","address","state3","searchTokenInputStyle","css2","SearchTokenInputElement","classes","classMap","consume","sceneContext","customElement","tokenListItemStyle","css3","mobileMediaCSS","tokenListStubItemStyle","css4","mobileMediaCSS2","TokenListStubTemElement","LitElement2","html2","classMap2","customElement2","emitSelectTokenEvent","ctx","dispatchEvent","TokenListItemElement","LitElement3","Task","tokenAddress","walletAddress","fastUpdate","asyncTimeout","token","TokenController2","balance","balanceUsd","tokenPrice","balanceFormatted","formatUnits","subscribe","merge","getBlockEmitter","switchMap2","html3","balanceFormat","formatNumber","balanceUsdFormat","startColor","classMap3","filter","isAddressEqual","property2","consume2","customElement3","tokenListStyle","css5","mobileMediaCSS3","TokenListElement","LitElement4","defer","combineLatest2","resizeObserver","debounceTime","map","tokenAddresses","startWith","html4","observe","classMap4","litMap","styles","cache","styleMap","ifDefined","scrollbarStyle","consume3","sceneContext2","state2","customElement4","favoriteTokensStyles","css6","FavoriteTokensElement","LitElement5","BehaviorSubject2","combineLatest3","defer2","switchMap3","tokens","TokenController3","map2","token1","token2","startWith2","tap","html5","animationMap","itemAnimation","when","shareReplay","subscribe2","observe2","scrollbarStyle2","consume4","customElement5","element2","hasChangedAddress","oldValue","isAddressEqual2","SelectTokenElement","LitElement6","ContextProvider","html6","changedProperties","isDirty","context","connectedWalletAddress","property3","customElement6"],"sources":["../../../../node_modules/.pnpm/lit-html@3.1.3/node_modules/lit-html/directives/cache.js","../../../../node_modules/.pnpm/lit-html@3.1.3/node_modules/lit-html/directives/repeat.js","../../../../node_modules/.pnpm/@lit-labs+virtualizer@2.0.12/node_modules/@lit-labs/virtualizer/events.js","../../../../node_modules/.pnpm/@lit-labs+virtualizer@2.0.12/node_modules/@lit-labs/virtualizer/ScrollerController.js","../../../../node_modules/.pnpm/@lit-labs+virtualizer@2.0.12/node_modules/@lit-labs/virtualizer/Virtualizer.js","../../../../node_modules/.pnpm/@lit-labs+virtualizer@2.0.12/node_modules/@lit-labs/virtualizer/virtualize.js","../../../../node_modules/.pnpm/@lit-labs+virtualizer@2.0.12/node_modules/@lit-labs/virtualizer/LitVirtualizer.js","../../../../node_modules/.pnpm/@lit-labs+virtualizer@2.0.12/node_modules/@lit-labs/virtualizer/lit-virtualizer.js","../../../libs/widgets/select-token/index.esm.js"],"sourcesContent":["import{render as t,nothing as i}from\"../lit-html.js\";import{directive as s,Directive as e}from\"../directive.js\";import{isTemplateResult as o,getCommittedValue as n,setCommittedValue as r,insertPart as l,clearPart as c,isCompiledTemplateResult as u}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const d=t=>u(t)?t._$litType$.h:t.strings,h=s(class extends e{constructor(t){super(t),this.et=new WeakMap}render(t){return[t]}update(s,[e]){const u=o(this.it)?d(this.it):null,h=o(e)?d(e):null;if(null!==u&&(null===h||u!==h)){const e=n(s).pop();let o=this.et.get(u);if(void 0===o){const s=document.createDocumentFragment();o=t(i,s),o.setConnected(!1),this.et.set(u,o)}r(o,[e]),l(o,void 0,e)}if(null!==h){if(null===u||u!==h){const t=this.et.get(h);if(void 0!==t){const i=n(t).pop();c(s),l(s,void 0,i),r(s,[i])}}this.it=e}else this.it=void 0;return this.render(e)}});export{h as cache};\n//# sourceMappingURL=cache.js.map\n","import{noChange as e}from\"../lit-html.js\";import{directive as s,Directive as t,PartType as r}from\"../directive.js\";import{getCommittedValue as l,setChildPartValue as o,insertPart as i,removePart as n,setCommittedValue as f}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst u=(e,s,t)=>{const r=new Map;for(let l=s;l<=t;l++)r.set(e[l],l);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error(\"repeat() can only be used in text expressions\")}dt(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const l=[],o=[];let i=0;for(const s of e)l[i]=r?r(s,i):i,o[i]=t(s,i),i++;return{values:o,keys:l}}render(e,s,t){return this.dt(e,s,t).values}update(s,[t,r,c]){const d=l(s),{values:p,keys:a}=this.dt(t,r,c);if(!Array.isArray(d))return this.ut=a,p;const h=this.ut??=[],v=[];let m,y,x=0,j=d.length-1,k=0,w=p.length-1;for(;x<=j&&k<=w;)if(null===d[x])x++;else if(null===d[j])j--;else if(h[x]===a[k])v[k]=o(d[x],p[k]),x++,k++;else if(h[j]===a[w])v[w]=o(d[j],p[w]),j--,w--;else if(h[x]===a[w])v[w]=o(d[x],p[w]),i(s,v[w+1],d[x]),x++,w--;else if(h[j]===a[k])v[k]=o(d[j],p[k]),i(s,d[x],d[j]),j--,k++;else if(void 0===m&&(m=u(a,k,w),y=u(h,x,j)),m.has(h[x]))if(m.has(h[j])){const e=y.get(a[k]),t=void 0!==e?d[e]:null;if(null===t){const e=i(s,d[x]);o(e,p[k]),v[k]=e}else v[k]=o(t,p[k]),i(s,d[x],t),d[e]=null;k++}else n(d[j]),j--;else n(d[x]),x++;for(;k<=w;){const e=i(s,v[w+1]);o(e,p[k]),v[k++]=e}for(;x<=j;){const e=d[x++];null!==e&&n(e)}return this.ut=a,f(s,v),e}});export{c as repeat};\n//# sourceMappingURL=repeat.js.map\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nexport class RangeChangedEvent extends Event {\n    constructor(range) {\n        super(RangeChangedEvent.eventName, { bubbles: false });\n        this.first = range.first;\n        this.last = range.last;\n    }\n}\nRangeChangedEvent.eventName = 'rangeChanged';\nexport class VisibilityChangedEvent extends Event {\n    constructor(range) {\n        super(VisibilityChangedEvent.eventName, { bubbles: false });\n        this.first = range.first;\n        this.last = range.last;\n    }\n}\nVisibilityChangedEvent.eventName = 'visibilityChanged';\nexport class UnpinnedEvent extends Event {\n    constructor() {\n        super(UnpinnedEvent.eventName, { bubbles: false });\n    }\n}\nUnpinnedEvent.eventName = 'unpinned';\n//# sourceMappingURL=events.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nexport class ScrollerShim {\n    constructor(element) {\n        this._element = null;\n        const node = element ?? window;\n        this._node = node;\n        if (element) {\n            this._element = element;\n        }\n    }\n    get element() {\n        return (this._element || document.scrollingElement || document.documentElement);\n    }\n    get scrollTop() {\n        return this.element.scrollTop || window.scrollY;\n    }\n    get scrollLeft() {\n        return this.element.scrollLeft || window.scrollX;\n    }\n    get scrollHeight() {\n        return this.element.scrollHeight;\n    }\n    get scrollWidth() {\n        return this.element.scrollWidth;\n    }\n    get viewportHeight() {\n        return this._element\n            ? this._element.getBoundingClientRect().height\n            : window.innerHeight;\n    }\n    get viewportWidth() {\n        return this._element\n            ? this._element.getBoundingClientRect().width\n            : window.innerWidth;\n    }\n    get maxScrollTop() {\n        return this.scrollHeight - this.viewportHeight;\n    }\n    get maxScrollLeft() {\n        return this.scrollWidth - this.viewportWidth;\n    }\n}\nexport class ScrollerController extends ScrollerShim {\n    constructor(client, element) {\n        super(element);\n        this._clients = new Set();\n        this._retarget = null;\n        this._end = null;\n        this.__destination = null;\n        this.correctingScrollError = false;\n        this._checkForArrival = this._checkForArrival.bind(this);\n        this._updateManagedScrollTo = this._updateManagedScrollTo.bind(this);\n        this.scrollTo = this.scrollTo.bind(this);\n        this.scrollBy = this.scrollBy.bind(this);\n        const node = this._node;\n        this._originalScrollTo = node.scrollTo;\n        this._originalScrollBy = node.scrollBy;\n        this._originalScroll = node.scroll;\n        this._attach(client);\n    }\n    get _destination() {\n        return this.__destination;\n    }\n    get scrolling() {\n        return this._destination !== null;\n    }\n    scrollTo(p1, p2) {\n        const options = typeof p1 === 'number' && typeof p2 === 'number'\n            ? { left: p1, top: p2 }\n            : p1;\n        this._scrollTo(options);\n    }\n    scrollBy(p1, p2) {\n        const options = typeof p1 === 'number' && typeof p2 === 'number'\n            ? { left: p1, top: p2 }\n            : p1;\n        if (options.top !== undefined) {\n            options.top += this.scrollTop;\n        }\n        if (options.left !== undefined) {\n            options.left += this.scrollLeft;\n        }\n        this._scrollTo(options);\n    }\n    _nativeScrollTo(options) {\n        this._originalScrollTo.bind(this._element || window)(options);\n    }\n    _scrollTo(options, retarget = null, end = null) {\n        if (this._end !== null) {\n            this._end();\n        }\n        if (options.behavior === 'smooth') {\n            this._setDestination(options);\n            this._retarget = retarget;\n            this._end = end;\n        }\n        else {\n            this._resetScrollState();\n        }\n        this._nativeScrollTo(options);\n    }\n    _setDestination(options) {\n        let { top, left } = options;\n        top =\n            top === undefined\n                ? undefined\n                : Math.max(0, Math.min(top, this.maxScrollTop));\n        left =\n            left === undefined\n                ? undefined\n                : Math.max(0, Math.min(left, this.maxScrollLeft));\n        if (this._destination !== null &&\n            left === this._destination.left &&\n            top === this._destination.top) {\n            return false;\n        }\n        this.__destination = { top, left, behavior: 'smooth' };\n        return true;\n    }\n    _resetScrollState() {\n        this.__destination = null;\n        this._retarget = null;\n        this._end = null;\n    }\n    _updateManagedScrollTo(coordinates) {\n        if (this._destination) {\n            if (this._setDestination(coordinates)) {\n                this._nativeScrollTo(this._destination);\n            }\n        }\n    }\n    managedScrollTo(options, retarget, end) {\n        this._scrollTo(options, retarget, end);\n        return this._updateManagedScrollTo;\n    }\n    correctScrollError(coordinates) {\n        this.correctingScrollError = true;\n        requestAnimationFrame(() => requestAnimationFrame(() => (this.correctingScrollError = false)));\n        // Correct the error\n        this._nativeScrollTo(coordinates);\n        // Then, if we were headed for a specific destination, we continue scrolling:\n        // First, we update our target destination, if applicable...\n        if (this._retarget) {\n            this._setDestination(this._retarget());\n        }\n        // Then we go ahead and resume scrolling\n        if (this._destination) {\n            this._nativeScrollTo(this._destination);\n        }\n    }\n    _checkForArrival() {\n        if (this._destination !== null) {\n            const { scrollTop, scrollLeft } = this;\n            let { top, left } = this._destination;\n            top = Math.min(top || 0, this.maxScrollTop);\n            left = Math.min(left || 0, this.maxScrollLeft);\n            const topDiff = Math.abs(top - scrollTop);\n            const leftDiff = Math.abs(left - scrollLeft);\n            // We check to see if we've arrived at our destination.\n            if (topDiff < 1 && leftDiff < 1) {\n                if (this._end) {\n                    this._end();\n                }\n                this._resetScrollState();\n            }\n        }\n    }\n    detach(client) {\n        this._clients.delete(client);\n        /**\n         * If there aren't any more clients, then return the node's default\n         * scrolling methods\n         */\n        if (this._clients.size === 0) {\n            this._node.scrollTo = this._originalScrollTo;\n            this._node.scrollBy = this._originalScrollBy;\n            this._node.scroll = this._originalScroll;\n            this._node.removeEventListener('scroll', this._checkForArrival);\n        }\n        return null;\n    }\n    _attach(client) {\n        this._clients.add(client);\n        /**\n         * The node should only have the methods shimmed when adding the first\n         * client â€“ otherwise it's redundant\n         */\n        if (this._clients.size === 1) {\n            this._node.scrollTo = this.scrollTo;\n            this._node.scrollBy = this.scrollBy;\n            this._node.scroll = this.scrollTo;\n            this._node.addEventListener('scroll', this._checkForArrival);\n        }\n    }\n}\n//# sourceMappingURL=ScrollerController.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { RangeChangedEvent, VisibilityChangedEvent, UnpinnedEvent, } from './events.js';\nimport { ScrollerController } from './ScrollerController.js';\n// Virtualizer depends on `ResizeObserver`, which is supported in\n// all modern browsers. For developers whose browser support\n// matrix includes older browsers, we include a compatible\n// polyfill in the package; this bit of module state facilitates\n// a simple mechanism (see ./polyfillLoaders/ResizeObserver.js.)\n// for loading the polyfill.\nlet _ResizeObserver = window?.ResizeObserver;\n/**\n * Call this function to provide a `ResizeObserver` polyfill for Virtualizer to use.\n * @param Ctor Constructor for a `ResizeObserver` polyfill (recommend using the one provided with the Virtualizer package)\n */\nexport function provideResizeObserver(Ctor) {\n    _ResizeObserver = Ctor;\n}\nexport const virtualizerRef = Symbol('virtualizerRef');\nconst SIZER_ATTRIBUTE = 'virtualizer-sizer';\nlet DefaultLayoutConstructor;\n/**\n * Provides virtual scrolling boilerplate.\n *\n * Extensions of this class must set hostElement and layout.\n *\n * Extensions of this class must also override VirtualRepeater's DOM\n * manipulation methods.\n */\nexport class Virtualizer {\n    constructor(config) {\n        this._benchmarkStart = null;\n        this._layout = null;\n        this._clippingAncestors = [];\n        /**\n         * Layout provides these values, we set them on _render().\n         * TODO @straversi: Can we find an XOR type, usable for the key here?\n         */\n        this._scrollSize = null;\n        /**\n         * Difference between scroll target's current and required scroll offsets.\n         * Provided by layout.\n         */\n        this._scrollError = null;\n        /**\n         * A list of the positions (top, left) of the children in the current range.\n         */\n        this._childrenPos = null;\n        // TODO: (graynorton): type\n        this._childMeasurements = null;\n        this._toBeMeasured = new Map();\n        this._rangeChanged = true;\n        this._itemsChanged = true;\n        this._visibilityChanged = true;\n        this._scrollerController = null;\n        this._isScroller = false;\n        this._sizer = null;\n        /**\n         * Resize observer attached to hostElement.\n         */\n        this._hostElementRO = null;\n        /**\n         * Resize observer attached to children.\n         */\n        this._childrenRO = null;\n        this._mutationObserver = null;\n        this._scrollEventListeners = [];\n        this._scrollEventListenerOptions = {\n            passive: true,\n        };\n        // TODO (graynorton): Rethink, per longer comment below\n        this._loadListener = this._childLoaded.bind(this);\n        /**\n         * Index of element to scroll into view, plus scroll\n         * behavior options, as imperatively specified via\n         * `element(index).scrollIntoView()`\n         */\n        this._scrollIntoViewTarget = null;\n        this._updateScrollIntoViewCoordinates = null;\n        /**\n         * Items to render. Set by items.\n         */\n        this._items = [];\n        /**\n         * Index of the first child in the range, not necessarily the first visible child.\n         * TODO @straversi: Consider renaming these.\n         */\n        this._first = -1;\n        /**\n         * Index of the last child in the range.\n         */\n        this._last = -1;\n        /**\n         * Index of the first item intersecting the viewport.\n         */\n        this._firstVisible = -1;\n        /**\n         * Index of the last item intersecting the viewport.\n         */\n        this._lastVisible = -1;\n        this._scheduled = new WeakSet();\n        /**\n         * Invoked at the end of each render cycle: children in the range are\n         * measured, and their dimensions passed to this callback. Use it to layout\n         * children as needed.\n         */\n        this._measureCallback = null;\n        this._measureChildOverride = null;\n        /**\n         * State for `layoutComplete` promise\n         */\n        this._layoutCompletePromise = null;\n        this._layoutCompleteResolver = null;\n        this._layoutCompleteRejecter = null;\n        this._pendingLayoutComplete = null;\n        /**\n         * Layout initialization is async because we dynamically load\n         * the default layout if none is specified. This state is to track\n         * whether init is complete.\n         */\n        this._layoutInitialized = null;\n        if (!config) {\n            throw new Error('Virtualizer constructor requires a configuration object');\n        }\n        if (config.hostElement) {\n            this._init(config);\n        }\n        else {\n            throw new Error('Virtualizer configuration requires the \"hostElement\" property');\n        }\n    }\n    set items(items) {\n        if (Array.isArray(items) && items !== this._items) {\n            this._itemsChanged = true;\n            this._items = items;\n            this._schedule(this._updateLayout);\n        }\n    }\n    _init(config) {\n        this._isScroller = !!config.scroller;\n        this._initHostElement(config);\n        // If no layout is specified, we make an empty\n        // layout config, which will result in the default\n        // layout with default parameters\n        const layoutConfig = config.layout || {};\n        // Save the promise returned by `_initLayout` as a state\n        // variable we can check before updating layout config\n        this._layoutInitialized = this._initLayout(layoutConfig);\n    }\n    _initObservers() {\n        this._mutationObserver = new MutationObserver(this._finishDOMUpdate.bind(this));\n        this._hostElementRO = new _ResizeObserver(() => this._hostElementSizeChanged());\n        this._childrenRO = new _ResizeObserver(this._childrenSizeChanged.bind(this));\n    }\n    _initHostElement(config) {\n        const hostElement = (this._hostElement = config.hostElement);\n        this._applyVirtualizerStyles();\n        hostElement[virtualizerRef] = this;\n    }\n    connected() {\n        this._initObservers();\n        const includeSelf = this._isScroller;\n        this._clippingAncestors = getClippingAncestors(this._hostElement, includeSelf);\n        this._scrollerController = new ScrollerController(this, this._clippingAncestors[0]);\n        this._schedule(this._updateLayout);\n        this._observeAndListen();\n    }\n    _observeAndListen() {\n        this._mutationObserver.observe(this._hostElement, { childList: true });\n        this._hostElementRO.observe(this._hostElement);\n        this._scrollEventListeners.push(window);\n        window.addEventListener('scroll', this, this._scrollEventListenerOptions);\n        this._clippingAncestors.forEach((ancestor) => {\n            ancestor.addEventListener('scroll', this, this._scrollEventListenerOptions);\n            this._scrollEventListeners.push(ancestor);\n            this._hostElementRO.observe(ancestor);\n        });\n        this._hostElementRO.observe(this._scrollerController.element);\n        this._children.forEach((child) => this._childrenRO.observe(child));\n        this._scrollEventListeners.forEach((target) => target.addEventListener('scroll', this, this._scrollEventListenerOptions));\n    }\n    disconnected() {\n        this._scrollEventListeners.forEach((target) => target.removeEventListener('scroll', this, this._scrollEventListenerOptions));\n        this._scrollEventListeners = [];\n        this._clippingAncestors = [];\n        this._scrollerController?.detach(this);\n        this._scrollerController = null;\n        this._mutationObserver?.disconnect();\n        this._mutationObserver = null;\n        this._hostElementRO?.disconnect();\n        this._hostElementRO = null;\n        this._childrenRO?.disconnect();\n        this._childrenRO = null;\n        this._rejectLayoutCompletePromise('disconnected');\n    }\n    _applyVirtualizerStyles() {\n        const hostElement = this._hostElement;\n        // Would rather set these CSS properties on the host using Shadow Root\n        // style scoping (and falling back to a global stylesheet where native\n        // Shadow DOM is not available), but this Mobile Safari bug is preventing\n        // that from working: https://bugs.webkit.org/show_bug.cgi?id=226195\n        const style = hostElement.style;\n        style.display = style.display || 'block';\n        style.position = style.position || 'relative';\n        style.contain = style.contain || 'size layout';\n        if (this._isScroller) {\n            style.overflow = style.overflow || 'auto';\n            style.minHeight = style.minHeight || '150px';\n        }\n    }\n    _getSizer() {\n        const hostElement = this._hostElement;\n        if (!this._sizer) {\n            // Use a preexisting sizer element if provided (for better integration\n            // with vDOM renderers)\n            let sizer = hostElement.querySelector(`[${SIZER_ATTRIBUTE}]`);\n            if (!sizer) {\n                sizer = document.createElement('div');\n                sizer.setAttribute(SIZER_ATTRIBUTE, '');\n                hostElement.appendChild(sizer);\n            }\n            // When the scrollHeight is large, the height of this element might be\n            // ignored. Setting content and font-size ensures the element has a size.\n            Object.assign(sizer.style, {\n                position: 'absolute',\n                margin: '-2px 0 0 0',\n                padding: 0,\n                visibility: 'hidden',\n                fontSize: '2px',\n            });\n            sizer.textContent = '&nbsp;';\n            sizer.setAttribute(SIZER_ATTRIBUTE, '');\n            this._sizer = sizer;\n        }\n        return this._sizer;\n    }\n    async updateLayoutConfig(layoutConfig) {\n        // If layout initialization hasn't finished yet, we wait\n        // for it to finish so we can check whether the new config\n        // is compatible with the existing layout before proceeding.\n        await this._layoutInitialized;\n        const Ctor = layoutConfig.type ||\n            // The new config is compatible with the current layout,\n            // so we update the config and return true to indicate\n            // a successful update\n            DefaultLayoutConstructor;\n        if (typeof Ctor === 'function' && this._layout instanceof Ctor) {\n            const config = { ...layoutConfig };\n            delete config.type;\n            this._layout.config = config;\n            // The new config requires a different layout altogether, but\n            // to limit implementation complexity we don't support dynamically\n            // changing the layout of an existing virtualizer instance.\n            // Returning false here lets the caller know that they should\n            // instead make a new virtualizer instance with the desired layout.\n            return true;\n        }\n        return false;\n    }\n    async _initLayout(layoutConfig) {\n        let config;\n        let Ctor;\n        if (typeof layoutConfig.type === 'function') {\n            // If we have a full LayoutSpecifier, the `type` property\n            // gives us our constructor...\n            Ctor = layoutConfig.type;\n            // ...while the rest of the specifier is our layout config\n            const copy = { ...layoutConfig };\n            delete copy.type;\n            config = copy;\n        }\n        else {\n            // If we don't have a full LayoutSpecifier, we just\n            // have a config for the default layout\n            config = layoutConfig;\n        }\n        if (Ctor === undefined) {\n            // If we don't have a constructor yet, load the default\n            DefaultLayoutConstructor = Ctor = (await import('./layouts/flow.js'))\n                .FlowLayout;\n        }\n        this._layout = new Ctor((message) => this._handleLayoutMessage(message), config);\n        if (this._layout.measureChildren &&\n            typeof this._layout.updateItemSizes === 'function') {\n            if (typeof this._layout.measureChildren === 'function') {\n                this._measureChildOverride = this._layout.measureChildren;\n            }\n            this._measureCallback = this._layout.updateItemSizes.bind(this._layout);\n        }\n        if (this._layout.listenForChildLoadEvents) {\n            this._hostElement.addEventListener('load', this._loadListener, true);\n        }\n        this._schedule(this._updateLayout);\n    }\n    // TODO (graynorton): Rework benchmarking so that it has no API and\n    // instead is always on except in production builds\n    startBenchmarking() {\n        if (this._benchmarkStart === null) {\n            this._benchmarkStart = window.performance.now();\n        }\n    }\n    stopBenchmarking() {\n        if (this._benchmarkStart !== null) {\n            const now = window.performance.now();\n            const timeElapsed = now - this._benchmarkStart;\n            const entries = performance.getEntriesByName('uv-virtualizing', 'measure');\n            const virtualizationTime = entries\n                .filter((e) => e.startTime >= this._benchmarkStart && e.startTime < now)\n                .reduce((t, m) => t + m.duration, 0);\n            this._benchmarkStart = null;\n            return { timeElapsed, virtualizationTime };\n        }\n        return null;\n    }\n    _measureChildren() {\n        const mm = {};\n        const children = this._children;\n        const fn = this._measureChildOverride || this._measureChild;\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            const idx = this._first + i;\n            if (this._itemsChanged || this._toBeMeasured.has(child)) {\n                mm[idx] = fn.call(this, child, this._items[idx]);\n            }\n        }\n        this._childMeasurements = mm;\n        this._schedule(this._updateLayout);\n        this._toBeMeasured.clear();\n    }\n    /**\n     * Returns the width, height, and margins of the given child.\n     */\n    _measureChild(element) {\n        // offsetWidth doesn't take transforms in consideration, so we use\n        // getBoundingClientRect which does.\n        const { width, height } = element.getBoundingClientRect();\n        return Object.assign({ width, height }, getMargins(element));\n    }\n    async _schedule(method) {\n        if (!this._scheduled.has(method)) {\n            this._scheduled.add(method);\n            await Promise.resolve();\n            this._scheduled.delete(method);\n            method.call(this);\n        }\n    }\n    async _updateDOM(state) {\n        this._scrollSize = state.scrollSize;\n        this._adjustRange(state.range);\n        this._childrenPos = state.childPositions;\n        this._scrollError = state.scrollError || null;\n        const { _rangeChanged, _itemsChanged } = this;\n        if (this._visibilityChanged) {\n            this._notifyVisibility();\n            this._visibilityChanged = false;\n        }\n        if (_rangeChanged || _itemsChanged) {\n            this._notifyRange();\n            this._rangeChanged = false;\n        }\n        this._finishDOMUpdate();\n    }\n    _finishDOMUpdate() {\n        this._children.forEach((child) => this._childrenRO.observe(child));\n        this._checkScrollIntoViewTarget(this._childrenPos);\n        this._positionChildren(this._childrenPos);\n        this._sizeHostElement(this._scrollSize);\n        this._correctScrollError();\n        if (this._benchmarkStart && 'mark' in window.performance) {\n            window.performance.mark('uv-end');\n        }\n    }\n    _updateLayout() {\n        // Only update the layout and trigger a re-render if we have:\n        //   a) A layout\n        //   b) A scrollerController, which means we're connected\n        if (this._layout && this._scrollerController) {\n            this._layout.items = this._items;\n            this._updateView();\n            if (this._childMeasurements !== null) {\n                // If the layout has been changed, we may have measurements but no callback\n                if (this._measureCallback) {\n                    this._measureCallback(this._childMeasurements);\n                }\n                this._childMeasurements = null;\n            }\n            this._layout.reflowIfNeeded();\n            if (this._benchmarkStart && 'mark' in window.performance) {\n                window.performance.mark('uv-end');\n            }\n        }\n    }\n    _handleScrollEvent() {\n        if (this._benchmarkStart && 'mark' in window.performance) {\n            try {\n                window.performance.measure('uv-virtualizing', 'uv-start', 'uv-end');\n            }\n            catch (e) {\n                console.warn('Error measuring performance data: ', e);\n            }\n            window.performance.mark('uv-start');\n        }\n        if (this._scrollerController.correctingScrollError === false) {\n            // This is a user-initiated scroll, so we unpin the layout\n            this._layout?.unpin();\n        }\n        this._schedule(this._updateLayout);\n    }\n    handleEvent(event) {\n        switch (event.type) {\n            case 'scroll':\n                if (event.currentTarget === window ||\n                    this._clippingAncestors.includes(event.currentTarget)) {\n                    this._handleScrollEvent();\n                }\n                break;\n            default:\n                console.warn('event not handled', event);\n        }\n    }\n    _handleLayoutMessage(message) {\n        if (message.type === 'stateChanged') {\n            this._updateDOM(message);\n        }\n        else if (message.type === 'visibilityChanged') {\n            this._firstVisible = message.firstVisible;\n            this._lastVisible = message.lastVisible;\n            this._notifyVisibility();\n        }\n        else if (message.type === 'unpinned') {\n            this._hostElement.dispatchEvent(new UnpinnedEvent());\n        }\n    }\n    get _children() {\n        const arr = [];\n        let next = this._hostElement.firstElementChild;\n        while (next) {\n            if (!next.hasAttribute(SIZER_ATTRIBUTE)) {\n                arr.push(next);\n            }\n            next = next.nextElementSibling;\n        }\n        return arr;\n    }\n    _updateView() {\n        const hostElement = this._hostElement;\n        const scrollingElement = this._scrollerController?.element;\n        const layout = this._layout;\n        if (hostElement && scrollingElement && layout) {\n            let top, left, bottom, right;\n            const hostElementBounds = hostElement.getBoundingClientRect();\n            top = 0;\n            left = 0;\n            bottom = window.innerHeight;\n            right = window.innerWidth;\n            const ancestorBounds = this._clippingAncestors.map((ancestor) => ancestor.getBoundingClientRect());\n            ancestorBounds.unshift(hostElementBounds);\n            for (const bounds of ancestorBounds) {\n                top = Math.max(top, bounds.top);\n                left = Math.max(left, bounds.left);\n                bottom = Math.min(bottom, bounds.bottom);\n                right = Math.min(right, bounds.right);\n            }\n            const scrollingElementBounds = scrollingElement.getBoundingClientRect();\n            const offsetWithinScroller = {\n                left: hostElementBounds.left - scrollingElementBounds.left,\n                top: hostElementBounds.top - scrollingElementBounds.top,\n            };\n            const totalScrollSize = {\n                width: scrollingElement.scrollWidth,\n                height: scrollingElement.scrollHeight,\n            };\n            const scrollTop = top - hostElementBounds.top + hostElement.scrollTop;\n            const scrollLeft = left - hostElementBounds.left + hostElement.scrollLeft;\n            const height = bottom - top;\n            const width = right - left;\n            layout.viewportSize = { width, height };\n            layout.viewportScroll = { top: scrollTop, left: scrollLeft };\n            layout.totalScrollSize = totalScrollSize;\n            layout.offsetWithinScroller = offsetWithinScroller;\n        }\n    }\n    /**\n     * Styles the host element so that its size reflects the\n     * total size of all items.\n     */\n    _sizeHostElement(size) {\n        // Some browsers seem to crap out if the host element gets larger than\n        // a certain size, so we clamp it here (this value based on ad hoc\n        // testing in Chrome / Safari / Firefox Mac)\n        const max = 8200000;\n        const h = size && size.width !== null ? Math.min(max, size.width) : 0;\n        const v = size && size.height !== null ? Math.min(max, size.height) : 0;\n        if (this._isScroller) {\n            this._getSizer().style.transform = `translate(${h}px, ${v}px)`;\n        }\n        else {\n            const style = this._hostElement.style;\n            style.minWidth = h ? `${h}px` : '100%';\n            style.minHeight = v ? `${v}px` : '100%';\n        }\n    }\n    /**\n     * Sets the top and left transform style of the children from the values in\n     * pos.\n     */\n    _positionChildren(pos) {\n        if (pos) {\n            pos.forEach(({ top, left, width, height, xOffset, yOffset }, index) => {\n                const child = this._children[index - this._first];\n                if (child) {\n                    child.style.position = 'absolute';\n                    child.style.boxSizing = 'border-box';\n                    child.style.transform = `translate(${left}px, ${top}px)`;\n                    if (width !== undefined) {\n                        child.style.width = width + 'px';\n                    }\n                    if (height !== undefined) {\n                        child.style.height = height + 'px';\n                    }\n                    child.style.left =\n                        xOffset === undefined ? null : xOffset + 'px';\n                    child.style.top =\n                        yOffset === undefined ? null : yOffset + 'px';\n                }\n            });\n        }\n    }\n    async _adjustRange(range) {\n        const { _first, _last, _firstVisible, _lastVisible } = this;\n        this._first = range.first;\n        this._last = range.last;\n        this._firstVisible = range.firstVisible;\n        this._lastVisible = range.lastVisible;\n        this._rangeChanged =\n            this._rangeChanged || this._first !== _first || this._last !== _last;\n        this._visibilityChanged =\n            this._visibilityChanged ||\n                this._firstVisible !== _firstVisible ||\n                this._lastVisible !== _lastVisible;\n    }\n    _correctScrollError() {\n        if (this._scrollError) {\n            const { scrollTop, scrollLeft } = this._scrollerController;\n            const { top, left } = this._scrollError;\n            this._scrollError = null;\n            this._scrollerController.correctScrollError({\n                top: scrollTop - top,\n                left: scrollLeft - left,\n            });\n        }\n    }\n    element(index) {\n        if (index === Infinity) {\n            index = this._items.length - 1;\n        }\n        return this._items?.[index] === undefined\n            ? undefined\n            : {\n                scrollIntoView: (options = {}) => this._scrollElementIntoView({ ...options, index }),\n            };\n    }\n    _scrollElementIntoView(options) {\n        if (options.index >= this._first && options.index <= this._last) {\n            this._children[options.index - this._first].scrollIntoView(options);\n        }\n        else {\n            options.index = Math.min(options.index, this._items.length - 1);\n            if (options.behavior === 'smooth') {\n                const coordinates = this._layout.getScrollIntoViewCoordinates(options);\n                const { behavior } = options;\n                this._updateScrollIntoViewCoordinates =\n                    this._scrollerController.managedScrollTo(Object.assign(coordinates, { behavior }), () => this._layout.getScrollIntoViewCoordinates(options), () => (this._scrollIntoViewTarget = null));\n                this._scrollIntoViewTarget = options;\n            }\n            else {\n                this._layout.pin = options;\n            }\n        }\n    }\n    /**\n     * If we are smoothly scrolling to an element and the target element\n     * is in the DOM, we update our target coordinates as needed\n     */\n    _checkScrollIntoViewTarget(pos) {\n        const { index } = this._scrollIntoViewTarget || {};\n        if (index && pos?.has(index)) {\n            this._updateScrollIntoViewCoordinates(this._layout.getScrollIntoViewCoordinates(this._scrollIntoViewTarget));\n        }\n    }\n    /**\n     * Emits a rangechange event with the current first, last, firstVisible, and\n     * lastVisible.\n     */\n    _notifyRange() {\n        this._hostElement.dispatchEvent(new RangeChangedEvent({ first: this._first, last: this._last }));\n    }\n    _notifyVisibility() {\n        this._hostElement.dispatchEvent(new VisibilityChangedEvent({\n            first: this._firstVisible,\n            last: this._lastVisible,\n        }));\n    }\n    get layoutComplete() {\n        // Lazily create promise\n        if (!this._layoutCompletePromise) {\n            this._layoutCompletePromise = new Promise((resolve, reject) => {\n                this._layoutCompleteResolver = resolve;\n                this._layoutCompleteRejecter = reject;\n            });\n        }\n        return this._layoutCompletePromise;\n    }\n    _rejectLayoutCompletePromise(reason) {\n        if (this._layoutCompleteRejecter !== null) {\n            this._layoutCompleteRejecter(reason);\n        }\n        this._resetLayoutCompleteState();\n    }\n    _scheduleLayoutComplete() {\n        // Don't do anything unless we have a pending promise\n        // And only request a frame if we haven't already done so\n        if (this._layoutCompletePromise && this._pendingLayoutComplete === null) {\n            // Wait one additional frame to be sure the layout is stable\n            this._pendingLayoutComplete = requestAnimationFrame(() => requestAnimationFrame(() => this._resolveLayoutCompletePromise()));\n        }\n    }\n    _resolveLayoutCompletePromise() {\n        if (this._layoutCompleteResolver !== null) {\n            this._layoutCompleteResolver();\n        }\n        this._resetLayoutCompleteState();\n    }\n    _resetLayoutCompleteState() {\n        this._layoutCompletePromise = null;\n        this._layoutCompleteResolver = null;\n        this._layoutCompleteRejecter = null;\n        this._pendingLayoutComplete = null;\n    }\n    /**\n     * Render and update the view at the next opportunity with the given\n     * hostElement size.\n     */\n    _hostElementSizeChanged() {\n        this._schedule(this._updateLayout);\n    }\n    // TODO (graynorton): Rethink how this works. Probably child loading is too specific\n    // to have dedicated support for; might want some more generic lifecycle hooks for\n    // layouts to use. Possibly handle measurement this way, too, or maybe that remains\n    // a first-class feature?\n    _childLoaded() { }\n    // This is the callback for the ResizeObserver that watches the\n    // virtualizer's children. We land here at the end of every virtualizer\n    // update cycle that results in changes to physical items, and we also\n    // end up here if one or more children change size independently of\n    // the virtualizer update cycle.\n    _childrenSizeChanged(changes) {\n        // Only measure if the layout requires it\n        if (this._layout?.measureChildren) {\n            for (const change of changes) {\n                this._toBeMeasured.set(change.target, change.contentRect);\n            }\n            this._measureChildren();\n        }\n        // If this is the end of an update cycle, we need to reset some\n        // internal state. This should be a harmless no-op if we're handling\n        // an out-of-cycle ResizeObserver callback, so we don't need to\n        // distinguish between the two cases.\n        this._scheduleLayoutComplete();\n        this._itemsChanged = false;\n        this._rangeChanged = false;\n    }\n}\nfunction getMargins(el) {\n    const style = window.getComputedStyle(el);\n    return {\n        marginTop: getMarginValue(style.marginTop),\n        marginRight: getMarginValue(style.marginRight),\n        marginBottom: getMarginValue(style.marginBottom),\n        marginLeft: getMarginValue(style.marginLeft),\n    };\n}\nfunction getMarginValue(value) {\n    const float = value ? parseFloat(value) : NaN;\n    return Number.isNaN(float) ? 0 : float;\n}\n// TODO (graynorton): Deal with iframes?\nfunction getParentElement(el) {\n    if (el.assignedSlot !== null) {\n        return el.assignedSlot;\n    }\n    if (el.parentElement !== null) {\n        return el.parentElement;\n    }\n    const parentNode = el.parentNode;\n    if (parentNode && parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        return parentNode.host || null;\n    }\n    return null;\n}\n///\nfunction getElementAncestors(el, includeSelf = false) {\n    const ancestors = [];\n    let parent = includeSelf ? el : getParentElement(el);\n    while (parent !== null) {\n        ancestors.push(parent);\n        parent = getParentElement(parent);\n    }\n    return ancestors;\n}\nfunction getClippingAncestors(el, includeSelf = false) {\n    let foundFixed = false;\n    return getElementAncestors(el, includeSelf).filter((a) => {\n        if (foundFixed) {\n            return false;\n        }\n        const style = getComputedStyle(a);\n        foundFixed = style.position === 'fixed';\n        return style.overflow !== 'visible';\n    });\n}\n//# sourceMappingURL=Virtualizer.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { html, noChange } from 'lit';\nimport { directive, PartType } from 'lit/directive.js';\nimport { AsyncDirective } from 'lit/async-directive.js';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { Virtualizer } from './Virtualizer.js';\nexport { virtualizerRef } from './Virtualizer.js';\nexport const defaultKeyFunction = (item) => item;\nexport const defaultRenderItem = (item, idx) => html `${idx}: ${JSON.stringify(item, null, 2)}`;\nclass VirtualizeDirective extends AsyncDirective {\n    constructor(part) {\n        super(part);\n        this._virtualizer = null;\n        this._first = 0;\n        this._last = -1;\n        this._renderItem = (item, idx) => defaultRenderItem(item, idx + this._first);\n        this._keyFunction = (item, idx) => defaultKeyFunction(item, idx + this._first);\n        this._items = [];\n        if (part.type !== PartType.CHILD) {\n            throw new Error('The virtualize directive can only be used in child expressions');\n        }\n    }\n    render(config) {\n        if (config) {\n            this._setFunctions(config);\n        }\n        const itemsToRender = [];\n        if (this._first >= 0 && this._last >= this._first) {\n            for (let i = this._first; i <= this._last; i++) {\n                itemsToRender.push(this._items[i]);\n            }\n        }\n        return repeat(itemsToRender, this._keyFunction, this._renderItem);\n    }\n    update(part, [config]) {\n        this._setFunctions(config);\n        const itemsChanged = this._items !== config.items;\n        this._items = config.items || [];\n        if (this._virtualizer) {\n            this._updateVirtualizerConfig(part, config);\n        }\n        else {\n            this._initialize(part, config);\n        }\n        return itemsChanged ? noChange : this.render();\n    }\n    async _updateVirtualizerConfig(part, config) {\n        const compatible = await this._virtualizer.updateLayoutConfig(config.layout || {});\n        if (!compatible) {\n            const hostElement = part.parentNode;\n            this._makeVirtualizer(hostElement, config);\n        }\n        this._virtualizer.items = this._items;\n    }\n    _setFunctions(config) {\n        const { renderItem, keyFunction } = config;\n        if (renderItem) {\n            this._renderItem = (item, idx) => renderItem(item, idx + this._first);\n        }\n        if (keyFunction) {\n            this._keyFunction = (item, idx) => keyFunction(item, idx + this._first);\n        }\n    }\n    _makeVirtualizer(hostElement, config) {\n        if (this._virtualizer) {\n            this._virtualizer.disconnected();\n        }\n        const { layout, scroller, items } = config;\n        this._virtualizer = new Virtualizer({ hostElement, layout, scroller });\n        this._virtualizer.items = items;\n        this._virtualizer.connected();\n    }\n    _initialize(part, config) {\n        const hostElement = part.parentNode;\n        if (hostElement && hostElement.nodeType === 1) {\n            hostElement.addEventListener('rangeChanged', (e) => {\n                this._first = e.first;\n                this._last = e.last;\n                this.setValue(this.render());\n            });\n            this._makeVirtualizer(hostElement, config);\n        }\n    }\n    disconnected() {\n        this._virtualizer?.disconnected();\n    }\n    reconnected() {\n        this._virtualizer?.connected();\n    }\n}\nexport const virtualize = directive(VirtualizeDirective);\n//# sourceMappingURL=virtualize.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { __decorate } from \"tslib\";\nimport { html, LitElement } from 'lit';\nimport { property } from 'lit/decorators/property.js';\nimport { virtualize, virtualizerRef, defaultRenderItem, defaultKeyFunction, } from './virtualize.js';\nexport class LitVirtualizer extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.items = [];\n        this.renderItem = defaultRenderItem;\n        this.keyFunction = defaultKeyFunction;\n        this.layout = {};\n        this.scroller = false;\n    }\n    createRenderRoot() {\n        return this;\n    }\n    render() {\n        const { items, renderItem, keyFunction, layout, scroller } = this;\n        return html `${virtualize({\n            items,\n            renderItem,\n            keyFunction,\n            layout,\n            scroller,\n        })}`;\n    }\n    element(index) {\n        return this[virtualizerRef]?.element(index);\n    }\n    get layoutComplete() {\n        return this[virtualizerRef]?.layoutComplete;\n    }\n    /**\n     * This scrollToIndex() shim is here to provide backwards compatibility with other 0.x versions of\n     * lit-virtualizer. It is deprecated and will likely be removed in the 1.0.0 release.\n     */\n    scrollToIndex(index, position = 'start') {\n        this.element(index)?.scrollIntoView({ block: position });\n    }\n}\n__decorate([\n    property({ attribute: false })\n], LitVirtualizer.prototype, \"items\", void 0);\n__decorate([\n    property()\n], LitVirtualizer.prototype, \"renderItem\", void 0);\n__decorate([\n    property()\n], LitVirtualizer.prototype, \"keyFunction\", void 0);\n__decorate([\n    property({ attribute: false })\n], LitVirtualizer.prototype, \"layout\", void 0);\n__decorate([\n    property({ reflect: true, type: Boolean })\n], LitVirtualizer.prototype, \"scroller\", void 0);\n//# sourceMappingURL=LitVirtualizer.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { LitVirtualizer } from './LitVirtualizer.js';\nexport { LitVirtualizer };\nexport { RangeChangedEvent, VisibilityChangedEvent } from './events.js';\n/**\n * Import this module to declare the lit-virtualizer custom element.\n */\ncustomElements.define('lit-virtualizer', LitVirtualizer);\n//# sourceMappingURL=lit-virtualizer.js.map","var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n// libs/widgets/src/lib/select-token/select-token.element.ts\nimport { html as html6, LitElement as LitElement6 } from \"lit\";\nimport { customElement as customElement6, property as property3 } from \"lit/decorators.js\";\nimport { ContextProvider } from \"@lit/context\";\nimport \"@one-inch-community/ui-components/card\";\n\n// libs/widgets/src/lib/select-token/select-token.style.ts\nimport { css } from \"lit\";\nvar selectTokenStyle = css`\n  \n  :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      width: 100%;\n      position: relative;\n  }\n  \n`;\n\n// libs/widgets/src/lib/select-token/context.ts\nimport { createContext } from \"@lit/context\";\nvar selectTokenContext = createContext(Symbol(\"select token context\"));\n\n// libs/widgets/src/lib/select-token/select-token.context.ts\nimport { TokenController } from \"@one-inch-community/sdk\";\nimport { ReplaySubject, Subject, BehaviorSubject, combineLatest, switchMap, mergeMap } from \"rxjs\";\nvar SelectTokenContext = class {\n  constructor() {\n    this.chainId$ = new ReplaySubject(1);\n    this.connectedWalletAddress$ = new BehaviorSubject(null);\n    this.changeFavoriteTokenState$ = new Subject();\n    this.favoriteTokens$ = this.chainId$.pipe(\n      mergeMap((chainId) => TokenController.liveQuery(() => TokenController.getAllFavoriteTokenAddresses(chainId)))\n    );\n    this.tokenAddressList$ = combineLatest([\n      this.chainId$,\n      this.connectedWalletAddress$\n    ]).pipe(\n      switchMap(([chainId, address]) => TokenController.getSortedForViewTokenAddresses(chainId, address ?? void 0))\n    );\n  }\n  setChainId(chainId) {\n    this.chainId$.next(chainId);\n  }\n  setConnectedWalletAddress(address) {\n    this.connectedWalletAddress$.next(address ?? null);\n  }\n  async setFavoriteTokenState(chainId, address, state3) {\n    await TokenController.setFavoriteState(chainId, address, state3);\n    this.changeFavoriteTokenState$.next([chainId, address]);\n  }\n};\n\n// libs/widgets/src/lib/select-token/elements/search-token-input/search-token-input.element.ts\nimport { html, LitElement } from \"lit\";\nimport { customElement, state } from \"lit/decorators.js\";\nimport { classMap } from \"lit/directives/class-map.js\";\n\n// libs/widgets/src/lib/select-token/elements/search-token-input/search-token-input.style.ts\nimport { css as css2 } from \"lit\";\nvar searchTokenInputStyle = css2`\n\n    .search-token-input-container {\n        display: flex;\n        background-color: var(--color-background-bg-secondary);\n        height: 48px;\n        border-radius: 12px;\n        color: var(--color-content-content-tertiary);\n        align-items: center;\n        padding-left: 12px;\n        padding-right: 12px;\n        box-sizing: border-box;\n        gap: 8px;\n        margin-top: 5px;\n        transition: box-shadow .2s;\n    }\n    \n    .search-token-input {\n        border: none;\n        background-color: transparent;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        color: var(--color-content-content-primary);\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 24px;\n    }\n    \n    .search-token-input::placeholder {\n        color: var(--color-content-content-secondary);\n    }\n    \n    @media (hover: hover) {\n        .search-token-input-container:hover {\n            box-shadow: 0 0 0 1px var(--primary);\n        }\n    }\n    \n    .search-token-input-container__focused {\n        box-shadow: 0 0 0 1px var(--primary);\n    }\n\n`;\n\n// libs/widgets/src/lib/select-token/elements/search-token-input/search-token-input.element.ts\nimport \"@one-inch-community/ui-components/icon\";\nimport { sceneContext } from \"@one-inch-community/ui-components/scene\";\nimport { consume } from \"@lit/context\";\nvar SearchTokenInputElement = class extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isFocused = false;\n  }\n  render() {\n    const classes = {\n      \"search-token-input-container\": true,\n      \"search-token-input-container__focused\": this.isFocused\n    };\n    return html`\n      <div class=\"${classMap(classes)}\">\n        <inch-icon icon=\"search24\"></inch-icon>\n        <input\n          id=\"search\"\n          autofocus\n          autocomplete=\"off\"\n          @focus=\"${() => this.isFocused = true}\"\n          @blur=\"${() => this.isFocused = false}\"\n          placeholder=\"Search token by name or address\"\n          class=\"search-token-input\"\n        >\n      </div>\n    `;\n  }\n  async firstUpdated() {\n    const input = this.renderRoot.querySelector(\"#search\");\n    if (!input)\n      return;\n    if (this.sceneContext && this.sceneContext.animationInProgress) {\n      await this.sceneContext.animationInEnd;\n    }\n  }\n};\nSearchTokenInputElement.tagName = \"inch-search-token-input\";\nSearchTokenInputElement.styles = searchTokenInputStyle;\n__decorateClass([\n  state()\n], SearchTokenInputElement.prototype, \"isFocused\", 2);\n__decorateClass([\n  consume({ context: sceneContext })\n], SearchTokenInputElement.prototype, \"sceneContext\", 2);\nSearchTokenInputElement = __decorateClass([\n  customElement(SearchTokenInputElement.tagName)\n], SearchTokenInputElement);\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.element.ts\nimport { html as html4, LitElement as LitElement4 } from \"lit\";\nimport { customElement as customElement4, state as state2 } from \"lit/decorators.js\";\nimport { map as litMap } from \"lit/directives/map.js\";\nimport { cache } from \"lit/directives/cache.js\";\nimport { classMap as classMap4 } from \"lit/directives/class-map.js\";\nimport { styleMap } from \"lit/directives/style-map.js\";\nimport \"@lit-labs/virtualizer\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nimport { html as html3, LitElement as LitElement3 } from \"lit\";\nimport { customElement as customElement3, property as property2 } from \"lit/decorators.js\";\nimport { classMap as classMap3 } from \"lit/directives/class-map.js\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.style.ts\nimport { mobileMediaCSS } from \"@one-inch-community/lit\";\nimport { css as css3 } from \"lit\";\nvar tokenListItemStyle = css3`\n    \n    :host {\n        height: 72px;\n        width: 100%;\n        outline: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n    }\n    \n    .item-container {\n        padding: 12px 16px;\n        display: flex;\n        gap: 8px;\n        align-items: center;\n        cursor: pointer;\n        border-radius: 16px;\n        transition: background-color .2s;\n    }\n\n    .name-and-balance {\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n        max-width: 50%;\n    }\n\n    .name-and-balance .name {\n        color: var(--color-content-content-primary);\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 24px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n\n    .name-and-balance .balance {\n        color: var(--color-content-content-secondary);\n        font-size: 14px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 20px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n    }\n    \n    .usd-balance {\n        color: var(--color-content-content-primary);\n        text-align: right;\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 24px;\n        white-space: nowrap\n    }\n    \n    .usd-balance-and-favorite-start {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n        margin-left: auto;\n    }\n    \n    @media (hover: hover) {\n        .item-container:hover {\n            background-color: var(--color-background-bg-secondary);\n        }\n\n        .item-container:not(.is-favorite-token) .usd-balance {\n            transform: translateX(24px);\n            transition: transform .2s;\n        }\n\n        .item-container:not(.is-favorite-token) .is-favorite-start {\n            transform: scale(0);\n            transition: transform .2s;\n        }\n\n        .item-container:hover .is-favorite-start {\n            transform: scale(1);\n        }\n\n        .item-container:hover .usd-balance {\n            transform: translateX(0);\n        }\n    }\n    \n    ${mobileMediaCSS(css3`\n        .item-container {\n            padding: 8px 0;\n            gap: 4px;\n        }\n    `)}\n\n    .item-container:active {\n        background-color: var(--color-background-bg-secondary);\n    }\n\n`;\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nimport { formatUnits, isAddressEqual } from \"viem\";\nimport { Task } from \"@lit/task\";\nimport { formatNumber, getBlockEmitter, TokenController as TokenController2 } from \"@one-inch-community/sdk\";\nimport \"@one-inch-community/widgets/token-icon\";\nimport \"@one-inch-community/ui-components/icon\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-stub-item/token-list-stub-tem.element.ts\nimport { html as html2, LitElement as LitElement2 } from \"lit\";\nimport { customElement as customElement2, property } from \"lit/decorators.js\";\nimport { classMap as classMap2 } from \"lit/directives/class-map.js\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-stub-item/token-list-stub-item.style.ts\nimport { mobileMediaCSS as mobileMediaCSS2 } from \"@one-inch-community/lit\";\nimport { css as css4 } from \"lit\";\nvar tokenListStubItemStyle = css4`\n    \n    :host {\n        height: 72px;\n        width: 100%;\n    }\n    \n    .item-container {\n        padding: 12px 16px;\n        display: flex;\n        gap: 8px;\n        align-items: center;\n        cursor: pointer;\n        border-radius: 16px;\n        transition: background-color .2s;\n    }\n\n    .name-and-balance {\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n        width: 100%;\n    }\n\n    .stub-loader {\n        will-change: filter;\n        animation: stub-loader-animation 3s ease-in-out infinite;\n    }\n\n    .stub-token-icon {\n        min-width: 40px;\n        min-height: 40px;\n        border-radius: 50%;\n        background-color: var(--color-background-bg-secondary);\n    }\n\n    .name-stub {\n        background-color: var(--color-background-bg-secondary);\n        height: 24px;\n        width: 40%;\n        border-radius: 8px;\n    }\n\n    .balance-stub {\n        background-color: var(--color-background-bg-secondary);\n        height: 20px;\n        width: 30%;\n        border-radius: 8px;\n    }\n\n    @keyframes stub-loader-animation {\n        0%, 100% {\n            filter: opacity(1);\n        }\n        50% {\n            filter: opacity(0.5);\n        }\n    }\n\n    ${mobileMediaCSS2(css4`\n        .item-container {\n            padding: 8px 0;\n            gap: 4px;\n        }\n    `)}\n\n`;\n\n// libs/widgets/src/lib/select-token/elements/token-list-stub-item/token-list-stub-tem.element.ts\nvar TokenListStubTemElement = class extends LitElement2 {\n  constructor() {\n    super(...arguments);\n    this.notShowLoader = false;\n  }\n  render() {\n    const classes = {\n      \"item-container\": true,\n      \"stub-loader\": !this.notShowLoader\n    };\n    return html2`\n      <div class=\"${classMap2(classes)}\">\n        <div class=\"stub-token-icon\"></div>\n        <div class=\"name-and-balance\">\n          <span class=\"name-stub\"></span>\n          <span class=\"balance-stub\"></span>\n        </div>\n      </div>\n    `;\n  }\n};\nTokenListStubTemElement.tagName = \"inch-token-list-stub-item\";\nTokenListStubTemElement.styles = tokenListStubItemStyle;\n__decorateClass([\n  property({ type: Boolean, attribute: true })\n], TokenListStubTemElement.prototype, \"notShowLoader\", 2);\nTokenListStubTemElement = __decorateClass([\n  customElement2(TokenListStubTemElement.tagName)\n], TokenListStubTemElement);\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nimport { asyncTimeout } from \"@one-inch-community/ui-components/async\";\nimport { subscribe } from \"@one-inch-community/lit\";\nimport { filter, merge, switchMap as switchMap2 } from \"rxjs\";\nimport { consume as consume2 } from \"@lit/context\";\n\n// libs/widgets/src/lib/select-token/events.ts\nimport { dispatchEvent } from \"@one-inch-community/lit\";\nfunction emitSelectTokenEvent(ctx, value, event) {\n  dispatchEvent(ctx, \"selectToken\", value, event);\n}\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nvar TokenListItemElement = class extends LitElement3 {\n  constructor() {\n    super(...arguments);\n    this.isDestroy = false;\n    this.preRenderTemplate = null;\n    this.isFavorite = false;\n    this.task = new Task(\n      this,\n      async ([chainId, tokenAddress, walletAddress, fastUpdate]) => {\n        if (fastUpdate) {\n          const result = this.task.value;\n          if (result)\n            return result;\n        }\n        if (!chainId || !tokenAddress)\n          return [];\n        await asyncTimeout(200);\n        if (this.isDestroy)\n          throw new Error(\"\");\n        const token = await TokenController2.getToken(chainId, tokenAddress);\n        let balance = null;\n        let balanceUsd = null;\n        if (walletAddress) {\n          balance = await TokenController2.getTokenBalance(chainId, tokenAddress, walletAddress);\n          const tokenPrice = await TokenController2.getTokenUSDPrice(chainId, tokenAddress);\n          const balanceFormatted = formatUnits(BigInt(balance.amount), token.decimals);\n          balanceUsd = Number(balanceFormatted) * Number(tokenPrice);\n        }\n        return [token, balance, balanceUsd];\n      },\n      () => [this.chainId, this.tokenAddress, this.walletAddress, false]\n    );\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.isDestroy = true;\n  }\n  firstUpdated() {\n    if (!this.chainId)\n      throw new Error(\"\");\n    subscribe(this, merge(\n      getBlockEmitter(this.chainId),\n      this.getTokenUpdateEmitter()\n    ).pipe(\n      switchMap2(() => this.task.run([this.chainId, this.tokenAddress, this.walletAddress, false]))\n    ), { requestUpdate: false });\n  }\n  render() {\n    return html3`\n      ${this.task.render({\n      complete: ([token, balance, balanceUsd]) => this.getTokenView(token, balance, balanceUsd),\n      pending: () => {\n        if (this.preRenderTemplate)\n          return this.preRenderTemplate;\n        return this.getStub();\n      },\n      error: () => {\n        if (this.preRenderTemplate)\n          return this.preRenderTemplate;\n        return this.getStub();\n      }\n    })}\n    `;\n  }\n  getTokenView(token, balance, balanceUsd) {\n    if (!token) {\n      return html3``;\n    }\n    this.isFavorite = token.isFavorite ?? false;\n    let balanceFormat = \"0\";\n    if (balance) {\n      balanceFormat = formatNumber(formatUnits(BigInt(balance.amount), token.decimals), 6);\n    }\n    let balanceUsdFormat = \"$0\";\n    if (balanceUsd) {\n      balanceUsdFormat = \"$\" + formatNumber(balanceUsd.toString(), 2);\n    }\n    let startColor = { border: \"var(--color-border-border-secondary)\", body: \"none\" };\n    if (this.isFavorite) {\n      startColor = { border: \"var(--color-core-orange-warning)\", body: \"var(--color-core-orange-warning)\" };\n    }\n    const classes = {\n      \"item-container\": true,\n      \"is-favorite-token\": token.isFavorite\n    };\n    this.preRenderTemplate = html3`\n      <div class=\"${classMap3(classes)}\" @click=\"${(event) => emitSelectTokenEvent(this, token, event)}\">\n        <inch-token-icon symbol=\"${token.symbol}\" address=\"${token.address}\" chainId=\"${token.chainId}\"\n                         size=\"40\"></inch-token-icon>\n        <div class=\"name-and-balance\">\n          <span class=\"name\">${token.name}</span>\n          <span class=\"balance\">${balanceFormat} ${token.symbol}</span>\n        </div>\n\n        <div class=\"usd-balance-and-favorite-start\">\n          <span class=\"usd-balance\">${balanceUsdFormat}</span>\n          <inch-icon class=\"is-favorite-start\" @click=\"${(event) => this.onMarkFavoriteToken(event, token)}\"\n                     icon=\"startDefault16\" .props=\"${startColor}\"></inch-icon>\n        </div>\n      </div>\n    `;\n    return this.preRenderTemplate;\n  }\n  async onMarkFavoriteToken(event, token) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isFavorite = !token.isFavorite;\n    await this.task.run([this.chainId, this.tokenAddress, this.walletAddress, true]);\n    await this.context?.setFavoriteTokenState(token.chainId, token.address, !token.isFavorite);\n  }\n  getTokenUpdateEmitter() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.changeFavoriteTokenState$.pipe(\n      filter(([chainId, address]) => {\n        const token = this.task?.value?.[0] ?? null;\n        return token && token.chainId === chainId && isAddressEqual(token.address, address);\n      })\n    );\n  }\n  getStub() {\n    return html3`\n      <inch-token-list-stub-item></inch-token-list-stub-item>\n    `;\n  }\n};\nTokenListItemElement.tagName = \"inch-token-list-item\";\nTokenListItemElement.styles = tokenListItemStyle;\n__decorateClass([\n  property2({ type: String, attribute: true })\n], TokenListItemElement.prototype, \"tokenAddress\", 2);\n__decorateClass([\n  property2({ type: String, attribute: true })\n], TokenListItemElement.prototype, \"walletAddress\", 2);\n__decorateClass([\n  property2({ type: Number, attribute: true })\n], TokenListItemElement.prototype, \"chainId\", 2);\n__decorateClass([\n  consume2({ context: selectTokenContext })\n], TokenListItemElement.prototype, \"context\", 2);\nTokenListItemElement = __decorateClass([\n  customElement3(TokenListItemElement.tagName)\n], TokenListItemElement);\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.element.ts\nimport \"@one-inch-community/ui-components/icon\";\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.style.ts\nimport { mobileMediaCSS as mobileMediaCSS3 } from \"@one-inch-community/lit\";\nimport { css as css5 } from \"lit\";\nvar tokenListStyle = css5`\n\n    :host {\n        height: 50vh;\n        width: 100%;\n        position: relative;\n    }\n    \n    ${mobileMediaCSS3(css5`\n        :host {\n            height: 100%;\n            width: 100%;\n            position: relative;\n        }\n    `)}\n    \n    .list-container {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        height: 100%;\n    }\n\n    .loader-container {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        height: 100%;\n    }\n\n    .loader-view-container {\n        padding-right: 7px;\n    }\n\n\n`;\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.element.ts\nimport { consume as consume3 } from \"@lit/context\";\nimport { combineLatest as combineLatest2, debounceTime, defer, map, startWith } from \"rxjs\";\nimport { observe, resizeObserver } from \"@one-inch-community/lit\";\nimport { scrollbarStyle } from \"@one-inch-community/ui-components/theme\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\nimport { sceneContext as sceneContext2 } from \"@one-inch-community/ui-components/scene\";\nvar TokenListElement = class extends LitElement4 {\n  constructor() {\n    super(...arguments);\n    this.transitionReady = false;\n    this.view$ = defer(() => combineLatest2([\n      this.getTokenAddressList(),\n      this.getChainId(),\n      this.getConnectedWalletAddress(),\n      resizeObserver(this)\n    ])).pipe(\n      debounceTime(0),\n      map(([tokenAddresses, chainId, walletAddress]) => this.getTokenListView(tokenAddresses, chainId, walletAddress ?? void 0)),\n      startWith(this.getLoaderView())\n    );\n  }\n  render() {\n    if (!this.transitionReady)\n      return this.getLoaderView();\n    return html4`\n      <div class=\"list-container\">\n        ${observe(this.view$)}\n      </div>`;\n  }\n  async firstUpdated() {\n    if (this.sceneContext && this.sceneContext.animationInProgress) {\n      await this.sceneContext.animationInEnd;\n    }\n    this.transitionReady = true;\n  }\n  getTokenAddressList() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.tokenAddressList$;\n  }\n  getChainId() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.chainId$;\n  }\n  getConnectedWalletAddress() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.connectedWalletAddress$;\n  }\n  getLoaderView() {\n    const classes = {\n      \"loader-view-container\": true\n    };\n    return html4`\n      <div class=\"${classMap4(classes)}\">\n        ${litMap(Array.from(Array(30).keys()), () => html4`<inch-token-list-stub-item></inch-token-list-stub-item>`)}\n      </div>\n    `;\n  }\n  getTokenListView(tokenAddresses, chainId, walletAddress) {\n    const offsetHeight = this.offsetHeight;\n    const styles = {\n      overflow: \"auto\",\n      display: \"block\",\n      position: \"relative\",\n      contain: \"size layout\",\n      minHeight: \"150px\",\n      height: `${offsetHeight}px`\n    };\n    return html4`\n      ${cache(html4`\n        <lit-virtualizer\n          scroller\n          style=\"${styleMap(styles)}\"\n          .items=${tokenAddresses}\n          .keyFunction=\"${(address) => [chainId, walletAddress, address].join(\":\")}\"\n          .renderItem=${(address) => html4`\n            <inch-token-list-item\n              tokenAddress=\"${address}\"\n              walletAddress=\"${ifDefined(walletAddress)}\"\n              chainId=\"${chainId}\"\n            ></inch-token-list-item>`}\n        ></lit-virtualizer>\n      `)}\n    `;\n  }\n};\nTokenListElement.tagName = \"inch-token-list\";\nTokenListElement.styles = [\n  tokenListStyle,\n  scrollbarStyle\n];\n__decorateClass([\n  consume3({ context: selectTokenContext })\n], TokenListElement.prototype, \"context\", 2);\n__decorateClass([\n  consume3({ context: sceneContext2 })\n], TokenListElement.prototype, \"sceneContext\", 2);\n__decorateClass([\n  state2()\n], TokenListElement.prototype, \"transitionReady\", 2);\nTokenListElement = __decorateClass([\n  customElement4(TokenListElement.tagName)\n], TokenListElement);\n\n// libs/widgets/src/lib/select-token/elements/favorite-tokens/favorite-tokens.element.ts\nimport { html as html5, LitElement as LitElement5 } from \"lit\";\nimport { customElement as customElement5 } from \"lit/decorators.js\";\nimport { when } from \"lit/directives/when.js\";\nimport { consume as consume4 } from \"@lit/context\";\nimport \"@one-inch-community/ui-components/button\";\nimport \"@one-inch-community/widgets/token-icon\";\nimport \"@one-inch-community/ui-components/icon\";\n\n// libs/widgets/src/lib/select-token/elements/favorite-tokens/favorite-tokens.styles.ts\nimport { css as css6 } from \"lit\";\nvar favoriteTokensStyles = css6`\n    :host {\n        display: flex;\n        width: 100%;\n        height: 60px;\n    }\n    \n    :host(.empty) {\n        height: 16px;\n        padding-bottom: 0;\n        margin-bottom: 0;\n    }\n    \n    :host(.transition-host) {\n        transition: height .2s, padding-bottom .2s, margin-bottom .2s;\n    }\n    \n    :host(.remove-favorite-token-show) .remove-favorite-token {\n        transform: scale(1) translate(0, 0);\n    }\n    \n    .favorite-container-scroll {\n        overflow-y: hidden;\n        overflow-x: auto;\n        position: relative;\n        width: 100%;\n        padding-top: 16px;\n        padding-bottom: 8px;\n        margin-bottom: 8px;\n        height: 36px;\n    }\n    \n    .favorite-container {\n        display: flex;\n        gap: 12px;\n        height: 36px;\n        position: absolute;\n    }\n\n    ::-webkit-scrollbar {\n        height: 2px;\n    }\n\n    .favorite-container-scroll::-webkit-scrollbar-thumb {\n        transition: background-color .2s;\n        background: var(--color-background-bg-primary);\n    }\n    \n    .favorite-token-item-container {\n        position: relative;\n    }\n    \n    .remove-favorite-token {\n        position: absolute;\n        top: -8px;\n        right: -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background-color: var(--color-background-bg-secondary);\n        z-index: 9;\n        transition: transform .2s;\n        transform: scale(0) translate(-16px, 16px);\n        cursor: pointer;\n        color: var(--color-content-content-primary);\n    }\n    \n    @media (hover: hover) {\n        .favorite-container-scroll:hover::-webkit-scrollbar-thumb {\n            background: var(--primary);\n        }\n        .favorite-token-item-container:hover .remove-favorite-token {\n            transform: scale(1) translate(0, 0);\n        }\n        .remove-favorite-token:hover {\n            background-color: var(--secondary-hover);\n        }\n        .edit-favorite-token-list {\n            display: none;\n        }\n    }\n    \n    \n\n`;\n\n// libs/widgets/src/lib/select-token/elements/favorite-tokens/favorite-tokens.element.ts\nimport { BehaviorSubject as BehaviorSubject2, combineLatest as combineLatest3, defer as defer2, map as map2, shareReplay, startWith as startWith2, switchMap as switchMap3, tap } from \"rxjs\";\nimport { observe as observe2, animationMap, subscribe as subscribe2 } from \"@one-inch-community/lit\";\nimport { TokenController as TokenController3 } from \"@one-inch-community/sdk\";\nimport { scrollbarStyle as scrollbarStyle2 } from \"@one-inch-community/ui-components/theme\";\nvar FavoriteTokensElement = class extends LitElement5 {\n  constructor() {\n    super(...arguments);\n    this.editAllMode$ = new BehaviorSubject2(false);\n    this.favoriteTokensView$ = combineLatest3([\n      defer2(() => this.getFavoriteTokens()),\n      defer2(() => this.getChainId())\n    ]).pipe(\n      switchMap3(([tokens, chainId]) => TokenController3.getTokenList(chainId, tokens)),\n      map2((tokens) => tokens.sort((token1, token2) => token2.priority - token1.priority)),\n      startWith2([]),\n      tap((tokens) => {\n        if (tokens.length && this.classList.contains(\"empty\")) {\n          this.classList.remove(\"empty\");\n        }\n        if (!tokens.length && !this.classList.contains(\"empty\")) {\n          this.classList.add(\"empty\");\n        }\n      }),\n      tap(() => {\n        if (!this.classList.contains(\"transition-host\")) {\n          setTimeout(() => {\n            this.classList.add(\"transition-host\");\n          }, 100);\n        }\n      }),\n      map2((tokens) => {\n        if (tokens.length) {\n          tokens.push(null);\n        }\n        return html5`\n        <div class=\"favorite-container-scroll\">\n          <div class=\"favorite-container\">\n            ${html5`${animationMap(\n          tokens,\n          (token) => token !== null ? \"t\" + token.address : \"edit\",\n          itemAnimation,\n          (token) => when(\n            token,\n            (token2) => html5`\n                <div class=\"favorite-token-item-container\">\n                  <div class=\"remove-favorite-token\" @click=\"${(event) => this.onRemoveFavoriteToken(token2, event)}\">\n                    <inch-icon icon=\"cross8\"></inch-icon>\n                  </div>\n                  <inch-button size=\"m\" type=\"secondary\" class=\"favorite-token-item\" @click=\"${(event) => emitSelectTokenEvent(this, token2, event)}\">\n                    <inch-token-icon symbol=\"${token2.symbol}\" address=\"${token2.address}\"\n                                     chainId=\"${token2.chainId}\"></inch-token-icon>\n                    <span>${token2.symbol}</span>\n                  </inch-button>\n                </div>\n              `,\n            () => html5`\n                <inch-button size=\"l\" type=\"secondary\" class=\"favorite-token-item edit-favorite-token-list\"\n                             @click=\"${() => this.editAllMode$.next(!this.editAllMode$.value)}\">\n                  <inch-icon icon=\"edit24\"></inch-icon>\n                </inch-button>\n              `\n          )\n        )}`}\n          </div>\n        </div>\n      `;\n      }),\n      shareReplay({ bufferSize: 1, refCount: true })\n    );\n  }\n  firstUpdated() {\n    subscribe2(this, this.editAllMode$.pipe(\n      tap((state3) => {\n        state3 ? this.classList.add(\"remove-favorite-token-show\") : this.classList.remove(\"remove-favorite-token-show\");\n      })\n    ), { requestUpdate: false });\n  }\n  render() {\n    return html5`${observe2(this.favoriteTokensView$)}`;\n  }\n  getFavoriteTokens() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.favoriteTokens$;\n  }\n  getChainId() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.chainId$;\n  }\n  async onRemoveFavoriteToken(token, event) {\n    event.stopPropagation();\n    event.preventDefault();\n    await this.context?.setFavoriteTokenState(token.chainId, token.address, false);\n  }\n};\nFavoriteTokensElement.tagName = \"inch-favorite-tokens\";\nFavoriteTokensElement.styles = [\n  favoriteTokensStyles,\n  scrollbarStyle2\n];\n__decorateClass([\n  consume4({ context: selectTokenContext })\n], FavoriteTokensElement.prototype, \"context\", 2);\nFavoriteTokensElement = __decorateClass([\n  customElement5(FavoriteTokensElement.tagName)\n], FavoriteTokensElement);\nvar itemAnimation = {\n  deleteElement: async (element) => {\n    element.style.overflow = \"hidden\";\n    await element.animate([\n      { flexBasis: `${element.offsetWidth}px`, transform: \"scale(1) translateX(0)\" },\n      { flexBasis: \"0\", transform: \"scale(0) translateX(-20%)\" }\n    ], {\n      duration: element.id === \"edit\" ? 50 : 150\n    }).finished;\n    element.style.overflow = \"\";\n  },\n  addedElement: async (element) => {\n    element.style.overflow = \"hidden\";\n    element.style.transform = \"scale(0) translateX(-20%)\";\n    element.style.position = \"absolute\";\n    element.style.top = \"-9999\";\n    element.style.left = \"-9999\";\n    document.body.appendChild(element);\n    await new Promise((resolve) => requestAnimationFrame(resolve));\n    const width = element.offsetWidth;\n    element.remove();\n    element.style.position = \"\";\n    element.style.top = \"\";\n    element.style.left = \"\";\n    return async (element2) => {\n      await element2.animate([\n        { flexBasis: \"0\", transform: \"scale(0) translateX(-20%)\" },\n        { flexBasis: `${width}px`, transform: \"scale(1) translateX(0)\" }\n      ], {\n        duration: 150\n      }).finished;\n      element2.style.transform = \"\";\n      element2.style.overflow = \"\";\n    };\n  }\n};\n\n// libs/widgets/src/lib/select-token/select-token.element.ts\nimport { isAddressEqual as isAddressEqual2 } from \"viem\";\nfunction hasChangedAddress(value, oldValue) {\n  if (!oldValue)\n    return true;\n  return !isAddressEqual2(value, oldValue);\n}\nvar SelectTokenElement = class extends LitElement6 {\n  constructor() {\n    super(...arguments);\n    this.context = new ContextProvider(this, { context: selectTokenContext });\n  }\n  render() {\n    this.initContext();\n    return html6`\n      <inch-card-header backButton headerText=\"Select token\"></inch-card-header>\n      <inch-search-token-input></inch-search-token-input>\n      <inch-favorite-tokens></inch-favorite-tokens>\n      <inch-token-list></inch-token-list>\n    `;\n  }\n  updated(changedProperties) {\n    let isDirty = false;\n    const context = this.context.value;\n    if (changedProperties.has(\"chainId\") && this.chainId) {\n      context.setChainId(this.chainId);\n      isDirty = true;\n    }\n    if (changedProperties.has(\"connectedWalletAddress\")) {\n      context.setConnectedWalletAddress(this.connectedWalletAddress);\n      isDirty = true;\n    }\n    if (isDirty) {\n      this.requestUpdate();\n    }\n  }\n  initContext() {\n    if (this.context.value)\n      return;\n    const { chainId, connectedWalletAddress } = this;\n    if (!chainId)\n      throw new Error(\"\");\n    const context = new SelectTokenContext();\n    context.setChainId(chainId);\n    context.setConnectedWalletAddress(connectedWalletAddress);\n    this.context.setValue(context);\n  }\n};\nSelectTokenElement.tagName = \"inch-select-token\";\nSelectTokenElement.styles = selectTokenStyle;\n__decorateClass([\n  property3({ type: Number })\n], SelectTokenElement.prototype, \"chainId\", 2);\n__decorateClass([\n  property3({ type: String, hasChanged: hasChangedAddress })\n], SelectTokenElement.prototype, \"connectedWalletAddress\", 2);\nSelectTokenElement = __decorateClass([\n  customElement6(SelectTokenElement.tagName)\n], SelectTokenElement);\nexport {\n  SelectTokenElement\n};\n//# sourceMappingURL=index.esm.js.map\n"],"file":"assets/index.esm-DEXPjI9S.js"}