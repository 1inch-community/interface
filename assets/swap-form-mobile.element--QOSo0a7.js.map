{"version":3,"mappings":"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","names":["animationFrameProvider","callback","request","cancel","delegate","handle","timestamp","Subscription","args","_i","__spreadArray","__read","AnimationFrameAction","_super","__extends","scheduler","work","_this","id","delay","_a","actions","AsyncAction","AnimationFrameScheduler","action","flushId","error","AsyncScheduler","animationFrameScheduler","unicornTouchUpdate","swapFormContainerRef","unicornLoaderRef","lastPosition","full","resetInProgress","audio","AudionController","max","initialResistance","resistanceThreshold","resistance","root","target","loader","set","position","adjustedPosition","vibrate","loaderPosition","appendStyle","reset","_lastPosition","defer","targetEl","fromEvent","filter","switchMap","startEvent","startPoint","map","event","tap","takeUntil","subscribeOn","e","firstValueFrom","__decorateClass","CacheActivePromise","__vitePreload","SwapFormMobileElement","LitElement","OverlayMobileController","createRef","subscribe","getThemeChange","brandColor","distinctUntilChanged","color","BrandColors","classes","html","ref","classMap","swapSnapshot","swapFormStyle","SceneController","consume","SwapContextToken","ApplicationContextToken","state","customElement"],"ignoreList":[0,1,2,3],"sources":["../../../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/animationFrameProvider.js","../../../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/AnimationFrameAction.js","../../../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/AnimationFrameScheduler.js","../../../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/animationFrame.js","../../../../apps/dapp/src/app/elements/swap-form/unicorn-updater.ts","../../../../apps/dapp/src/app/elements/swap-form/swap-form-mobile.element.ts"],"sourcesContent":["import { __read, __spreadArray } from \"tslib\";\nimport { Subscription } from '../Subscription';\nexport var animationFrameProvider = {\n    schedule: function (callback) {\n        var request = requestAnimationFrame;\n        var cancel = cancelAnimationFrame;\n        var delegate = animationFrameProvider.delegate;\n        if (delegate) {\n            request = delegate.requestAnimationFrame;\n            cancel = delegate.cancelAnimationFrame;\n        }\n        var handle = request(function (timestamp) {\n            cancel = undefined;\n            callback(timestamp);\n        });\n        return new Subscription(function () { return cancel === null || cancel === void 0 ? void 0 : cancel(handle); });\n    },\n    requestAnimationFrame: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = animationFrameProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.requestAnimationFrame) || requestAnimationFrame).apply(void 0, __spreadArray([], __read(args)));\n    },\n    cancelAnimationFrame: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = animationFrameProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.cancelAnimationFrame) || cancelAnimationFrame).apply(void 0, __spreadArray([], __read(args)));\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=animationFrameProvider.js.map","import { __extends } from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { animationFrameProvider } from './animationFrameProvider';\nvar AnimationFrameAction = (function (_super) {\n    __extends(AnimationFrameAction, _super);\n    function AnimationFrameAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AnimationFrameAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler._scheduled || (scheduler._scheduled = animationFrameProvider.requestAnimationFrame(function () { return scheduler.flush(undefined); }));\n    };\n    AnimationFrameAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        var _a;\n        if (delay === void 0) { delay = 0; }\n        if (delay != null ? delay > 0 : this.delay > 0) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        var actions = scheduler.actions;\n        if (id != null && ((_a = actions[actions.length - 1]) === null || _a === void 0 ? void 0 : _a.id) !== id) {\n            animationFrameProvider.cancelAnimationFrame(id);\n            scheduler._scheduled = undefined;\n        }\n        return undefined;\n    };\n    return AnimationFrameAction;\n}(AsyncAction));\nexport { AnimationFrameAction };\n//# sourceMappingURL=AnimationFrameAction.js.map","import { __extends } from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar AnimationFrameScheduler = (function (_super) {\n    __extends(AnimationFrameScheduler, _super);\n    function AnimationFrameScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationFrameScheduler.prototype.flush = function (action) {\n        this._active = true;\n        var flushId = this._scheduled;\n        this._scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        action = action || actions.shift();\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions[0]) && action.id === flushId && actions.shift());\n        this._active = false;\n        if (error) {\n            while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AnimationFrameScheduler;\n}(AsyncScheduler));\nexport { AnimationFrameScheduler };\n//# sourceMappingURL=AnimationFrameScheduler.js.map","import { AnimationFrameAction } from './AnimationFrameAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\nexport var animationFrameScheduler = new AnimationFrameScheduler(AnimationFrameAction);\nexport var animationFrame = animationFrameScheduler;\n//# sourceMappingURL=animationFrame.js.map","import { appendStyle, vibrate } from '@one-inch-community/core/lit';\nimport {\n  animationFrameScheduler,\n  defer,\n  filter,\n  firstValueFrom,\n  fromEvent,\n  map,\n  subscribeOn,\n  switchMap,\n  takeUntil,\n  tap\n} from 'rxjs';\nimport { CacheActivePromise } from '@one-inch-community/core/decorators';\nimport { Ref } from 'lit/directives/ref.js'\n\nexport function unicornTouchUpdate(swapFormContainerRef: Ref<HTMLElement>, unicornLoaderRef: Ref<HTMLElement>) {\n  let lastPosition = 0;\n  let full = false;\n  let resetInProgress = false;\n  const audio = new AudionController();\n  const max = 60;\n  const initialResistance = 500000;\n  const resistanceThreshold = 3;\n  const resistance = 4;\n  const root = (): HTMLElement | null => document.querySelector('#app-root');\n  const target = (): HTMLElement => swapFormContainerRef.value!;\n  const loader = (): HTMLElement => unicornLoaderRef.value!;\n  const set = (position: number) => {\n    if (position < 0) return;\n    let adjustedPosition: number;\n\n    if (position > max) {\n      if (!full) {\n        vibrate(50);\n        audio.play().then();\n      }\n      full = true;\n      if (position <= max + resistanceThreshold) {\n        adjustedPosition = max + (position - max) / initialResistance;\n      } else {\n        adjustedPosition = max + (resistanceThreshold / initialResistance) + ((position - max - resistanceThreshold) / resistance);\n      }\n    } else {\n      full = false;\n      adjustedPosition = position;\n    }\n    const loaderPosition = (position > max ? max : position) / max;\n    appendStyle(loader(), { transform: `scale(${loaderPosition})` });\n    appendStyle(target(), { transform: `translate3d(0, ${adjustedPosition}px, 0)` });\n    lastPosition = adjustedPosition;\n  };\n  const reset = async () => {\n    resetInProgress = true;\n    let _lastPosition = lastPosition;\n    if (_lastPosition > max && audio.isPlaying) {\n      await target().animate([\n        { transform: `translate3d(0, ${_lastPosition}px, 0)` },\n        { transform: `translate3d(0, ${max}px, 0)` }\n      ], {\n        duration: 200,\n        easing: 'cubic-bezier(.2, .8, .2, 1)'\n      }).finished;\n      _lastPosition = max;\n      appendStyle(target(), { transform: `translate3d(0, ${_lastPosition}px, 0)` });\n      await audio.onEnded();\n    }\n    await target().animate([\n      { transform: `translate3d(0, ${_lastPosition}px, 0)` },\n      { transform: `translate3d(0, 0, 0)` }\n    ], {\n      duration: 800,\n      easing: 'cubic-bezier(.2, .8, .2, 1)'\n    }).finished;\n    set(0);\n    appendStyle(target(), { transform: '' });\n    full = false;\n    resetInProgress = false;\n  };\n  return defer(() => {\n    const targetEl = target();\n    return fromEvent<TouchEvent>(targetEl, 'touchstart').pipe(\n      filter(() => {\n        return !resetInProgress && (root()?.scrollTop ?? 0) === 0;\n      }),\n      switchMap((startEvent: TouchEvent) => {\n        audio.load();\n        const startPoint = startEvent.touches[0].clientY;\n        return fromEvent<TouchEvent>(targetEl, 'touchmove').pipe(\n          map(event => event.touches[0].clientY - startPoint),\n          tap(position => set(position)),\n          takeUntil(fromEvent<TouchEvent>(targetEl, 'touchend').pipe(\n            tap(() => reset())\n          ))\n        );\n      })\n    );\n  }).pipe(subscribeOn(animationFrameScheduler));\n}\n\nclass AudionController {\n\n  get isPlaying(): boolean {\n    return !this.audio.paused;\n  }\n\n  private readonly audio: HTMLAudioElement;\n\n  constructor() {\n    this.audio = new Audio('audio/unicorn-run.mp3');\n    this.audio.preload = 'none';\n    this.audio.volume = 0.4;\n  }\n\n  load() {\n    this.audio.load();\n  }\n\n  @CacheActivePromise()\n  async play() {\n    try {\n      await this.audio.play();\n    } catch (e) {\n      console.error('AudionController Error', e);\n    }\n  }\n\n  onEnded() {\n    return firstValueFrom(fromEvent(this.audio, 'ended'));\n  }\n\n}\n","import { html, LitElement } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\nimport { consume } from '@lit/context';\nimport { SwapContextToken } from '@one-inch-community/sdk/swap';\nimport { BrandColors, IApplicationContext, ISwapContext, TokenType } from '@one-inch-community/models';\nimport { ApplicationContextToken } from '@one-inch-community/core/application-context';\nimport { swapFormStyle } from './swap-form.style';\nimport { SceneController } from '@one-inch-community/ui-components/scene';\nimport { ref, createRef } from 'lit/directives/ref.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport '@one-inch-community/ui-components/card';\nimport '@one-inch-community/widgets/swap-form';\nimport { OverlayMobileController } from '@one-inch-community/ui-components/overlay';\nimport { subscribe } from '@one-inch-community/core/lit';\nimport { getThemeChange } from '@one-inch-community/core/theme';\nimport { distinctUntilChanged, map, tap } from 'rxjs';\nimport { unicornTouchUpdate } from './unicorn-updater';\n\nimport('@one-inch-community/widgets/wallet-manage');\nimport('@one-inch-community/widgets/select-token');\nimport('@one-inch-community/ui-components/icon');\n\n@customElement(SwapFormMobileElement.tagName)\nexport class SwapFormMobileElement extends LitElement {\n  static readonly tagName = 'inch-swap-form-mobile';\n\n  static styles = [\n    swapFormStyle,\n    SceneController.styles()\n  ];\n\n  @consume({ context: SwapContextToken })\n  swapContext!: ISwapContext;\n\n  @consume({ context: ApplicationContextToken })\n  applicationContext!: IApplicationContext;\n\n  @state() private isRainbowTheme = false;\n\n  private targetSelectToken: TokenType | null = null;\n\n  private readonly mobileOverlay = new OverlayMobileController('app-root');\n\n  private readonly swapFormContainerRef = createRef<HTMLElement>();\n  private readonly unicornLoaderRef = createRef<HTMLElement>();\n\n  protected firstUpdated() {\n    setTimeout(() => this.classList.add('padding-top-transition'), 100);\n    subscribe(this, [\n      getThemeChange().pipe(\n        map(({ brandColor }) => brandColor),\n        distinctUntilChanged(),\n        tap(color => this.isRainbowTheme = color === BrandColors.rainbow)\n      ),\n      unicornTouchUpdate(this.swapFormContainerRef, this.unicornLoaderRef)\n    ], { requestUpdate: false });\n  }\n\n  protected render() {\n    const classes = {\n      'shadow-container': true,\n      'shadow-container-rainbow': this.isRainbowTheme\n    };\n    return html`\n      <inch-icon ${ref(this.unicornLoaderRef)} class=\"unicorn-loader\" icon=\"unicornRun\"></inch-icon>\n      <div ${ref(this.swapFormContainerRef)} class=\"${classMap(classes)}\">\n        <inch-card style=\"max-width: 100vw\">\n          <inch-swap-form\n            @confirmSwap=\"${(event: CustomEvent) => this.onOpenMobileConfirmSwap(event)}\"\n            @changeFusionInfoOpenState=\"${(event: CustomEvent) => this.onChangeFusionInfoOpenState(event)}\"\n            @openTokenSelector=\"${(event: CustomEvent) => this.onOpenMobileSelectToken(event)}\"\n            @changeChain=\"${() => this.onOpenChangeChainView()}\"\n            @connectWallet=\"${() => this.onOpenConnectWalletView()}\"\n          ></inch-swap-form>\n        </inch-card>\n      </div>\n    `;\n  }\n\n  private onChangeFusionInfoOpenState(event: CustomEvent) {\n    if (event.detail.value && !this.classList.contains('is-enlarged-form')) {\n      this.classList.add('is-enlarged-form');\n    }\n    if (!event.detail.value && this.classList.contains('is-enlarged-form')) {\n      this.classList.remove('is-enlarged-form');\n    }\n  }\n\n  private async onOpenMobileConfirmSwap(event: CustomEvent) {\n    const swapSnapshot = event.detail.value;\n    const id = await this.mobileOverlay.open(html`\n      <inch-card forMobileView style=\"width: 100%; height: 100%; display: flex;\">\n        <inch-confirm-swap\n          .swapContext=\"${this.swapContext}\"\n          .swapSnapshot=\"${swapSnapshot}\"\n          @backCard=\"${async () => {\n            await this.mobileOverlay.close(id);\n          }}\"\n        ></inch-confirm-swap>\n      </inch-card>\n    `);\n  }\n\n  private async onOpenMobileSelectToken(event: CustomEvent) {\n    this.targetSelectToken = event.detail.value;\n    const id = await this.mobileOverlay.open(html`\n      <inch-card forMobileView style=\"width: 100%; height: 100%; display: flex;\">\n        <inch-select-token\n          .swapContext=\"${this.swapContext}\"\n          tokenType=\"${this.targetSelectToken!}\"\n          @backCard=\"${() => this.mobileOverlay.close(id)}\"\n        ></inch-select-token>\n      </inch-card>\n    `);\n  }\n\n  private async onOpenChangeChainView() {\n    const id = await this.mobileOverlay.open(html`\n      <inch-chain-selector-list\n        showShadow\n        @closeCard=\"${() => this.mobileOverlay.close(id)}\"\n        .controller=\"${this.applicationContext.connectWalletController}\"\n      ></inch-chain-selector-list>\n    `);\n  }\n\n  private async onOpenConnectWalletView() {\n    const id = await this.mobileOverlay.open(html`\n      <inch-wallet-manage\n        showShadow\n        @closeCard=\"${() => this.mobileOverlay.close(id)}\"\n        .controller=\"${this.applicationContext.connectWalletController}\"\n      ></inch-wallet-manage>\n    `);\n  }\n\n}\n"],"file":"assets/swap-form-mobile.element--QOSo0a7.js"}