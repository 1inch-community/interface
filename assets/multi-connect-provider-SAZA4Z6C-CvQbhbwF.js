const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CJiwH4tD.js","assets/index-DyOQYfny.js","assets/wallet-connect-init-options-ACAHGVFG-CRe5U6-o.js","assets/index.esm-BmGDGD-v.js","assets/startWith-CUA0N737.js","assets/index.esm-COc-PyqV.js","assets/index.esm-DQpf5hpN.js"])))=>i.map(i=>d[i]);
import{_ as Vl}from"./index-DyOQYfny.js";import{C as j_,m as q_}from"./index.esm-BmGDGD-v.js";import{g as ho,a as Gl,c as $_,D as F_}from"./import-wrapper-prod-mRNndFxq.js";import{$ as z_}from"./index.esm-DQpf5hpN.js";import{f as k_}from"./startWith-CUA0N737.js";import{t as H_}from"./tap-C5qX7kP3.js";import"./index.esm-COc-PyqV.js";var Xg={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(p,d,b){this.fn=p,this.context=d,this.once=b||!1}function a(p,d,b,_,S){if(typeof b!="function")throw new TypeError("The listener must be a function");var I=new s(b,_||p,S),M=e?e+d:d;return p._events[M]?p._events[M].fn?p._events[M]=[p._events[M],I]:p._events[M].push(I):(p._events[M]=I,p._eventsCount++),p}function u(p,d){--p._eventsCount===0?p._events=new i:delete p._events[d]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var d=[],b,_;if(this._eventsCount===0)return d;for(_ in b=this._events)t.call(b,_)&&d.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(b)):d},h.prototype.listeners=function(d){var b=e?e+d:d,_=this._events[b];if(!_)return[];if(_.fn)return[_.fn];for(var S=0,I=_.length,M=new Array(I);S<I;S++)M[S]=_[S].fn;return M},h.prototype.listenerCount=function(d){var b=e?e+d:d,_=this._events[b];return _?_.fn?1:_.length:0},h.prototype.emit=function(d,b,_,S,I,M){var W=e?e+d:d;if(!this._events[W])return!1;var H=this._events[W],tt=arguments.length,V,G;if(H.fn){switch(H.once&&this.removeListener(d,H.fn,void 0,!0),tt){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,b),!0;case 3:return H.fn.call(H.context,b,_),!0;case 4:return H.fn.call(H.context,b,_,S),!0;case 5:return H.fn.call(H.context,b,_,S,I),!0;case 6:return H.fn.call(H.context,b,_,S,I,M),!0}for(G=1,V=new Array(tt-1);G<tt;G++)V[G-1]=arguments[G];H.fn.apply(H.context,V)}else{var j=H.length,$;for(G=0;G<j;G++)switch(H[G].once&&this.removeListener(d,H[G].fn,void 0,!0),tt){case 1:H[G].fn.call(H[G].context);break;case 2:H[G].fn.call(H[G].context,b);break;case 3:H[G].fn.call(H[G].context,b,_);break;case 4:H[G].fn.call(H[G].context,b,_,S);break;default:if(!V)for($=1,V=new Array(tt-1);$<tt;$++)V[$-1]=arguments[$];H[G].fn.apply(H[G].context,V)}}return!0},h.prototype.on=function(d,b,_){return a(this,d,b,_,!1)},h.prototype.once=function(d,b,_){return a(this,d,b,_,!0)},h.prototype.removeListener=function(d,b,_,S){var I=e?e+d:d;if(!this._events[I])return this;if(!b)return u(this,I),this;var M=this._events[I];if(M.fn)M.fn===b&&(!S||M.once)&&(!_||M.context===_)&&u(this,I);else{for(var W=0,H=[],tt=M.length;W<tt;W++)(M[W].fn!==b||S&&!M[W].once||_&&M[W].context!==_)&&H.push(M[W]);H.length?this._events[I]=H.length===1?H[0]:H:u(this,I)}return this},h.prototype.removeAllListeners=function(d){var b;return d?(b=e?e+d:d,this._events[b]&&u(this,b)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,r.exports=h})(Xg);var K_=Xg.exports;const V_=ho(K_);var Wl={exports:{}},io=typeof Reflect=="object"?Reflect:null,Sp=io&&typeof io.apply=="function"?io.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},Bc;io&&typeof io.ownKeys=="function"?Bc=io.ownKeys:Object.getOwnPropertySymbols?Bc=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Bc=function(t){return Object.getOwnPropertyNames(t)};function G_(r){console&&console.warn&&console.warn(r)}var Zg=Number.isNaN||function(t){return t!==t};function Be(){Be.init.call(this)}Wl.exports=Be;Wl.exports.once=J_;Be.EventEmitter=Be;Be.prototype._events=void 0;Be.prototype._eventsCount=0;Be.prototype._maxListeners=void 0;var Ip=10;function uu(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Be,"defaultMaxListeners",{enumerable:!0,get:function(){return Ip},set:function(r){if(typeof r!="number"||r<0||Zg(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ip=r}});Be.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Be.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Zg(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function t1(r){return r._maxListeners===void 0?Be.defaultMaxListeners:r._maxListeners}Be.prototype.getMaxListeners=function(){return t1(this)};Be.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s=t==="error",a=this._events;if(a!==void 0)s=s&&a.error===void 0;else if(!s)return!1;if(s){var u;if(e.length>0&&(u=e[0]),u instanceof Error)throw u;var h=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw h.context=u,h}var p=a[t];if(p===void 0)return!1;if(typeof p=="function")Sp(p,this,e);else for(var d=p.length,b=s1(p,d),i=0;i<d;++i)Sp(b[i],this,e);return!0};function e1(r,t,e,i){var s,a,u;if(uu(e),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),a=r._events),u=a[t]),u===void 0)u=a[t]=e,++r._eventsCount;else if(typeof u=="function"?u=a[t]=i?[e,u]:[u,e]:i?u.unshift(e):u.push(e),s=t1(r),s>0&&u.length>s&&!u.warned){u.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=r,h.type=t,h.count=u.length,G_(h)}return r}Be.prototype.addListener=function(t,e){return e1(this,t,e,!1)};Be.prototype.on=Be.prototype.addListener;Be.prototype.prependListener=function(t,e){return e1(this,t,e,!0)};function W_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function r1(r,t,e){var i={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},s=W_.bind(i);return s.listener=e,i.wrapFn=s,s}Be.prototype.once=function(t,e){return uu(e),this.on(t,r1(this,t,e)),this};Be.prototype.prependOnceListener=function(t,e){return uu(e),this.prependListener(t,r1(this,t,e)),this};Be.prototype.removeListener=function(t,e){var i,s,a,u,h;if(uu(e),s=this._events,s===void 0)return this;if(i=s[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(a=-1,u=i.length-1;u>=0;u--)if(i[u]===e||i[u].listener===e){h=i[u].listener,a=u;break}if(a<0)return this;a===0?i.shift():Y_(i,a),i.length===1&&(s[t]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",t,h||e)}return this};Be.prototype.off=Be.prototype.removeListener;Be.prototype.removeAllListeners=function(t){var e,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),u;for(s=0;s<a.length;++s)u=a[s],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this};function i1(r,t,e){var i=r._events;if(i===void 0)return[];var s=i[t];return s===void 0?[]:typeof s=="function"?e?[s.listener||s]:[s]:e?Q_(s):s1(s,s.length)}Be.prototype.listeners=function(t){return i1(this,t,!0)};Be.prototype.rawListeners=function(t){return i1(this,t,!1)};Be.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):n1.call(r,t)};Be.prototype.listenerCount=n1;function n1(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Be.prototype.eventNames=function(){return this._eventsCount>0?Bc(this._events):[]};function s1(r,t){for(var e=new Array(t),i=0;i<t;++i)e[i]=r[i];return e}function Y_(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function Q_(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function J_(r,t){return new Promise(function(e,i){function s(u){r.removeListener(t,a),i(u)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",s),e([].slice.call(arguments))}o1(r,t,a,{once:!0}),t!=="error"&&X_(r,s,{once:!0})})}function X_(r,t,e){typeof r.on=="function"&&o1(r,"error",t,e)}function o1(r,t,e,i){if(typeof r.on=="function")i.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function s(a){i.once&&r.removeEventListener(t,s),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var ii=Wl.exports;const Yl=ho(ii);var Dp=function(r,t,e){if(e||arguments.length===2)for(var i=0,s=t.length,a;i<s;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return r.concat(a||Array.prototype.slice.call(t))},Z_=function(){function r(t,e,i){this.name=t,this.version=e,this.os=i,this.type="browser"}return r}(),t6=function(){function r(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return r}(),e6=function(){function r(t,e,i,s){this.name=t,this.version=e,this.os=i,this.bot=s,this.type="bot-device"}return r}(),r6=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),i6=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),n6=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,s6=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,xp=3,o6=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",n6]],Mp=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function a6(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new i6:typeof navigator<"u"?u6(navigator.userAgent):l6()}function c6(r){return r!==""&&o6.reduce(function(t,e){var i=e[0],s=e[1];if(t)return t;var a=s.exec(r);return!!a&&[i,a]},!1)}function u6(r){var t=c6(r);if(!t)return null;var e=t[0],i=t[1];if(e==="searchbot")return new r6;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<xp&&(s=Dp(Dp([],s,!0),f6(xp-s.length),!0)):s=[];var a=s.join("."),u=h6(r),h=s6.exec(r);return h&&h[1]?new e6(e,a,u,h[1]):new Z_(e,a,u)}function h6(r){for(var t=0,e=Mp.length;t<e;t++){var i=Mp[t],s=i[0],a=i[1],u=a.exec(r);if(u)return s}return null}function l6(){var r=typeof process<"u"&&process.version;return r?new t6(process.version.slice(1)):null}function f6(r){for(var t=[],e=0;e<r;e++)t.push("0");return t}var yt={};var vl=function(r,t){return vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])},vl(r,t)};function d6(r,t){vl(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var yl=function(){return yl=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},yl.apply(this,arguments)};function p6(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(e[i[s]]=r[i[s]]);return e}function g6(r,t,e,i){var s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,t,e,i);else for(var h=r.length-1;h>=0;h--)(u=r[h])&&(a=(s<3?u(a):s>3?u(t,e,a):u(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a}function m6(r,t){return function(e,i){t(e,i,r)}}function v6(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)}function y6(r,t,e,i){function s(a){return a instanceof e?a:new e(function(u){u(a)})}return new(e||(e=Promise))(function(a,u){function h(b){try{d(i.next(b))}catch(_){u(_)}}function p(b){try{d(i.throw(b))}catch(_){u(_)}}function d(b){b.done?a(b.value):s(b.value).then(h,p)}d((i=i.apply(r,t||[])).next())})}function w6(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(b){return p([d,b])}}function p(d){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(a=d[0]&2?s.return:d[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,d[1])).done)return a;switch(s=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){e.label=d[1];break}if(d[0]===6&&e.label<a[1]){e.label=a[1],a=d;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(d);break}a[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(r,e)}catch(b){d=[6,b],s=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function b6(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}function _6(r,t){for(var e in r)e!=="default"&&!t.hasOwnProperty(e)&&(t[e]=r[e])}function wl(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a1(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),s,a=[],u;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(h){u={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return a}function E6(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(a1(arguments[t]));return r}function A6(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var i=Array(r),s=0,t=0;t<e;t++)for(var a=arguments[t],u=0,h=a.length;u<h;u++,s++)i[s]=a[u];return i}function oa(r){return this instanceof oa?(this.v=r,this):new oa(r)}function S6(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(r,t||[]),s,a=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(S){i[S]&&(s[S]=function(I){return new Promise(function(M,W){a.push([S,I,M,W])>1||h(S,I)})})}function h(S,I){try{p(i[S](I))}catch(M){_(a[0][3],M)}}function p(S){S.value instanceof oa?Promise.resolve(S.value.v).then(d,b):_(a[0][2],S)}function d(S){h("next",S)}function b(S){h("throw",S)}function _(S,I){S(I),a.shift(),a.length&&h(a[0][0],a[0][1])}}function I6(r){var t,e;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,a){t[s]=r[s]?function(u){return(e=!e)?{value:oa(r[s](u)),done:s==="return"}:a?a(u):u}:a}}function D6(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof wl=="function"?wl(r):r[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=r[a]&&function(u){return new Promise(function(h,p){u=r[a](u),s(h,p,u.done,u.value)})}}function s(a,u,h,p){Promise.resolve(p).then(function(d){a({value:d,done:h})},u)}}function x6(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}function M6(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)Object.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function P6(r){return r&&r.__esModule?r:{default:r}}function O6(r,t){if(!t.has(r))throw new TypeError("attempted to get private field on non-instance");return t.get(r)}function C6(r,t,e){if(!t.has(r))throw new TypeError("attempted to set private field on non-instance");return t.set(r,e),e}const N6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return yl},__asyncDelegator:I6,__asyncGenerator:S6,__asyncValues:D6,__await:oa,__awaiter:y6,__classPrivateFieldGet:O6,__classPrivateFieldSet:C6,__createBinding:b6,__decorate:g6,__exportStar:_6,__extends:d6,__generator:w6,__importDefault:P6,__importStar:M6,__makeTemplateObject:x6,__metadata:v6,__param:m6,__read:a1,__rest:p6,__spread:E6,__spreadArrays:A6,__values:wl},Symbol.toStringTag,{value:"Module"})),pa=Gl(N6);var Lh={},ko={},Pp;function R6(){if(Pp)return ko;Pp=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.delay=void 0;function r(t){return new Promise(e=>{setTimeout(()=>{e(!0)},t)})}return ko.delay=r,ko}var ms={},Uh={},vs={},Op;function T6(){return Op||(Op=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.ONE_THOUSAND=vs.ONE_HUNDRED=void 0,vs.ONE_HUNDRED=100,vs.ONE_THOUSAND=1e3),vs}var Bh={},Cp;function L6(){return Cp||(Cp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(Bh)),Bh}var Np;function c1(){return Np||(Np=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const t=pa;t.__exportStar(T6(),r),t.__exportStar(L6(),r)}(Uh)),Uh}var Rp;function U6(){if(Rp)return ms;Rp=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.fromMiliseconds=ms.toMiliseconds=void 0;const r=c1();function t(i){return i*r.ONE_THOUSAND}ms.toMiliseconds=t;function e(i){return Math.floor(i/r.ONE_THOUSAND)}return ms.fromMiliseconds=e,ms}var Tp;function B6(){return Tp||(Tp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const t=pa;t.__exportStar(R6(),r),t.__exportStar(U6(),r)}(Lh)),Lh}var Gs={},Lp;function j6(){if(Lp)return Gs;Lp=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const i=this.get(e);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);const s=Date.now()-i.started;this.timestamps.set(e,{started:i.started,elapsed:s})}get(e){const i=this.timestamps.get(e);if(typeof i>"u")throw new Error(`No timestamp found for label: ${e}`);return i}elapsed(e){const i=this.get(e);return i.elapsed||Date.now()-i.started}}return Gs.Watch=r,Gs.default=r,Gs}var jh={},Ho={},Up;function q6(){if(Up)return Ho;Up=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.IWatch=void 0;class r{}return Ho.IWatch=r,Ho}var Bp;function $6(){return Bp||(Bp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),pa.__exportStar(q6(),r)}(jh)),jh}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const t=pa;t.__exportStar(B6(),r),t.__exportStar(j6(),r),t.__exportStar($6(),r),t.__exportStar(c1(),r)})(yt);var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.getLocalStorage=Fe.getLocalStorageOrThrow=Fe.getCrypto=Fe.getCryptoOrThrow=u1=Fe.getLocation=Fe.getLocationOrThrow=Jl=Fe.getNavigator=Fe.getNavigatorOrThrow=Ql=Fe.getDocument=Fe.getDocumentOrThrow=Fe.getFromWindowOrThrow=Fe.getFromWindow=void 0;function Is(r){let t;return typeof window<"u"&&typeof window[r]<"u"&&(t=window[r]),t}Fe.getFromWindow=Is;function lo(r){const t=Is(r);if(!t)throw new Error(`${r} is not defined in Window`);return t}Fe.getFromWindowOrThrow=lo;function F6(){return lo("document")}Fe.getDocumentOrThrow=F6;function z6(){return Is("document")}var Ql=Fe.getDocument=z6;function k6(){return lo("navigator")}Fe.getNavigatorOrThrow=k6;function H6(){return Is("navigator")}var Jl=Fe.getNavigator=H6;function K6(){return lo("location")}Fe.getLocationOrThrow=K6;function V6(){return Is("location")}var u1=Fe.getLocation=V6;function G6(){return lo("crypto")}Fe.getCryptoOrThrow=G6;function W6(){return Is("crypto")}Fe.getCrypto=W6;function Y6(){return lo("localStorage")}Fe.getLocalStorageOrThrow=Y6;function Q6(){return Is("localStorage")}Fe.getLocalStorage=Q6;var Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});var h1=Xl.getWindowMetadata=void 0;const jp=Fe;function J6(){let r,t;try{r=jp.getDocumentOrThrow(),t=jp.getLocationOrThrow()}catch{return null}function e(){const _=r.getElementsByTagName("link"),S=[];for(let I=0;I<_.length;I++){const M=_[I],W=M.getAttribute("rel");if(W&&W.toLowerCase().indexOf("icon")>-1){const H=M.getAttribute("href");if(H)if(H.toLowerCase().indexOf("https:")===-1&&H.toLowerCase().indexOf("http:")===-1&&H.indexOf("//")!==0){let tt=t.protocol+"//"+t.host;if(H.indexOf("/")===0)tt+=H;else{const V=t.pathname.split("/");V.pop();const G=V.join("/");tt+=G+"/"+H}S.push(tt)}else if(H.indexOf("//")===0){const tt=t.protocol+H;S.push(tt)}else S.push(H)}}return S}function i(..._){const S=r.getElementsByTagName("meta");for(let I=0;I<S.length;I++){const M=S[I],W=["itemprop","property","name"].map(H=>M.getAttribute(H)).filter(H=>H?_.includes(H):!1);if(W.length&&W){const H=M.getAttribute("content");if(H)return H}}return""}function s(){let _=i("name","og:site_name","og:title","twitter:title");return _||(_=r.title),_}function a(){return i("description","og:description","twitter:description","keywords")}const u=s(),h=a(),p=t.origin,d=e();return{description:h,url:p,icons:d,name:u}}h1=Xl.getWindowMetadata=J6;var aa={},X6=r=>encodeURIComponent(r).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),l1="%[a-f0-9]{2}",qp=new RegExp("("+l1+")|([^%]+?)","gi"),$p=new RegExp("("+l1+")+","gi");function bl(r,t){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;t=t||1;var e=r.slice(0,t),i=r.slice(t);return Array.prototype.concat.call([],bl(e),bl(i))}function Z6(r){try{return decodeURIComponent(r)}catch{for(var t=r.match(qp)||[],e=1;e<t.length;e++)r=bl(t,e).join(""),t=r.match(qp)||[];return r}}function tE(r){for(var t={"%FE%FF":"��","%FF%FE":"��"},e=$p.exec(r);e;){try{t[e[0]]=decodeURIComponent(e[0])}catch{var i=Z6(e[0]);i!==e[0]&&(t[e[0]]=i)}e=$p.exec(r)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];r=r.replace(new RegExp(u,"g"),t[u])}return r}var eE=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return tE(r)}},rE=(r,t)=>{if(!(typeof r=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[r];const e=r.indexOf(t);return e===-1?[r]:[r.slice(0,e),r.slice(e+t.length)]},iE=function(r,t){for(var e={},i=Object.keys(r),s=Array.isArray(t),a=0;a<i.length;a++){var u=i[a],h=r[u];(s?t.indexOf(u)!==-1:t(u,h,r))&&(e[u]=h)}return e};(function(r){const t=X6,e=eE,i=rE,s=iE,a=V=>V==null,u=Symbol("encodeFragmentIdentifier");function h(V){switch(V.arrayFormat){case"index":return G=>(j,$)=>{const z=j.length;return $===void 0||V.skipNull&&$===null||V.skipEmptyString&&$===""?j:$===null?[...j,[b(G,V),"[",z,"]"].join("")]:[...j,[b(G,V),"[",b(z,V),"]=",b($,V)].join("")]};case"bracket":return G=>(j,$)=>$===void 0||V.skipNull&&$===null||V.skipEmptyString&&$===""?j:$===null?[...j,[b(G,V),"[]"].join("")]:[...j,[b(G,V),"[]=",b($,V)].join("")];case"colon-list-separator":return G=>(j,$)=>$===void 0||V.skipNull&&$===null||V.skipEmptyString&&$===""?j:$===null?[...j,[b(G,V),":list="].join("")]:[...j,[b(G,V),":list=",b($,V)].join("")];case"comma":case"separator":case"bracket-separator":{const G=V.arrayFormat==="bracket-separator"?"[]=":"=";return j=>($,z)=>z===void 0||V.skipNull&&z===null||V.skipEmptyString&&z===""?$:(z=z===null?"":z,$.length===0?[[b(j,V),G,b(z,V)].join("")]:[[$,b(z,V)].join(V.arrayFormatSeparator)])}default:return G=>(j,$)=>$===void 0||V.skipNull&&$===null||V.skipEmptyString&&$===""?j:$===null?[...j,b(G,V)]:[...j,[b(G,V),"=",b($,V)].join("")]}}function p(V){let G;switch(V.arrayFormat){case"index":return(j,$,z)=>{if(G=/\[(\d*)\]$/.exec(j),j=j.replace(/\[\d*\]$/,""),!G){z[j]=$;return}z[j]===void 0&&(z[j]={}),z[j][G[1]]=$};case"bracket":return(j,$,z)=>{if(G=/(\[\])$/.exec(j),j=j.replace(/\[\]$/,""),!G){z[j]=$;return}if(z[j]===void 0){z[j]=[$];return}z[j]=[].concat(z[j],$)};case"colon-list-separator":return(j,$,z)=>{if(G=/(:list)$/.exec(j),j=j.replace(/:list$/,""),!G){z[j]=$;return}if(z[j]===void 0){z[j]=[$];return}z[j]=[].concat(z[j],$)};case"comma":case"separator":return(j,$,z)=>{const y=typeof $=="string"&&$.includes(V.arrayFormatSeparator),T=typeof $=="string"&&!y&&_($,V).includes(V.arrayFormatSeparator);$=T?_($,V):$;const nt=y||T?$.split(V.arrayFormatSeparator).map(dt=>_(dt,V)):$===null?$:_($,V);z[j]=nt};case"bracket-separator":return(j,$,z)=>{const y=/(\[\])$/.test(j);if(j=j.replace(/\[\]$/,""),!y){z[j]=$&&_($,V);return}const T=$===null?[]:$.split(V.arrayFormatSeparator).map(nt=>_(nt,V));if(z[j]===void 0){z[j]=T;return}z[j]=[].concat(z[j],T)};default:return(j,$,z)=>{if(z[j]===void 0){z[j]=$;return}z[j]=[].concat(z[j],$)}}}function d(V){if(typeof V!="string"||V.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function b(V,G){return G.encode?G.strict?t(V):encodeURIComponent(V):V}function _(V,G){return G.decode?e(V):V}function S(V){return Array.isArray(V)?V.sort():typeof V=="object"?S(Object.keys(V)).sort((G,j)=>Number(G)-Number(j)).map(G=>V[G]):V}function I(V){const G=V.indexOf("#");return G!==-1&&(V=V.slice(0,G)),V}function M(V){let G="";const j=V.indexOf("#");return j!==-1&&(G=V.slice(j)),G}function W(V){V=I(V);const G=V.indexOf("?");return G===-1?"":V.slice(G+1)}function H(V,G){return G.parseNumbers&&!Number.isNaN(Number(V))&&typeof V=="string"&&V.trim()!==""?V=Number(V):G.parseBooleans&&V!==null&&(V.toLowerCase()==="true"||V.toLowerCase()==="false")&&(V=V.toLowerCase()==="true"),V}function tt(V,G){G=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},G),d(G.arrayFormatSeparator);const j=p(G),$=Object.create(null);if(typeof V!="string"||(V=V.trim().replace(/^[?#&]/,""),!V))return $;for(const z of V.split("&")){if(z==="")continue;let[y,T]=i(G.decode?z.replace(/\+/g," "):z,"=");T=T===void 0?null:["comma","separator","bracket-separator"].includes(G.arrayFormat)?T:_(T,G),j(_(y,G),T,$)}for(const z of Object.keys($)){const y=$[z];if(typeof y=="object"&&y!==null)for(const T of Object.keys(y))y[T]=H(y[T],G);else $[z]=H(y,G)}return G.sort===!1?$:(G.sort===!0?Object.keys($).sort():Object.keys($).sort(G.sort)).reduce((z,y)=>{const T=$[y];return T&&typeof T=="object"&&!Array.isArray(T)?z[y]=S(T):z[y]=T,z},Object.create(null))}r.extract=W,r.parse=tt,r.stringify=(V,G)=>{if(!V)return"";G=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},G),d(G.arrayFormatSeparator);const j=T=>G.skipNull&&a(V[T])||G.skipEmptyString&&V[T]==="",$=h(G),z={};for(const T of Object.keys(V))j(T)||(z[T]=V[T]);const y=Object.keys(z);return G.sort!==!1&&y.sort(G.sort),y.map(T=>{const nt=V[T];return nt===void 0?"":nt===null?b(T,G):Array.isArray(nt)?nt.length===0&&G.arrayFormat==="bracket-separator"?b(T,G)+"[]":nt.reduce($(T),[]).join("&"):b(T,G)+"="+b(nt,G)}).filter(T=>T.length>0).join("&")},r.parseUrl=(V,G)=>{G=Object.assign({decode:!0},G);const[j,$]=i(V,"#");return Object.assign({url:j.split("?")[0]||"",query:tt(W(V),G)},G&&G.parseFragmentIdentifier&&$?{fragmentIdentifier:_($,G)}:{})},r.stringifyUrl=(V,G)=>{G=Object.assign({encode:!0,strict:!0,[u]:!0},G);const j=I(V.url).split("?")[0]||"",$=r.extract(V.url),z=r.parse($,{sort:!1}),y=Object.assign(z,V.query);let T=r.stringify(y,G);T&&(T=`?${T}`);let nt=M(V.url);return V.fragmentIdentifier&&(nt=`#${G[u]?b(V.fragmentIdentifier,G):V.fragmentIdentifier}`),`${j}${T}${nt}`},r.pick=(V,G,j)=>{j=Object.assign({parseFragmentIdentifier:!0,[u]:!1},j);const{url:$,query:z,fragmentIdentifier:y}=r.parseUrl(V,j);return r.stringifyUrl({url:$,query:s(z,G),fragmentIdentifier:y},j)},r.exclude=(V,G,j)=>{const $=Array.isArray(G)?z=>!G.includes(z):(z,y)=>!G(z,y);return r.pick(V,$,j)}})(aa);var Zl={},hu={},oe={},f1={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function t(h,p){var d=h>>>16&65535,b=h&65535,_=p>>>16&65535,S=p&65535;return b*S+(d*S+b*_<<16>>>0)|0}r.mul=Math.imul||t;function e(h,p){return h+p|0}r.add=e;function i(h,p){return h-p|0}r.sub=i;function s(h,p){return h<<p|h>>>32-p}r.rotl=s;function a(h,p){return h<<32-p|h>>>p}r.rotr=a;function u(h){return typeof h=="number"&&isFinite(h)&&Math.floor(h)===h}r.isInteger=Number.isInteger||u,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(h){return r.isInteger(h)&&h>=-r.MAX_SAFE_INTEGER&&h<=r.MAX_SAFE_INTEGER}})(f1);Object.defineProperty(oe,"__esModule",{value:!0});var d1=f1;function nE(r,t){return t===void 0&&(t=0),(r[t+0]<<8|r[t+1])<<16>>16}oe.readInt16BE=nE;function sE(r,t){return t===void 0&&(t=0),(r[t+0]<<8|r[t+1])>>>0}oe.readUint16BE=sE;function oE(r,t){return t===void 0&&(t=0),(r[t+1]<<8|r[t])<<16>>16}oe.readInt16LE=oE;function aE(r,t){return t===void 0&&(t=0),(r[t+1]<<8|r[t])>>>0}oe.readUint16LE=aE;function p1(r,t,e){return t===void 0&&(t=new Uint8Array(2)),e===void 0&&(e=0),t[e+0]=r>>>8,t[e+1]=r>>>0,t}oe.writeUint16BE=p1;oe.writeInt16BE=p1;function g1(r,t,e){return t===void 0&&(t=new Uint8Array(2)),e===void 0&&(e=0),t[e+0]=r>>>0,t[e+1]=r>>>8,t}oe.writeUint16LE=g1;oe.writeInt16LE=g1;function _l(r,t){return t===void 0&&(t=0),r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3]}oe.readInt32BE=_l;function El(r,t){return t===void 0&&(t=0),(r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3])>>>0}oe.readUint32BE=El;function Al(r,t){return t===void 0&&(t=0),r[t+3]<<24|r[t+2]<<16|r[t+1]<<8|r[t]}oe.readInt32LE=Al;function Sl(r,t){return t===void 0&&(t=0),(r[t+3]<<24|r[t+2]<<16|r[t+1]<<8|r[t])>>>0}oe.readUint32LE=Sl;function Wc(r,t,e){return t===void 0&&(t=new Uint8Array(4)),e===void 0&&(e=0),t[e+0]=r>>>24,t[e+1]=r>>>16,t[e+2]=r>>>8,t[e+3]=r>>>0,t}oe.writeUint32BE=Wc;oe.writeInt32BE=Wc;function Yc(r,t,e){return t===void 0&&(t=new Uint8Array(4)),e===void 0&&(e=0),t[e+0]=r>>>0,t[e+1]=r>>>8,t[e+2]=r>>>16,t[e+3]=r>>>24,t}oe.writeUint32LE=Yc;oe.writeInt32LE=Yc;function cE(r,t){t===void 0&&(t=0);var e=_l(r,t),i=_l(r,t+4);return e*4294967296+i-(i>>31)*4294967296}oe.readInt64BE=cE;function uE(r,t){t===void 0&&(t=0);var e=El(r,t),i=El(r,t+4);return e*4294967296+i}oe.readUint64BE=uE;function hE(r,t){t===void 0&&(t=0);var e=Al(r,t),i=Al(r,t+4);return i*4294967296+e-(e>>31)*4294967296}oe.readInt64LE=hE;function lE(r,t){t===void 0&&(t=0);var e=Sl(r,t),i=Sl(r,t+4);return i*4294967296+e}oe.readUint64LE=lE;function m1(r,t,e){return t===void 0&&(t=new Uint8Array(8)),e===void 0&&(e=0),Wc(r/4294967296>>>0,t,e),Wc(r>>>0,t,e+4),t}oe.writeUint64BE=m1;oe.writeInt64BE=m1;function v1(r,t,e){return t===void 0&&(t=new Uint8Array(8)),e===void 0&&(e=0),Yc(r>>>0,t,e),Yc(r/4294967296>>>0,t,e+4),t}oe.writeUint64LE=v1;oe.writeInt64LE=v1;function fE(r,t,e){if(e===void 0&&(e=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>t.length-e)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,s=1,a=r/8+e-1;a>=e;a--)i+=t[a]*s,s*=256;return i}oe.readUintBE=fE;function dE(r,t,e){if(e===void 0&&(e=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>t.length-e)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,s=1,a=e;a<e+r/8;a++)i+=t[a]*s,s*=256;return i}oe.readUintLE=dE;function pE(r,t,e,i){if(e===void 0&&(e=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!d1.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var s=1,a=r/8+i-1;a>=i;a--)e[a]=t/s&255,s*=256;return e}oe.writeUintBE=pE;function gE(r,t,e,i){if(e===void 0&&(e=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!d1.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var s=1,a=i;a<i+r/8;a++)e[a]=t/s&255,s*=256;return e}oe.writeUintLE=gE;function mE(r,t){t===void 0&&(t=0);var e=new DataView(r.buffer,r.byteOffset,r.byteLength);return e.getFloat32(t)}oe.readFloat32BE=mE;function vE(r,t){t===void 0&&(t=0);var e=new DataView(r.buffer,r.byteOffset,r.byteLength);return e.getFloat32(t,!0)}oe.readFloat32LE=vE;function yE(r,t){t===void 0&&(t=0);var e=new DataView(r.buffer,r.byteOffset,r.byteLength);return e.getFloat64(t)}oe.readFloat64BE=yE;function wE(r,t){t===void 0&&(t=0);var e=new DataView(r.buffer,r.byteOffset,r.byteLength);return e.getFloat64(t,!0)}oe.readFloat64LE=wE;function bE(r,t,e){t===void 0&&(t=new Uint8Array(4)),e===void 0&&(e=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(e,r),t}oe.writeFloat32BE=bE;function _E(r,t,e){t===void 0&&(t=new Uint8Array(4)),e===void 0&&(e=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(e,r,!0),t}oe.writeFloat32LE=_E;function EE(r,t,e){t===void 0&&(t=new Uint8Array(8)),e===void 0&&(e=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(e,r),t}oe.writeFloat64BE=EE;function AE(r,t,e){t===void 0&&(t=new Uint8Array(8)),e===void 0&&(e=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(e,r,!0),t}oe.writeFloat64LE=AE;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});function SE(r){for(var t=0;t<r.length;t++)r[t]=0;return r}ni.wipe=SE;Object.defineProperty(hu,"__esModule",{value:!0});var Er=oe,Il=ni,IE=20;function DE(r,t,e){for(var i=1634760805,s=857760878,a=2036477234,u=1797285236,h=e[3]<<24|e[2]<<16|e[1]<<8|e[0],p=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],b=e[15]<<24|e[14]<<16|e[13]<<8|e[12],_=e[19]<<24|e[18]<<16|e[17]<<8|e[16],S=e[23]<<24|e[22]<<16|e[21]<<8|e[20],I=e[27]<<24|e[26]<<16|e[25]<<8|e[24],M=e[31]<<24|e[30]<<16|e[29]<<8|e[28],W=t[3]<<24|t[2]<<16|t[1]<<8|t[0],H=t[7]<<24|t[6]<<16|t[5]<<8|t[4],tt=t[11]<<24|t[10]<<16|t[9]<<8|t[8],V=t[15]<<24|t[14]<<16|t[13]<<8|t[12],G=i,j=s,$=a,z=u,y=h,T=p,nt=d,dt=b,lt=_,mt=S,f=I,l=M,w=W,D=H,P=tt,C=V,L=0;L<IE;L+=2)G=G+y|0,w^=G,w=w>>>16|w<<16,lt=lt+w|0,y^=lt,y=y>>>20|y<<12,j=j+T|0,D^=j,D=D>>>16|D<<16,mt=mt+D|0,T^=mt,T=T>>>20|T<<12,$=$+nt|0,P^=$,P=P>>>16|P<<16,f=f+P|0,nt^=f,nt=nt>>>20|nt<<12,z=z+dt|0,C^=z,C=C>>>16|C<<16,l=l+C|0,dt^=l,dt=dt>>>20|dt<<12,$=$+nt|0,P^=$,P=P>>>24|P<<8,f=f+P|0,nt^=f,nt=nt>>>25|nt<<7,z=z+dt|0,C^=z,C=C>>>24|C<<8,l=l+C|0,dt^=l,dt=dt>>>25|dt<<7,j=j+T|0,D^=j,D=D>>>24|D<<8,mt=mt+D|0,T^=mt,T=T>>>25|T<<7,G=G+y|0,w^=G,w=w>>>24|w<<8,lt=lt+w|0,y^=lt,y=y>>>25|y<<7,G=G+T|0,C^=G,C=C>>>16|C<<16,f=f+C|0,T^=f,T=T>>>20|T<<12,j=j+nt|0,w^=j,w=w>>>16|w<<16,l=l+w|0,nt^=l,nt=nt>>>20|nt<<12,$=$+dt|0,D^=$,D=D>>>16|D<<16,lt=lt+D|0,dt^=lt,dt=dt>>>20|dt<<12,z=z+y|0,P^=z,P=P>>>16|P<<16,mt=mt+P|0,y^=mt,y=y>>>20|y<<12,$=$+dt|0,D^=$,D=D>>>24|D<<8,lt=lt+D|0,dt^=lt,dt=dt>>>25|dt<<7,z=z+y|0,P^=z,P=P>>>24|P<<8,mt=mt+P|0,y^=mt,y=y>>>25|y<<7,j=j+nt|0,w^=j,w=w>>>24|w<<8,l=l+w|0,nt^=l,nt=nt>>>25|nt<<7,G=G+T|0,C^=G,C=C>>>24|C<<8,f=f+C|0,T^=f,T=T>>>25|T<<7;Er.writeUint32LE(G+i|0,r,0),Er.writeUint32LE(j+s|0,r,4),Er.writeUint32LE($+a|0,r,8),Er.writeUint32LE(z+u|0,r,12),Er.writeUint32LE(y+h|0,r,16),Er.writeUint32LE(T+p|0,r,20),Er.writeUint32LE(nt+d|0,r,24),Er.writeUint32LE(dt+b|0,r,28),Er.writeUint32LE(lt+_|0,r,32),Er.writeUint32LE(mt+S|0,r,36),Er.writeUint32LE(f+I|0,r,40),Er.writeUint32LE(l+M|0,r,44),Er.writeUint32LE(w+W|0,r,48),Er.writeUint32LE(D+H|0,r,52),Er.writeUint32LE(P+tt|0,r,56),Er.writeUint32LE(C+V|0,r,60)}function y1(r,t,e,i,s){if(s===void 0&&(s=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<e.length)throw new Error("ChaCha: destination is shorter than source");var a,u;if(s===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),u=a.length-t.length,a.set(t,u)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");a=t,u=s}for(var h=new Uint8Array(64),p=0;p<e.length;p+=64){DE(h,a,r);for(var d=p;d<p+64&&d<e.length;d++)i[d]=e[d]^h[d-p];ME(a,0,u)}return Il.wipe(h),s===0&&Il.wipe(a),i}hu.streamXOR=y1;function xE(r,t,e,i){return i===void 0&&(i=0),Il.wipe(e),y1(r,t,e,e,i)}hu.stream=xE;function ME(r,t,e){for(var i=1;e--;)i=i+(r[t]&255)|0,r[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var w1={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});function PE(r,t,e){return~(r-1)&t|r-1&e}Jn.select=PE;function OE(r,t){return(r|0)-(t|0)-1>>>31&1}Jn.lessOrEqual=OE;function b1(r,t){if(r.length!==t.length)return 0;for(var e=0,i=0;i<r.length;i++)e|=r[i]^t[i];return 1&e-1>>>8}Jn.compare=b1;function CE(r,t){return r.length===0||t.length===0?!1:b1(r,t)!==0}Jn.equal=CE;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var t=Jn,e=ni;r.DIGEST_LENGTH=16;var i=function(){function u(h){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var p=h[0]|h[1]<<8;this._r[0]=p&8191;var d=h[2]|h[3]<<8;this._r[1]=(p>>>13|d<<3)&8191;var b=h[4]|h[5]<<8;this._r[2]=(d>>>10|b<<6)&7939;var _=h[6]|h[7]<<8;this._r[3]=(b>>>7|_<<9)&8191;var S=h[8]|h[9]<<8;this._r[4]=(_>>>4|S<<12)&255,this._r[5]=S>>>1&8190;var I=h[10]|h[11]<<8;this._r[6]=(S>>>14|I<<2)&8191;var M=h[12]|h[13]<<8;this._r[7]=(I>>>11|M<<5)&8065;var W=h[14]|h[15]<<8;this._r[8]=(M>>>8|W<<8)&8191,this._r[9]=W>>>5&127,this._pad[0]=h[16]|h[17]<<8,this._pad[1]=h[18]|h[19]<<8,this._pad[2]=h[20]|h[21]<<8,this._pad[3]=h[22]|h[23]<<8,this._pad[4]=h[24]|h[25]<<8,this._pad[5]=h[26]|h[27]<<8,this._pad[6]=h[28]|h[29]<<8,this._pad[7]=h[30]|h[31]<<8}return u.prototype._blocks=function(h,p,d){for(var b=this._fin?0:2048,_=this._h[0],S=this._h[1],I=this._h[2],M=this._h[3],W=this._h[4],H=this._h[5],tt=this._h[6],V=this._h[7],G=this._h[8],j=this._h[9],$=this._r[0],z=this._r[1],y=this._r[2],T=this._r[3],nt=this._r[4],dt=this._r[5],lt=this._r[6],mt=this._r[7],f=this._r[8],l=this._r[9];d>=16;){var w=h[p+0]|h[p+1]<<8;_+=w&8191;var D=h[p+2]|h[p+3]<<8;S+=(w>>>13|D<<3)&8191;var P=h[p+4]|h[p+5]<<8;I+=(D>>>10|P<<6)&8191;var C=h[p+6]|h[p+7]<<8;M+=(P>>>7|C<<9)&8191;var L=h[p+8]|h[p+9]<<8;W+=(C>>>4|L<<12)&8191,H+=L>>>1&8191;var x=h[p+10]|h[p+11]<<8;tt+=(L>>>14|x<<2)&8191;var g=h[p+12]|h[p+13]<<8;V+=(x>>>11|g<<5)&8191;var N=h[p+14]|h[p+15]<<8;G+=(g>>>8|N<<8)&8191,j+=N>>>5|b;var it=0,ft=it;ft+=_*$,ft+=S*(5*l),ft+=I*(5*f),ft+=M*(5*mt),ft+=W*(5*lt),it=ft>>>13,ft&=8191,ft+=H*(5*dt),ft+=tt*(5*nt),ft+=V*(5*T),ft+=G*(5*y),ft+=j*(5*z),it+=ft>>>13,ft&=8191;var E=it;E+=_*z,E+=S*$,E+=I*(5*l),E+=M*(5*f),E+=W*(5*mt),it=E>>>13,E&=8191,E+=H*(5*lt),E+=tt*(5*dt),E+=V*(5*nt),E+=G*(5*T),E+=j*(5*y),it+=E>>>13,E&=8191;var Q=it;Q+=_*y,Q+=S*z,Q+=I*$,Q+=M*(5*l),Q+=W*(5*f),it=Q>>>13,Q&=8191,Q+=H*(5*mt),Q+=tt*(5*lt),Q+=V*(5*dt),Q+=G*(5*nt),Q+=j*(5*T),it+=Q>>>13,Q&=8191;var B=it;B+=_*T,B+=S*y,B+=I*z,B+=M*$,B+=W*(5*l),it=B>>>13,B&=8191,B+=H*(5*f),B+=tt*(5*mt),B+=V*(5*lt),B+=G*(5*dt),B+=j*(5*nt),it+=B>>>13,B&=8191;var F=it;F+=_*nt,F+=S*T,F+=I*y,F+=M*z,F+=W*$,it=F>>>13,F&=8191,F+=H*(5*l),F+=tt*(5*f),F+=V*(5*mt),F+=G*(5*lt),F+=j*(5*dt),it+=F>>>13,F&=8191;var k=it;k+=_*dt,k+=S*nt,k+=I*T,k+=M*y,k+=W*z,it=k>>>13,k&=8191,k+=H*$,k+=tt*(5*l),k+=V*(5*f),k+=G*(5*mt),k+=j*(5*lt),it+=k>>>13,k&=8191;var m=it;m+=_*lt,m+=S*dt,m+=I*nt,m+=M*T,m+=W*y,it=m>>>13,m&=8191,m+=H*z,m+=tt*$,m+=V*(5*l),m+=G*(5*f),m+=j*(5*mt),it+=m>>>13,m&=8191;var U=it;U+=_*mt,U+=S*lt,U+=I*dt,U+=M*nt,U+=W*T,it=U>>>13,U&=8191,U+=H*y,U+=tt*z,U+=V*$,U+=G*(5*l),U+=j*(5*f),it+=U>>>13,U&=8191;var et=it;et+=_*f,et+=S*mt,et+=I*lt,et+=M*dt,et+=W*nt,it=et>>>13,et&=8191,et+=H*T,et+=tt*y,et+=V*z,et+=G*$,et+=j*(5*l),it+=et>>>13,et&=8191;var at=it;at+=_*l,at+=S*f,at+=I*mt,at+=M*lt,at+=W*dt,it=at>>>13,at&=8191,at+=H*nt,at+=tt*T,at+=V*y,at+=G*z,at+=j*$,it+=at>>>13,at&=8191,it=(it<<2)+it|0,it=it+ft|0,ft=it&8191,it=it>>>13,E+=it,_=ft,S=E,I=Q,M=B,W=F,H=k,tt=m,V=U,G=et,j=at,p+=16,d-=16}this._h[0]=_,this._h[1]=S,this._h[2]=I,this._h[3]=M,this._h[4]=W,this._h[5]=H,this._h[6]=tt,this._h[7]=V,this._h[8]=G,this._h[9]=j},u.prototype.finish=function(h,p){p===void 0&&(p=0);var d=new Uint16Array(10),b,_,S,I;if(this._leftover){for(I=this._leftover,this._buffer[I++]=1;I<16;I++)this._buffer[I]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(b=this._h[1]>>>13,this._h[1]&=8191,I=2;I<10;I++)this._h[I]+=b,b=this._h[I]>>>13,this._h[I]&=8191;for(this._h[0]+=b*5,b=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=b,b=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=b,d[0]=this._h[0]+5,b=d[0]>>>13,d[0]&=8191,I=1;I<10;I++)d[I]=this._h[I]+b,b=d[I]>>>13,d[I]&=8191;for(d[9]-=8192,_=(b^1)-1,I=0;I<10;I++)d[I]&=_;for(_=~_,I=0;I<10;I++)this._h[I]=this._h[I]&_|d[I];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,S=this._h[0]+this._pad[0],this._h[0]=S&65535,I=1;I<8;I++)S=(this._h[I]+this._pad[I]|0)+(S>>>16)|0,this._h[I]=S&65535;return h[p+0]=this._h[0]>>>0,h[p+1]=this._h[0]>>>8,h[p+2]=this._h[1]>>>0,h[p+3]=this._h[1]>>>8,h[p+4]=this._h[2]>>>0,h[p+5]=this._h[2]>>>8,h[p+6]=this._h[3]>>>0,h[p+7]=this._h[3]>>>8,h[p+8]=this._h[4]>>>0,h[p+9]=this._h[4]>>>8,h[p+10]=this._h[5]>>>0,h[p+11]=this._h[5]>>>8,h[p+12]=this._h[6]>>>0,h[p+13]=this._h[6]>>>8,h[p+14]=this._h[7]>>>0,h[p+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(h){var p=0,d=h.length,b;if(this._leftover){b=16-this._leftover,b>d&&(b=d);for(var _=0;_<b;_++)this._buffer[this._leftover+_]=h[p+_];if(d-=b,p+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(d>=16&&(b=d-d%16,this._blocks(h,p,b),p+=b,d-=b),d){for(var _=0;_<d;_++)this._buffer[this._leftover+_]=h[p+_];this._leftover+=d}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var h=new Uint8Array(16);return this.finish(h),h},u.prototype.clean=function(){return e.wipe(this._buffer),e.wipe(this._r),e.wipe(this._h),e.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();r.Poly1305=i;function s(u,h){var p=new i(u);p.update(h);var d=p.digest();return p.clean(),d}r.oneTimeAuth=s;function a(u,h){return u.length!==r.DIGEST_LENGTH||h.length!==r.DIGEST_LENGTH?!1:t.equal(u,h)}r.equal=a})(w1);(function(r){Object.defineProperty(r,"__esModule",{value:!0});var t=hu,e=w1,i=ni,s=oe,a=Jn;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var u=new Uint8Array(16),h=function(){function p(d){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,d.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(d)}return p.prototype.seal=function(d,b,_,S){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var I=new Uint8Array(16);I.set(d,I.length-d.length);var M=new Uint8Array(32);t.stream(this._key,I,M,4);var W=b.length+this.tagLength,H;if(S){if(S.length!==W)throw new Error("ChaCha20Poly1305: incorrect destination length");H=S}else H=new Uint8Array(W);return t.streamXOR(this._key,I,b,H,4),this._authenticate(H.subarray(H.length-this.tagLength,H.length),M,H.subarray(0,H.length-this.tagLength),_),i.wipe(I),H},p.prototype.open=function(d,b,_,S){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var I=new Uint8Array(16);I.set(d,I.length-d.length);var M=new Uint8Array(32);t.stream(this._key,I,M,4);var W=new Uint8Array(this.tagLength);if(this._authenticate(W,M,b.subarray(0,b.length-this.tagLength),_),!a.equal(W,b.subarray(b.length-this.tagLength,b.length)))return null;var H=b.length-this.tagLength,tt;if(S){if(S.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");tt=S}else tt=new Uint8Array(H);return t.streamXOR(this._key,I,b.subarray(0,b.length-this.tagLength),tt,4),i.wipe(I),tt},p.prototype.clean=function(){return i.wipe(this._key),this},p.prototype._authenticate=function(d,b,_,S){var I=new e.Poly1305(b);S&&(I.update(S),S.length%16>0&&I.update(u.subarray(S.length%16))),I.update(_),_.length%16>0&&I.update(u.subarray(_.length%16));var M=new Uint8Array(8);S&&s.writeUint64LE(S.length,M),I.update(M),s.writeUint64LE(_.length,M),I.update(M);for(var W=I.digest(),H=0;H<W.length;H++)d[H]=W[H];I.clean(),i.wipe(W),i.wipe(M)},p}();r.ChaCha20Poly1305=h})(Zl);var _1={},ga={},tf={};Object.defineProperty(tf,"__esModule",{value:!0});function NE(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}tf.isSerializableHash=NE;Object.defineProperty(ga,"__esModule",{value:!0});var Gi=tf,RE=Jn,TE=ni,E1=function(){function r(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(i).clean():i.set(e);for(var s=0;s<i.length;s++)i[s]^=54;this._inner.update(i);for(var s=0;s<i.length;s++)i[s]^=106;this._outer.update(i),Gi.isSerializableHash(this._inner)&&Gi.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),TE.wipe(i)}return r.prototype.reset=function(){if(!Gi.isSerializableHash(this._inner)||!Gi.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){Gi.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Gi.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(t){return this._inner.update(t),this},r.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},r.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},r.prototype.saveState=function(){if(!Gi.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(t){if(!Gi.isSerializableHash(this._inner)||!Gi.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(t){if(!Gi.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},r}();ga.HMAC=E1;function LE(r,t,e){var i=new E1(r,t);i.update(e);var s=i.digest();return i.clean(),s}ga.hmac=LE;ga.equal=RE.equal;Object.defineProperty(_1,"__esModule",{value:!0});var Fp=ga,zp=ni,UE=function(){function r(t,e,i,s){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=s;var a=Fp.hmac(this._hash,i,e);this._hmac=new Fp.HMAC(t,a),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(t){for(var e=new Uint8Array(t),i=0;i<e.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[i]=this._buffer[this._bufpos++];return e},r.prototype.clean=function(){this._hmac.clean(),zp.wipe(this._buffer),zp.wipe(this._counter),this._bufpos=0},r}(),BE=_1.HKDF=UE,fo={},lu={},fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.BrowserRandomSource=void 0;const kp=65536;class jE{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const e=new Uint8Array(t);for(let i=0;i<e.length;i+=kp)this._crypto.getRandomValues(e.subarray(i,i+Math.min(e.length-i,kp)));return e}}fu.BrowserRandomSource=jE;function qE(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var du={};const $E={},FE=Object.freeze(Object.defineProperty({__proto__:null,default:$E},Symbol.toStringTag,{value:"Module"})),zE=Gl(FE);Object.defineProperty(du,"__esModule",{value:!0});du.NodeRandomSource=void 0;const kE=ni;class HE{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof qE<"u"){const t=zE;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(t);for(let s=0;s<i.length;s++)i[s]=e[s];return(0,kE.wipe)(e),i}}du.NodeRandomSource=HE;Object.defineProperty(lu,"__esModule",{value:!0});lu.SystemRandomSource=void 0;const KE=fu,VE=du;class GE{constructor(){if(this.isAvailable=!1,this.name="",this._source=new KE.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new VE.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}lu.SystemRandomSource=GE;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const t=lu,e=oe,i=ni;r.defaultRandomSource=new t.SystemRandomSource;function s(d,b=r.defaultRandomSource){return b.randomBytes(d)}r.randomBytes=s;function a(d=r.defaultRandomSource){const b=s(4,d),_=(0,e.readUint32LE)(b);return(0,i.wipe)(b),_}r.randomUint32=a;const u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function h(d,b=u,_=r.defaultRandomSource){if(b.length<2)throw new Error("randomString charset is too short");if(b.length>256)throw new Error("randomString charset is too long");let S="";const I=b.length,M=256-256%I;for(;d>0;){const W=s(Math.ceil(d*256/M),_);for(let H=0;H<W.length&&d>0;H++){const tt=W[H];tt<M&&(S+=b.charAt(tt%I),d--)}(0,i.wipe)(W)}return S}r.randomString=h;function p(d,b=u,_=r.defaultRandomSource){const S=Math.ceil(d/(Math.log(b.length)/Math.LN2));return h(S,b,_)}r.randomStringForEntropy=p})(fo);var pu={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var t=oe,e=ni;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var i=function(){function h(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return h.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},h.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},h.prototype.clean=function(){e.wipe(this._buffer),e.wipe(this._temp),this.reset()},h.prototype.update=function(p,d){if(d===void 0&&(d=p.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var b=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&d>0;)this._buffer[this._bufferLength++]=p[b++],d--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(b=a(this._temp,this._state,p,b,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=p[b++],d--;return this},h.prototype.finish=function(p){if(!this._finished){var d=this._bytesHashed,b=this._bufferLength,_=d/536870912|0,S=d<<3,I=d%64<56?64:128;this._buffer[b]=128;for(var M=b+1;M<I-8;M++)this._buffer[M]=0;t.writeUint32BE(_,this._buffer,I-8),t.writeUint32BE(S,this._buffer,I-4),a(this._temp,this._state,this._buffer,0,I),this._finished=!0}for(var M=0;M<this.digestLength/4;M++)t.writeUint32BE(this._state[M],p,M*4);return this},h.prototype.digest=function(){var p=new Uint8Array(this.digestLength);return this.finish(p),p},h.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},h.prototype.restoreState=function(p){return this._state.set(p.state),this._bufferLength=p.bufferLength,p.buffer&&this._buffer.set(p.buffer),this._bytesHashed=p.bytesHashed,this._finished=!1,this},h.prototype.cleanSavedState=function(p){e.wipe(p.state),p.buffer&&e.wipe(p.buffer),p.bufferLength=0,p.bytesHashed=0},h}();r.SHA256=i;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(h,p,d,b,_){for(;_>=64;){for(var S=p[0],I=p[1],M=p[2],W=p[3],H=p[4],tt=p[5],V=p[6],G=p[7],j=0;j<16;j++){var $=b+j*4;h[j]=t.readUint32BE(d,$)}for(var j=16;j<64;j++){var z=h[j-2],y=(z>>>17|z<<15)^(z>>>19|z<<13)^z>>>10;z=h[j-15];var T=(z>>>7|z<<25)^(z>>>18|z<<14)^z>>>3;h[j]=(y+h[j-7]|0)+(T+h[j-16]|0)}for(var j=0;j<64;j++){var y=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&tt^~H&V)|0)+(G+(s[j]+h[j]|0)|0)|0,T=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&I^S&M^I&M)|0;G=V,V=tt,tt=H,H=W+y|0,W=M,M=I,I=S,S=y+T|0}p[0]+=S,p[1]+=I,p[2]+=M,p[3]+=W,p[4]+=H,p[5]+=tt,p[6]+=V,p[7]+=G,b+=64,_-=64}return b}function u(h){var p=new i;p.update(h);var d=p.digest();return p.clean(),d}r.hash=u})(pu);var ef={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const t=fo,e=ni;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(j){const $=new Float64Array(16);if(j)for(let z=0;z<j.length;z++)$[z]=j[z];return $}const s=new Uint8Array(32);s[0]=9;const a=i([56129,1]);function u(j){let $=1;for(let z=0;z<16;z++){let y=j[z]+$+65535;$=Math.floor(y/65536),j[z]=y-$*65536}j[0]+=$-1+37*($-1)}function h(j,$,z){const y=~(z-1);for(let T=0;T<16;T++){const nt=y&(j[T]^$[T]);j[T]^=nt,$[T]^=nt}}function p(j,$){const z=i(),y=i();for(let T=0;T<16;T++)y[T]=$[T];u(y),u(y),u(y);for(let T=0;T<2;T++){z[0]=y[0]-65517;for(let dt=1;dt<15;dt++)z[dt]=y[dt]-65535-(z[dt-1]>>16&1),z[dt-1]&=65535;z[15]=y[15]-32767-(z[14]>>16&1);const nt=z[15]>>16&1;z[14]&=65535,h(y,z,1-nt)}for(let T=0;T<16;T++)j[2*T]=y[T]&255,j[2*T+1]=y[T]>>8}function d(j,$){for(let z=0;z<16;z++)j[z]=$[2*z]+($[2*z+1]<<8);j[15]&=32767}function b(j,$,z){for(let y=0;y<16;y++)j[y]=$[y]+z[y]}function _(j,$,z){for(let y=0;y<16;y++)j[y]=$[y]-z[y]}function S(j,$,z){let y,T,nt=0,dt=0,lt=0,mt=0,f=0,l=0,w=0,D=0,P=0,C=0,L=0,x=0,g=0,N=0,it=0,ft=0,E=0,Q=0,B=0,F=0,k=0,m=0,U=0,et=0,at=0,ct=0,Mt=0,Ct=0,Dt=0,Ee=0,qt=0,Pt=z[0],Ut=z[1],Et=z[2],At=z[3],Ht=z[4],wt=z[5],St=z[6],Bt=z[7],bt=z[8],Ot=z[9],Qt=z[10],_t=z[11],Nt=z[12],ie=z[13],Tt=z[14],Lt=z[15];y=$[0],nt+=y*Pt,dt+=y*Ut,lt+=y*Et,mt+=y*At,f+=y*Ht,l+=y*wt,w+=y*St,D+=y*Bt,P+=y*bt,C+=y*Ot,L+=y*Qt,x+=y*_t,g+=y*Nt,N+=y*ie,it+=y*Tt,ft+=y*Lt,y=$[1],dt+=y*Pt,lt+=y*Ut,mt+=y*Et,f+=y*At,l+=y*Ht,w+=y*wt,D+=y*St,P+=y*Bt,C+=y*bt,L+=y*Ot,x+=y*Qt,g+=y*_t,N+=y*Nt,it+=y*ie,ft+=y*Tt,E+=y*Lt,y=$[2],lt+=y*Pt,mt+=y*Ut,f+=y*Et,l+=y*At,w+=y*Ht,D+=y*wt,P+=y*St,C+=y*Bt,L+=y*bt,x+=y*Ot,g+=y*Qt,N+=y*_t,it+=y*Nt,ft+=y*ie,E+=y*Tt,Q+=y*Lt,y=$[3],mt+=y*Pt,f+=y*Ut,l+=y*Et,w+=y*At,D+=y*Ht,P+=y*wt,C+=y*St,L+=y*Bt,x+=y*bt,g+=y*Ot,N+=y*Qt,it+=y*_t,ft+=y*Nt,E+=y*ie,Q+=y*Tt,B+=y*Lt,y=$[4],f+=y*Pt,l+=y*Ut,w+=y*Et,D+=y*At,P+=y*Ht,C+=y*wt,L+=y*St,x+=y*Bt,g+=y*bt,N+=y*Ot,it+=y*Qt,ft+=y*_t,E+=y*Nt,Q+=y*ie,B+=y*Tt,F+=y*Lt,y=$[5],l+=y*Pt,w+=y*Ut,D+=y*Et,P+=y*At,C+=y*Ht,L+=y*wt,x+=y*St,g+=y*Bt,N+=y*bt,it+=y*Ot,ft+=y*Qt,E+=y*_t,Q+=y*Nt,B+=y*ie,F+=y*Tt,k+=y*Lt,y=$[6],w+=y*Pt,D+=y*Ut,P+=y*Et,C+=y*At,L+=y*Ht,x+=y*wt,g+=y*St,N+=y*Bt,it+=y*bt,ft+=y*Ot,E+=y*Qt,Q+=y*_t,B+=y*Nt,F+=y*ie,k+=y*Tt,m+=y*Lt,y=$[7],D+=y*Pt,P+=y*Ut,C+=y*Et,L+=y*At,x+=y*Ht,g+=y*wt,N+=y*St,it+=y*Bt,ft+=y*bt,E+=y*Ot,Q+=y*Qt,B+=y*_t,F+=y*Nt,k+=y*ie,m+=y*Tt,U+=y*Lt,y=$[8],P+=y*Pt,C+=y*Ut,L+=y*Et,x+=y*At,g+=y*Ht,N+=y*wt,it+=y*St,ft+=y*Bt,E+=y*bt,Q+=y*Ot,B+=y*Qt,F+=y*_t,k+=y*Nt,m+=y*ie,U+=y*Tt,et+=y*Lt,y=$[9],C+=y*Pt,L+=y*Ut,x+=y*Et,g+=y*At,N+=y*Ht,it+=y*wt,ft+=y*St,E+=y*Bt,Q+=y*bt,B+=y*Ot,F+=y*Qt,k+=y*_t,m+=y*Nt,U+=y*ie,et+=y*Tt,at+=y*Lt,y=$[10],L+=y*Pt,x+=y*Ut,g+=y*Et,N+=y*At,it+=y*Ht,ft+=y*wt,E+=y*St,Q+=y*Bt,B+=y*bt,F+=y*Ot,k+=y*Qt,m+=y*_t,U+=y*Nt,et+=y*ie,at+=y*Tt,ct+=y*Lt,y=$[11],x+=y*Pt,g+=y*Ut,N+=y*Et,it+=y*At,ft+=y*Ht,E+=y*wt,Q+=y*St,B+=y*Bt,F+=y*bt,k+=y*Ot,m+=y*Qt,U+=y*_t,et+=y*Nt,at+=y*ie,ct+=y*Tt,Mt+=y*Lt,y=$[12],g+=y*Pt,N+=y*Ut,it+=y*Et,ft+=y*At,E+=y*Ht,Q+=y*wt,B+=y*St,F+=y*Bt,k+=y*bt,m+=y*Ot,U+=y*Qt,et+=y*_t,at+=y*Nt,ct+=y*ie,Mt+=y*Tt,Ct+=y*Lt,y=$[13],N+=y*Pt,it+=y*Ut,ft+=y*Et,E+=y*At,Q+=y*Ht,B+=y*wt,F+=y*St,k+=y*Bt,m+=y*bt,U+=y*Ot,et+=y*Qt,at+=y*_t,ct+=y*Nt,Mt+=y*ie,Ct+=y*Tt,Dt+=y*Lt,y=$[14],it+=y*Pt,ft+=y*Ut,E+=y*Et,Q+=y*At,B+=y*Ht,F+=y*wt,k+=y*St,m+=y*Bt,U+=y*bt,et+=y*Ot,at+=y*Qt,ct+=y*_t,Mt+=y*Nt,Ct+=y*ie,Dt+=y*Tt,Ee+=y*Lt,y=$[15],ft+=y*Pt,E+=y*Ut,Q+=y*Et,B+=y*At,F+=y*Ht,k+=y*wt,m+=y*St,U+=y*Bt,et+=y*bt,at+=y*Ot,ct+=y*Qt,Mt+=y*_t,Ct+=y*Nt,Dt+=y*ie,Ee+=y*Tt,qt+=y*Lt,nt+=38*E,dt+=38*Q,lt+=38*B,mt+=38*F,f+=38*k,l+=38*m,w+=38*U,D+=38*et,P+=38*at,C+=38*ct,L+=38*Mt,x+=38*Ct,g+=38*Dt,N+=38*Ee,it+=38*qt,T=1,y=nt+T+65535,T=Math.floor(y/65536),nt=y-T*65536,y=dt+T+65535,T=Math.floor(y/65536),dt=y-T*65536,y=lt+T+65535,T=Math.floor(y/65536),lt=y-T*65536,y=mt+T+65535,T=Math.floor(y/65536),mt=y-T*65536,y=f+T+65535,T=Math.floor(y/65536),f=y-T*65536,y=l+T+65535,T=Math.floor(y/65536),l=y-T*65536,y=w+T+65535,T=Math.floor(y/65536),w=y-T*65536,y=D+T+65535,T=Math.floor(y/65536),D=y-T*65536,y=P+T+65535,T=Math.floor(y/65536),P=y-T*65536,y=C+T+65535,T=Math.floor(y/65536),C=y-T*65536,y=L+T+65535,T=Math.floor(y/65536),L=y-T*65536,y=x+T+65535,T=Math.floor(y/65536),x=y-T*65536,y=g+T+65535,T=Math.floor(y/65536),g=y-T*65536,y=N+T+65535,T=Math.floor(y/65536),N=y-T*65536,y=it+T+65535,T=Math.floor(y/65536),it=y-T*65536,y=ft+T+65535,T=Math.floor(y/65536),ft=y-T*65536,nt+=T-1+37*(T-1),T=1,y=nt+T+65535,T=Math.floor(y/65536),nt=y-T*65536,y=dt+T+65535,T=Math.floor(y/65536),dt=y-T*65536,y=lt+T+65535,T=Math.floor(y/65536),lt=y-T*65536,y=mt+T+65535,T=Math.floor(y/65536),mt=y-T*65536,y=f+T+65535,T=Math.floor(y/65536),f=y-T*65536,y=l+T+65535,T=Math.floor(y/65536),l=y-T*65536,y=w+T+65535,T=Math.floor(y/65536),w=y-T*65536,y=D+T+65535,T=Math.floor(y/65536),D=y-T*65536,y=P+T+65535,T=Math.floor(y/65536),P=y-T*65536,y=C+T+65535,T=Math.floor(y/65536),C=y-T*65536,y=L+T+65535,T=Math.floor(y/65536),L=y-T*65536,y=x+T+65535,T=Math.floor(y/65536),x=y-T*65536,y=g+T+65535,T=Math.floor(y/65536),g=y-T*65536,y=N+T+65535,T=Math.floor(y/65536),N=y-T*65536,y=it+T+65535,T=Math.floor(y/65536),it=y-T*65536,y=ft+T+65535,T=Math.floor(y/65536),ft=y-T*65536,nt+=T-1+37*(T-1),j[0]=nt,j[1]=dt,j[2]=lt,j[3]=mt,j[4]=f,j[5]=l,j[6]=w,j[7]=D,j[8]=P,j[9]=C,j[10]=L,j[11]=x,j[12]=g,j[13]=N,j[14]=it,j[15]=ft}function I(j,$){S(j,$,$)}function M(j,$){const z=i();for(let y=0;y<16;y++)z[y]=$[y];for(let y=253;y>=0;y--)I(z,z),y!==2&&y!==4&&S(z,z,$);for(let y=0;y<16;y++)j[y]=z[y]}function W(j,$){const z=new Uint8Array(32),y=new Float64Array(80),T=i(),nt=i(),dt=i(),lt=i(),mt=i(),f=i();for(let P=0;P<31;P++)z[P]=j[P];z[31]=j[31]&127|64,z[0]&=248,d(y,$);for(let P=0;P<16;P++)nt[P]=y[P];T[0]=lt[0]=1;for(let P=254;P>=0;--P){const C=z[P>>>3]>>>(P&7)&1;h(T,nt,C),h(dt,lt,C),b(mt,T,dt),_(T,T,dt),b(dt,nt,lt),_(nt,nt,lt),I(lt,mt),I(f,T),S(T,dt,T),S(dt,nt,mt),b(mt,T,dt),_(T,T,dt),I(nt,T),_(dt,lt,f),S(T,dt,a),b(T,T,lt),S(dt,dt,T),S(T,lt,f),S(lt,nt,y),I(nt,mt),h(T,nt,C),h(dt,lt,C)}for(let P=0;P<16;P++)y[P+16]=T[P],y[P+32]=dt[P],y[P+48]=nt[P],y[P+64]=lt[P];const l=y.subarray(32),w=y.subarray(16);M(l,l),S(w,w,l);const D=new Uint8Array(32);return p(D,w),D}r.scalarMult=W;function H(j){return W(j,s)}r.scalarMultBase=H;function tt(j){if(j.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const $=new Uint8Array(j);return{publicKey:H($),secretKey:$}}r.generateKeyPairFromSeed=tt;function V(j){const $=(0,t.randomBytes)(32,j),z=tt($);return(0,e.wipe)($),z}r.generateKeyPair=V;function G(j,$,z=!1){if(j.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if($.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const y=W(j,$);if(z){let T=0;for(let nt=0;nt<y.length;nt++)T|=y[nt];if(T===0)throw new Error("X25519: invalid shared key")}return y}r.sharedKey=G})(ef);function A1(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Hp(r,t){t||(t=r.reduce((s,a)=>s+a.length,0));const e=A1(t);let i=0;for(const s of r)e.set(s,i),i+=s.length;return e}function WE(r,t){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),i=0;i<e.length;i++)e[i]=255;for(var s=0;s<r.length;s++){var a=r.charAt(s),u=a.charCodeAt(0);if(e[u]!==255)throw new TypeError(a+" is ambiguous");e[u]=s}var h=r.length,p=r.charAt(0),d=Math.log(h)/Math.log(256),b=Math.log(256)/Math.log(h);function _(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var W=0,H=0,tt=0,V=M.length;tt!==V&&M[tt]===0;)tt++,W++;for(var G=(V-tt)*b+1>>>0,j=new Uint8Array(G);tt!==V;){for(var $=M[tt],z=0,y=G-1;($!==0||z<H)&&y!==-1;y--,z++)$+=256*j[y]>>>0,j[y]=$%h>>>0,$=$/h>>>0;if($!==0)throw new Error("Non-zero carry");H=z,tt++}for(var T=G-H;T!==G&&j[T]===0;)T++;for(var nt=p.repeat(W);T<G;++T)nt+=r.charAt(j[T]);return nt}function S(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var W=0;if(M[W]!==" "){for(var H=0,tt=0;M[W]===p;)H++,W++;for(var V=(M.length-W)*d+1>>>0,G=new Uint8Array(V);M[W];){var j=e[M.charCodeAt(W)];if(j===255)return;for(var $=0,z=V-1;(j!==0||$<tt)&&z!==-1;z--,$++)j+=h*G[z]>>>0,G[z]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");tt=$,W++}if(M[W]!==" "){for(var y=V-tt;y!==V&&G[y]===0;)y++;for(var T=new Uint8Array(H+(V-y)),nt=H;y!==V;)T[nt++]=G[y++];return T}}}function I(M){var W=S(M);if(W)return W;throw new Error(`Non-${t} character`)}return{encode:_,decodeUnsafe:S,decode:I}}var YE=WE,QE=YE;const JE=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},XE=r=>new TextEncoder().encode(r),ZE=r=>new TextDecoder().decode(r);class tA{constructor(t,e,i){this.name=t,this.prefix=e,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class eA{constructor(t,e,i){if(this.name=t,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return S1(this,t)}}class rA{constructor(t){this.decoders=t}or(t){return S1(this,t)}decode(t){const e=t[0],i=this.decoders[e];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const S1=(r,t)=>new rA({...r.decoders||{[r.prefix]:r},...t.decoders||{[t.prefix]:t}});class iA{constructor(t,e,i,s){this.name=t,this.prefix=e,this.baseEncode=i,this.baseDecode=s,this.encoder=new tA(t,e,i),this.decoder=new eA(t,e,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const gu=({name:r,prefix:t,encode:e,decode:i})=>new iA(r,t,e,i),ma=({prefix:r,name:t,alphabet:e})=>{const{encode:i,decode:s}=QE(e,t);return gu({prefix:r,name:t,encode:i,decode:a=>JE(s(a))})},nA=(r,t,e,i)=>{const s={};for(let b=0;b<t.length;++b)s[t[b]]=b;let a=r.length;for(;r[a-1]==="=";)--a;const u=new Uint8Array(a*e/8|0);let h=0,p=0,d=0;for(let b=0;b<a;++b){const _=s[r[b]];if(_===void 0)throw new SyntaxError(`Non-${i} character`);p=p<<e|_,h+=e,h>=8&&(h-=8,u[d++]=255&p>>h)}if(h>=e||255&p<<8-h)throw new SyntaxError("Unexpected end of data");return u},sA=(r,t,e)=>{const i=t[t.length-1]==="=",s=(1<<e)-1;let a="",u=0,h=0;for(let p=0;p<r.length;++p)for(h=h<<8|r[p],u+=8;u>e;)u-=e,a+=t[s&h>>u];if(u&&(a+=t[s&h<<e-u]),i)for(;a.length*e&7;)a+="=";return a},mr=({name:r,prefix:t,bitsPerChar:e,alphabet:i})=>gu({prefix:t,name:r,encode(s){return sA(s,i,e)},decode(s){return nA(s,i,e,r)}}),oA=gu({prefix:"\0",name:"identity",encode:r=>ZE(r),decode:r=>XE(r)}),aA=Object.freeze(Object.defineProperty({__proto__:null,identity:oA},Symbol.toStringTag,{value:"Module"})),cA=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),uA=Object.freeze(Object.defineProperty({__proto__:null,base2:cA},Symbol.toStringTag,{value:"Module"})),hA=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),lA=Object.freeze(Object.defineProperty({__proto__:null,base8:hA},Symbol.toStringTag,{value:"Module"})),fA=ma({prefix:"9",name:"base10",alphabet:"0123456789"}),dA=Object.freeze(Object.defineProperty({__proto__:null,base10:fA},Symbol.toStringTag,{value:"Module"})),pA=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gA=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),mA=Object.freeze(Object.defineProperty({__proto__:null,base16:pA,base16upper:gA},Symbol.toStringTag,{value:"Module"})),vA=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yA=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wA=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bA=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_A=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),EA=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),AA=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),SA=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),IA=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),DA=Object.freeze(Object.defineProperty({__proto__:null,base32:vA,base32hex:_A,base32hexpad:AA,base32hexpadupper:SA,base32hexupper:EA,base32pad:wA,base32padupper:bA,base32upper:yA,base32z:IA},Symbol.toStringTag,{value:"Module"})),xA=ma({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),MA=ma({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),PA=Object.freeze(Object.defineProperty({__proto__:null,base36:xA,base36upper:MA},Symbol.toStringTag,{value:"Module"})),OA=ma({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),CA=ma({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),NA=Object.freeze(Object.defineProperty({__proto__:null,base58btc:OA,base58flickr:CA},Symbol.toStringTag,{value:"Module"})),RA=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),TA=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),LA=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),UA=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),BA=Object.freeze(Object.defineProperty({__proto__:null,base64:RA,base64pad:TA,base64url:LA,base64urlpad:UA},Symbol.toStringTag,{value:"Module"})),I1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),jA=I1.reduce((r,t,e)=>(r[e]=t,r),[]),qA=I1.reduce((r,t,e)=>(r[t.codePointAt(0)]=e,r),[]);function $A(r){return r.reduce((t,e)=>(t+=jA[e],t),"")}function FA(r){const t=[];for(const e of r){const i=qA[e.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${e}`);t.push(i)}return new Uint8Array(t)}const zA=gu({prefix:"🚀",name:"base256emoji",encode:$A,decode:FA}),kA=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:zA},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Qc={...aA,...uA,...lA,...dA,...mA,...DA,...PA,...NA,...BA,...kA};function D1(r,t,e,i){return{name:r,prefix:t,encoder:{name:r,prefix:t,encode:e},decoder:{decode:i}}}const Kp=D1("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),qh=D1("ascii","a",r=>{let t="a";for(let e=0;e<r.length;e++)t+=String.fromCharCode(r[e]);return t},r=>{r=r.substring(1);const t=A1(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return t}),x1={utf8:Kp,"utf-8":Kp,hex:Qc.base16,latin1:qh,ascii:qh,binary:qh,...Qc};function $i(r,t="utf8"){const e=x1[t];if(!e)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):e.decoder.decode(`${e.prefix}${r}`)}function Ii(r,t="utf8"){const e=x1[t];if(!e)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):e.encoder.encode(r).substring(1)}const HA={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Ke={};const KA=":";function jc(r){const[t,e]=r.split(KA);return{namespace:t,reference:e}}function Vp(r,t=[]){const e=[];return Object.keys(r).forEach(i=>{if(t.length&&!t.includes(i))return;const s=r[i];e.push(...s.accounts)}),e}function M1(r,t){return r.includes(":")?[r]:t.chains||[]}var VA=Object.defineProperty,Gp=Object.getOwnPropertySymbols,GA=Object.prototype.hasOwnProperty,WA=Object.prototype.propertyIsEnumerable,Wp=(r,t,e)=>t in r?VA(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Yp=(r,t)=>{for(var e in t||(t={}))GA.call(t,e)&&Wp(r,e,t[e]);if(Gp)for(var e of Gp(t))WA.call(t,e)&&Wp(r,e,t[e]);return r};const YA="ReactNative",ti={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},QA="js";function ca(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function po(){return!Ql()&&!!Jl()&&navigator.product===YA}function go(){return!ca()&&!!Jl()&&!!Ql()}function va(){return po()?ti.reactNative:ca()?ti.node:go()?ti.browser:ti.unknown}function JA(){var r;try{return po()&&typeof Ke<"u"&&typeof(Ke==null?void 0:Ke.Application)<"u"?(r=Ke.Application)==null?void 0:r.applicationId:void 0}catch{return}}function XA(r,t){let e=aa.parse(r);return e=Yp(Yp({},e),t),r=aa.stringify(e),r}function ZA(){return h1()||{name:"",description:"",url:"",icons:[""]}}function t5(){if(va()===ti.reactNative&&typeof Ke<"u"&&typeof(Ke==null?void 0:Ke.Platform)<"u"){const{OS:e,Version:i}=Ke.Platform;return[e,i].join("-")}const r=a6();if(r===null)return"unknown";const t=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[t,r.name,r.version].join("-"):[t,r.version].join("-")}function e5(){var r;const t=va();return t===ti.browser?[t,((r=u1())==null?void 0:r.host)||"unknown"].join(":"):t}function r5(r,t,e){const i=t5(),s=e5();return[[r,t].join("-"),[QA,e].join("-"),i,s].join("/")}function i5({protocol:r,version:t,relayUrl:e,sdkVersion:i,auth:s,projectId:a,useOnCloseEvent:u,bundleId:h}){const p=e.split("?"),d=r5(r,t,i),b={auth:s,ua:d,projectId:a,useOnCloseEvent:u||void 0,origin:h||void 0},_=XA(p[1]||"",b);return p[0]+"?"+_}function bs(r,t){return r.filter(e=>t.includes(e)).length===r.length}function P1(r){return Object.fromEntries(r.entries())}function O1(r){return new Map(Object.entries(r))}function ws(r=yt.FIVE_MINUTES,t){const e=yt.toMiliseconds(r||yt.FIVE_MINUTES);let i,s,a;return{resolve:u=>{a&&i&&(clearTimeout(a),i(u))},reject:u=>{a&&s&&(clearTimeout(a),s(u))},done:()=>new Promise((u,h)=>{a=setTimeout(()=>{h(new Error(t))},e),i=u,s=h})}}function no(r,t,e){return new Promise(async(i,s)=>{const a=setTimeout(()=>s(new Error(e)),t);try{const u=await r;i(u)}catch(u){s(u)}clearTimeout(a)})}function C1(r,t){if(typeof t=="string"&&t.startsWith(`${r}:`))return t;if(r.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(r.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${r}`)}function n5(r){return C1("topic",r)}function s5(r){return C1("id",r)}function N1(r){const[t,e]=r.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof e=="string")i.topic=e;else if(t==="id"&&Number.isInteger(Number(e)))i.id=Number(e);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${e}`);return i}function pr(r,t){return yt.fromMiliseconds(Date.now()+yt.toMiliseconds(r))}function Hn(r){return Date.now()>=yt.toMiliseconds(r)}function pe(r,t){return`${r}${t?`:${t}`:""}`}function qc(r=[],t=[]){return[...new Set([...r,...t])]}async function o5({id:r,topic:t,wcDeepLink:e}){try{if(!e)return;const i=typeof e=="string"?JSON.parse(e):e;let s=i==null?void 0:i.href;if(typeof s!="string")return;s.endsWith("/")&&(s=s.slice(0,-1));const a=`${s}/wc?requestId=${r}&sessionTopic=${t}`,u=va();u===ti.browser?a.startsWith("https://")||a.startsWith("http://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,"_self","noreferrer noopener"):u===ti.reactNative&&typeof(Ke==null?void 0:Ke.Linking)<"u"&&await Ke.Linking.openURL(a)}catch(i){console.error(i)}}async function a5(r,t){try{return await r.getItem(t)||(go()?localStorage.getItem(t):void 0)}catch(e){console.error(e)}}var R1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ke<"u"?Ke:typeof self<"u"?self:{};function c5(r){var t=r.default;if(typeof t=="function"){var e=function(){return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),e}var T1={exports:{}};(function(r){(function(){var t="input is invalid type",e="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",u=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;u?s=R1:a&&(s=self);var h=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,p=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),b=[31,7936,2031616,520093696],_=[4,1024,262144,67108864],S=[1,256,65536,16777216],I=[6,1536,393216,100663296],M=[0,8,16,24],W=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],H=[224,256,384,512],tt=[128,256],V=["hex","buffer","arrayBuffer","array","digest"],G={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(E){return Object.prototype.toString.call(E)==="[object Array]"}),p&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(E){return typeof E=="object"&&E.buffer&&E.buffer.constructor===ArrayBuffer});for(var j=function(E,Q,B){return function(F){return new N(E,Q,E).update(F)[B]()}},$=function(E,Q,B){return function(F,k){return new N(E,Q,k).update(F)[B]()}},z=function(E,Q,B){return function(F,k,m,U){return l["cshake"+E].update(F,k,m,U)[B]()}},y=function(E,Q,B){return function(F,k,m,U){return l["kmac"+E].update(F,k,m,U)[B]()}},T=function(E,Q,B,F){for(var k=0;k<V.length;++k){var m=V[k];E[m]=Q(B,F,m)}return E},nt=function(E,Q){var B=j(E,Q,"hex");return B.create=function(){return new N(E,Q,E)},B.update=function(F){return B.create().update(F)},T(B,j,E,Q)},dt=function(E,Q){var B=$(E,Q,"hex");return B.create=function(F){return new N(E,Q,F)},B.update=function(F,k){return B.create(k).update(F)},T(B,$,E,Q)},lt=function(E,Q){var B=G[E],F=z(E,Q,"hex");return F.create=function(k,m,U){return!m&&!U?l["shake"+E].create(k):new N(E,Q,k).bytepad([m,U],B)},F.update=function(k,m,U,et){return F.create(m,U,et).update(k)},T(F,z,E,Q)},mt=function(E,Q){var B=G[E],F=y(E,Q,"hex");return F.create=function(k,m,U){return new it(E,Q,m).bytepad(["KMAC",U],B).bytepad([k],B)},F.update=function(k,m,U,et){return F.create(k,U,et).update(m)},T(F,y,E,Q)},f=[{name:"keccak",padding:S,bits:H,createMethod:nt},{name:"sha3",padding:I,bits:H,createMethod:nt},{name:"shake",padding:b,bits:tt,createMethod:dt},{name:"cshake",padding:_,bits:tt,createMethod:lt},{name:"kmac",padding:_,bits:tt,createMethod:mt}],l={},w=[],D=0;D<f.length;++D)for(var P=f[D],C=P.bits,L=0;L<C.length;++L){var x=P.name+"_"+C[L];if(w.push(x),l[x]=P.createMethod(C[L],P.padding),P.name!=="sha3"){var g=P.name+C[L];w.push(g),l[g]=l[x]}}function N(E,Q,B){this.blocks=[],this.s=[],this.padding=Q,this.outputBits=B,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(E<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=B>>5,this.extraBytes=(B&31)>>3;for(var F=0;F<50;++F)this.s[F]=0}N.prototype.update=function(E){if(this.finalized)throw new Error(e);var Q,B=typeof E;if(B!=="string"){if(B==="object"){if(E===null)throw new Error(t);if(p&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!Array.isArray(E)&&(!p||!ArrayBuffer.isView(E)))throw new Error(t)}else throw new Error(t);Q=!0}for(var F=this.blocks,k=this.byteCount,m=E.length,U=this.blockCount,et=0,at=this.s,ct,Mt;et<m;){if(this.reset)for(this.reset=!1,F[0]=this.block,ct=1;ct<U+1;++ct)F[ct]=0;if(Q)for(ct=this.start;et<m&&ct<k;++et)F[ct>>2]|=E[et]<<M[ct++&3];else for(ct=this.start;et<m&&ct<k;++et)Mt=E.charCodeAt(et),Mt<128?F[ct>>2]|=Mt<<M[ct++&3]:Mt<2048?(F[ct>>2]|=(192|Mt>>6)<<M[ct++&3],F[ct>>2]|=(128|Mt&63)<<M[ct++&3]):Mt<55296||Mt>=57344?(F[ct>>2]|=(224|Mt>>12)<<M[ct++&3],F[ct>>2]|=(128|Mt>>6&63)<<M[ct++&3],F[ct>>2]|=(128|Mt&63)<<M[ct++&3]):(Mt=65536+((Mt&1023)<<10|E.charCodeAt(++et)&1023),F[ct>>2]|=(240|Mt>>18)<<M[ct++&3],F[ct>>2]|=(128|Mt>>12&63)<<M[ct++&3],F[ct>>2]|=(128|Mt>>6&63)<<M[ct++&3],F[ct>>2]|=(128|Mt&63)<<M[ct++&3]);if(this.lastByteIndex=ct,ct>=k){for(this.start=ct-k,this.block=F[U],ct=0;ct<U;++ct)at[ct]^=F[ct];ft(at),this.reset=!0}else this.start=ct}return this},N.prototype.encode=function(E,Q){var B=E&255,F=1,k=[B];for(E=E>>8,B=E&255;B>0;)k.unshift(B),E=E>>8,B=E&255,++F;return Q?k.push(F):k.unshift(F),this.update(k),k.length},N.prototype.encodeString=function(E){var Q,B=typeof E;if(B!=="string"){if(B==="object"){if(E===null)throw new Error(t);if(p&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!Array.isArray(E)&&(!p||!ArrayBuffer.isView(E)))throw new Error(t)}else throw new Error(t);Q=!0}var F=0,k=E.length;if(Q)F=k;else for(var m=0;m<E.length;++m){var U=E.charCodeAt(m);U<128?F+=1:U<2048?F+=2:U<55296||U>=57344?F+=3:(U=65536+((U&1023)<<10|E.charCodeAt(++m)&1023),F+=4)}return F+=this.encode(F*8),this.update(E),F},N.prototype.bytepad=function(E,Q){for(var B=this.encode(Q),F=0;F<E.length;++F)B+=this.encodeString(E[F]);var k=Q-B%Q,m=[];return m.length=k,this.update(m),this},N.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var E=this.blocks,Q=this.lastByteIndex,B=this.blockCount,F=this.s;if(E[Q>>2]|=this.padding[Q&3],this.lastByteIndex===this.byteCount)for(E[0]=E[B],Q=1;Q<B+1;++Q)E[Q]=0;for(E[B-1]|=2147483648,Q=0;Q<B;++Q)F[Q]^=E[Q];ft(F)}},N.prototype.toString=N.prototype.hex=function(){this.finalize();for(var E=this.blockCount,Q=this.s,B=this.outputBlocks,F=this.extraBytes,k=0,m=0,U="",et;m<B;){for(k=0;k<E&&m<B;++k,++m)et=Q[k],U+=d[et>>4&15]+d[et&15]+d[et>>12&15]+d[et>>8&15]+d[et>>20&15]+d[et>>16&15]+d[et>>28&15]+d[et>>24&15];m%E===0&&(ft(Q),k=0)}return F&&(et=Q[k],U+=d[et>>4&15]+d[et&15],F>1&&(U+=d[et>>12&15]+d[et>>8&15]),F>2&&(U+=d[et>>20&15]+d[et>>16&15])),U},N.prototype.arrayBuffer=function(){this.finalize();var E=this.blockCount,Q=this.s,B=this.outputBlocks,F=this.extraBytes,k=0,m=0,U=this.outputBits>>3,et;F?et=new ArrayBuffer(B+1<<2):et=new ArrayBuffer(U);for(var at=new Uint32Array(et);m<B;){for(k=0;k<E&&m<B;++k,++m)at[m]=Q[k];m%E===0&&ft(Q)}return F&&(at[k]=Q[k],et=et.slice(0,U)),et},N.prototype.buffer=N.prototype.arrayBuffer,N.prototype.digest=N.prototype.array=function(){this.finalize();for(var E=this.blockCount,Q=this.s,B=this.outputBlocks,F=this.extraBytes,k=0,m=0,U=[],et,at;m<B;){for(k=0;k<E&&m<B;++k,++m)et=m<<2,at=Q[k],U[et]=at&255,U[et+1]=at>>8&255,U[et+2]=at>>16&255,U[et+3]=at>>24&255;m%E===0&&ft(Q)}return F&&(et=m<<2,at=Q[k],U[et]=at&255,F>1&&(U[et+1]=at>>8&255),F>2&&(U[et+2]=at>>16&255)),U};function it(E,Q,B){N.call(this,E,Q,B)}it.prototype=new N,it.prototype.finalize=function(){return this.encode(this.outputBits,!0),N.prototype.finalize.call(this)};var ft=function(E){var Q,B,F,k,m,U,et,at,ct,Mt,Ct,Dt,Ee,qt,Pt,Ut,Et,At,Ht,wt,St,Bt,bt,Ot,Qt,_t,Nt,ie,Tt,Lt,ze,ce,fe,hr,ue,we,Sr,Jt,Kt,Ae,Vt,kt,De,$t,Xt,xe,Zt,Gt,Le,Yt,Wt,_e,te,Oe,Di,Ce,Me,er,si,oi,ai,ci,ui;for(F=0;F<48;F+=2)k=E[0]^E[10]^E[20]^E[30]^E[40],m=E[1]^E[11]^E[21]^E[31]^E[41],U=E[2]^E[12]^E[22]^E[32]^E[42],et=E[3]^E[13]^E[23]^E[33]^E[43],at=E[4]^E[14]^E[24]^E[34]^E[44],ct=E[5]^E[15]^E[25]^E[35]^E[45],Mt=E[6]^E[16]^E[26]^E[36]^E[46],Ct=E[7]^E[17]^E[27]^E[37]^E[47],Dt=E[8]^E[18]^E[28]^E[38]^E[48],Ee=E[9]^E[19]^E[29]^E[39]^E[49],Q=Dt^(U<<1|et>>>31),B=Ee^(et<<1|U>>>31),E[0]^=Q,E[1]^=B,E[10]^=Q,E[11]^=B,E[20]^=Q,E[21]^=B,E[30]^=Q,E[31]^=B,E[40]^=Q,E[41]^=B,Q=k^(at<<1|ct>>>31),B=m^(ct<<1|at>>>31),E[2]^=Q,E[3]^=B,E[12]^=Q,E[13]^=B,E[22]^=Q,E[23]^=B,E[32]^=Q,E[33]^=B,E[42]^=Q,E[43]^=B,Q=U^(Mt<<1|Ct>>>31),B=et^(Ct<<1|Mt>>>31),E[4]^=Q,E[5]^=B,E[14]^=Q,E[15]^=B,E[24]^=Q,E[25]^=B,E[34]^=Q,E[35]^=B,E[44]^=Q,E[45]^=B,Q=at^(Dt<<1|Ee>>>31),B=ct^(Ee<<1|Dt>>>31),E[6]^=Q,E[7]^=B,E[16]^=Q,E[17]^=B,E[26]^=Q,E[27]^=B,E[36]^=Q,E[37]^=B,E[46]^=Q,E[47]^=B,Q=Mt^(k<<1|m>>>31),B=Ct^(m<<1|k>>>31),E[8]^=Q,E[9]^=B,E[18]^=Q,E[19]^=B,E[28]^=Q,E[29]^=B,E[38]^=Q,E[39]^=B,E[48]^=Q,E[49]^=B,qt=E[0],Pt=E[1],xe=E[11]<<4|E[10]>>>28,Zt=E[10]<<4|E[11]>>>28,ie=E[20]<<3|E[21]>>>29,Tt=E[21]<<3|E[20]>>>29,oi=E[31]<<9|E[30]>>>23,ai=E[30]<<9|E[31]>>>23,kt=E[40]<<18|E[41]>>>14,De=E[41]<<18|E[40]>>>14,hr=E[2]<<1|E[3]>>>31,ue=E[3]<<1|E[2]>>>31,Ut=E[13]<<12|E[12]>>>20,Et=E[12]<<12|E[13]>>>20,Gt=E[22]<<10|E[23]>>>22,Le=E[23]<<10|E[22]>>>22,Lt=E[33]<<13|E[32]>>>19,ze=E[32]<<13|E[33]>>>19,ci=E[42]<<2|E[43]>>>30,ui=E[43]<<2|E[42]>>>30,Oe=E[5]<<30|E[4]>>>2,Di=E[4]<<30|E[5]>>>2,we=E[14]<<6|E[15]>>>26,Sr=E[15]<<6|E[14]>>>26,At=E[25]<<11|E[24]>>>21,Ht=E[24]<<11|E[25]>>>21,Yt=E[34]<<15|E[35]>>>17,Wt=E[35]<<15|E[34]>>>17,ce=E[45]<<29|E[44]>>>3,fe=E[44]<<29|E[45]>>>3,Ot=E[6]<<28|E[7]>>>4,Qt=E[7]<<28|E[6]>>>4,Ce=E[17]<<23|E[16]>>>9,Me=E[16]<<23|E[17]>>>9,Jt=E[26]<<25|E[27]>>>7,Kt=E[27]<<25|E[26]>>>7,wt=E[36]<<21|E[37]>>>11,St=E[37]<<21|E[36]>>>11,_e=E[47]<<24|E[46]>>>8,te=E[46]<<24|E[47]>>>8,$t=E[8]<<27|E[9]>>>5,Xt=E[9]<<27|E[8]>>>5,_t=E[18]<<20|E[19]>>>12,Nt=E[19]<<20|E[18]>>>12,er=E[29]<<7|E[28]>>>25,si=E[28]<<7|E[29]>>>25,Ae=E[38]<<8|E[39]>>>24,Vt=E[39]<<8|E[38]>>>24,Bt=E[48]<<14|E[49]>>>18,bt=E[49]<<14|E[48]>>>18,E[0]=qt^~Ut&At,E[1]=Pt^~Et&Ht,E[10]=Ot^~_t&ie,E[11]=Qt^~Nt&Tt,E[20]=hr^~we&Jt,E[21]=ue^~Sr&Kt,E[30]=$t^~xe&Gt,E[31]=Xt^~Zt&Le,E[40]=Oe^~Ce&er,E[41]=Di^~Me&si,E[2]=Ut^~At&wt,E[3]=Et^~Ht&St,E[12]=_t^~ie&Lt,E[13]=Nt^~Tt&ze,E[22]=we^~Jt&Ae,E[23]=Sr^~Kt&Vt,E[32]=xe^~Gt&Yt,E[33]=Zt^~Le&Wt,E[42]=Ce^~er&oi,E[43]=Me^~si&ai,E[4]=At^~wt&Bt,E[5]=Ht^~St&bt,E[14]=ie^~Lt&ce,E[15]=Tt^~ze&fe,E[24]=Jt^~Ae&kt,E[25]=Kt^~Vt&De,E[34]=Gt^~Yt&_e,E[35]=Le^~Wt&te,E[44]=er^~oi&ci,E[45]=si^~ai&ui,E[6]=wt^~Bt&qt,E[7]=St^~bt&Pt,E[16]=Lt^~ce&Ot,E[17]=ze^~fe&Qt,E[26]=Ae^~kt&hr,E[27]=Vt^~De&ue,E[36]=Yt^~_e&$t,E[37]=Wt^~te&Xt,E[46]=oi^~ci&Oe,E[47]=ai^~ui&Di,E[8]=Bt^~qt&Ut,E[9]=bt^~Pt&Et,E[18]=ce^~Ot&_t,E[19]=fe^~Qt&Nt,E[28]=kt^~hr&we,E[29]=De^~ue&Sr,E[38]=_e^~$t&xe,E[39]=te^~Xt&Zt,E[48]=ci^~Oe&Ce,E[49]=ui^~Di&Me,E[0]^=W[F],E[1]^=W[F+1]};if(h)r.exports=l;else for(D=0;D<w.length;++D)s[w[D]]=l[w[D]]})()})(T1);var u5=T1.exports;const h5="logger/5.7.0";let Qp=!1,Jp=!1;const $c={debug:1,default:2,info:2,warning:3,error:4,off:5};let Xp=$c.default,$h=null;function l5(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{r.push(t)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const Zp=l5();var Dl;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Dl||(Dl={}));var ji;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(ji||(ji={}));const t0="0123456789abcdef";let gr=class sr{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const i=t.toLowerCase();$c[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(Xp>$c[i])&&console.log.apply(console,e)}debug(...t){this._log(sr.levels.DEBUG,t)}info(...t){this._log(sr.levels.INFO,t)}warn(...t){this._log(sr.levels.WARNING,t)}makeError(t,e,i){if(Jp)return this.makeError("censored error",e,{});e||(e=sr.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(p=>{const d=i[p];try{if(d instanceof Uint8Array){let b="";for(let _=0;_<d.length;_++)b+=t0[d[_]>>4],b+=t0[d[_]&15];s.push(p+"=Uint8Array(0x"+b+")")}else s.push(p+"="+JSON.stringify(d))}catch{s.push(p+"="+JSON.stringify(i[p].toString()))}}),s.push(`code=${e}`),s.push(`version=${this.version}`);const a=t;let u="";switch(e){case ji.NUMERIC_FAULT:{u="NUMERIC_FAULT";const p=t;switch(p){case"overflow":case"underflow":case"division-by-zero":u+="-"+p;break;case"negative-power":case"negative-width":u+="-unsupported";break;case"unbound-bitwise-result":u+="-unbound-result";break}break}case ji.CALL_EXCEPTION:case ji.INSUFFICIENT_FUNDS:case ji.MISSING_NEW:case ji.NONCE_EXPIRED:case ji.REPLACEMENT_UNDERPRICED:case ji.TRANSACTION_REPLACED:case ji.UNPREDICTABLE_GAS_LIMIT:u=e;break}u&&(t+=" [ See: https://links.ethers.org/v5-errors-"+u+" ]"),s.length&&(t+=" ("+s.join(", ")+")");const h=new Error(t);return h.reason=a,h.code=e,Object.keys(i).forEach(function(p){h[p]=i[p]}),h}throwError(t,e,i){throw this.makeError(t,e,i)}throwArgumentError(t,e,i){return this.throwError(t,sr.errors.INVALID_ARGUMENT,{argument:e,value:i})}assert(t,e,i,s){t||this.throwError(e,i,s)}assertArgument(t,e,i,s){t||this.throwArgumentError(e,i,s)}checkNormalize(t){Zp&&this.throwError("platform missing String.prototype.normalize",sr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Zp})}checkSafeUint53(t,e){typeof t=="number"&&(e==null&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,sr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,sr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,i){i?i=": "+i:i="",t<e&&this.throwError("missing argument"+i,sr.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+i,sr.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){(t===Object||t==null)&&this.throwError("missing new",sr.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",sr.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",sr.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return $h||($h=new sr(h5)),$h}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",sr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Qp){if(!t)return;this.globalLogger().throwError("error censorship permanent",sr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Jp=!!t,Qp=!!e}static setLogLevel(t){const e=$c[t.toLowerCase()];if(e==null){sr.globalLogger().warn("invalid log level - "+t);return}Xp=e}static from(t){return new sr(t)}};gr.errors=ji,gr.levels=Dl;const f5="bytes/5.7.0",Ze=new gr(f5);function L1(r){return!!r.toHexString}function so(r){return r.slice||(r.slice=function(){const t=Array.prototype.slice.call(arguments);return so(new Uint8Array(Array.prototype.slice.apply(r,t)))}),r}function d5(r){return ei(r)&&!(r.length%2)||mo(r)}function e0(r){return typeof r=="number"&&r==r&&r%1===0}function mo(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!e0(r.length)||r.length<0)return!1;for(let t=0;t<r.length;t++){const e=r[t];if(!e0(e)||e<0||e>=256)return!1}return!0}function Ye(r,t){if(t||(t={}),typeof r=="number"){Ze.checkSafeUint53(r,"invalid arrayify value");const e=[];for(;r;)e.unshift(r&255),r=parseInt(String(r/256));return e.length===0&&e.push(0),so(new Uint8Array(e))}if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),L1(r)&&(r=r.toHexString()),ei(r)){let e=r.substring(2);e.length%2&&(t.hexPad==="left"?e="0"+e:t.hexPad==="right"?e+="0":Ze.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let s=0;s<e.length;s+=2)i.push(parseInt(e.substring(s,s+2),16));return so(new Uint8Array(i))}return mo(r)?so(new Uint8Array(r)):Ze.throwArgumentError("invalid arrayify value","value",r)}function p5(r){const t=r.map(s=>Ye(s)),e=t.reduce((s,a)=>s+a.length,0),i=new Uint8Array(e);return t.reduce((s,a)=>(i.set(a,s),s+a.length),0),so(i)}function g5(r,t){r=Ye(r),r.length>t&&Ze.throwArgumentError("value out of range","value",arguments[0]);const e=new Uint8Array(t);return e.set(r,t-r.length),so(e)}function ei(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||t&&r.length!==2+2*t)}const Fh="0123456789abcdef";function kr(r,t){if(t||(t={}),typeof r=="number"){Ze.checkSafeUint53(r,"invalid hexlify value");let e="";for(;r;)e=Fh[r&15]+e,r=Math.floor(r/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),L1(r))return r.toHexString();if(ei(r))return r.length%2&&(t.hexPad==="left"?r="0x0"+r.substring(2):t.hexPad==="right"?r+="0":Ze.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(mo(r)){let e="0x";for(let i=0;i<r.length;i++){let s=r[i];e+=Fh[(s&240)>>4]+Fh[s&15]}return e}return Ze.throwArgumentError("invalid hexlify value","value",r)}function m5(r){if(typeof r!="string")r=kr(r);else if(!ei(r)||r.length%2)return null;return(r.length-2)/2}function r0(r,t,e){return typeof r!="string"?r=kr(r):(!ei(r)||r.length%2)&&Ze.throwArgumentError("invalid hexData","value",r),t=2+2*t,e!=null?"0x"+r.substring(t,2+2*e):"0x"+r.substring(t)}function en(r,t){for(typeof r!="string"?r=kr(r):ei(r)||Ze.throwArgumentError("invalid hex string","value",r),r.length>2*t+2&&Ze.throwArgumentError("value out of range","value",arguments[1]);r.length<2*t+2;)r="0x0"+r.substring(2);return r}function U1(r){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(d5(r)){let e=Ye(r);e.length===64?(t.v=27+(e[32]>>7),e[32]&=127,t.r=kr(e.slice(0,32)),t.s=kr(e.slice(32,64))):e.length===65?(t.r=kr(e.slice(0,32)),t.s=kr(e.slice(32,64)),t.v=e[64]):Ze.throwArgumentError("invalid signature string","signature",r),t.v<27&&(t.v===0||t.v===1?t.v+=27:Ze.throwArgumentError("signature invalid v byte","signature",r)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(e[32]|=128),t._vs=kr(e.slice(32,64))}else{if(t.r=r.r,t.s=r.s,t.v=r.v,t.recoveryParam=r.recoveryParam,t._vs=r._vs,t._vs!=null){const s=g5(Ye(t._vs),32);t._vs=kr(s);const a=s[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=a:t.recoveryParam!==a&&Ze.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),s[0]&=127;const u=kr(s);t.s==null?t.s=u:t.s!==u&&Ze.throwArgumentError("signature v mismatch _vs","signature",r)}if(t.recoveryParam==null)t.v==null?Ze.throwArgumentError("signature missing v and recoveryParam","signature",r):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{const s=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==s&&Ze.throwArgumentError("signature recoveryParam mismatch v","signature",r)}t.r==null||!ei(t.r)?Ze.throwArgumentError("signature missing or invalid r","signature",r):t.r=en(t.r,32),t.s==null||!ei(t.s)?Ze.throwArgumentError("signature missing or invalid s","signature",r):t.s=en(t.s,32);const e=Ye(t.s);e[0]>=128&&Ze.throwArgumentError("signature s out of range","signature",r),t.recoveryParam&&(e[0]|=128);const i=kr(e);t._vs&&(ei(t._vs)||Ze.throwArgumentError("signature invalid _vs","signature",r),t._vs=en(t._vs,32)),t._vs==null?t._vs=i:t._vs!==i&&Ze.throwArgumentError("signature _vs mismatch v and s","signature",r)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function rf(r){return"0x"+u5.keccak_256(Ye(r))}var B1={exports:{}},v5={},y5=Object.freeze({__proto__:null,default:v5}),w5=c5(y5);(function(r){(function(t,e){function i(f,l){if(!f)throw new Error(l||"Assertion failed")}function s(f,l){f.super_=l;var w=function(){};w.prototype=l.prototype,f.prototype=new w,f.prototype.constructor=f}function a(f,l,w){if(a.isBN(f))return f;this.negative=0,this.words=null,this.length=0,this.red=null,f!==null&&((l==="le"||l==="be")&&(w=l,l=10),this._init(f||0,l||10,w||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=w5.Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,l){return f.cmp(l)>0?f:l},a.min=function(f,l){return f.cmp(l)<0?f:l},a.prototype._init=function(f,l,w){if(typeof f=="number")return this._initNumber(f,l,w);if(typeof f=="object")return this._initArray(f,l,w);l==="hex"&&(l=16),i(l===(l|0)&&l>=2&&l<=36),f=f.toString().replace(/\s+/g,"");var D=0;f[0]==="-"&&(D++,this.negative=1),D<f.length&&(l===16?this._parseHex(f,D,w):(this._parseBase(f,l,D),w==="le"&&this._initArray(this.toArray(),l,w)))},a.prototype._initNumber=function(f,l,w){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(i(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),l,w)},a.prototype._initArray=function(f,l,w){if(i(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var P,C,L=0;if(w==="be")for(D=f.length-1,P=0;D>=0;D-=3)C=f[D]|f[D-1]<<8|f[D-2]<<16,this.words[P]|=C<<L&67108863,this.words[P+1]=C>>>26-L&67108863,L+=24,L>=26&&(L-=26,P++);else if(w==="le")for(D=0,P=0;D<f.length;D+=3)C=f[D]|f[D+1]<<8|f[D+2]<<16,this.words[P]|=C<<L&67108863,this.words[P+1]=C>>>26-L&67108863,L+=24,L>=26&&(L-=26,P++);return this._strip()};function h(f,l){var w=f.charCodeAt(l);if(w>=48&&w<=57)return w-48;if(w>=65&&w<=70)return w-55;if(w>=97&&w<=102)return w-87;i(!1,"Invalid character in "+f)}function p(f,l,w){var D=h(f,w);return w-1>=l&&(D|=h(f,w-1)<<4),D}a.prototype._parseHex=function(f,l,w){this.length=Math.ceil((f.length-l)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var P=0,C=0,L;if(w==="be")for(D=f.length-1;D>=l;D-=2)L=p(f,l,D)<<P,this.words[C]|=L&67108863,P>=18?(P-=18,C+=1,this.words[C]|=L>>>26):P+=8;else{var x=f.length-l;for(D=x%2===0?l+1:l;D<f.length;D+=2)L=p(f,l,D)<<P,this.words[C]|=L&67108863,P>=18?(P-=18,C+=1,this.words[C]|=L>>>26):P+=8}this._strip()};function d(f,l,w,D){for(var P=0,C=0,L=Math.min(f.length,w),x=l;x<L;x++){var g=f.charCodeAt(x)-48;P*=D,g>=49?C=g-49+10:g>=17?C=g-17+10:C=g,i(g>=0&&C<D,"Invalid character"),P+=C}return P}a.prototype._parseBase=function(f,l,w){this.words=[0],this.length=1;for(var D=0,P=1;P<=67108863;P*=l)D++;D--,P=P/l|0;for(var C=f.length-w,L=C%D,x=Math.min(C,C-L)+w,g=0,N=w;N<x;N+=D)g=d(f,N,N+D,l),this.imuln(P),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(L!==0){var it=1;for(g=d(f,N,f.length,l),N=0;N<L;N++)it*=l;this.imuln(it),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this._strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var l=0;l<this.length;l++)f.words[l]=this.words[l];f.length=this.length,f.negative=this.negative,f.red=this.red};function b(f,l){f.words=l.words,f.length=l.length,f.negative=l.negative,f.red=l.red}if(a.prototype._move=function(f){b(f,this)},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{a.prototype.inspect=_}else a.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,l){f=f||10,l=l|0||1;var w;if(f===16||f==="hex"){w="";for(var D=0,P=0,C=0;C<this.length;C++){var L=this.words[C],x=((L<<D|P)&16777215).toString(16);P=L>>>24-D&16777215,D+=2,D>=26&&(D-=26,C--),P!==0||C!==this.length-1?w=S[6-x.length]+x+w:w=x+w}for(P!==0&&(w=P.toString(16)+w);w.length%l!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(f===(f|0)&&f>=2&&f<=36){var g=I[f],N=M[f];w="";var it=this.clone();for(it.negative=0;!it.isZero();){var ft=it.modrn(N).toString(f);it=it.idivn(N),it.isZero()?w=ft+w:w=S[g-ft.length]+ft+w}for(this.isZero()&&(w="0"+w);w.length%l!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16,2)},u&&(a.prototype.toBuffer=function(f,l){return this.toArrayLike(u,f,l)}),a.prototype.toArray=function(f,l){return this.toArrayLike(Array,f,l)};var W=function(f,l){return f.allocUnsafe?f.allocUnsafe(l):new f(l)};a.prototype.toArrayLike=function(f,l,w){this._strip();var D=this.byteLength(),P=w||Math.max(1,D);i(D<=P,"byte array longer than desired length"),i(P>0,"Requested array length <= 0");var C=W(f,P),L=l==="le"?"LE":"BE";return this["_toArrayLike"+L](C,D),C},a.prototype._toArrayLikeLE=function(f,l){for(var w=0,D=0,P=0,C=0;P<this.length;P++){var L=this.words[P]<<C|D;f[w++]=L&255,w<f.length&&(f[w++]=L>>8&255),w<f.length&&(f[w++]=L>>16&255),C===6?(w<f.length&&(f[w++]=L>>24&255),D=0,C=0):(D=L>>>24,C+=2)}if(w<f.length)for(f[w++]=D;w<f.length;)f[w++]=0},a.prototype._toArrayLikeBE=function(f,l){for(var w=f.length-1,D=0,P=0,C=0;P<this.length;P++){var L=this.words[P]<<C|D;f[w--]=L&255,w>=0&&(f[w--]=L>>8&255),w>=0&&(f[w--]=L>>16&255),C===6?(w>=0&&(f[w--]=L>>24&255),D=0,C=0):(D=L>>>24,C+=2)}if(w>=0)for(f[w--]=D;w>=0;)f[w--]=0},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var l=f,w=0;return l>=4096&&(w+=13,l>>>=13),l>=64&&(w+=7,l>>>=7),l>=8&&(w+=4,l>>>=4),l>=2&&(w+=2,l>>>=2),w+l},a.prototype._zeroBits=function(f){if(f===0)return 26;var l=f,w=0;return l&8191||(w+=13,l>>>=13),l&127||(w+=7,l>>>=7),l&15||(w+=4,l>>>=4),l&3||(w+=2,l>>>=2),l&1||w++,w},a.prototype.bitLength=function(){var f=this.words[this.length-1],l=this._countBits(f);return(this.length-1)*26+l};function H(f){for(var l=new Array(f.bitLength()),w=0;w<l.length;w++){var D=w/26|0,P=w%26;l[w]=f.words[D]>>>P&1}return l}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,l=0;l<this.length;l++){var w=this._zeroBits(this.words[l]);if(f+=w,w!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]|f.words[l];return this._strip()},a.prototype.ior=function(f){return i((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var l;this.length>f.length?l=f:l=this;for(var w=0;w<l.length;w++)this.words[w]=this.words[w]&f.words[w];return this.length=l.length,this._strip()},a.prototype.iand=function(f){return i((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var l,w;this.length>f.length?(l=this,w=f):(l=f,w=this);for(var D=0;D<w.length;D++)this.words[D]=l.words[D]^w.words[D];if(this!==l)for(;D<l.length;D++)this.words[D]=l.words[D];return this.length=l.length,this._strip()},a.prototype.ixor=function(f){return i((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){i(typeof f=="number"&&f>=0);var l=Math.ceil(f/26)|0,w=f%26;this._expand(l),w>0&&l--;for(var D=0;D<l;D++)this.words[D]=~this.words[D]&67108863;return w>0&&(this.words[D]=~this.words[D]&67108863>>26-w),this._strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,l){i(typeof f=="number"&&f>=0);var w=f/26|0,D=f%26;return this._expand(w+1),l?this.words[w]=this.words[w]|1<<D:this.words[w]=this.words[w]&~(1<<D),this._strip()},a.prototype.iadd=function(f){var l;if(this.negative!==0&&f.negative===0)return this.negative=0,l=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,l=this.isub(f),f.negative=1,l._normSign();var w,D;this.length>f.length?(w=this,D=f):(w=f,D=this);for(var P=0,C=0;C<D.length;C++)l=(w.words[C]|0)+(D.words[C]|0)+P,this.words[C]=l&67108863,P=l>>>26;for(;P!==0&&C<w.length;C++)l=(w.words[C]|0)+P,this.words[C]=l&67108863,P=l>>>26;if(this.length=w.length,P!==0)this.words[this.length]=P,this.length++;else if(w!==this)for(;C<w.length;C++)this.words[C]=w.words[C];return this},a.prototype.add=function(f){var l;return f.negative!==0&&this.negative===0?(f.negative=0,l=this.sub(f),f.negative^=1,l):f.negative===0&&this.negative!==0?(this.negative=0,l=f.sub(this),this.negative=1,l):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var l=this.iadd(f);return f.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var w=this.cmp(f);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,P;w>0?(D=this,P=f):(D=f,P=this);for(var C=0,L=0;L<P.length;L++)l=(D.words[L]|0)-(P.words[L]|0)+C,C=l>>26,this.words[L]=l&67108863;for(;C!==0&&L<D.length;L++)l=(D.words[L]|0)+C,C=l>>26,this.words[L]=l&67108863;if(C===0&&L<D.length&&D!==this)for(;L<D.length;L++)this.words[L]=D.words[L];return this.length=Math.max(this.length,L),D!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function tt(f,l,w){w.negative=l.negative^f.negative;var D=f.length+l.length|0;w.length=D,D=D-1|0;var P=f.words[0]|0,C=l.words[0]|0,L=P*C,x=L&67108863,g=L/67108864|0;w.words[0]=x;for(var N=1;N<D;N++){for(var it=g>>>26,ft=g&67108863,E=Math.min(N,l.length-1),Q=Math.max(0,N-f.length+1);Q<=E;Q++){var B=N-Q|0;P=f.words[B]|0,C=l.words[Q]|0,L=P*C+ft,it+=L/67108864|0,ft=L&67108863}w.words[N]=ft|0,g=it|0}return g!==0?w.words[N]=g|0:w.length--,w._strip()}var V=function(f,l,w){var D=f.words,P=l.words,C=w.words,L=0,x,g,N,it=D[0]|0,ft=it&8191,E=it>>>13,Q=D[1]|0,B=Q&8191,F=Q>>>13,k=D[2]|0,m=k&8191,U=k>>>13,et=D[3]|0,at=et&8191,ct=et>>>13,Mt=D[4]|0,Ct=Mt&8191,Dt=Mt>>>13,Ee=D[5]|0,qt=Ee&8191,Pt=Ee>>>13,Ut=D[6]|0,Et=Ut&8191,At=Ut>>>13,Ht=D[7]|0,wt=Ht&8191,St=Ht>>>13,Bt=D[8]|0,bt=Bt&8191,Ot=Bt>>>13,Qt=D[9]|0,_t=Qt&8191,Nt=Qt>>>13,ie=P[0]|0,Tt=ie&8191,Lt=ie>>>13,ze=P[1]|0,ce=ze&8191,fe=ze>>>13,hr=P[2]|0,ue=hr&8191,we=hr>>>13,Sr=P[3]|0,Jt=Sr&8191,Kt=Sr>>>13,Ae=P[4]|0,Vt=Ae&8191,kt=Ae>>>13,De=P[5]|0,$t=De&8191,Xt=De>>>13,xe=P[6]|0,Zt=xe&8191,Gt=xe>>>13,Le=P[7]|0,Yt=Le&8191,Wt=Le>>>13,_e=P[8]|0,te=_e&8191,Oe=_e>>>13,Di=P[9]|0,Ce=Di&8191,Me=Di>>>13;w.negative=f.negative^l.negative,w.length=19,x=Math.imul(ft,Tt),g=Math.imul(ft,Lt),g=g+Math.imul(E,Tt)|0,N=Math.imul(E,Lt);var er=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(er>>>26)|0,er&=67108863,x=Math.imul(B,Tt),g=Math.imul(B,Lt),g=g+Math.imul(F,Tt)|0,N=Math.imul(F,Lt),x=x+Math.imul(ft,ce)|0,g=g+Math.imul(ft,fe)|0,g=g+Math.imul(E,ce)|0,N=N+Math.imul(E,fe)|0;var si=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(si>>>26)|0,si&=67108863,x=Math.imul(m,Tt),g=Math.imul(m,Lt),g=g+Math.imul(U,Tt)|0,N=Math.imul(U,Lt),x=x+Math.imul(B,ce)|0,g=g+Math.imul(B,fe)|0,g=g+Math.imul(F,ce)|0,N=N+Math.imul(F,fe)|0,x=x+Math.imul(ft,ue)|0,g=g+Math.imul(ft,we)|0,g=g+Math.imul(E,ue)|0,N=N+Math.imul(E,we)|0;var oi=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(oi>>>26)|0,oi&=67108863,x=Math.imul(at,Tt),g=Math.imul(at,Lt),g=g+Math.imul(ct,Tt)|0,N=Math.imul(ct,Lt),x=x+Math.imul(m,ce)|0,g=g+Math.imul(m,fe)|0,g=g+Math.imul(U,ce)|0,N=N+Math.imul(U,fe)|0,x=x+Math.imul(B,ue)|0,g=g+Math.imul(B,we)|0,g=g+Math.imul(F,ue)|0,N=N+Math.imul(F,we)|0,x=x+Math.imul(ft,Jt)|0,g=g+Math.imul(ft,Kt)|0,g=g+Math.imul(E,Jt)|0,N=N+Math.imul(E,Kt)|0;var ai=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(ai>>>26)|0,ai&=67108863,x=Math.imul(Ct,Tt),g=Math.imul(Ct,Lt),g=g+Math.imul(Dt,Tt)|0,N=Math.imul(Dt,Lt),x=x+Math.imul(at,ce)|0,g=g+Math.imul(at,fe)|0,g=g+Math.imul(ct,ce)|0,N=N+Math.imul(ct,fe)|0,x=x+Math.imul(m,ue)|0,g=g+Math.imul(m,we)|0,g=g+Math.imul(U,ue)|0,N=N+Math.imul(U,we)|0,x=x+Math.imul(B,Jt)|0,g=g+Math.imul(B,Kt)|0,g=g+Math.imul(F,Jt)|0,N=N+Math.imul(F,Kt)|0,x=x+Math.imul(ft,Vt)|0,g=g+Math.imul(ft,kt)|0,g=g+Math.imul(E,Vt)|0,N=N+Math.imul(E,kt)|0;var ci=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(ci>>>26)|0,ci&=67108863,x=Math.imul(qt,Tt),g=Math.imul(qt,Lt),g=g+Math.imul(Pt,Tt)|0,N=Math.imul(Pt,Lt),x=x+Math.imul(Ct,ce)|0,g=g+Math.imul(Ct,fe)|0,g=g+Math.imul(Dt,ce)|0,N=N+Math.imul(Dt,fe)|0,x=x+Math.imul(at,ue)|0,g=g+Math.imul(at,we)|0,g=g+Math.imul(ct,ue)|0,N=N+Math.imul(ct,we)|0,x=x+Math.imul(m,Jt)|0,g=g+Math.imul(m,Kt)|0,g=g+Math.imul(U,Jt)|0,N=N+Math.imul(U,Kt)|0,x=x+Math.imul(B,Vt)|0,g=g+Math.imul(B,kt)|0,g=g+Math.imul(F,Vt)|0,N=N+Math.imul(F,kt)|0,x=x+Math.imul(ft,$t)|0,g=g+Math.imul(ft,Xt)|0,g=g+Math.imul(E,$t)|0,N=N+Math.imul(E,Xt)|0;var ui=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(ui>>>26)|0,ui&=67108863,x=Math.imul(Et,Tt),g=Math.imul(Et,Lt),g=g+Math.imul(At,Tt)|0,N=Math.imul(At,Lt),x=x+Math.imul(qt,ce)|0,g=g+Math.imul(qt,fe)|0,g=g+Math.imul(Pt,ce)|0,N=N+Math.imul(Pt,fe)|0,x=x+Math.imul(Ct,ue)|0,g=g+Math.imul(Ct,we)|0,g=g+Math.imul(Dt,ue)|0,N=N+Math.imul(Dt,we)|0,x=x+Math.imul(at,Jt)|0,g=g+Math.imul(at,Kt)|0,g=g+Math.imul(ct,Jt)|0,N=N+Math.imul(ct,Kt)|0,x=x+Math.imul(m,Vt)|0,g=g+Math.imul(m,kt)|0,g=g+Math.imul(U,Vt)|0,N=N+Math.imul(U,kt)|0,x=x+Math.imul(B,$t)|0,g=g+Math.imul(B,Xt)|0,g=g+Math.imul(F,$t)|0,N=N+Math.imul(F,Xt)|0,x=x+Math.imul(ft,Zt)|0,g=g+Math.imul(ft,Gt)|0,g=g+Math.imul(E,Zt)|0,N=N+Math.imul(E,Gt)|0;var yr=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(yr>>>26)|0,yr&=67108863,x=Math.imul(wt,Tt),g=Math.imul(wt,Lt),g=g+Math.imul(St,Tt)|0,N=Math.imul(St,Lt),x=x+Math.imul(Et,ce)|0,g=g+Math.imul(Et,fe)|0,g=g+Math.imul(At,ce)|0,N=N+Math.imul(At,fe)|0,x=x+Math.imul(qt,ue)|0,g=g+Math.imul(qt,we)|0,g=g+Math.imul(Pt,ue)|0,N=N+Math.imul(Pt,we)|0,x=x+Math.imul(Ct,Jt)|0,g=g+Math.imul(Ct,Kt)|0,g=g+Math.imul(Dt,Jt)|0,N=N+Math.imul(Dt,Kt)|0,x=x+Math.imul(at,Vt)|0,g=g+Math.imul(at,kt)|0,g=g+Math.imul(ct,Vt)|0,N=N+Math.imul(ct,kt)|0,x=x+Math.imul(m,$t)|0,g=g+Math.imul(m,Xt)|0,g=g+Math.imul(U,$t)|0,N=N+Math.imul(U,Xt)|0,x=x+Math.imul(B,Zt)|0,g=g+Math.imul(B,Gt)|0,g=g+Math.imul(F,Zt)|0,N=N+Math.imul(F,Gt)|0,x=x+Math.imul(ft,Yt)|0,g=g+Math.imul(ft,Wt)|0,g=g+Math.imul(E,Yt)|0,N=N+Math.imul(E,Wt)|0;var Zn=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,x=Math.imul(bt,Tt),g=Math.imul(bt,Lt),g=g+Math.imul(Ot,Tt)|0,N=Math.imul(Ot,Lt),x=x+Math.imul(wt,ce)|0,g=g+Math.imul(wt,fe)|0,g=g+Math.imul(St,ce)|0,N=N+Math.imul(St,fe)|0,x=x+Math.imul(Et,ue)|0,g=g+Math.imul(Et,we)|0,g=g+Math.imul(At,ue)|0,N=N+Math.imul(At,we)|0,x=x+Math.imul(qt,Jt)|0,g=g+Math.imul(qt,Kt)|0,g=g+Math.imul(Pt,Jt)|0,N=N+Math.imul(Pt,Kt)|0,x=x+Math.imul(Ct,Vt)|0,g=g+Math.imul(Ct,kt)|0,g=g+Math.imul(Dt,Vt)|0,N=N+Math.imul(Dt,kt)|0,x=x+Math.imul(at,$t)|0,g=g+Math.imul(at,Xt)|0,g=g+Math.imul(ct,$t)|0,N=N+Math.imul(ct,Xt)|0,x=x+Math.imul(m,Zt)|0,g=g+Math.imul(m,Gt)|0,g=g+Math.imul(U,Zt)|0,N=N+Math.imul(U,Gt)|0,x=x+Math.imul(B,Yt)|0,g=g+Math.imul(B,Wt)|0,g=g+Math.imul(F,Yt)|0,N=N+Math.imul(F,Wt)|0,x=x+Math.imul(ft,te)|0,g=g+Math.imul(ft,Oe)|0,g=g+Math.imul(E,te)|0,N=N+Math.imul(E,Oe)|0;var zi=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(zi>>>26)|0,zi&=67108863,x=Math.imul(_t,Tt),g=Math.imul(_t,Lt),g=g+Math.imul(Nt,Tt)|0,N=Math.imul(Nt,Lt),x=x+Math.imul(bt,ce)|0,g=g+Math.imul(bt,fe)|0,g=g+Math.imul(Ot,ce)|0,N=N+Math.imul(Ot,fe)|0,x=x+Math.imul(wt,ue)|0,g=g+Math.imul(wt,we)|0,g=g+Math.imul(St,ue)|0,N=N+Math.imul(St,we)|0,x=x+Math.imul(Et,Jt)|0,g=g+Math.imul(Et,Kt)|0,g=g+Math.imul(At,Jt)|0,N=N+Math.imul(At,Kt)|0,x=x+Math.imul(qt,Vt)|0,g=g+Math.imul(qt,kt)|0,g=g+Math.imul(Pt,Vt)|0,N=N+Math.imul(Pt,kt)|0,x=x+Math.imul(Ct,$t)|0,g=g+Math.imul(Ct,Xt)|0,g=g+Math.imul(Dt,$t)|0,N=N+Math.imul(Dt,Xt)|0,x=x+Math.imul(at,Zt)|0,g=g+Math.imul(at,Gt)|0,g=g+Math.imul(ct,Zt)|0,N=N+Math.imul(ct,Gt)|0,x=x+Math.imul(m,Yt)|0,g=g+Math.imul(m,Wt)|0,g=g+Math.imul(U,Yt)|0,N=N+Math.imul(U,Wt)|0,x=x+Math.imul(B,te)|0,g=g+Math.imul(B,Oe)|0,g=g+Math.imul(F,te)|0,N=N+Math.imul(F,Oe)|0,x=x+Math.imul(ft,Ce)|0,g=g+Math.imul(ft,Me)|0,g=g+Math.imul(E,Ce)|0,N=N+Math.imul(E,Me)|0;var ts=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(ts>>>26)|0,ts&=67108863,x=Math.imul(_t,ce),g=Math.imul(_t,fe),g=g+Math.imul(Nt,ce)|0,N=Math.imul(Nt,fe),x=x+Math.imul(bt,ue)|0,g=g+Math.imul(bt,we)|0,g=g+Math.imul(Ot,ue)|0,N=N+Math.imul(Ot,we)|0,x=x+Math.imul(wt,Jt)|0,g=g+Math.imul(wt,Kt)|0,g=g+Math.imul(St,Jt)|0,N=N+Math.imul(St,Kt)|0,x=x+Math.imul(Et,Vt)|0,g=g+Math.imul(Et,kt)|0,g=g+Math.imul(At,Vt)|0,N=N+Math.imul(At,kt)|0,x=x+Math.imul(qt,$t)|0,g=g+Math.imul(qt,Xt)|0,g=g+Math.imul(Pt,$t)|0,N=N+Math.imul(Pt,Xt)|0,x=x+Math.imul(Ct,Zt)|0,g=g+Math.imul(Ct,Gt)|0,g=g+Math.imul(Dt,Zt)|0,N=N+Math.imul(Dt,Gt)|0,x=x+Math.imul(at,Yt)|0,g=g+Math.imul(at,Wt)|0,g=g+Math.imul(ct,Yt)|0,N=N+Math.imul(ct,Wt)|0,x=x+Math.imul(m,te)|0,g=g+Math.imul(m,Oe)|0,g=g+Math.imul(U,te)|0,N=N+Math.imul(U,Oe)|0,x=x+Math.imul(B,Ce)|0,g=g+Math.imul(B,Me)|0,g=g+Math.imul(F,Ce)|0,N=N+Math.imul(F,Me)|0;var es=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(es>>>26)|0,es&=67108863,x=Math.imul(_t,ue),g=Math.imul(_t,we),g=g+Math.imul(Nt,ue)|0,N=Math.imul(Nt,we),x=x+Math.imul(bt,Jt)|0,g=g+Math.imul(bt,Kt)|0,g=g+Math.imul(Ot,Jt)|0,N=N+Math.imul(Ot,Kt)|0,x=x+Math.imul(wt,Vt)|0,g=g+Math.imul(wt,kt)|0,g=g+Math.imul(St,Vt)|0,N=N+Math.imul(St,kt)|0,x=x+Math.imul(Et,$t)|0,g=g+Math.imul(Et,Xt)|0,g=g+Math.imul(At,$t)|0,N=N+Math.imul(At,Xt)|0,x=x+Math.imul(qt,Zt)|0,g=g+Math.imul(qt,Gt)|0,g=g+Math.imul(Pt,Zt)|0,N=N+Math.imul(Pt,Gt)|0,x=x+Math.imul(Ct,Yt)|0,g=g+Math.imul(Ct,Wt)|0,g=g+Math.imul(Dt,Yt)|0,N=N+Math.imul(Dt,Wt)|0,x=x+Math.imul(at,te)|0,g=g+Math.imul(at,Oe)|0,g=g+Math.imul(ct,te)|0,N=N+Math.imul(ct,Oe)|0,x=x+Math.imul(m,Ce)|0,g=g+Math.imul(m,Me)|0,g=g+Math.imul(U,Ce)|0,N=N+Math.imul(U,Me)|0;var rs=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(rs>>>26)|0,rs&=67108863,x=Math.imul(_t,Jt),g=Math.imul(_t,Kt),g=g+Math.imul(Nt,Jt)|0,N=Math.imul(Nt,Kt),x=x+Math.imul(bt,Vt)|0,g=g+Math.imul(bt,kt)|0,g=g+Math.imul(Ot,Vt)|0,N=N+Math.imul(Ot,kt)|0,x=x+Math.imul(wt,$t)|0,g=g+Math.imul(wt,Xt)|0,g=g+Math.imul(St,$t)|0,N=N+Math.imul(St,Xt)|0,x=x+Math.imul(Et,Zt)|0,g=g+Math.imul(Et,Gt)|0,g=g+Math.imul(At,Zt)|0,N=N+Math.imul(At,Gt)|0,x=x+Math.imul(qt,Yt)|0,g=g+Math.imul(qt,Wt)|0,g=g+Math.imul(Pt,Yt)|0,N=N+Math.imul(Pt,Wt)|0,x=x+Math.imul(Ct,te)|0,g=g+Math.imul(Ct,Oe)|0,g=g+Math.imul(Dt,te)|0,N=N+Math.imul(Dt,Oe)|0,x=x+Math.imul(at,Ce)|0,g=g+Math.imul(at,Me)|0,g=g+Math.imul(ct,Ce)|0,N=N+Math.imul(ct,Me)|0;var xi=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(xi>>>26)|0,xi&=67108863,x=Math.imul(_t,Vt),g=Math.imul(_t,kt),g=g+Math.imul(Nt,Vt)|0,N=Math.imul(Nt,kt),x=x+Math.imul(bt,$t)|0,g=g+Math.imul(bt,Xt)|0,g=g+Math.imul(Ot,$t)|0,N=N+Math.imul(Ot,Xt)|0,x=x+Math.imul(wt,Zt)|0,g=g+Math.imul(wt,Gt)|0,g=g+Math.imul(St,Zt)|0,N=N+Math.imul(St,Gt)|0,x=x+Math.imul(Et,Yt)|0,g=g+Math.imul(Et,Wt)|0,g=g+Math.imul(At,Yt)|0,N=N+Math.imul(At,Wt)|0,x=x+Math.imul(qt,te)|0,g=g+Math.imul(qt,Oe)|0,g=g+Math.imul(Pt,te)|0,N=N+Math.imul(Pt,Oe)|0,x=x+Math.imul(Ct,Ce)|0,g=g+Math.imul(Ct,Me)|0,g=g+Math.imul(Dt,Ce)|0,N=N+Math.imul(Dt,Me)|0;var On=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(On>>>26)|0,On&=67108863,x=Math.imul(_t,$t),g=Math.imul(_t,Xt),g=g+Math.imul(Nt,$t)|0,N=Math.imul(Nt,Xt),x=x+Math.imul(bt,Zt)|0,g=g+Math.imul(bt,Gt)|0,g=g+Math.imul(Ot,Zt)|0,N=N+Math.imul(Ot,Gt)|0,x=x+Math.imul(wt,Yt)|0,g=g+Math.imul(wt,Wt)|0,g=g+Math.imul(St,Yt)|0,N=N+Math.imul(St,Wt)|0,x=x+Math.imul(Et,te)|0,g=g+Math.imul(Et,Oe)|0,g=g+Math.imul(At,te)|0,N=N+Math.imul(At,Oe)|0,x=x+Math.imul(qt,Ce)|0,g=g+Math.imul(qt,Me)|0,g=g+Math.imul(Pt,Ce)|0,N=N+Math.imul(Pt,Me)|0;var Cn=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,x=Math.imul(_t,Zt),g=Math.imul(_t,Gt),g=g+Math.imul(Nt,Zt)|0,N=Math.imul(Nt,Gt),x=x+Math.imul(bt,Yt)|0,g=g+Math.imul(bt,Wt)|0,g=g+Math.imul(Ot,Yt)|0,N=N+Math.imul(Ot,Wt)|0,x=x+Math.imul(wt,te)|0,g=g+Math.imul(wt,Oe)|0,g=g+Math.imul(St,te)|0,N=N+Math.imul(St,Oe)|0,x=x+Math.imul(Et,Ce)|0,g=g+Math.imul(Et,Me)|0,g=g+Math.imul(At,Ce)|0,N=N+Math.imul(At,Me)|0;var Lr=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,x=Math.imul(_t,Yt),g=Math.imul(_t,Wt),g=g+Math.imul(Nt,Yt)|0,N=Math.imul(Nt,Wt),x=x+Math.imul(bt,te)|0,g=g+Math.imul(bt,Oe)|0,g=g+Math.imul(Ot,te)|0,N=N+Math.imul(Ot,Oe)|0,x=x+Math.imul(wt,Ce)|0,g=g+Math.imul(wt,Me)|0,g=g+Math.imul(St,Ce)|0,N=N+Math.imul(St,Me)|0;var is=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(is>>>26)|0,is&=67108863,x=Math.imul(_t,te),g=Math.imul(_t,Oe),g=g+Math.imul(Nt,te)|0,N=Math.imul(Nt,Oe),x=x+Math.imul(bt,Ce)|0,g=g+Math.imul(bt,Me)|0,g=g+Math.imul(Ot,Ce)|0,N=N+Math.imul(Ot,Me)|0;var ns=(L+x|0)+((g&8191)<<13)|0;L=(N+(g>>>13)|0)+(ns>>>26)|0,ns&=67108863,x=Math.imul(_t,Ce),g=Math.imul(_t,Me),g=g+Math.imul(Nt,Ce)|0,N=Math.imul(Nt,Me);var ss=(L+x|0)+((g&8191)<<13)|0;return L=(N+(g>>>13)|0)+(ss>>>26)|0,ss&=67108863,C[0]=er,C[1]=si,C[2]=oi,C[3]=ai,C[4]=ci,C[5]=ui,C[6]=yr,C[7]=Zn,C[8]=zi,C[9]=ts,C[10]=es,C[11]=rs,C[12]=xi,C[13]=On,C[14]=Cn,C[15]=Lr,C[16]=is,C[17]=ns,C[18]=ss,L!==0&&(C[19]=L,w.length++),w};Math.imul||(V=tt);function G(f,l,w){w.negative=l.negative^f.negative,w.length=f.length+l.length;for(var D=0,P=0,C=0;C<w.length-1;C++){var L=P;P=0;for(var x=D&67108863,g=Math.min(C,l.length-1),N=Math.max(0,C-f.length+1);N<=g;N++){var it=C-N,ft=f.words[it]|0,E=l.words[N]|0,Q=ft*E,B=Q&67108863;L=L+(Q/67108864|0)|0,B=B+x|0,x=B&67108863,L=L+(B>>>26)|0,P+=L>>>26,L&=67108863}w.words[C]=x,D=L,L=P}return D!==0?w.words[C]=D:w.length--,w._strip()}function j(f,l,w){return G(f,l,w)}a.prototype.mulTo=function(f,l){var w,D=this.length+f.length;return this.length===10&&f.length===10?w=V(this,f,l):D<63?w=tt(this,f,l):D<1024?w=G(this,f,l):w=j(this,f,l),w},a.prototype.mul=function(f){var l=new a(null);return l.words=new Array(this.length+f.length),this.mulTo(f,l)},a.prototype.mulf=function(f){var l=new a(null);return l.words=new Array(this.length+f.length),j(this,f,l)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){var l=f<0;l&&(f=-f),i(typeof f=="number"),i(f<67108864);for(var w=0,D=0;D<this.length;D++){var P=(this.words[D]|0)*f,C=(P&67108863)+(w&67108863);w>>=26,w+=P/67108864|0,w+=C>>>26,this.words[D]=C&67108863}return w!==0&&(this.words[D]=w,this.length++),l?this.ineg():this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var l=H(f);if(l.length===0)return new a(1);for(var w=this,D=0;D<l.length&&l[D]===0;D++,w=w.sqr());if(++D<l.length)for(var P=w.sqr();D<l.length;D++,P=P.sqr())l[D]!==0&&(w=w.mul(P));return w},a.prototype.iushln=function(f){i(typeof f=="number"&&f>=0);var l=f%26,w=(f-l)/26,D=67108863>>>26-l<<26-l,P;if(l!==0){var C=0;for(P=0;P<this.length;P++){var L=this.words[P]&D,x=(this.words[P]|0)-L<<l;this.words[P]=x|C,C=L>>>26-l}C&&(this.words[P]=C,this.length++)}if(w!==0){for(P=this.length-1;P>=0;P--)this.words[P+w]=this.words[P];for(P=0;P<w;P++)this.words[P]=0;this.length+=w}return this._strip()},a.prototype.ishln=function(f){return i(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,l,w){i(typeof f=="number"&&f>=0);var D;l?D=(l-l%26)/26:D=0;var P=f%26,C=Math.min((f-P)/26,this.length),L=67108863^67108863>>>P<<P,x=w;if(D-=C,D=Math.max(0,D),x){for(var g=0;g<C;g++)x.words[g]=this.words[g];x.length=C}if(C!==0)if(this.length>C)for(this.length-=C,g=0;g<this.length;g++)this.words[g]=this.words[g+C];else this.words[0]=0,this.length=1;var N=0;for(g=this.length-1;g>=0&&(N!==0||g>=D);g--){var it=this.words[g]|0;this.words[g]=N<<26-P|it>>>P,N=it&L}return x&&N!==0&&(x.words[x.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(f,l,w){return i(this.negative===0),this.iushrn(f,l,w)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){i(typeof f=="number"&&f>=0);var l=f%26,w=(f-l)/26,D=1<<l;if(this.length<=w)return!1;var P=this.words[w];return!!(P&D)},a.prototype.imaskn=function(f){i(typeof f=="number"&&f>=0);var l=f%26,w=(f-l)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(l!==0&&w++,this.length=Math.min(w,this.length),l!==0){var D=67108863^67108863>>>l<<l;this.words[this.length-1]&=D}return this._strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return i(typeof f=="number"),i(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},a.prototype.isubn=function(f){if(i(typeof f=="number"),i(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,l,w){var D=f.length+w,P;this._expand(D);var C,L=0;for(P=0;P<f.length;P++){C=(this.words[P+w]|0)+L;var x=(f.words[P]|0)*l;C-=x&67108863,L=(C>>26)-(x/67108864|0),this.words[P+w]=C&67108863}for(;P<this.length-w;P++)C=(this.words[P+w]|0)+L,L=C>>26,this.words[P+w]=C&67108863;if(L===0)return this._strip();for(i(L===-1),L=0,P=0;P<this.length;P++)C=-(this.words[P]|0)+L,L=C>>26,this.words[P]=C&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(f,l){var w=this.length-f.length,D=this.clone(),P=f,C=P.words[P.length-1]|0,L=this._countBits(C);w=26-L,w!==0&&(P=P.ushln(w),D.iushln(w),C=P.words[P.length-1]|0);var x=D.length-P.length,g;if(l!=="mod"){g=new a(null),g.length=x+1,g.words=new Array(g.length);for(var N=0;N<g.length;N++)g.words[N]=0}var it=D.clone()._ishlnsubmul(P,1,x);it.negative===0&&(D=it,g&&(g.words[x]=1));for(var ft=x-1;ft>=0;ft--){var E=(D.words[P.length+ft]|0)*67108864+(D.words[P.length+ft-1]|0);for(E=Math.min(E/C|0,67108863),D._ishlnsubmul(P,E,ft);D.negative!==0;)E--,D.negative=0,D._ishlnsubmul(P,1,ft),D.isZero()||(D.negative^=1);g&&(g.words[ft]=E)}return g&&g._strip(),D._strip(),l!=="div"&&w!==0&&D.iushrn(w),{div:g||null,mod:D}},a.prototype.divmod=function(f,l,w){if(i(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var D,P,C;return this.negative!==0&&f.negative===0?(C=this.neg().divmod(f,l),l!=="mod"&&(D=C.div.neg()),l!=="div"&&(P=C.mod.neg(),w&&P.negative!==0&&P.iadd(f)),{div:D,mod:P}):this.negative===0&&f.negative!==0?(C=this.divmod(f.neg(),l),l!=="mod"&&(D=C.div.neg()),{div:D,mod:C.mod}):this.negative&f.negative?(C=this.neg().divmod(f.neg(),l),l!=="div"&&(P=C.mod.neg(),w&&P.negative!==0&&P.isub(f)),{div:C.div,mod:P}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?l==="div"?{div:this.divn(f.words[0]),mod:null}:l==="mod"?{div:null,mod:new a(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modrn(f.words[0]))}:this._wordDiv(f,l)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var l=this.divmod(f);if(l.mod.isZero())return l.div;var w=l.div.negative!==0?l.mod.isub(f):l.mod,D=f.ushrn(1),P=f.andln(1),C=w.cmp(D);return C<0||P===1&&C===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},a.prototype.modrn=function(f){var l=f<0;l&&(f=-f),i(f<=67108863);for(var w=(1<<26)%f,D=0,P=this.length-1;P>=0;P--)D=(w*D+(this.words[P]|0))%f;return l?-D:D},a.prototype.modn=function(f){return this.modrn(f)},a.prototype.idivn=function(f){var l=f<0;l&&(f=-f),i(f<=67108863);for(var w=0,D=this.length-1;D>=0;D--){var P=(this.words[D]|0)+w*67108864;this.words[D]=P/f|0,w=P%f}return this._strip(),l?this.ineg():this},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){i(f.negative===0),i(!f.isZero());var l=this,w=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var D=new a(1),P=new a(0),C=new a(0),L=new a(1),x=0;l.isEven()&&w.isEven();)l.iushrn(1),w.iushrn(1),++x;for(var g=w.clone(),N=l.clone();!l.isZero();){for(var it=0,ft=1;!(l.words[0]&ft)&&it<26;++it,ft<<=1);if(it>0)for(l.iushrn(it);it-- >0;)(D.isOdd()||P.isOdd())&&(D.iadd(g),P.isub(N)),D.iushrn(1),P.iushrn(1);for(var E=0,Q=1;!(w.words[0]&Q)&&E<26;++E,Q<<=1);if(E>0)for(w.iushrn(E);E-- >0;)(C.isOdd()||L.isOdd())&&(C.iadd(g),L.isub(N)),C.iushrn(1),L.iushrn(1);l.cmp(w)>=0?(l.isub(w),D.isub(C),P.isub(L)):(w.isub(l),C.isub(D),L.isub(P))}return{a:C,b:L,gcd:w.iushln(x)}},a.prototype._invmp=function(f){i(f.negative===0),i(!f.isZero());var l=this,w=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var D=new a(1),P=new a(0),C=w.clone();l.cmpn(1)>0&&w.cmpn(1)>0;){for(var L=0,x=1;!(l.words[0]&x)&&L<26;++L,x<<=1);if(L>0)for(l.iushrn(L);L-- >0;)D.isOdd()&&D.iadd(C),D.iushrn(1);for(var g=0,N=1;!(w.words[0]&N)&&g<26;++g,N<<=1);if(g>0)for(w.iushrn(g);g-- >0;)P.isOdd()&&P.iadd(C),P.iushrn(1);l.cmp(w)>=0?(l.isub(w),D.isub(P)):(w.isub(l),P.isub(D))}var it;return l.cmpn(1)===0?it=D:it=P,it.cmpn(0)<0&&it.iadd(f),it},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var l=this.clone(),w=f.clone();l.negative=0,w.negative=0;for(var D=0;l.isEven()&&w.isEven();D++)l.iushrn(1),w.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;w.isEven();)w.iushrn(1);var P=l.cmp(w);if(P<0){var C=l;l=w,w=C}else if(P===0||w.cmpn(1)===0)break;l.isub(w)}while(!0);return w.iushln(D)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){i(typeof f=="number");var l=f%26,w=(f-l)/26,D=1<<l;if(this.length<=w)return this._expand(w+1),this.words[w]|=D,this;for(var P=D,C=w;P!==0&&C<this.length;C++){var L=this.words[C]|0;L+=P,P=L>>>26,L&=67108863,this.words[C]=L}return P!==0&&(this.words[C]=P,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var l=f<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var w;if(this.length>1)w=1;else{l&&(f=-f),i(f<=67108863,"Number is too big");var D=this.words[0]|0;w=D===f?0:D<f?-1:1}return this.negative!==0?-w|0:w},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var l=this.ucmp(f);return this.negative!==0?-l|0:l},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var l=0,w=this.length-1;w>=0;w--){var D=this.words[w]|0,P=f.words[w]|0;if(D!==P){D<P?l=-1:D>P&&(l=1);break}}return l},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new lt(f)},a.prototype.toRed=function(f){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return i(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return i(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var $={k256:null,p224:null,p192:null,p25519:null};function z(f,l){this.name=f,this.p=new a(l,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},z.prototype.ireduce=function(f){var l=f,w;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),w=l.bitLength();while(w>this.n);var D=w<this.n?-1:l.ucmp(this.p);return D===0?(l.words[0]=0,l.length=1):D>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},z.prototype.split=function(f,l){f.iushrn(this.n,0,l)},z.prototype.imulK=function(f){return f.imul(this.k)};function y(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(y,z),y.prototype.split=function(f,l){for(var w=4194303,D=Math.min(f.length,9),P=0;P<D;P++)l.words[P]=f.words[P];if(l.length=D,f.length<=9){f.words[0]=0,f.length=1;return}var C=f.words[9];for(l.words[l.length++]=C&w,P=10;P<f.length;P++){var L=f.words[P]|0;f.words[P-10]=(L&w)<<4|C>>>22,C=L}C>>>=22,f.words[P-10]=C,C===0&&f.length>10?f.length-=10:f.length-=9},y.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var l=0,w=0;w<f.length;w++){var D=f.words[w]|0;l+=D*977,f.words[w]=l&67108863,l=D*64+(l/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function T(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(T,z);function nt(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(nt,z);function dt(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(dt,z),dt.prototype.imulK=function(f){for(var l=0,w=0;w<f.length;w++){var D=(f.words[w]|0)*19+l,P=D&67108863;D>>>=26,f.words[w]=P,l=D}return l!==0&&(f.words[f.length++]=l),f},a._prime=function(f){if($[f])return $[f];var l;if(f==="k256")l=new y;else if(f==="p224")l=new T;else if(f==="p192")l=new nt;else if(f==="p25519")l=new dt;else throw new Error("Unknown prime "+f);return $[f]=l,l};function lt(f){if(typeof f=="string"){var l=a._prime(f);this.m=l.p,this.prime=l}else i(f.gtn(1),"modulus must be greater than 1"),this.m=f,this.prime=null}lt.prototype._verify1=function(f){i(f.negative===0,"red works only with positives"),i(f.red,"red works only with red numbers")},lt.prototype._verify2=function(f,l){i((f.negative|l.negative)===0,"red works only with positives"),i(f.red&&f.red===l.red,"red works only with red numbers")},lt.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(b(f,f.umod(this.m)._forceRed(this)),f)},lt.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},lt.prototype.add=function(f,l){this._verify2(f,l);var w=f.add(l);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},lt.prototype.iadd=function(f,l){this._verify2(f,l);var w=f.iadd(l);return w.cmp(this.m)>=0&&w.isub(this.m),w},lt.prototype.sub=function(f,l){this._verify2(f,l);var w=f.sub(l);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},lt.prototype.isub=function(f,l){this._verify2(f,l);var w=f.isub(l);return w.cmpn(0)<0&&w.iadd(this.m),w},lt.prototype.shl=function(f,l){return this._verify1(f),this.imod(f.ushln(l))},lt.prototype.imul=function(f,l){return this._verify2(f,l),this.imod(f.imul(l))},lt.prototype.mul=function(f,l){return this._verify2(f,l),this.imod(f.mul(l))},lt.prototype.isqr=function(f){return this.imul(f,f.clone())},lt.prototype.sqr=function(f){return this.mul(f,f)},lt.prototype.sqrt=function(f){if(f.isZero())return f.clone();var l=this.m.andln(3);if(i(l%2===1),l===3){var w=this.m.add(new a(1)).iushrn(2);return this.pow(f,w)}for(var D=this.m.subn(1),P=0;!D.isZero()&&D.andln(1)===0;)P++,D.iushrn(1);i(!D.isZero());var C=new a(1).toRed(this),L=C.redNeg(),x=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new a(2*g*g).toRed(this);this.pow(g,x).cmp(L)!==0;)g.redIAdd(L);for(var N=this.pow(g,D),it=this.pow(f,D.addn(1).iushrn(1)),ft=this.pow(f,D),E=P;ft.cmp(C)!==0;){for(var Q=ft,B=0;Q.cmp(C)!==0;B++)Q=Q.redSqr();i(B<E);var F=this.pow(N,new a(1).iushln(E-B-1));it=it.redMul(F),N=F.redSqr(),ft=ft.redMul(N),E=B}return it},lt.prototype.invm=function(f){var l=f._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},lt.prototype.pow=function(f,l){if(l.isZero())return new a(1).toRed(this);if(l.cmpn(1)===0)return f.clone();var w=4,D=new Array(1<<w);D[0]=new a(1).toRed(this),D[1]=f;for(var P=2;P<D.length;P++)D[P]=this.mul(D[P-1],f);var C=D[0],L=0,x=0,g=l.bitLength()%26;for(g===0&&(g=26),P=l.length-1;P>=0;P--){for(var N=l.words[P],it=g-1;it>=0;it--){var ft=N>>it&1;if(C!==D[0]&&(C=this.sqr(C)),ft===0&&L===0){x=0;continue}L<<=1,L|=ft,x++,!(x!==w&&(P!==0||it!==0))&&(C=this.mul(C,D[L]),x=0,L=0)}g=26}return C},lt.prototype.convertTo=function(f){var l=f.umod(this.m);return l===f?l.clone():l},lt.prototype.convertFrom=function(f){var l=f.clone();return l.red=null,l},a.mont=function(f){return new mt(f)};function mt(f){lt.call(this,f),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(mt,lt),mt.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},mt.prototype.convertFrom=function(f){var l=this.imod(f.mul(this.rinv));return l.red=null,l},mt.prototype.imul=function(f,l){if(f.isZero()||l.isZero())return f.words[0]=0,f.length=1,f;var w=f.imul(l),D=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=w.isub(D).iushrn(this.shift),C=P;return P.cmp(this.m)>=0?C=P.isub(this.m):P.cmpn(0)<0&&(C=P.iadd(this.m)),C._forceRed(this)},mt.prototype.mul=function(f,l){if(f.isZero()||l.isZero())return new a(0)._forceRed(this);var w=f.mul(l),D=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=w.isub(D).iushrn(this.shift),C=P;return P.cmp(this.m)>=0?C=P.isub(this.m):P.cmpn(0)<0&&(C=P.iadd(this.m)),C._forceRed(this)},mt.prototype.invm=function(f){var l=this.imod(f._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,R1)})(B1);var se=B1.exports;const j1="bignumber/5.7.0";var Jc=se.BN;const An=new gr(j1),zh={},i0=9007199254740991;function b5(r){return r!=null&&(Tr.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||ei(r)||typeof r=="bigint"||mo(r))}let n0=!1,Tr=class Bi{constructor(t,e){t!==zh&&An.throwError("cannot call constructor directly; use BigNumber.from",gr.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return $r(ve(this).fromTwos(t))}toTwos(t){return $r(ve(this).toTwos(t))}abs(){return this._hex[0]==="-"?Bi.from(this._hex.substring(1)):this}add(t){return $r(ve(this).add(ve(t)))}sub(t){return $r(ve(this).sub(ve(t)))}div(t){return Bi.from(t).isZero()&&yi("division-by-zero","div"),$r(ve(this).div(ve(t)))}mul(t){return $r(ve(this).mul(ve(t)))}mod(t){const e=ve(t);return e.isNeg()&&yi("division-by-zero","mod"),$r(ve(this).umod(e))}pow(t){const e=ve(t);return e.isNeg()&&yi("negative-power","pow"),$r(ve(this).pow(e))}and(t){const e=ve(t);return(this.isNegative()||e.isNeg())&&yi("unbound-bitwise-result","and"),$r(ve(this).and(e))}or(t){const e=ve(t);return(this.isNegative()||e.isNeg())&&yi("unbound-bitwise-result","or"),$r(ve(this).or(e))}xor(t){const e=ve(t);return(this.isNegative()||e.isNeg())&&yi("unbound-bitwise-result","xor"),$r(ve(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&yi("negative-width","mask"),$r(ve(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&yi("negative-width","shl"),$r(ve(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&yi("negative-width","shr"),$r(ve(this).shrn(t))}eq(t){return ve(this).eq(ve(t))}lt(t){return ve(this).lt(ve(t))}lte(t){return ve(this).lte(ve(t))}gt(t){return ve(this).gt(ve(t))}gte(t){return ve(this).gte(ve(t))}isNegative(){return this._hex[0]==="-"}isZero(){return ve(this).isZero()}toNumber(){try{return ve(this).toNumber()}catch{yi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return An.throwError("this platform does not support BigInt",gr.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?n0||(n0=!0,An.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?An.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",gr.errors.UNEXPECTED_ARGUMENT,{}):An.throwError("BigNumber.toString does not accept parameters",gr.errors.UNEXPECTED_ARGUMENT,{})),ve(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof Bi)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new Bi(zh,ua(t)):t.match(/^-?[0-9]+$/)?new Bi(zh,ua(new Jc(t))):An.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&yi("underflow","BigNumber.from",t),(t>=i0||t<=-i0)&&yi("overflow","BigNumber.from",t),Bi.from(String(t));const e=t;if(typeof e=="bigint")return Bi.from(e.toString());if(mo(e))return Bi.from(kr(e));if(e)if(e.toHexString){const i=e.toHexString();if(typeof i=="string")return Bi.from(i)}else{let i=e._hex;if(i==null&&e.type==="BigNumber"&&(i=e.hex),typeof i=="string"&&(ei(i)||i[0]==="-"&&ei(i.substring(1))))return Bi.from(i)}return An.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}};function ua(r){if(typeof r!="string")return ua(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&An.throwArgumentError("invalid hex","value",r),r=ua(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function $r(r){return Tr.from(ua(r))}function ve(r){const t=Tr.from(r).toHexString();return t[0]==="-"?new Jc("-"+t.substring(3),16):new Jc(t.substring(2),16)}function yi(r,t,e){const i={fault:r,operation:t};return e!=null&&(i.value=e),An.throwError(r,gr.errors.NUMERIC_FAULT,i)}function _5(r){return new Jc(r,36).toString(16)}const Nr=new gr(j1),ra={},q1=Tr.from(0),$1=Tr.from(-1);function F1(r,t,e,i){const s={fault:t,operation:e};return i!==void 0&&(s.value=i),Nr.throwError(r,gr.errors.NUMERIC_FAULT,s)}let ia="0";for(;ia.length<256;)ia+=ia;function nf(r){if(typeof r!="number")try{r=Tr.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+ia.substring(0,r):Nr.throwArgumentError("invalid decimal size","decimals",r)}function kh(r,t){t==null&&(t=0);const e=nf(t);r=Tr.from(r);const i=r.lt(q1);i&&(r=r.mul($1));let s=r.mod(e).toString();for(;s.length<e.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const a=r.div(e).toString();return e.length===1?r=a:r=a+"."+s,i&&(r="-"+r),r}function bn(r,t){t==null&&(t=0);const e=nf(t);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Nr.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&Nr.throwArgumentError("missing value","value",r);const s=r.split(".");s.length>2&&Nr.throwArgumentError("too many decimal points","value",r);let a=s[0],u=s[1];for(a||(a="0"),u||(u="0");u[u.length-1]==="0";)u=u.substring(0,u.length-1);for(u.length>e.length-1&&F1("fractional component exceeds decimals","underflow","parseFixed"),u===""&&(u="0");u.length<e.length-1;)u+="0";const h=Tr.from(a),p=Tr.from(u);let d=h.mul(e).add(p);return i&&(d=d.mul($1)),d}let Hh=class xl{constructor(t,e,i,s){t!==ra&&Nr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",gr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=i,this.decimals=s,this.name=(e?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=nf(s),Object.freeze(this)}static from(t){if(t instanceof xl)return t;typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,i=128,s=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const a=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);a||Nr.throwArgumentError("invalid fixed format","format",t),e=a[1]!=="u",i=parseInt(a[2]),s=parseInt(a[3])}}else if(t){const a=(u,h,p)=>t[u]==null?p:(typeof t[u]!==h&&Nr.throwArgumentError("invalid fixed format ("+u+" not "+h+")","format."+u,t[u]),t[u]);e=a("signed","boolean",e),i=a("width","number",i),s=a("decimals","number",s)}return i%8&&Nr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&Nr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new xl(ra,e,i,s)}},z1=class Cr{constructor(t,e,i,s){t!==ra&&Nr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",gr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=e,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Nr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const e=bn(this._value,this.format.decimals),i=bn(t._value,t.format.decimals);return Cr.fromValue(e.add(i),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=bn(this._value,this.format.decimals),i=bn(t._value,t.format.decimals);return Cr.fromValue(e.sub(i),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=bn(this._value,this.format.decimals),i=bn(t._value,t.format.decimals);return Cr.fromValue(e.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=bn(this._value,this.format.decimals),i=bn(t._value,t.format.decimals);return Cr.fromValue(e.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let e=Cr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return this.isNegative()&&i&&(e=e.subUnsafe(s0.toFormat(e.format))),e}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let e=Cr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return!this.isNegative()&&i&&(e=e.addUnsafe(s0.toFormat(e.format))),e}round(t){t==null&&(t=0);const e=this.toString().split(".");if(e.length===1&&e.push("0"),(t<0||t>80||t%1)&&Nr.throwArgumentError("invalid decimal count","decimals",t),e[1].length<=t)return this;const i=Cr.from("1"+ia.substring(0,t),this.format),s=E5.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&Nr.throwArgumentError("invalid byte width","width",t);const e=Tr.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return en(e,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Cr.fromString(this._value,t)}static fromValue(t,e,i){return i==null&&e!=null&&!b5(e)&&(i=e,e=null),e==null&&(e=0),i==null&&(i="fixed"),Cr.fromString(kh(t,e),Hh.from(i))}static fromString(t,e){e==null&&(e="fixed");const i=Hh.from(e),s=bn(t,i.decimals);!i.signed&&s.lt(q1)&&F1("unsigned value cannot be negative","overflow","value",t);let a=null;i.signed?a=s.toTwos(i.width).toHexString():(a=s.toHexString(),a=en(a,i.width/8));const u=kh(s,i.decimals);return new Cr(ra,a,u,i)}static fromBytes(t,e){e==null&&(e="fixed");const i=Hh.from(e);if(Ye(t).length>i.width/8)throw new Error("overflow");let s=Tr.from(t);i.signed&&(s=s.fromTwos(i.width));const a=s.toTwos((i.signed?0:1)+i.width).toHexString(),u=kh(s,i.decimals);return new Cr(ra,a,u,i)}static from(t,e){if(typeof t=="string")return Cr.fromString(t,e);if(mo(t))return Cr.fromBytes(t,e);try{return Cr.fromValue(t,0,e)}catch(i){if(i.code!==gr.errors.INVALID_ARGUMENT)throw i}return Nr.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}};const s0=z1.from(1),E5=z1.from("0.5"),A5="strings/5.7.0",S5=new gr(A5);var Xc;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Xc||(Xc={}));var o0;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(o0||(o0={}));function Kh(r,t=Xc.current){t!=Xc.current&&(S5.checkNormalize(),r=r.normalize(t));let e=[];for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){i++;const a=r.charCodeAt(i);if(i>=r.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");const u=65536+((s&1023)<<10)+(a&1023);e.push(u>>18|240),e.push(u>>12&63|128),e.push(u>>6&63|128),e.push(u&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return Ye(e)}function I5(r){if(r.length%4!==0)throw new Error("bad data");let t=[];for(let e=0;e<r.length;e+=4)t.push(parseInt(r.substring(e,e+4),16));return t}function Vh(r,t){t||(t=function(s){return[parseInt(s,16)]});let e=0,i={};return r.split(",").forEach(s=>{let a=s.split(":");e+=parseInt(a[0],16),i[e]=t(a[1])}),i}function a0(r){let t=0;return r.split(",").map(e=>{let i=e.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let s=t+parseInt(i[0],16);return t=parseInt(i[1],16),{l:s,h:t}})}a0("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),Vh("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Vh("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Vh("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",I5),a0("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function D5(r){r=atob(r);const t=[];for(let e=0;e<r.length;e++)t.push(r.charCodeAt(e));return Ye(t)}function k1(r,t){t==null&&(t=1);const e=[],i=e.forEach,s=function(a,u){i.call(a,function(h){u>0&&Array.isArray(h)?s(h,u-1):e.push(h)})};return s(r,t),e}function x5(r){const t={};for(let e=0;e<r.length;e++){const i=r[e];t[i[0]]=i[1]}return t}function M5(r){let t=0;function e(){return r[t++]<<8|r[t++]}let i=e(),s=1,a=[0,1];for(let $=1;$<i;$++)a.push(s+=e());let u=e(),h=t;t+=u;let p=0,d=0;function b(){return p==0&&(d=d<<8|r[t++],p=8),d>>--p&1}const _=31,S=Math.pow(2,_),I=S>>>1,M=I>>1,W=S-1;let H=0;for(let $=0;$<_;$++)H=H<<1|b();let tt=[],V=0,G=S;for(;;){let $=Math.floor(((H-V+1)*s-1)/G),z=0,y=i;for(;y-z>1;){let dt=z+y>>>1;$<a[dt]?y=dt:z=dt}if(z==0)break;tt.push(z);let T=V+Math.floor(G*a[z]/s),nt=V+Math.floor(G*a[z+1]/s)-1;for(;!((T^nt)&I);)H=H<<1&W|b(),T=T<<1&W,nt=nt<<1&W|1;for(;T&~nt&M;)H=H&I|H<<1&W>>>1|b(),T=T<<1^I,nt=(nt^I)<<1|I|1;V=T,G=1+nt-T}let j=i-4;return tt.map($=>{switch($-j){case 3:return j+65792+(r[h++]<<16|r[h++]<<8|r[h++]);case 2:return j+256+(r[h++]<<8|r[h++]);case 1:return j+r[h++];default:return $-1}})}function P5(r){let t=0;return()=>r[t++]}function O5(r){return P5(M5(r))}function C5(r){return r&1?~r>>1:r>>1}function N5(r,t){let e=Array(r);for(let i=0;i<r;i++)e[i]=1+t();return e}function c0(r,t){let e=Array(r);for(let i=0,s=-1;i<r;i++)e[i]=s+=1+t();return e}function R5(r,t){let e=Array(r);for(let i=0,s=0;i<r;i++)e[i]=s+=C5(t());return e}function Zc(r,t){let e=c0(r(),r),i=r(),s=c0(i,r),a=N5(i,r);for(let u=0;u<i;u++)for(let h=0;h<a[u];h++)e.push(s[u]+h);return t?e.map(u=>t[u]):e}function T5(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(U5(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(B5(e,r))}return x5(k1(t))}function L5(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(e)}return t}function H1(r,t,e){let i=Array(r).fill(void 0).map(()=>[]);for(let s=0;s<t;s++)R5(r,e).forEach((a,u)=>i[u].push(a));return i}function U5(r,t){let e=1+t(),i=t(),s=L5(t),a=H1(s.length,1+r,t);return k1(a.map((u,h)=>{const p=u[0],d=u.slice(1);return Array(s[h]).fill(void 0).map((b,_)=>{let S=_*i;return[p+_*e,d.map(I=>I+S)]})}))}function B5(r,t){let e=1+t();return H1(e,1+r,t).map(i=>[i[0],i.slice(1)])}function j5(r){let t=Zc(r).sort((i,s)=>i-s);return e();function e(){let i=[];for(;;){let d=Zc(r,t);if(d.length==0)break;i.push({set:new Set(d),node:e()})}i.sort((d,b)=>b.set.size-d.set.size);let s=r(),a=s%3;s=s/3|0;let u=!!(s&1);s>>=1;let h=s==1,p=s==2;return{branches:i,valid:a,fe0f:u,save:h,check:p}}}function q5(){return O5(D5("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Dc=q5();new Set(Zc(Dc)),new Set(Zc(Dc)),T5(Dc),j5(Dc);const $5=new Uint8Array(32);$5.fill(0);const F5=`Ethereum Signed Message:
`;function K1(r){return typeof r=="string"&&(r=Kh(r)),rf(p5([Kh(F5),Kh(String(r.length)),r]))}const z5="address/5.7.0",Xo=new gr(z5);function u0(r){ei(r,20)||Xo.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const i=Ye(rf(e));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(i[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const k5=9007199254740991;function H5(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const sf={};for(let r=0;r<10;r++)sf[String(r)]=String(r);for(let r=0;r<26;r++)sf[String.fromCharCode(65+r)]=String(10+r);const h0=Math.floor(H5(k5));function K5(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(i=>sf[i]).join("");for(;t.length>=h0;){let i=t.substring(0,h0);t=parseInt(i,10)%97+t.substring(i.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}function V5(r){let t=null;if(typeof r!="string"&&Xo.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),t=u0(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==r&&Xo.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==K5(r)&&Xo.throwArgumentError("bad icap checksum","address",r),t=_5(r.substring(4));t.length<40;)t="0"+t;t=u0("0x"+t)}else Xo.throwArgumentError("invalid address","address",r);return t}function Ko(r,t,e){Object.defineProperty(r,t,{enumerable:!0,value:e,writable:!1})}const G5=new Uint8Array(32);G5.fill(0),Tr.from(-1);const W5=Tr.from(0),Y5=Tr.from(1);Tr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),en(Y5.toHexString(),32),en(W5.toHexString(),32);var Yi={},ye={},ya=V1;function V1(r,t){if(!r)throw new Error(t||"Assertion failed")}V1.equal=function(r,t,e){if(r!=t)throw new Error(e||"Assertion failed: "+r+" != "+t)};var Ml={exports:{}};typeof Object.create=="function"?Ml.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Ml.exports=function(r,t){if(t){r.super_=t;var e=function(){};e.prototype=t.prototype,r.prototype=new e,r.prototype.constructor=r}};var Q5=ya,J5=Ml.exports;ye.inherits=J5;function X5(r,t){return(r.charCodeAt(t)&64512)!==55296||t<0||t+1>=r.length?!1:(r.charCodeAt(t+1)&64512)===56320}function Z5(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var e=[];if(typeof r=="string")if(t){if(t==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)e.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var a=r.charCodeAt(s);a<128?e[i++]=a:a<2048?(e[i++]=a>>6|192,e[i++]=a&63|128):X5(r,s)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[i++]=a>>18|240,e[i++]=a>>12&63|128,e[i++]=a>>6&63|128,e[i++]=a&63|128):(e[i++]=a>>12|224,e[i++]=a>>6&63|128,e[i++]=a&63|128)}else for(s=0;s<r.length;s++)e[s]=r[s]|0;return e}ye.toArray=Z5;function t8(r){for(var t="",e=0;e<r.length;e++)t+=W1(r[e].toString(16));return t}ye.toHex=t8;function G1(r){var t=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return t>>>0}ye.htonl=G1;function e8(r,t){for(var e="",i=0;i<r.length;i++){var s=r[i];t==="little"&&(s=G1(s)),e+=Y1(s.toString(16))}return e}ye.toHex32=e8;function W1(r){return r.length===1?"0"+r:r}ye.zero2=W1;function Y1(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}ye.zero8=Y1;function r8(r,t,e,i){var s=e-t;Q5(s%4===0);for(var a=new Array(s/4),u=0,h=t;u<a.length;u++,h+=4){var p;i==="big"?p=r[h]<<24|r[h+1]<<16|r[h+2]<<8|r[h+3]:p=r[h+3]<<24|r[h+2]<<16|r[h+1]<<8|r[h],a[u]=p>>>0}return a}ye.join32=r8;function i8(r,t){for(var e=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var a=r[i];t==="big"?(e[s]=a>>>24,e[s+1]=a>>>16&255,e[s+2]=a>>>8&255,e[s+3]=a&255):(e[s+3]=a>>>24,e[s+2]=a>>>16&255,e[s+1]=a>>>8&255,e[s]=a&255)}return e}ye.split32=i8;function n8(r,t){return r>>>t|r<<32-t}ye.rotr32=n8;function s8(r,t){return r<<t|r>>>32-t}ye.rotl32=s8;function o8(r,t){return r+t>>>0}ye.sum32=o8;function a8(r,t,e){return r+t+e>>>0}ye.sum32_3=a8;function c8(r,t,e,i){return r+t+e+i>>>0}ye.sum32_4=c8;function u8(r,t,e,i,s){return r+t+e+i+s>>>0}ye.sum32_5=u8;function h8(r,t,e,i){var s=r[t],a=r[t+1],u=i+a>>>0,h=(u<i?1:0)+e+s;r[t]=h>>>0,r[t+1]=u}ye.sum64=h8;function l8(r,t,e,i){var s=t+i>>>0,a=(s<t?1:0)+r+e;return a>>>0}ye.sum64_hi=l8;function f8(r,t,e,i){var s=t+i;return s>>>0}ye.sum64_lo=f8;function d8(r,t,e,i,s,a,u,h){var p=0,d=t;d=d+i>>>0,p+=d<t?1:0,d=d+a>>>0,p+=d<a?1:0,d=d+h>>>0,p+=d<h?1:0;var b=r+e+s+u+p;return b>>>0}ye.sum64_4_hi=d8;function p8(r,t,e,i,s,a,u,h){var p=t+i+a+h;return p>>>0}ye.sum64_4_lo=p8;function g8(r,t,e,i,s,a,u,h,p,d){var b=0,_=t;_=_+i>>>0,b+=_<t?1:0,_=_+a>>>0,b+=_<a?1:0,_=_+h>>>0,b+=_<h?1:0,_=_+d>>>0,b+=_<d?1:0;var S=r+e+s+u+p+b;return S>>>0}ye.sum64_5_hi=g8;function m8(r,t,e,i,s,a,u,h,p,d){var b=t+i+a+h+d;return b>>>0}ye.sum64_5_lo=m8;function v8(r,t,e){var i=t<<32-e|r>>>e;return i>>>0}ye.rotr64_hi=v8;function y8(r,t,e){var i=r<<32-e|t>>>e;return i>>>0}ye.rotr64_lo=y8;function w8(r,t,e){return r>>>e}ye.shr64_hi=w8;function b8(r,t,e){var i=r<<32-e|t>>>e;return i>>>0}ye.shr64_lo=b8;var vo={},l0=ye,_8=ya;function xc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}vo.BlockHash=xc,xc.prototype.update=function(r,t){if(r=l0.toArray(r,t),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var e=r.length%this._delta8;this.pending=r.slice(r.length-e,r.length),this.pending.length===0&&(this.pending=null),r=l0.join32(r,0,r.length-e,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},xc.prototype.digest=function(r){return this.update(this._pad()),_8(this.pending===null),this._digest(r)},xc.prototype._pad=function(){var r=this.pendingTotal,t=this._delta8,e=t-(r+this.padLength)%t,i=new Array(e+this.padLength);i[0]=128;for(var s=1;s<e;s++)i[s]=0;if(r<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=r>>>24&255,i[s++]=r>>>16&255,i[s++]=r>>>8&255,i[s++]=r&255}else for(i[s++]=r&255,i[s++]=r>>>8&255,i[s++]=r>>>16&255,i[s++]=r>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,a=8;a<this.padLength;a++)i[s++]=0;return i};var Js={},cn={},E8=ye,rn=E8.rotr32;function A8(r,t,e,i){if(r===0)return Q1(t,e,i);if(r===1||r===3)return X1(t,e,i);if(r===2)return J1(t,e,i)}cn.ft_1=A8;function Q1(r,t,e){return r&t^~r&e}cn.ch32=Q1;function J1(r,t,e){return r&t^r&e^t&e}cn.maj32=J1;function X1(r,t,e){return r^t^e}cn.p32=X1;function S8(r){return rn(r,2)^rn(r,13)^rn(r,22)}cn.s0_256=S8;function I8(r){return rn(r,6)^rn(r,11)^rn(r,25)}cn.s1_256=I8;function D8(r){return rn(r,7)^rn(r,18)^r>>>3}cn.g0_256=D8;function x8(r){return rn(r,17)^rn(r,19)^r>>>10}cn.g1_256=x8;var co=ye,M8=vo,P8=cn,Gh=co.rotl32,Vo=co.sum32,O8=co.sum32_5,C8=P8.ft_1,Z1=M8.BlockHash,N8=[1518500249,1859775393,2400959708,3395469782];function Zi(){if(!(this instanceof Zi))return new Zi;Z1.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}co.inherits(Zi,Z1);var R8=Zi;Zi.blockSize=512,Zi.outSize=160,Zi.hmacStrength=80,Zi.padLength=64,Zi.prototype._update=function(r,t){for(var e=this.W,i=0;i<16;i++)e[i]=r[t+i];for(;i<e.length;i++)e[i]=Gh(e[i-3]^e[i-8]^e[i-14]^e[i-16],1);var s=this.h[0],a=this.h[1],u=this.h[2],h=this.h[3],p=this.h[4];for(i=0;i<e.length;i++){var d=~~(i/20),b=O8(Gh(s,5),C8(d,a,u,h),p,e[i],N8[d]);p=h,h=u,u=Gh(a,30),a=s,s=b}this.h[0]=Vo(this.h[0],s),this.h[1]=Vo(this.h[1],a),this.h[2]=Vo(this.h[2],u),this.h[3]=Vo(this.h[3],h),this.h[4]=Vo(this.h[4],p)},Zi.prototype._digest=function(r){return r==="hex"?co.toHex32(this.h,"big"):co.split32(this.h,"big")};var uo=ye,T8=vo,yo=cn,L8=ya,Li=uo.sum32,U8=uo.sum32_4,B8=uo.sum32_5,j8=yo.ch32,q8=yo.maj32,$8=yo.s0_256,F8=yo.s1_256,z8=yo.g0_256,k8=yo.g1_256,tm=T8.BlockHash,H8=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function tn(){if(!(this instanceof tn))return new tn;tm.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=H8,this.W=new Array(64)}uo.inherits(tn,tm);var em=tn;tn.blockSize=512,tn.outSize=256,tn.hmacStrength=192,tn.padLength=64,tn.prototype._update=function(r,t){for(var e=this.W,i=0;i<16;i++)e[i]=r[t+i];for(;i<e.length;i++)e[i]=U8(k8(e[i-2]),e[i-7],z8(e[i-15]),e[i-16]);var s=this.h[0],a=this.h[1],u=this.h[2],h=this.h[3],p=this.h[4],d=this.h[5],b=this.h[6],_=this.h[7];for(L8(this.k.length===e.length),i=0;i<e.length;i++){var S=B8(_,F8(p),j8(p,d,b),this.k[i],e[i]),I=Li($8(s),q8(s,a,u));_=b,b=d,d=p,p=Li(h,S),h=u,u=a,a=s,s=Li(S,I)}this.h[0]=Li(this.h[0],s),this.h[1]=Li(this.h[1],a),this.h[2]=Li(this.h[2],u),this.h[3]=Li(this.h[3],h),this.h[4]=Li(this.h[4],p),this.h[5]=Li(this.h[5],d),this.h[6]=Li(this.h[6],b),this.h[7]=Li(this.h[7],_)},tn.prototype._digest=function(r){return r==="hex"?uo.toHex32(this.h,"big"):uo.split32(this.h,"big")};var Pl=ye,rm=em;function Sn(){if(!(this instanceof Sn))return new Sn;rm.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Pl.inherits(Sn,rm);var K8=Sn;Sn.blockSize=512,Sn.outSize=224,Sn.hmacStrength=192,Sn.padLength=64,Sn.prototype._digest=function(r){return r==="hex"?Pl.toHex32(this.h.slice(0,7),"big"):Pl.split32(this.h.slice(0,7),"big")};var Vr=ye,V8=vo,G8=ya,nn=Vr.rotr64_hi,sn=Vr.rotr64_lo,im=Vr.shr64_hi,nm=Vr.shr64_lo,kn=Vr.sum64,Wh=Vr.sum64_hi,Yh=Vr.sum64_lo,W8=Vr.sum64_4_hi,Y8=Vr.sum64_4_lo,Q8=Vr.sum64_5_hi,J8=Vr.sum64_5_lo,sm=V8.BlockHash,X8=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function qi(){if(!(this instanceof qi))return new qi;sm.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=X8,this.W=new Array(160)}Vr.inherits(qi,sm);var om=qi;qi.blockSize=1024,qi.outSize=512,qi.hmacStrength=192,qi.padLength=128,qi.prototype._prepareBlock=function(r,t){for(var e=this.W,i=0;i<32;i++)e[i]=r[t+i];for(;i<e.length;i+=2){var s=uS(e[i-4],e[i-3]),a=hS(e[i-4],e[i-3]),u=e[i-14],h=e[i-13],p=aS(e[i-30],e[i-29]),d=cS(e[i-30],e[i-29]),b=e[i-32],_=e[i-31];e[i]=W8(s,a,u,h,p,d,b,_),e[i+1]=Y8(s,a,u,h,p,d,b,_)}},qi.prototype._update=function(r,t){this._prepareBlock(r,t);var e=this.W,i=this.h[0],s=this.h[1],a=this.h[2],u=this.h[3],h=this.h[4],p=this.h[5],d=this.h[6],b=this.h[7],_=this.h[8],S=this.h[9],I=this.h[10],M=this.h[11],W=this.h[12],H=this.h[13],tt=this.h[14],V=this.h[15];G8(this.k.length===e.length);for(var G=0;G<e.length;G+=2){var j=tt,$=V,z=sS(_,S),y=oS(_,S),T=Z8(_,S,I,M,W),nt=tS(_,S,I,M,W,H),dt=this.k[G],lt=this.k[G+1],mt=e[G],f=e[G+1],l=Q8(j,$,z,y,T,nt,dt,lt,mt,f),w=J8(j,$,z,y,T,nt,dt,lt,mt,f);j=iS(i,s),$=nS(i,s),z=eS(i,s,a,u,h),y=rS(i,s,a,u,h,p);var D=Wh(j,$,z,y),P=Yh(j,$,z,y);tt=W,V=H,W=I,H=M,I=_,M=S,_=Wh(d,b,l,w),S=Yh(b,b,l,w),d=h,b=p,h=a,p=u,a=i,u=s,i=Wh(l,w,D,P),s=Yh(l,w,D,P)}kn(this.h,0,i,s),kn(this.h,2,a,u),kn(this.h,4,h,p),kn(this.h,6,d,b),kn(this.h,8,_,S),kn(this.h,10,I,M),kn(this.h,12,W,H),kn(this.h,14,tt,V)},qi.prototype._digest=function(r){return r==="hex"?Vr.toHex32(this.h,"big"):Vr.split32(this.h,"big")};function Z8(r,t,e,i,s){var a=r&e^~r&s;return a<0&&(a+=4294967296),a}function tS(r,t,e,i,s,a){var u=t&i^~t&a;return u<0&&(u+=4294967296),u}function eS(r,t,e,i,s){var a=r&e^r&s^e&s;return a<0&&(a+=4294967296),a}function rS(r,t,e,i,s,a){var u=t&i^t&a^i&a;return u<0&&(u+=4294967296),u}function iS(r,t){var e=nn(r,t,28),i=nn(t,r,2),s=nn(t,r,7),a=e^i^s;return a<0&&(a+=4294967296),a}function nS(r,t){var e=sn(r,t,28),i=sn(t,r,2),s=sn(t,r,7),a=e^i^s;return a<0&&(a+=4294967296),a}function sS(r,t){var e=nn(r,t,14),i=nn(r,t,18),s=nn(t,r,9),a=e^i^s;return a<0&&(a+=4294967296),a}function oS(r,t){var e=sn(r,t,14),i=sn(r,t,18),s=sn(t,r,9),a=e^i^s;return a<0&&(a+=4294967296),a}function aS(r,t){var e=nn(r,t,1),i=nn(r,t,8),s=im(r,t,7),a=e^i^s;return a<0&&(a+=4294967296),a}function cS(r,t){var e=sn(r,t,1),i=sn(r,t,8),s=nm(r,t,7),a=e^i^s;return a<0&&(a+=4294967296),a}function uS(r,t){var e=nn(r,t,19),i=nn(t,r,29),s=im(r,t,6),a=e^i^s;return a<0&&(a+=4294967296),a}function hS(r,t){var e=sn(r,t,19),i=sn(t,r,29),s=nm(r,t,6),a=e^i^s;return a<0&&(a+=4294967296),a}var Ol=ye,am=om;function In(){if(!(this instanceof In))return new In;am.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Ol.inherits(In,am);var lS=In;In.blockSize=1024,In.outSize=384,In.hmacStrength=192,In.padLength=128,In.prototype._digest=function(r){return r==="hex"?Ol.toHex32(this.h.slice(0,12),"big"):Ol.split32(this.h.slice(0,12),"big")},Js.sha1=R8,Js.sha224=K8,Js.sha256=em,Js.sha384=lS,Js.sha512=om;var cm={},As=ye,fS=vo,Mc=As.rotl32,f0=As.sum32,Go=As.sum32_3,d0=As.sum32_4,um=fS.BlockHash;function Qi(){if(!(this instanceof Qi))return new Qi;um.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}As.inherits(Qi,um),cm.ripemd160=Qi,Qi.blockSize=512,Qi.outSize=160,Qi.hmacStrength=192,Qi.padLength=64,Qi.prototype._update=function(r,t){for(var e=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],h=e,p=i,d=s,b=a,_=u,S=0;S<80;S++){var I=f0(Mc(d0(e,p0(S,i,s,a),r[gS[S]+t],dS(S)),vS[S]),u);e=u,u=a,a=Mc(s,10),s=i,i=I,I=f0(Mc(d0(h,p0(79-S,p,d,b),r[mS[S]+t],pS(S)),yS[S]),_),h=_,_=b,b=Mc(d,10),d=p,p=I}I=Go(this.h[1],s,b),this.h[1]=Go(this.h[2],a,_),this.h[2]=Go(this.h[3],u,h),this.h[3]=Go(this.h[4],e,p),this.h[4]=Go(this.h[0],i,d),this.h[0]=I},Qi.prototype._digest=function(r){return r==="hex"?As.toHex32(this.h,"little"):As.split32(this.h,"little")};function p0(r,t,e,i){return r<=15?t^e^i:r<=31?t&e|~t&i:r<=47?(t|~e)^i:r<=63?t&i|e&~i:t^(e|~i)}function dS(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function pS(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var gS=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],mS=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],vS=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],yS=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],wS=ye,bS=ya;function oo(r,t,e){if(!(this instanceof oo))return new oo(r,t,e);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(wS.toArray(t,e))}var _S=oo;oo.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),bS(r.length<=this.blockSize);for(var t=r.length;t<this.blockSize;t++)r.push(0);for(t=0;t<r.length;t++)r[t]^=54;for(this.inner=new this.Hash().update(r),t=0;t<r.length;t++)r[t]^=106;this.outer=new this.Hash().update(r)},oo.prototype.update=function(r,t){return this.inner.update(r,t),this},oo.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var t=r;t.utils=ye,t.common=vo,t.sha=Js,t.ripemd=cm,t.hmac=_S,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Yi);function wo(r,t,e){return e={path:t,exports:{},require:function(i,s){return ES(i,s??e.path)}},r(e,e.exports),e.exports}function ES(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var of=hm;function hm(r,t){if(!r)throw new Error(t||"Assertion failed")}hm.equal=function(r,t,e){if(r!=t)throw new Error(e||"Assertion failed: "+r+" != "+t)};var Fi=wo(function(r,t){var e=t;function i(u,h){if(Array.isArray(u))return u.slice();if(!u)return[];var p=[];if(typeof u!="string"){for(var d=0;d<u.length;d++)p[d]=u[d]|0;return p}if(h==="hex"){u=u.replace(/[^a-z0-9]+/ig,""),u.length%2!==0&&(u="0"+u);for(var d=0;d<u.length;d+=2)p.push(parseInt(u[d]+u[d+1],16))}else for(var d=0;d<u.length;d++){var b=u.charCodeAt(d),_=b>>8,S=b&255;_?p.push(_,S):p.push(S)}return p}e.toArray=i;function s(u){return u.length===1?"0"+u:u}e.zero2=s;function a(u){for(var h="",p=0;p<u.length;p++)h+=s(u[p].toString(16));return h}e.toHex=a,e.encode=function(u,h){return h==="hex"?a(u):u}}),ri=wo(function(r,t){var e=t;e.assert=of,e.toArray=Fi.toArray,e.zero2=Fi.zero2,e.toHex=Fi.toHex,e.encode=Fi.encode;function i(p,d,b){var _=new Array(Math.max(p.bitLength(),b)+1);_.fill(0);for(var S=1<<d+1,I=p.clone(),M=0;M<_.length;M++){var W,H=I.andln(S-1);I.isOdd()?(H>(S>>1)-1?W=(S>>1)-H:W=H,I.isubn(W)):W=0,_[M]=W,I.iushrn(1)}return _}e.getNAF=i;function s(p,d){var b=[[],[]];p=p.clone(),d=d.clone();for(var _=0,S=0,I;p.cmpn(-_)>0||d.cmpn(-S)>0;){var M=p.andln(3)+_&3,W=d.andln(3)+S&3;M===3&&(M=-1),W===3&&(W=-1);var H;M&1?(I=p.andln(7)+_&7,(I===3||I===5)&&W===2?H=-M:H=M):H=0,b[0].push(H);var tt;W&1?(I=d.andln(7)+S&7,(I===3||I===5)&&M===2?tt=-W:tt=W):tt=0,b[1].push(tt),2*_===H+1&&(_=1-_),2*S===tt+1&&(S=1-S),p.iushrn(1),d.iushrn(1)}return b}e.getJSF=s;function a(p,d,b){var _="_"+d;p.prototype[d]=function(){return this[_]!==void 0?this[_]:this[_]=b.call(this)}}e.cachedProperty=a;function u(p){return typeof p=="string"?e.toArray(p,"hex"):p}e.parseBytes=u;function h(p){return new se(p,"hex","le")}e.intFromLE=h}),Pc=ri.getNAF,AS=ri.getJSF,tu=ri.assert;function Gn(r,t){this.type=r,this.p=new se(t.p,16),this.red=t.prime?se.red(t.prime):se.mont(this.p),this.zero=new se(0).toRed(this.red),this.one=new se(1).toRed(this.red),this.two=new se(2).toRed(this.red),this.n=t.n&&new se(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var e=this.n&&this.p.div(this.n);!e||e.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ds=Gn;Gn.prototype.point=function(){throw new Error("Not implemented")},Gn.prototype.validate=function(){throw new Error("Not implemented")},Gn.prototype._fixedNafMul=function(r,t){tu(r.precomputed);var e=r._getDoubles(),i=Pc(t,1,this._bitLength),s=(1<<e.step+1)-(e.step%2===0?2:1);s/=3;var a=[],u,h;for(u=0;u<i.length;u+=e.step){h=0;for(var p=u+e.step-1;p>=u;p--)h=(h<<1)+i[p];a.push(h)}for(var d=this.jpoint(null,null,null),b=this.jpoint(null,null,null),_=s;_>0;_--){for(u=0;u<a.length;u++)h=a[u],h===_?b=b.mixedAdd(e.points[u]):h===-_&&(b=b.mixedAdd(e.points[u].neg()));d=d.add(b)}return d.toP()},Gn.prototype._wnafMul=function(r,t){var e=4,i=r._getNAFPoints(e);e=i.wnd;for(var s=i.points,a=Pc(t,e,this._bitLength),u=this.jpoint(null,null,null),h=a.length-1;h>=0;h--){for(var p=0;h>=0&&a[h]===0;h--)p++;if(h>=0&&p++,u=u.dblp(p),h<0)break;var d=a[h];tu(d!==0),r.type==="affine"?d>0?u=u.mixedAdd(s[d-1>>1]):u=u.mixedAdd(s[-d-1>>1].neg()):d>0?u=u.add(s[d-1>>1]):u=u.add(s[-d-1>>1].neg())}return r.type==="affine"?u.toP():u},Gn.prototype._wnafMulAdd=function(r,t,e,i,s){var a=this._wnafT1,u=this._wnafT2,h=this._wnafT3,p=0,d,b,_;for(d=0;d<i;d++){_=t[d];var S=_._getNAFPoints(r);a[d]=S.wnd,u[d]=S.points}for(d=i-1;d>=1;d-=2){var I=d-1,M=d;if(a[I]!==1||a[M]!==1){h[I]=Pc(e[I],a[I],this._bitLength),h[M]=Pc(e[M],a[M],this._bitLength),p=Math.max(h[I].length,p),p=Math.max(h[M].length,p);continue}var W=[t[I],null,null,t[M]];t[I].y.cmp(t[M].y)===0?(W[1]=t[I].add(t[M]),W[2]=t[I].toJ().mixedAdd(t[M].neg())):t[I].y.cmp(t[M].y.redNeg())===0?(W[1]=t[I].toJ().mixedAdd(t[M]),W[2]=t[I].add(t[M].neg())):(W[1]=t[I].toJ().mixedAdd(t[M]),W[2]=t[I].toJ().mixedAdd(t[M].neg()));var H=[-3,-1,-5,-7,0,7,5,1,3],tt=AS(e[I],e[M]);for(p=Math.max(tt[0].length,p),h[I]=new Array(p),h[M]=new Array(p),b=0;b<p;b++){var V=tt[0][b]|0,G=tt[1][b]|0;h[I][b]=H[(V+1)*3+(G+1)],h[M][b]=0,u[I]=W}}var j=this.jpoint(null,null,null),$=this._wnafT4;for(d=p;d>=0;d--){for(var z=0;d>=0;){var y=!0;for(b=0;b<i;b++)$[b]=h[b][d]|0,$[b]!==0&&(y=!1);if(!y)break;z++,d--}if(d>=0&&z++,j=j.dblp(z),d<0)break;for(b=0;b<i;b++){var T=$[b];T!==0&&(T>0?_=u[b][T-1>>1]:T<0&&(_=u[b][-T-1>>1].neg()),_.type==="affine"?j=j.mixedAdd(_):j=j.add(_))}}for(d=0;d<i;d++)u[d]=null;return s?j:j.toP()};function wi(r,t){this.curve=r,this.type=t,this.precomputed=null}Gn.BasePoint=wi,wi.prototype.eq=function(){throw new Error("Not implemented")},wi.prototype.validate=function(){return this.curve.validate(this)},Gn.prototype.decodePoint=function(r,t){r=ri.toArray(r,t);var e=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*e){r[0]===6?tu(r[r.length-1]%2===0):r[0]===7&&tu(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+e),r.slice(1+e,1+2*e));return i}else if((r[0]===2||r[0]===3)&&r.length-1===e)return this.pointFromX(r.slice(1,1+e),r[0]===3);throw new Error("Unknown point format")},wi.prototype.encodeCompressed=function(r){return this.encode(r,!0)},wi.prototype._encode=function(r){var t=this.curve.p.byteLength(),e=this.getX().toArray("be",t);return r?[this.getY().isEven()?2:3].concat(e):[4].concat(e,this.getY().toArray("be",t))},wi.prototype.encode=function(r,t){return ri.encode(this._encode(t),r)},wi.prototype.precompute=function(r){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,r),t.beta=this._getBeta(),this.precomputed=t,this},wi.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((r.bitLength()+1)/t.step):!1},wi.prototype._getDoubles=function(r,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var e=[this],i=this,s=0;s<t;s+=r){for(var a=0;a<r;a++)i=i.dbl();e.push(i)}return{step:r,points:e}},wi.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],e=(1<<r)-1,i=e===1?null:this.dbl(),s=1;s<e;s++)t[s]=t[s-1].add(i);return{wnd:r,points:t}},wi.prototype._getBeta=function(){return null},wi.prototype.dblp=function(r){for(var t=this,e=0;e<r;e++)t=t.dbl();return t};var af=wo(function(r){typeof Object.create=="function"?r.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}}),SS=ri.assert;function Si(r){Ds.call(this,"short",r),this.a=new se(r.a,16).toRed(this.red),this.b=new se(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}af(Si,Ds);var IS=Si;Si.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,e;if(r.beta)t=new se(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(r.lambda)e=new se(r.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?e=s[0]:(e=s[1],SS(this.g.mul(e).x.cmp(this.g.x.redMul(t))===0))}var a;return r.basis?a=r.basis.map(function(u){return{a:new se(u.a,16),b:new se(u.b,16)}}):a=this._getEndoBasis(e),{beta:t,lambda:e,basis:a}}},Si.prototype._getEndoRoots=function(r){var t=r===this.p?this.red:se.mont(r),e=new se(2).toRed(t).redInvm(),i=e.redNeg(),s=new se(3).toRed(t).redNeg().redSqrt().redMul(e),a=i.redAdd(s).fromRed(),u=i.redSub(s).fromRed();return[a,u]},Si.prototype._getEndoBasis=function(r){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),e=r,i=this.n.clone(),s=new se(1),a=new se(0),u=new se(0),h=new se(1),p,d,b,_,S,I,M,W=0,H,tt;e.cmpn(0)!==0;){var V=i.div(e);H=i.sub(V.mul(e)),tt=u.sub(V.mul(s));var G=h.sub(V.mul(a));if(!b&&H.cmp(t)<0)p=M.neg(),d=s,b=H.neg(),_=tt;else if(b&&++W===2)break;M=H,i=e,e=H,u=s,s=tt,h=a,a=G}S=H.neg(),I=tt;var j=b.sqr().add(_.sqr()),$=S.sqr().add(I.sqr());return $.cmp(j)>=0&&(S=p,I=d),b.negative&&(b=b.neg(),_=_.neg()),S.negative&&(S=S.neg(),I=I.neg()),[{a:b,b:_},{a:S,b:I}]},Si.prototype._endoSplit=function(r){var t=this.endo.basis,e=t[0],i=t[1],s=i.b.mul(r).divRound(this.n),a=e.b.neg().mul(r).divRound(this.n),u=s.mul(e.a),h=a.mul(i.a),p=s.mul(e.b),d=a.mul(i.b),b=r.sub(u).sub(h),_=p.add(d).neg();return{k1:b,k2:_}},Si.prototype.pointFromX=function(r,t){r=new se(r,16),r.red||(r=r.toRed(this.red));var e=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=e.redSqrt();if(i.redSqr().redSub(e).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(r,i)},Si.prototype.validate=function(r){if(r.inf)return!0;var t=r.x,e=r.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return e.redSqr().redISub(s).cmpn(0)===0},Si.prototype._endoWnafMulAdd=function(r,t,e){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<r.length;a++){var u=this._endoSplit(t[a]),h=r[a],p=h._getBeta();u.k1.negative&&(u.k1.ineg(),h=h.neg(!0)),u.k2.negative&&(u.k2.ineg(),p=p.neg(!0)),i[a*2]=h,i[a*2+1]=p,s[a*2]=u.k1,s[a*2+1]=u.k2}for(var d=this._wnafMulAdd(1,i,s,a*2,e),b=0;b<a*2;b++)i[b]=null,s[b]=null;return d};function cr(r,t,e,i){Ds.BasePoint.call(this,r,"affine"),t===null&&e===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new se(t,16),this.y=new se(e,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}af(cr,Ds.BasePoint),Si.prototype.point=function(r,t,e){return new cr(this,r,t,e)},Si.prototype.pointFromJSON=function(r,t){return cr.fromJSON(this,r,t)},cr.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var e=this.curve,i=function(s){return e.point(s.x.redMul(e.endo.beta),s.y)};r.beta=t,t.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t}},cr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},cr.fromJSON=function(r,t,e){typeof t=="string"&&(t=JSON.parse(t));var i=r.point(t[0],t[1],e);if(!t[2])return i;function s(u){return r.point(u[0],u[1],e)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i},cr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},cr.prototype.isInfinity=function(){return this.inf},cr.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var t=this.y.redSub(r.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(r.x).redInvm()));var e=t.redSqr().redISub(this.x).redISub(r.x),i=t.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,i)},cr.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,e=this.x.redSqr(),i=r.redInvm(),s=e.redAdd(e).redIAdd(e).redIAdd(t).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),u=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,u)},cr.prototype.getX=function(){return this.x.fromRed()},cr.prototype.getY=function(){return this.y.fromRed()},cr.prototype.mul=function(r){return r=new se(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},cr.prototype.mulAdd=function(r,t,e){var i=[this,t],s=[r,e];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},cr.prototype.jmulAdd=function(r,t,e){var i=[this,t],s=[r,e];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},cr.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},cr.prototype.neg=function(r){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var e=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t},cr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function fr(r,t,e,i){Ds.BasePoint.call(this,r,"jacobian"),t===null&&e===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new se(0)):(this.x=new se(t,16),this.y=new se(e,16),this.z=new se(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}af(fr,Ds.BasePoint),Si.prototype.jpoint=function(r,t,e){return new fr(this,r,t,e)},fr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),t=r.redSqr(),e=this.x.redMul(t),i=this.y.redMul(t).redMul(r);return this.curve.point(e,i)},fr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},fr.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var t=r.z.redSqr(),e=this.z.redSqr(),i=this.x.redMul(t),s=r.x.redMul(e),a=this.y.redMul(t.redMul(r.z)),u=r.y.redMul(e.redMul(this.z)),h=i.redSub(s),p=a.redSub(u);if(h.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=h.redSqr(),b=d.redMul(h),_=i.redMul(d),S=p.redSqr().redIAdd(b).redISub(_).redISub(_),I=p.redMul(_.redISub(S)).redISub(a.redMul(b)),M=this.z.redMul(r.z).redMul(h);return this.curve.jpoint(S,I,M)},fr.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var t=this.z.redSqr(),e=this.x,i=r.x.redMul(t),s=this.y,a=r.y.redMul(t).redMul(this.z),u=e.redSub(i),h=s.redSub(a);if(u.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=u.redSqr(),d=p.redMul(u),b=e.redMul(p),_=h.redSqr().redIAdd(d).redISub(b).redISub(b),S=h.redMul(b.redISub(_)).redISub(s.redMul(d)),I=this.z.redMul(u);return this.curve.jpoint(_,S,I)},fr.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var e=this;for(t=0;t<r;t++)e=e.dbl();return e}var i=this.curve.a,s=this.curve.tinv,a=this.x,u=this.y,h=this.z,p=h.redSqr().redSqr(),d=u.redAdd(u);for(t=0;t<r;t++){var b=a.redSqr(),_=d.redSqr(),S=_.redSqr(),I=b.redAdd(b).redIAdd(b).redIAdd(i.redMul(p)),M=a.redMul(_),W=I.redSqr().redISub(M.redAdd(M)),H=M.redISub(W),tt=I.redMul(H);tt=tt.redIAdd(tt).redISub(S);var V=d.redMul(h);t+1<r&&(p=p.redMul(S)),a=W,h=V,d=tt}return this.curve.jpoint(a,d.redMul(s),h)},fr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},fr.prototype._zeroDbl=function(){var r,t,e;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(a);u=u.redIAdd(u);var h=i.redAdd(i).redIAdd(i),p=h.redSqr().redISub(u).redISub(u),d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),r=p,t=h.redMul(u.redISub(p)).redISub(d),e=this.y.redAdd(this.y)}else{var b=this.x.redSqr(),_=this.y.redSqr(),S=_.redSqr(),I=this.x.redAdd(_).redSqr().redISub(b).redISub(S);I=I.redIAdd(I);var M=b.redAdd(b).redIAdd(b),W=M.redSqr(),H=S.redIAdd(S);H=H.redIAdd(H),H=H.redIAdd(H),r=W.redISub(I).redISub(I),t=M.redMul(I.redISub(r)).redISub(H),e=this.y.redMul(this.z),e=e.redIAdd(e)}return this.curve.jpoint(r,t,e)},fr.prototype._threeDbl=function(){var r,t,e;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(a);u=u.redIAdd(u);var h=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),p=h.redSqr().redISub(u).redISub(u);r=p;var d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),t=h.redMul(u.redISub(p)).redISub(d),e=this.y.redAdd(this.y)}else{var b=this.z.redSqr(),_=this.y.redSqr(),S=this.x.redMul(_),I=this.x.redSub(b).redMul(this.x.redAdd(b));I=I.redAdd(I).redIAdd(I);var M=S.redIAdd(S);M=M.redIAdd(M);var W=M.redAdd(M);r=I.redSqr().redISub(W),e=this.y.redAdd(this.z).redSqr().redISub(_).redISub(b);var H=_.redSqr();H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H),t=I.redMul(M.redISub(r)).redISub(H)}return this.curve.jpoint(r,t,e)},fr.prototype._dbl=function(){var r=this.curve.a,t=this.x,e=this.y,i=this.z,s=i.redSqr().redSqr(),a=t.redSqr(),u=e.redSqr(),h=a.redAdd(a).redIAdd(a).redIAdd(r.redMul(s)),p=t.redAdd(t);p=p.redIAdd(p);var d=p.redMul(u),b=h.redSqr().redISub(d.redAdd(d)),_=d.redISub(b),S=u.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=h.redMul(_).redISub(S),M=e.redAdd(e).redMul(i);return this.curve.jpoint(b,I,M)},fr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),t=this.y.redSqr(),e=this.z.redSqr(),i=t.redSqr(),s=r.redAdd(r).redIAdd(r),a=s.redSqr(),u=this.x.redAdd(t).redSqr().redISub(r).redISub(i);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(a);var h=u.redSqr(),p=i.redIAdd(i);p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var d=s.redIAdd(u).redSqr().redISub(a).redISub(h).redISub(p),b=t.redMul(d);b=b.redIAdd(b),b=b.redIAdd(b);var _=this.x.redMul(h).redISub(b);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.y.redMul(d.redMul(p.redISub(d)).redISub(u.redMul(h)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=this.z.redAdd(u).redSqr().redISub(e).redISub(h);return this.curve.jpoint(_,S,I)},fr.prototype.mul=function(r,t){return r=new se(r,t),this.curve._wnafMul(this,r)},fr.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var t=this.z.redSqr(),e=r.z.redSqr();if(this.x.redMul(e).redISub(r.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=e.redMul(r.z);return this.y.redMul(s).redISub(r.y.redMul(i)).cmpn(0)===0},fr.prototype.eqXToP=function(r){var t=this.z.redSqr(),e=r.toRed(this.curve.red).redMul(t);if(this.x.cmp(e)===0)return!0;for(var i=r.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(s),this.x.cmp(e)===0)return!0}},fr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},fr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Fc=wo(function(r,t){var e=t;e.base=Ds,e.short=IS,e.mont=null,e.edwards=null}),zc=wo(function(r,t){var e=t,i=ri.assert;function s(h){h.type==="short"?this.curve=new Fc.short(h):h.type==="edwards"?this.curve=new Fc.edwards(h):this.curve=new Fc.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=s;function a(h,p){Object.defineProperty(e,h,{configurable:!0,enumerable:!0,get:function(){var d=new s(p);return Object.defineProperty(e,h,{configurable:!0,enumerable:!0,value:d}),d}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Yi.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Yi.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Yi.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Yi.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Yi.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Yi.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Yi.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=null.crash()}catch{u=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Yi.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})});function Wn(r){if(!(this instanceof Wn))return new Wn(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Fi.toArray(r.entropy,r.entropyEnc||"hex"),e=Fi.toArray(r.nonce,r.nonceEnc||"hex"),i=Fi.toArray(r.pers,r.persEnc||"hex");of(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,e,i)}var g0=Wn;Wn.prototype._init=function(r,t,e){var i=r.concat(t).concat(e);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},Wn.prototype._hmac=function(){return new Yi.hmac(this.hash,this.K)},Wn.prototype._update=function(r){var t=this._hmac().update(this.V).update([0]);r&&(t=t.update(r)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},Wn.prototype.reseed=function(r,t,e,i){typeof t!="string"&&(i=e,e=t,t=null),r=Fi.toArray(r,t),e=Fi.toArray(e,i),of(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(e||[])),this._reseed=1},Wn.prototype.generate=function(r,t,e,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=e,e=t,t=null),e&&(e=Fi.toArray(e,i||"hex"),this._update(e));for(var s=[];s.length<r;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,r);return this._update(e),this._reseed++,Fi.encode(a,t)};var Qh=ri.assert;function Ar(r,t){this.ec=r,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Jh=Ar;Ar.fromPublic=function(r,t,e){return t instanceof Ar?t:new Ar(r,{pub:t,pubEnc:e})},Ar.fromPrivate=function(r,t,e){return t instanceof Ar?t:new Ar(r,{priv:t,privEnc:e})},Ar.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ar.prototype.getPublic=function(r,t){return typeof r=="string"&&(t=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,r):this.pub},Ar.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},Ar.prototype._importPrivate=function(r,t){this.priv=new se(r,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Ar.prototype._importPublic=function(r,t){if(r.x||r.y){this.ec.curve.type==="mont"?Qh(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Qh(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,t)},Ar.prototype.derive=function(r){return r.validate()||Qh(r.validate(),"public point not validated"),r.mul(this.priv).getX()},Ar.prototype.sign=function(r,t,e){return this.ec.sign(r,this,t,e)},Ar.prototype.verify=function(r,t){return this.ec.verify(r,t,this)},Ar.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var DS=ri.assert;function mu(r,t){if(r instanceof mu)return r;this._importDER(r,t)||(DS(r.r&&r.s,"Signature without r or s"),this.r=new se(r.r,16),this.s=new se(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Oc=mu;function xS(){this.place=0}function Xh(r,t){var e=r[t.place++];if(!(e&128))return e;var i=e&15;if(i===0||i>4)return!1;for(var s=0,a=0,u=t.place;a<i;a++,u++)s<<=8,s|=r[u],s>>>=0;return s<=127?!1:(t.place=u,s)}function m0(r){for(var t=0,e=r.length-1;!r[t]&&!(r[t+1]&128)&&t<e;)t++;return t===0?r:r.slice(t)}mu.prototype._importDER=function(r,t){r=ri.toArray(r,t);var e=new xS;if(r[e.place++]!==48)return!1;var i=Xh(r,e);if(i===!1||i+e.place!==r.length||r[e.place++]!==2)return!1;var s=Xh(r,e);if(s===!1)return!1;var a=r.slice(e.place,s+e.place);if(e.place+=s,r[e.place++]!==2)return!1;var u=Xh(r,e);if(u===!1||r.length!==u+e.place)return!1;var h=r.slice(e.place,u+e.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new se(a),this.s=new se(h),this.recoveryParam=null,!0};function Zh(r,t){if(t<128){r.push(t);return}var e=1+(Math.log(t)/Math.LN2>>>3);for(r.push(e|128);--e;)r.push(t>>>(e<<3)&255);r.push(t)}mu.prototype.toDER=function(r){var t=this.r.toArray(),e=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),e[0]&128&&(e=[0].concat(e)),t=m0(t),e=m0(e);!e[0]&&!(e[1]&128);)e=e.slice(1);var i=[2];Zh(i,t.length),i=i.concat(t),i.push(2),Zh(i,e.length);var s=i.concat(e),a=[48];return Zh(a,s.length),a=a.concat(s),ri.encode(a,r)};var MS=function(){throw new Error("unsupported")},lm=ri.assert;function Ei(r){if(!(this instanceof Ei))return new Ei(r);typeof r=="string"&&(lm(Object.prototype.hasOwnProperty.call(zc,r),"Unknown curve "+r),r=zc[r]),r instanceof zc.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var PS=Ei;Ei.prototype.keyPair=function(r){return new Jh(this,r)},Ei.prototype.keyFromPrivate=function(r,t){return Jh.fromPrivate(this,r,t)},Ei.prototype.keyFromPublic=function(r,t){return Jh.fromPublic(this,r,t)},Ei.prototype.genKeyPair=function(r){r||(r={});for(var t=new g0({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||MS(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),e=this.n.byteLength(),i=this.n.sub(new se(2));;){var s=new se(t.generate(e));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Ei.prototype._truncateToN=function(r,t){var e=r.byteLength()*8-this.n.bitLength();return e>0&&(r=r.ushrn(e)),!t&&r.cmp(this.n)>=0?r.sub(this.n):r},Ei.prototype.sign=function(r,t,e,i){typeof e=="object"&&(i=e,e=null),i||(i={}),t=this.keyFromPrivate(t,e),r=this._truncateToN(new se(r,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),u=r.toArray("be",s),h=new g0({hash:this.hash,entropy:a,nonce:u,pers:i.pers,persEnc:i.persEnc||"utf8"}),p=this.n.sub(new se(1)),d=0;;d++){var b=i.k?i.k(d):new se(h.generate(this.n.byteLength()));if(b=this._truncateToN(b,!0),!(b.cmpn(1)<=0||b.cmp(p)>=0)){var _=this.g.mul(b);if(!_.isInfinity()){var S=_.getX(),I=S.umod(this.n);if(I.cmpn(0)!==0){var M=b.invm(this.n).mul(I.mul(t.getPrivate()).iadd(r));if(M=M.umod(this.n),M.cmpn(0)!==0){var W=(_.getY().isOdd()?1:0)|(S.cmp(I)!==0?2:0);return i.canonical&&M.cmp(this.nh)>0&&(M=this.n.sub(M),W^=1),new Oc({r:I,s:M,recoveryParam:W})}}}}}},Ei.prototype.verify=function(r,t,e,i){r=this._truncateToN(new se(r,16)),e=this.keyFromPublic(e,i),t=new Oc(t,"hex");var s=t.r,a=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var u=a.invm(this.n),h=u.mul(r).umod(this.n),p=u.mul(s).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(h,e.getPublic(),p),d.isInfinity()?!1:d.eqXToP(s)):(d=this.g.mulAdd(h,e.getPublic(),p),d.isInfinity()?!1:d.getX().umod(this.n).cmp(s)===0)},Ei.prototype.recoverPubKey=function(r,t,e,i){lm((3&e)===e,"The recovery param is more than two bits"),t=new Oc(t,i);var s=this.n,a=new se(r),u=t.r,h=t.s,p=e&1,d=e>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?u=this.curve.pointFromX(u.add(this.curve.n),p):u=this.curve.pointFromX(u,p);var b=t.r.invm(s),_=s.sub(a).mul(b).umod(s),S=h.mul(b).umod(s);return this.g.mulAdd(_,u,S)},Ei.prototype.getKeyRecoveryParam=function(r,t,e,i){if(t=new Oc(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var s=0;s<4;s++){var a;try{a=this.recoverPubKey(r,t,s)}catch{continue}if(a.eq(e))return s}throw new Error("Unable to find valid recovery factor")};var OS=wo(function(r,t){var e=t;e.version="6.5.4",e.utils=ri,e.rand=function(){throw new Error("unsupported")},e.curve=Fc,e.curves=zc,e.ec=PS,e.eddsa=null}),CS=OS.ec;const NS="signing-key/5.7.0",Cl=new gr(NS);let tl=null;function Kn(){return tl||(tl=new CS("secp256k1")),tl}class RS{constructor(t){Ko(this,"curve","secp256k1"),Ko(this,"privateKey",kr(t)),m5(this.privateKey)!==32&&Cl.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const e=Kn().keyFromPrivate(Ye(this.privateKey));Ko(this,"publicKey","0x"+e.getPublic(!1,"hex")),Ko(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),Ko(this,"_isSigningKey",!0)}_addPoint(t){const e=Kn().keyFromPublic(Ye(this.publicKey)),i=Kn().keyFromPublic(Ye(t));return"0x"+e.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){const e=Kn().keyFromPrivate(Ye(this.privateKey)),i=Ye(t);i.length!==32&&Cl.throwArgumentError("bad digest length","digest",t);const s=e.sign(i,{canonical:!0});return U1({recoveryParam:s.recoveryParam,r:en("0x"+s.r.toString(16),32),s:en("0x"+s.s.toString(16),32)})}computeSharedSecret(t){const e=Kn().keyFromPrivate(Ye(this.privateKey)),i=Kn().keyFromPublic(Ye(fm(t)));return en("0x"+e.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function TS(r,t){const e=U1(t),i={r:Ye(e.r),s:Ye(e.s)};return"0x"+Kn().recoverPubKey(Ye(r),i,e.recoveryParam).encode("hex",!1)}function fm(r,t){const e=Ye(r);return e.length===32?new RS(e).publicKey:e.length===33?"0x"+Kn().keyFromPublic(e).getPublic(!1,"hex"):e.length===65?kr(e):Cl.throwArgumentError("invalid public or private key","key","[REDACTED]")}var v0;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(v0||(v0={}));function LS(r){const t=fm(r);return V5(r0(rf(r0(t,1)),12))}function US(r,t){return LS(TS(Ye(r),t))}const BS="https://rpc.walletconnect.com/v1";async function jS(r,t,e,i,s,a){switch(e.t){case"eip191":return qS(r,t,e.s);case"eip1271":return await $S(r,t,e.s,i,s,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${e.t}`)}}function qS(r,t,e){return US(K1(t),e).toLowerCase()===r.toLowerCase()}async function $S(r,t,e,i,s,a){try{const u="0x1626ba7e",h="0000000000000000000000000000000000000000000000000000000000000040",p="0000000000000000000000000000000000000000000000000000000000000041",d=e.substring(2),b=K1(t).substring(2),_=u+b+h+p+d,S=await fetch(`${a||BS}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:FS(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:_},"latest"]})}),{result:I}=await S.json();return I?I.slice(0,u.length).toLowerCase()===u.toLowerCase():!1}catch(u){return console.error("isValidEip1271Signature: ",u),!1}}function FS(){return Date.now()+Math.floor(Math.random()*1e3)}var zS=Object.defineProperty,kS=Object.defineProperties,HS=Object.getOwnPropertyDescriptors,y0=Object.getOwnPropertySymbols,KS=Object.prototype.hasOwnProperty,VS=Object.prototype.propertyIsEnumerable,w0=(r,t,e)=>t in r?zS(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,GS=(r,t)=>{for(var e in t||(t={}))KS.call(t,e)&&w0(r,e,t[e]);if(y0)for(var e of y0(t))VS.call(t,e)&&w0(r,e,t[e]);return r},WS=(r,t)=>kS(r,HS(t));const YS="did:pkh:",cf=r=>r==null?void 0:r.split(":"),dm=r=>{const t=r&&cf(r);if(t)return r.includes(YS)?t[3]:t[1]},b0=r=>{const t=r&&cf(r);if(t)return t[2]+":"+t[3]},eu=r=>{const t=r&&cf(r);if(t)return t.pop()};async function _0(r){const{cacao:t,projectId:e}=r,{s:i,p:s}=t,a=pm(s,s.iss),u=eu(s.iss);return await jS(u,a,i,dm(s.iss),e)}const pm=(r,t)=>{const e=`${r.domain} wants you to sign in with your Ethereum account:`,i=eu(t);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const a=`URI: ${r.aud||r.uri}`,u=`Version: ${r.version}`,h=`Chain ID: ${dm(t)}`,p=`Nonce: ${r.nonce}`,d=`Issued At: ${r.iat}`,b=r.resources?`Resources:${r.resources.map(S=>`
- ${S}`).join("")}`:void 0,_=kc(r.resources);if(_){const S=ha(_);s=nI(s,S)}return[e,i,"",s,"",a,u,h,p,d,b].filter(S=>S!=null).join(`
`)};function QS(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function JS(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function Ss(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const t=Object.keys(r.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(e=>{const i=r.att[e];if(Array.isArray(i))throw new Error(`Resource must be an object: ${e}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${e}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${e}`);Object.keys(i).forEach(s=>{const a=i[s];if(!Array.isArray(a))throw new Error(`Ability limits ${s} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);a.forEach(u=>{if(typeof u!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${u}`)})})})}function XS(r,t,e,i={}){return e==null||e.sort((s,a)=>s.localeCompare(a)),{att:{[r]:ZS(t,e,i)}}}function ZS(r,t,e={}){t=t==null?void 0:t.sort((s,a)=>s.localeCompare(a));const i=t.map(s=>({[`${r}/${s}`]:[e]}));return Object.assign({},...i)}function gm(r){return Ss(r),`urn:recap:${QS(r).replace(/=/g,"")}`}function ha(r){const t=JS(r.replace("urn:recap:",""));return Ss(t),t}function tI(r,t,e){const i=XS(r,t,e);return gm(i)}function eI(r){return r&&r.includes("urn:recap:")}function rI(r,t){const e=ha(r),i=ha(t),s=iI(e,i);return gm(s)}function iI(r,t){Ss(r),Ss(t);const e=Object.keys(r.att).concat(Object.keys(t.att)).sort((s,a)=>s.localeCompare(a)),i={att:{}};return e.forEach(s=>{var a,u;Object.keys(((a=r.att)==null?void 0:a[s])||{}).concat(Object.keys(((u=t.att)==null?void 0:u[s])||{})).sort((h,p)=>h.localeCompare(p)).forEach(h=>{var p,d;i.att[s]=WS(GS({},i.att[s]),{[h]:((p=r.att[s])==null?void 0:p[h])||((d=t.att[s])==null?void 0:d[h])})})}),i}function nI(r="",t){Ss(t);const e="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(e))return r;const i=[];let s=0;Object.keys(t.att).forEach(h=>{const p=Object.keys(t.att[h]).map(_=>({ability:_.split("/")[0],action:_.split("/")[1]}));p.sort((_,S)=>_.action.localeCompare(S.action));const d={};p.forEach(_=>{d[_.ability]||(d[_.ability]=[]),d[_.ability].push(_.action)});const b=Object.keys(d).map(_=>(s++,`(${s}) '${_}': '${d[_].join("', '")}' for '${h}'.`));i.push(b.join(", ").replace(".,","."))});const a=i.join(" "),u=`${e}${a}`;return`${r?r+" ":""}${u}`}function E0(r){var t;const e=ha(r);Ss(e);const i=(t=e.att)==null?void 0:t.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function A0(r){const t=ha(r);Ss(t);const e=[];return Object.values(t.att).forEach(i=>{Object.values(i).forEach(s=>{var a;(a=s==null?void 0:s[0])!=null&&a.chains&&e.push(s[0].chains)})}),[...new Set(e.flat())]}function kc(r){if(!r)return;const t=r==null?void 0:r[r.length-1];return eI(t)?t:void 0}const mm="base10",Rr="base16",Nl="base64pad",uf="utf8",vm=0,Dn=1,sI=0,S0=1,Rl=12,hf=32;function oI(){const r=ef.generateKeyPair();return{privateKey:Ii(r.secretKey,Rr),publicKey:Ii(r.publicKey,Rr)}}function Tl(){const r=fo.randomBytes(hf);return Ii(r,Rr)}function aI(r,t){const e=ef.sharedKey($i(r,Rr),$i(t,Rr),!0),i=new BE(pu.SHA256,e).expand(hf);return Ii(i,Rr)}function Hc(r){const t=pu.hash($i(r,Rr));return Ii(t,Rr)}function _s(r){const t=pu.hash($i(r,uf));return Ii(t,Rr)}function cI(r){return $i(`${r}`,mm)}function wa(r){return Number(Ii(r,mm))}function uI(r){const t=cI(typeof r.type<"u"?r.type:vm);if(wa(t)===Dn&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const e=typeof r.senderPublicKey<"u"?$i(r.senderPublicKey,Rr):void 0,i=typeof r.iv<"u"?$i(r.iv,Rr):fo.randomBytes(Rl),s=new Zl.ChaCha20Poly1305($i(r.symKey,Rr)).seal(i,$i(r.message,uf));return lI({type:t,sealed:s,iv:i,senderPublicKey:e})}function hI(r){const t=new Zl.ChaCha20Poly1305($i(r.symKey,Rr)),{sealed:e,iv:i}=ru(r.encoded),s=t.open(i,e);if(s===null)throw new Error("Failed to decrypt");return Ii(s,uf)}function lI(r){if(wa(r.type)===Dn){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ii(Hp([r.type,r.senderPublicKey,r.iv,r.sealed]),Nl)}return Ii(Hp([r.type,r.iv,r.sealed]),Nl)}function ru(r){const t=$i(r,Nl),e=t.slice(sI,S0),i=S0;if(wa(e)===Dn){const h=i+hf,p=h+Rl,d=t.slice(i,h),b=t.slice(h,p),_=t.slice(p);return{type:e,sealed:_,iv:b,senderPublicKey:d}}const s=i+Rl,a=t.slice(i,s),u=t.slice(s);return{type:e,sealed:u,iv:a}}function fI(r,t){const e=ru(r);return ym({type:wa(e.type),senderPublicKey:typeof e.senderPublicKey<"u"?Ii(e.senderPublicKey,Rr):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function ym(r){const t=(r==null?void 0:r.type)||vm;if(t===Dn){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function I0(r){return r.type===Dn&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}const dI="irn";function Ll(r){return(r==null?void 0:r.relay)||{protocol:dI}}function Zo(r){const t=HA[r];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${r}`);return t}var pI=Object.defineProperty,gI=Object.defineProperties,mI=Object.getOwnPropertyDescriptors,D0=Object.getOwnPropertySymbols,vI=Object.prototype.hasOwnProperty,yI=Object.prototype.propertyIsEnumerable,x0=(r,t,e)=>t in r?pI(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,M0=(r,t)=>{for(var e in t||(t={}))vI.call(t,e)&&x0(r,e,t[e]);if(D0)for(var e of D0(t))yI.call(t,e)&&x0(r,e,t[e]);return r},wI=(r,t)=>gI(r,mI(t));function bI(r,t="-"){const e={},i="relay"+t;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const a=s.replace(i,""),u=r[s];e[a]=u}}),e}function P0(r){r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const t=r.indexOf(":"),e=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,t),s=r.substring(t+1,e).split("@"),a=typeof e<"u"?r.substring(e):"",u=aa.parse(a),h=typeof u.methods=="string"?u.methods.split(","):void 0;return{protocol:i,topic:_I(s[0]),version:parseInt(s[1],10),symKey:u.symKey,relay:bI(u),methods:h,expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function _I(r){return r.startsWith("//")?r.substring(2):r}function EI(r,t="-"){const e="relay",i={};return Object.keys(r).forEach(s=>{const a=e+t+s;r[s]&&(i[a]=r[s])}),i}function AI(r){return`${r.protocol}:${r.topic}@${r.version}?`+aa.stringify(M0(wI(M0({symKey:r.symKey},EI(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function bo(r){const t=[];return r.forEach(e=>{const[i,s]=e.split(":");t.push(`${i}:${s}`)}),t}function SI(r){const t=[];return Object.values(r).forEach(e=>{t.push(...bo(e.accounts))}),t}function II(r,t){const e=[];return Object.values(r).forEach(i=>{bo(i.accounts).includes(t)&&e.push(...i.methods)}),e}function DI(r,t){const e=[];return Object.values(r).forEach(i=>{bo(i.accounts).includes(t)&&e.push(...i.events)}),e}function lf(r){return r.includes(":")}function ta(r){return lf(r)?r.split(":")[0]:r}function xI(r){const t={};return r==null||r.forEach(e=>{const[i,s]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[]}),t[i].accounts.push(e),t[i].chains.push(`${i}:${s}`)}),t}function O0(r,t){t=t.map(i=>i.replace("did:pkh:",""));const e=xI(t);for(const[i,s]of Object.entries(e))s.methods?s.methods=qc(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return e}const MI={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},PI={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function gt(r,t){const{message:e,code:i}=PI[r];return{message:t?`${e} ${t}`:e,code:i}}function Te(r,t){const{message:e,code:i}=MI[r];return{message:t?`${e} ${t}`:e,code:i}}function an(r,t){return!!Array.isArray(r)}function la(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Hr(r){return typeof r>"u"}function tr(r,t){return t&&Hr(r)?!0:typeof r=="string"&&!!r.trim().length}function ff(r,t){return typeof r=="number"&&!isNaN(r)}function OI(r,t){const{requiredNamespaces:e}=t,i=Object.keys(r.namespaces),s=Object.keys(e);let a=!0;return bs(s,i)?(i.forEach(u=>{const{accounts:h,methods:p,events:d}=r.namespaces[u],b=bo(h),_=e[u];(!bs(M1(u,_),b)||!bs(_.methods,p)||!bs(_.events,d))&&(a=!1)}),a):!1}function iu(r){return tr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function CI(r){if(tr(r,!1)&&r.includes(":")){const t=r.split(":");if(t.length===3){const e=t[0]+":"+t[1];return!!t[2]&&iu(e)}}return!1}function NI(r){if(tr(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function RI(r){var t;return(t=r==null?void 0:r.proposer)==null?void 0:t.publicKey}function TI(r){return r==null?void 0:r.topic}function LI(r,t){let e=null;return tr(r==null?void 0:r.publicKey,!1)||(e=gt("MISSING_OR_INVALID",`${t} controller public key should be a string`)),e}function C0(r){let t=!0;return an(r)?r.length&&(t=r.every(e=>tr(e,!1))):t=!1,t}function UI(r,t,e){let i=null;return an(t)&&t.length?t.forEach(s=>{i||iu(s)||(i=Te("UNSUPPORTED_CHAINS",`${e}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):iu(r)||(i=Te("UNSUPPORTED_CHAINS",`${e}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function BI(r,t,e){let i=null;return Object.entries(r).forEach(([s,a])=>{if(i)return;const u=UI(s,M1(s,a),`${t} ${e}`);u&&(i=u)}),i}function jI(r,t){let e=null;return an(r)?r.forEach(i=>{e||CI(i)||(e=Te("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):e=Te("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),e}function qI(r,t){let e=null;return Object.values(r).forEach(i=>{if(e)return;const s=jI(i==null?void 0:i.accounts,`${t} namespace`);s&&(e=s)}),e}function $I(r,t){let e=null;return C0(r==null?void 0:r.methods)?C0(r==null?void 0:r.events)||(e=Te("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):e=Te("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),e}function wm(r,t){let e=null;return Object.values(r).forEach(i=>{if(e)return;const s=$I(i,`${t}, namespace`);s&&(e=s)}),e}function FI(r,t,e){let i=null;if(r&&la(r)){const s=wm(r,t);s&&(i=s);const a=BI(r,t,e);a&&(i=a)}else i=gt("MISSING_OR_INVALID",`${t}, ${e} should be an object with data`);return i}function el(r,t){let e=null;if(r&&la(r)){const i=wm(r,t);i&&(e=i);const s=qI(r,t);s&&(e=s)}else e=gt("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return e}function bm(r){return tr(r.protocol,!0)}function zI(r,t){let e=!1;return r?r&&an(r)&&r.length&&r.forEach(i=>{e=bm(i)}):e=!0,e}function kI(r){return typeof r=="number"}function zr(r){return typeof r<"u"&&typeof r!==null}function HI(r){return!(!r||typeof r!="object"||!r.code||!ff(r.code)||!r.message||!tr(r.message,!1))}function KI(r){return!(Hr(r)||!tr(r.method,!1))}function VI(r){return!(Hr(r)||Hr(r.result)&&Hr(r.error)||!ff(r.id)||!tr(r.jsonrpc,!1))}function GI(r){return!(Hr(r)||!tr(r.name,!1))}function N0(r,t){return!(!iu(t)||!SI(r).includes(t))}function WI(r,t,e){return tr(e,!1)?II(r,t).includes(e):!1}function YI(r,t,e){return tr(e,!1)?DI(r,t).includes(e):!1}function R0(r,t,e){let i=null;const s=QI(r),a=JI(t),u=Object.keys(s),h=Object.keys(a),p=T0(Object.keys(r)),d=T0(Object.keys(t)),b=p.filter(_=>!d.includes(_));return b.length&&(i=gt("NON_CONFORMING_NAMESPACES",`${e} namespaces keys don't satisfy requiredNamespaces.
      Required: ${b.toString()}
      Received: ${Object.keys(t).toString()}`)),bs(u,h)||(i=gt("NON_CONFORMING_NAMESPACES",`${e} namespaces chains don't satisfy required namespaces.
      Required: ${u.toString()}
      Approved: ${h.toString()}`)),Object.keys(t).forEach(_=>{if(!_.includes(":")||i)return;const S=bo(t[_].accounts);S.includes(_)||(i=gt("NON_CONFORMING_NAMESPACES",`${e} namespaces accounts don't satisfy namespace accounts for ${_}
        Required: ${_}
        Approved: ${S.toString()}`))}),u.forEach(_=>{i||(bs(s[_].methods,a[_].methods)?bs(s[_].events,a[_].events)||(i=gt("NON_CONFORMING_NAMESPACES",`${e} namespaces events don't satisfy namespace events for ${_}`)):i=gt("NON_CONFORMING_NAMESPACES",`${e} namespaces methods don't satisfy namespace methods for ${_}`))}),i}function QI(r){const t={};return Object.keys(r).forEach(e=>{var i;e.includes(":")?t[e]=r[e]:(i=r[e].chains)==null||i.forEach(s=>{t[s]={methods:r[e].methods,events:r[e].events}})}),t}function T0(r){return[...new Set(r.map(t=>t.includes(":")?t.split(":")[0]:t))]}function JI(r){const t={};return Object.keys(r).forEach(e=>{if(e.includes(":"))t[e]=r[e];else{const i=bo(r[e].accounts);i==null||i.forEach(s=>{t[s]={accounts:r[e].accounts.filter(a=>a.includes(`${s}:`)),methods:r[e].methods,events:r[e].events}})}}),t}function XI(r,t){return ff(r)&&r<=t.max&&r>=t.min}function L0(){const r=va();return new Promise(t=>{switch(r){case ti.browser:t(ZI());break;case ti.reactNative:t(t4());break;case ti.node:t(e4());break;default:t(!0)}})}function ZI(){return go()&&(navigator==null?void 0:navigator.onLine)}async function t4(){if(po()&&typeof Ke<"u"&&Ke!=null&&Ke.NetInfo){const r=await(Ke==null?void 0:Ke.NetInfo.fetch());return r==null?void 0:r.isConnected}return!0}function e4(){return!0}function r4(r){switch(va()){case ti.browser:i4(r);break;case ti.reactNative:n4(r);break}}function i4(r){!po()&&go()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function n4(r){po()&&typeof Ke<"u"&&Ke!=null&&Ke.NetInfo&&(Ke==null||Ke.NetInfo.addEventListener(t=>r(t==null?void 0:t.isConnected)))}const rl={};class Wo{static get(t){return rl[t]}static set(t,e){rl[t]=e}static delete(t){delete rl[t]}}const s4=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,o4=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,a4=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function c4(r,t){if(r==="__proto__"||r==="constructor"&&t&&typeof t=="object"&&"prototype"in t){u4(r);return}return t}function u4(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function Cc(r,t={}){if(typeof r!="string")return r;const e=r.trim();if(r[0]==='"'&&r.endsWith('"')&&!r.includes("\\"))return e.slice(1,-1);if(e.length<=9){const i=e.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!a4.test(r)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(s4.test(r)||o4.test(r)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,c4)}return JSON.parse(r)}catch(i){if(t.strict)throw i;return r}}function h4(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function ur(r,...t){try{return h4(r(...t))}catch(e){return Promise.reject(e)}}function l4(r){const t=typeof r;return r===null||t!=="object"&&t!=="function"}function f4(r){const t=Object.getPrototypeOf(r);return!t||t.isPrototypeOf(Object)}function Kc(r){if(l4(r))return String(r);if(f4(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return Kc(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function _m(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Ul="base64:";function d4(r){if(typeof r=="string")return r;_m();const t=Buffer.from(r).toString("base64");return Ul+t}function p4(r){return typeof r!="string"||!r.startsWith(Ul)?r:(_m(),Buffer.from(r.slice(Ul.length),"base64"))}function Fr(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function g4(...r){return Fr(r.join(":"))}function Nc(r){return r=Fr(r),r?r+":":""}const m4="memory",v4=()=>{const r=new Map;return{name:m4,options:{},hasItem(t){return r.has(t)},getItem(t){return r.get(t)??null},getItemRaw(t){return r.get(t)??null},setItem(t,e){r.set(t,e)},setItemRaw(t,e){r.set(t,e)},removeItem(t){r.delete(t)},getKeys(){return Array.from(r.keys())},clear(){r.clear()},dispose(){r.clear()}}};function y4(r={}){const t={mounts:{"":r.driver||v4()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},e=d=>{for(const b of t.mountpoints)if(d.startsWith(b))return{base:b,relativeKey:d.slice(b.length),driver:t.mounts[b]};return{base:"",relativeKey:d,driver:t.mounts[""]}},i=(d,b)=>t.mountpoints.filter(_=>_.startsWith(d)||b&&d.startsWith(_)).map(_=>({relativeBase:d.length>_.length?d.slice(_.length):void 0,mountpoint:_,driver:t.mounts[_]})),s=(d,b)=>{if(t.watching){b=Fr(b);for(const _ of t.watchListeners)_(d,b)}},a=async()=>{if(!t.watching){t.watching=!0;for(const d in t.mounts)t.unwatch[d]=await U0(t.mounts[d],s,d)}},u=async()=>{if(t.watching){for(const d in t.unwatch)await t.unwatch[d]();t.unwatch={},t.watching=!1}},h=(d,b,_)=>{const S=new Map,I=M=>{let W=S.get(M.base);return W||(W={driver:M.driver,base:M.base,items:[]},S.set(M.base,W)),W};for(const M of d){const W=typeof M=="string",H=Fr(W?M:M.key),tt=W?void 0:M.value,V=W||!M.options?b:{...b,...M.options},G=e(H);I(G).items.push({key:H,value:tt,relativeKey:G.relativeKey,options:V})}return Promise.all([...S.values()].map(M=>_(M))).then(M=>M.flat())},p={hasItem(d,b={}){d=Fr(d);const{relativeKey:_,driver:S}=e(d);return ur(S.hasItem,_,b)},getItem(d,b={}){d=Fr(d);const{relativeKey:_,driver:S}=e(d);return ur(S.getItem,_,b).then(I=>Cc(I))},getItems(d,b){return h(d,b,_=>_.driver.getItems?ur(_.driver.getItems,_.items.map(S=>({key:S.relativeKey,options:S.options})),b).then(S=>S.map(I=>({key:g4(_.base,I.key),value:Cc(I.value)}))):Promise.all(_.items.map(S=>ur(_.driver.getItem,S.relativeKey,S.options).then(I=>({key:S.key,value:Cc(I)})))))},getItemRaw(d,b={}){d=Fr(d);const{relativeKey:_,driver:S}=e(d);return S.getItemRaw?ur(S.getItemRaw,_,b):ur(S.getItem,_,b).then(I=>p4(I))},async setItem(d,b,_={}){if(b===void 0)return p.removeItem(d);d=Fr(d);const{relativeKey:S,driver:I}=e(d);I.setItem&&(await ur(I.setItem,S,Kc(b),_),I.watch||s("update",d))},async setItems(d,b){await h(d,b,async _=>{if(_.driver.setItems)return ur(_.driver.setItems,_.items.map(S=>({key:S.relativeKey,value:Kc(S.value),options:S.options})),b);_.driver.setItem&&await Promise.all(_.items.map(S=>ur(_.driver.setItem,S.relativeKey,Kc(S.value),S.options)))})},async setItemRaw(d,b,_={}){if(b===void 0)return p.removeItem(d,_);d=Fr(d);const{relativeKey:S,driver:I}=e(d);if(I.setItemRaw)await ur(I.setItemRaw,S,b,_);else if(I.setItem)await ur(I.setItem,S,d4(b),_);else return;I.watch||s("update",d)},async removeItem(d,b={}){typeof b=="boolean"&&(b={removeMeta:b}),d=Fr(d);const{relativeKey:_,driver:S}=e(d);S.removeItem&&(await ur(S.removeItem,_,b),(b.removeMeta||b.removeMata)&&await ur(S.removeItem,_+"$",b),S.watch||s("remove",d))},async getMeta(d,b={}){typeof b=="boolean"&&(b={nativeOnly:b}),d=Fr(d);const{relativeKey:_,driver:S}=e(d),I=Object.create(null);if(S.getMeta&&Object.assign(I,await ur(S.getMeta,_,b)),!b.nativeOnly){const M=await ur(S.getItem,_+"$",b).then(W=>Cc(W));M&&typeof M=="object"&&(typeof M.atime=="string"&&(M.atime=new Date(M.atime)),typeof M.mtime=="string"&&(M.mtime=new Date(M.mtime)),Object.assign(I,M))}return I},setMeta(d,b,_={}){return this.setItem(d+"$",b,_)},removeMeta(d,b={}){return this.removeItem(d+"$",b)},async getKeys(d,b={}){d=Nc(d);const _=i(d,!0);let S=[];const I=[];for(const M of _){const H=(await ur(M.driver.getKeys,M.relativeBase,b)).map(tt=>M.mountpoint+Fr(tt)).filter(tt=>!S.some(V=>tt.startsWith(V)));I.push(...H),S=[M.mountpoint,...S.filter(tt=>!tt.startsWith(M.mountpoint))]}return d?I.filter(M=>M.startsWith(d)&&!M.endsWith("$")):I.filter(M=>!M.endsWith("$"))},async clear(d,b={}){d=Nc(d),await Promise.all(i(d,!1).map(async _=>{if(_.driver.clear)return ur(_.driver.clear,_.relativeBase,b);if(_.driver.removeItem){const S=await _.driver.getKeys(_.relativeBase||"",b);return Promise.all(S.map(I=>_.driver.removeItem(I,b)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(d=>B0(d)))},async watch(d){return await a(),t.watchListeners.push(d),async()=>{t.watchListeners=t.watchListeners.filter(b=>b!==d),t.watchListeners.length===0&&await u()}},async unwatch(){t.watchListeners=[],await u()},mount(d,b){if(d=Nc(d),d&&t.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(t.mountpoints.push(d),t.mountpoints.sort((_,S)=>S.length-_.length)),t.mounts[d]=b,t.watching&&Promise.resolve(U0(b,s,d)).then(_=>{t.unwatch[d]=_}).catch(console.error),p},async unmount(d,b=!0){d=Nc(d),!(!d||!t.mounts[d])&&(t.watching&&d in t.unwatch&&(t.unwatch[d](),delete t.unwatch[d]),b&&await B0(t.mounts[d]),t.mountpoints=t.mountpoints.filter(_=>_!==d),delete t.mounts[d])},getMount(d=""){d=Fr(d)+":";const b=e(d);return{driver:b.driver,base:b.base}},getMounts(d="",b={}){return d=Fr(d),i(d,b.parents).map(S=>({driver:S.driver,base:S.mountpoint}))}};return p}function U0(r,t,e){return r.watch?r.watch((i,s)=>t(i,e+s)):()=>{}}async function B0(r){typeof r.dispose=="function"&&await ur(r.dispose)}function xs(r){return new Promise((t,e)=>{r.oncomplete=r.onsuccess=()=>t(r.result),r.onabort=r.onerror=()=>e(r.error)})}function Em(r,t){const e=indexedDB.open(r);e.onupgradeneeded=()=>e.result.createObjectStore(t);const i=xs(e);return(s,a)=>i.then(u=>a(u.transaction(t,s).objectStore(t)))}let il;function ba(){return il||(il=Em("keyval-store","keyval")),il}function j0(r,t=ba()){return t("readonly",e=>xs(e.get(r)))}function w4(r,t,e=ba()){return e("readwrite",i=>(i.put(t,r),xs(i.transaction)))}function b4(r,t=ba()){return t("readwrite",e=>(e.delete(r),xs(e.transaction)))}function _4(r=ba()){return r("readwrite",t=>(t.clear(),xs(t.transaction)))}function E4(r,t){return r.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},xs(r.transaction)}function A4(r=ba()){return r("readonly",t=>{if(t.getAllKeys)return xs(t.getAllKeys());const e=[];return E4(t,i=>e.push(i.key)).then(()=>e)})}const S4=r=>JSON.stringify(r,(t,e)=>typeof e=="bigint"?e.toString()+"n":e),I4=r=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,e=r.replace(t,'$1"$2n"$3');return JSON.parse(e,(i,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function _a(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return I4(r)}catch{return r}}function xn(r){return typeof r=="string"?r:S4(r)||""}var q0={};const D4="idb-keyval";var x4=(r={})=>{const t=r.base&&r.base.length>0?`${r.base}:`:"",e=s=>t+s;let i;return r.dbName&&r.storeName&&(i=Em(r.dbName,r.storeName)),{name:D4,options:r,async hasItem(s){return!(typeof await j0(e(s),i)>"u")},async getItem(s){return await j0(e(s),i)??null},setItem(s,a){return w4(e(s),a,i)},removeItem(s){return b4(e(s),i)},getKeys(){return A4(i)},clear(){return _4(i)}}};const M4="WALLET_CONNECT_V2_INDEXED_DB",P4="keyvaluestorage";let O4=class{constructor(){this.indexedDb=y4({driver:x4({dbName:M4,storeName:P4})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const e=await this.indexedDb.getItem(t);if(e!==null)return e}async setItem(t,e){await this.indexedDb.setItem(t,xn(e))}async removeItem(t){await this.indexedDb.removeItem(t)}};var nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof q0<"u"?q0:typeof self<"u"?self:{},Vc={exports:{}};(function(){let r;function t(){}r=t,r.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},r.prototype.setItem=function(e,i){this[e]=String(i)},r.prototype.removeItem=function(e){delete this[e]},r.prototype.clear=function(){const e=this;Object.keys(e).forEach(function(i){e[i]=void 0,delete e[i]})},r.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof nl<"u"&&nl.localStorage?Vc.exports=nl.localStorage:typeof window<"u"&&window.localStorage?Vc.exports=window.localStorage:Vc.exports=new t})();function C4(r){var t;return[r[0],_a((t=r[1])!=null?t:"")]}class N4{constructor(){this.localStorage=Vc.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(C4)}async getItem(t){const e=this.localStorage.getItem(t);if(e!==null)return _a(e)}async setItem(t,e){this.localStorage.setItem(t,xn(e))}async removeItem(t){this.localStorage.removeItem(t)}}const R4="wc_storage_version",$0=1,T4=async(r,t,e)=>{const i=R4,s=await t.getItem(i);if(s&&s>=$0){e(t);return}const a=await r.getKeys();if(!a.length){e(t);return}const u=[];for(;a.length;){const h=a.shift();if(!h)continue;const p=h.toLowerCase();if(p.includes("wc@")||p.includes("walletconnect")||p.includes("wc_")||p.includes("wallet_connect")){const d=await r.getItem(h);await t.setItem(h,d),u.push(h)}}await t.setItem(i,$0),e(t),L4(r,u)},L4=async(r,t)=>{t.length&&t.forEach(async e=>{await r.removeItem(e)})};let U4=class{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const t=new N4;this.storage=t;try{const e=new O4;T4(t,e,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,e){return await this.initialize(),this.storage.setItem(t,e)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const e=setInterval(()=>{this.initialized&&(clearInterval(e),t())},20)})}};class Ms{}let B4=class extends Ms{constructor(t){super()}};const F0=yt.FIVE_SECONDS,Ea={pulse:"heartbeat_pulse"};let j4=class Am extends B4{constructor(t){super(t),this.events=new ii.EventEmitter,this.interval=F0,this.interval=(t==null?void 0:t.interval)||F0}static async init(t){const e=new Am(t);return await e.init(),e}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),yt.toMiliseconds(this.interval))}pulse(){this.events.emit(Ea.pulse)}};function q4(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}var $4=F4;function F4(r,t,e){var i=e&&e.stringify||q4,s=1;if(typeof r=="object"&&r!==null){var a=t.length+s;if(a===1)return r;var u=new Array(a);u[0]=i(r);for(var h=1;h<a;h++)u[h]=i(t[h]);return u.join(" ")}if(typeof r!="string")return r;var p=t.length;if(p===0)return r;for(var d="",b=1-s,_=-1,S=r&&r.length||0,I=0;I<S;){if(r.charCodeAt(I)===37&&I+1<S){switch(_=_>-1?_:0,r.charCodeAt(I+1)){case 100:case 102:if(b>=p||t[b]==null)break;_<I&&(d+=r.slice(_,I)),d+=Number(t[b]),_=I+2,I++;break;case 105:if(b>=p||t[b]==null)break;_<I&&(d+=r.slice(_,I)),d+=Math.floor(Number(t[b])),_=I+2,I++;break;case 79:case 111:case 106:if(b>=p||t[b]===void 0)break;_<I&&(d+=r.slice(_,I));var M=typeof t[b];if(M==="string"){d+="'"+t[b]+"'",_=I+2,I++;break}if(M==="function"){d+=t[b].name||"<anonymous>",_=I+2,I++;break}d+=i(t[b]),_=I+2,I++;break;case 115:if(b>=p)break;_<I&&(d+=r.slice(_,I)),d+=String(t[b]),_=I+2,I++;break;case 37:_<I&&(d+=r.slice(_,I)),d+="%",_=I+2,I++,b--;break}++b}++I}return _===-1?r:(_<S&&(d+=r.slice(_)),d)}const z0=$4;var Xs=on;const fa=J4().console||{},z4={mapHttpRequest:Rc,mapHttpResponse:Rc,wrapRequestSerializer:sl,wrapResponseSerializer:sl,wrapErrorSerializer:sl,req:Rc,res:Rc,err:G4};function k4(r,t){return Array.isArray(r)?r.filter(function(i){return i!=="!stdSerializers.err"}):r===!0?Object.keys(t):!1}function on(r){r=r||{},r.browser=r.browser||{};const t=r.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const e=r.browser.write||fa;r.browser.write&&(r.browser.asObject=!0);const i=r.serializers||{},s=k4(r.browser.serialize,i);let a=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);const u=["error","fatal","warn","info","debug","trace"];typeof e=="function"&&(e.error=e.fatal=e.warn=e.info=e.debug=e.trace=e),r.enabled===!1&&(r.level="silent");const h=r.level||"info",p=Object.create(e);p.log||(p.log=da),Object.defineProperty(p,"levelVal",{get:b}),Object.defineProperty(p,"level",{get:_,set:S});const d={transmit:t,serialize:s,asObject:r.browser.asObject,levels:u,timestamp:W4(r)};p.levels=on.levels,p.level=h,p.setMaxListeners=p.getMaxListeners=p.emit=p.addListener=p.on=p.prependListener=p.once=p.prependOnceListener=p.removeListener=p.removeAllListeners=p.listeners=p.listenerCount=p.eventNames=p.write=p.flush=da,p.serializers=i,p._serialize=s,p._stdErrSerialize=a,p.child=I,t&&(p._logEvent=Bl());function b(){return this.level==="silent"?1/0:this.levels.values[this.level]}function _(){return this._level}function S(M){if(M!=="silent"&&!this.levels.values[M])throw Error("unknown level "+M);this._level=M,Ws(d,p,"error","log"),Ws(d,p,"fatal","error"),Ws(d,p,"warn","error"),Ws(d,p,"info","log"),Ws(d,p,"debug","log"),Ws(d,p,"trace","log")}function I(M,W){if(!M)throw new Error("missing bindings for child Pino");W=W||{},s&&M.serializers&&(W.serializers=M.serializers);const H=W.serializers;if(s&&H){var tt=Object.assign({},i,H),V=r.browser.serialize===!0?Object.keys(tt):s;delete M.serializers,vu([M],V,tt,this._stdErrSerialize)}function G(j){this._childLevel=(j._childLevel|0)+1,this.error=Ys(j,M,"error"),this.fatal=Ys(j,M,"fatal"),this.warn=Ys(j,M,"warn"),this.info=Ys(j,M,"info"),this.debug=Ys(j,M,"debug"),this.trace=Ys(j,M,"trace"),tt&&(this.serializers=tt,this._serialize=V),t&&(this._logEvent=Bl([].concat(j._logEvent.bindings,M)))}return G.prototype=this,new G(this)}return p}on.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};on.stdSerializers=z4;on.stdTimeFunctions=Object.assign({},{nullTime:Sm,epochTime:Im,unixTime:Y4,isoTime:Q4});function Ws(r,t,e,i){const s=Object.getPrototypeOf(t);t[e]=t.levelVal>t.levels.values[e]?da:s[e]?s[e]:fa[e]||fa[i]||da,H4(r,t,e)}function H4(r,t,e){!r.transmit&&t[e]===da||(t[e]=function(i){return function(){const a=r.timestamp(),u=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===fa?fa:this;for(var p=0;p<u.length;p++)u[p]=arguments[p];if(r.serialize&&!r.asObject&&vu(u,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?i.call(h,K4(this,e,u,a)):i.apply(h,u),r.transmit){const d=r.transmit.level||t.level,b=on.levels.values[d],_=on.levels.values[e];if(_<b)return;V4(this,{ts:a,methodLevel:e,methodValue:_,transmitLevel:d,transmitValue:on.levels.values[r.transmit.level||t.level],send:r.transmit.send,val:t.levelVal},u)}}}(t[e]))}function K4(r,t,e,i){r._serialize&&vu(e,r._serialize,r.serializers,r._stdErrSerialize);const s=e.slice();let a=s[0];const u={};i&&(u.time=i),u.level=on.levels.values[t];let h=(r._childLevel|0)+1;if(h<1&&(h=1),a!==null&&typeof a=="object"){for(;h--&&typeof s[0]=="object";)Object.assign(u,s.shift());a=s.length?z0(s.shift(),s):void 0}else typeof a=="string"&&(a=z0(s.shift(),s));return a!==void 0&&(u.msg=a),u}function vu(r,t,e,i){for(const s in r)if(i&&r[s]instanceof Error)r[s]=on.stdSerializers.err(r[s]);else if(typeof r[s]=="object"&&!Array.isArray(r[s]))for(const a in r[s])t&&t.indexOf(a)>-1&&a in e&&(r[s][a]=e[a](r[s][a]))}function Ys(r,t,e){return function(){const i=new Array(1+arguments.length);i[0]=t;for(var s=1;s<i.length;s++)i[s]=arguments[s-1];return r[e].apply(this,i)}}function V4(r,t,e){const i=t.send,s=t.ts,a=t.methodLevel,u=t.methodValue,h=t.val,p=r._logEvent.bindings;vu(e,r._serialize||Object.keys(r.serializers),r.serializers,r._stdErrSerialize===void 0?!0:r._stdErrSerialize),r._logEvent.ts=s,r._logEvent.messages=e.filter(function(d){return p.indexOf(d)===-1}),r._logEvent.level.label=a,r._logEvent.level.value=u,i(a,r._logEvent,h),r._logEvent=Bl(p)}function Bl(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function G4(r){const t={type:r.constructor.name,msg:r.message,stack:r.stack};for(const e in r)t[e]===void 0&&(t[e]=r[e]);return t}function W4(r){return typeof r.timestamp=="function"?r.timestamp:r.timestamp===!1?Sm:Im}function Rc(){return{}}function sl(r){return r}function da(){}function Sm(){return!1}function Im(){return Date.now()}function Y4(){return Math.round(Date.now()/1e3)}function Q4(){return new Date(Date.now()).toISOString()}function J4(){function r(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return r(self)||r(window)||r(this)||{}}}const Aa=ho(Xs),X4={level:"info"},Sa="custom_context",df=1e3*1024;let Z4=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},k0=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const e=new Z4(t);if(e.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${e.size}`);for(;this.size+e.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=e),this.tail=e):(this.head=e,this.tail=e),this.lengthInNodes++,this.sizeInBytes+=e.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let e=this.head;for(;e!==null;)t.push(e.value),e=e.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const e=t.value;return t=t.next,{done:!1,value:e}}}}},Dm=class{constructor(t,e=df){this.level=t??"error",this.levelValue=Xs.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=e,this.logs=new k0(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,e){e===Xs.levels.values.error?console.error(t):e===Xs.levels.values.warn?console.warn(t):e===Xs.levels.values.debug?console.debug(t):e===Xs.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(xn({timestamp:new Date().toISOString(),log:t}));const e=typeof t=="string"?JSON.parse(t).level:t.level;e>=this.levelValue&&this.forwardToConsole(t,e)}getLogs(){return this.logs}clearLogs(){this.logs=new k0(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const e=this.getLogArray();return e.push(xn({extraMetadata:t})),new Blob(e,{type:"application/json"})}},tD=class{constructor(t,e=df){this.baseChunkLogger=new Dm(t,e)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const e=URL.createObjectURL(this.logsToBlob(t)),i=document.createElement("a");i.href=e,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(e)}},eD=class{constructor(t,e=df){this.baseChunkLogger=new Dm(t,e)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var rD=Object.defineProperty,iD=Object.defineProperties,nD=Object.getOwnPropertyDescriptors,H0=Object.getOwnPropertySymbols,sD=Object.prototype.hasOwnProperty,oD=Object.prototype.propertyIsEnumerable,K0=(r,t,e)=>t in r?rD(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,nu=(r,t)=>{for(var e in t||(t={}))sD.call(t,e)&&K0(r,e,t[e]);if(H0)for(var e of H0(t))oD.call(t,e)&&K0(r,e,t[e]);return r},su=(r,t)=>iD(r,nD(t));function yu(r){return su(nu({},r),{level:(r==null?void 0:r.level)||X4.level})}function aD(r,t=Sa){return r[t]||""}function cD(r,t,e=Sa){return r[e]=t,r}function Gr(r,t=Sa){let e="";return typeof r.bindings>"u"?e=aD(r,t):e=r.bindings().context||"",e}function uD(r,t,e=Sa){const i=Gr(r,e);return i.trim()?`${i}/${t}`:t}function Wr(r,t,e=Sa){const i=uD(r,t,e),s=r.child({context:i});return cD(s,i,e)}function hD(r){var t,e;const i=new tD((t=r.opts)==null?void 0:t.level,r.maxSizeInBytes);return{logger:Aa(su(nu({},r.opts),{level:"trace",browser:su(nu({},(e=r.opts)==null?void 0:e.browser),{write:s=>i.write(s)})})),chunkLoggerController:i}}function lD(r){var t;const e=new eD((t=r.opts)==null?void 0:t.level,r.maxSizeInBytes);return{logger:Aa(su(nu({},r.opts),{level:"trace"}),e),chunkLoggerController:e}}function fD(r){return typeof r.loggerOverride<"u"&&typeof r.loggerOverride!="string"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<"u"?hD(r):lD(r)}let dD=class extends Ms{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}},pD=class extends Ms{constructor(t,e){super(),this.core=t,this.logger=e,this.records=new Map}},gD=class{constructor(t,e){this.logger=t,this.core=e}},mD=class extends Ms{constructor(t,e){super(),this.relayer=t,this.logger=e}},vD=class extends Ms{constructor(t){super()}},yD=class{constructor(t,e,i,s){this.core=t,this.logger=e,this.name=i}},wD=class extends Ms{constructor(t,e){super(),this.relayer=t,this.logger=e}},bD=class extends Ms{constructor(t,e){super(),this.core=t,this.logger=e}},_D=class{constructor(t,e){this.projectId=t,this.logger=e}},ED=class{constructor(t,e){this.projectId=t,this.logger=e}},AD=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},SD=class{constructor(t){this.client=t}};var pf={},xm={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var t=oe,e=ni;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function h(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return h.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},h.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},h.prototype.clean=function(){e.wipe(this._buffer),e.wipe(this._tempHi),e.wipe(this._tempLo),this.reset()},h.prototype.update=function(p,d){if(d===void 0&&(d=p.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var b=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&d>0;)this._buffer[this._bufferLength++]=p[b++],d--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(b=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,p,b,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=p[b++],d--;return this},h.prototype.finish=function(p){if(!this._finished){var d=this._bytesHashed,b=this._bufferLength,_=d/536870912|0,S=d<<3,I=d%128<112?128:256;this._buffer[b]=128;for(var M=b+1;M<I-8;M++)this._buffer[M]=0;t.writeUint32BE(_,this._buffer,I-8),t.writeUint32BE(S,this._buffer,I-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,I),this._finished=!0}for(var M=0;M<this.digestLength/8;M++)t.writeUint32BE(this._stateHi[M],p,M*8),t.writeUint32BE(this._stateLo[M],p,M*8+4);return this},h.prototype.digest=function(){var p=new Uint8Array(this.digestLength);return this.finish(p),p},h.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},h.prototype.restoreState=function(p){return this._stateHi.set(p.stateHi),this._stateLo.set(p.stateLo),this._bufferLength=p.bufferLength,p.buffer&&this._buffer.set(p.buffer),this._bytesHashed=p.bytesHashed,this._finished=!1,this},h.prototype.cleanSavedState=function(p){e.wipe(p.stateHi),e.wipe(p.stateLo),p.buffer&&e.wipe(p.buffer),p.bufferLength=0,p.bytesHashed=0},h}();r.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(h,p,d,b,_,S,I){for(var M=d[0],W=d[1],H=d[2],tt=d[3],V=d[4],G=d[5],j=d[6],$=d[7],z=b[0],y=b[1],T=b[2],nt=b[3],dt=b[4],lt=b[5],mt=b[6],f=b[7],l,w,D,P,C,L,x,g;I>=128;){for(var N=0;N<16;N++){var it=8*N+S;h[N]=t.readUint32BE(_,it),p[N]=t.readUint32BE(_,it+4)}for(var N=0;N<80;N++){var ft=M,E=W,Q=H,B=tt,F=V,k=G,m=j,U=$,et=z,at=y,ct=T,Mt=nt,Ct=dt,Dt=lt,Ee=mt,qt=f;if(l=$,w=f,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=(V>>>14|dt<<18)^(V>>>18|dt<<14)^(dt>>>9|V<<23),w=(dt>>>14|V<<18)^(dt>>>18|V<<14)^(V>>>9|dt<<23),C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,l=V&G^~V&j,w=dt&lt^~dt&mt,C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,l=s[N*2],w=s[N*2+1],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,l=h[N%16],w=p[N%16],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,D=x&65535|g<<16,P=C&65535|L<<16,l=D,w=P,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=(M>>>28|z<<4)^(z>>>2|M<<30)^(z>>>7|M<<25),w=(z>>>28|M<<4)^(M>>>2|z<<30)^(M>>>7|z<<25),C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,l=M&W^M&H^W&H,w=z&y^z&T^y&T,C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,U=x&65535|g<<16,qt=C&65535|L<<16,l=B,w=Mt,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=D,w=P,C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,B=x&65535|g<<16,Mt=C&65535|L<<16,W=ft,H=E,tt=Q,V=B,G=F,j=k,$=m,M=U,y=et,T=at,nt=ct,dt=Mt,lt=Ct,mt=Dt,f=Ee,z=qt,N%16===15)for(var it=0;it<16;it++)l=h[it],w=p[it],C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=h[(it+9)%16],w=p[(it+9)%16],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,D=h[(it+1)%16],P=p[(it+1)%16],l=(D>>>1|P<<31)^(D>>>8|P<<24)^D>>>7,w=(P>>>1|D<<31)^(P>>>8|D<<24)^(P>>>7|D<<25),C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,D=h[(it+14)%16],P=p[(it+14)%16],l=(D>>>19|P<<13)^(P>>>29|D<<3)^D>>>6,w=(P>>>19|D<<13)^(D>>>29|P<<3)^(P>>>6|D<<26),C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,h[it]=x&65535|g<<16,p[it]=C&65535|L<<16}l=M,w=z,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[0],w=b[0],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[0]=M=x&65535|g<<16,b[0]=z=C&65535|L<<16,l=W,w=y,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[1],w=b[1],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[1]=W=x&65535|g<<16,b[1]=y=C&65535|L<<16,l=H,w=T,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[2],w=b[2],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[2]=H=x&65535|g<<16,b[2]=T=C&65535|L<<16,l=tt,w=nt,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[3],w=b[3],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[3]=tt=x&65535|g<<16,b[3]=nt=C&65535|L<<16,l=V,w=dt,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[4],w=b[4],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[4]=V=x&65535|g<<16,b[4]=dt=C&65535|L<<16,l=G,w=lt,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[5],w=b[5],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[5]=G=x&65535|g<<16,b[5]=lt=C&65535|L<<16,l=j,w=mt,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[6],w=b[6],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[6]=j=x&65535|g<<16,b[6]=mt=C&65535|L<<16,l=$,w=f,C=w&65535,L=w>>>16,x=l&65535,g=l>>>16,l=d[7],w=b[7],C+=w&65535,L+=w>>>16,x+=l&65535,g+=l>>>16,L+=C>>>16,x+=L>>>16,g+=x>>>16,d[7]=$=x&65535|g<<16,b[7]=f=C&65535|L<<16,S+=128,I-=128}return S}function u(h){var p=new i;p.update(h);var d=p.digest();return p.clean(),d}r.hash=u})(xm);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const t=fo,e=xm,i=ni;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function s(B){const F=new Float64Array(16);if(B)for(let k=0;k<B.length;k++)F[k]=B[k];return F}const a=new Uint8Array(32);a[0]=9;const u=s(),h=s([1]),p=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function I(B,F){for(let k=0;k<16;k++)B[k]=F[k]|0}function M(B){let F=1;for(let k=0;k<16;k++){let m=B[k]+F+65535;F=Math.floor(m/65536),B[k]=m-F*65536}B[0]+=F-1+37*(F-1)}function W(B,F,k){const m=~(k-1);for(let U=0;U<16;U++){const et=m&(B[U]^F[U]);B[U]^=et,F[U]^=et}}function H(B,F){const k=s(),m=s();for(let U=0;U<16;U++)m[U]=F[U];M(m),M(m),M(m);for(let U=0;U<2;U++){k[0]=m[0]-65517;for(let at=1;at<15;at++)k[at]=m[at]-65535-(k[at-1]>>16&1),k[at-1]&=65535;k[15]=m[15]-32767-(k[14]>>16&1);const et=k[15]>>16&1;k[14]&=65535,W(m,k,1-et)}for(let U=0;U<16;U++)B[2*U]=m[U]&255,B[2*U+1]=m[U]>>8}function tt(B,F){let k=0;for(let m=0;m<32;m++)k|=B[m]^F[m];return(1&k-1>>>8)-1}function V(B,F){const k=new Uint8Array(32),m=new Uint8Array(32);return H(k,B),H(m,F),tt(k,m)}function G(B){const F=new Uint8Array(32);return H(F,B),F[0]&1}function j(B,F){for(let k=0;k<16;k++)B[k]=F[2*k]+(F[2*k+1]<<8);B[15]&=32767}function $(B,F,k){for(let m=0;m<16;m++)B[m]=F[m]+k[m]}function z(B,F,k){for(let m=0;m<16;m++)B[m]=F[m]-k[m]}function y(B,F,k){let m,U,et=0,at=0,ct=0,Mt=0,Ct=0,Dt=0,Ee=0,qt=0,Pt=0,Ut=0,Et=0,At=0,Ht=0,wt=0,St=0,Bt=0,bt=0,Ot=0,Qt=0,_t=0,Nt=0,ie=0,Tt=0,Lt=0,ze=0,ce=0,fe=0,hr=0,ue=0,we=0,Sr=0,Jt=k[0],Kt=k[1],Ae=k[2],Vt=k[3],kt=k[4],De=k[5],$t=k[6],Xt=k[7],xe=k[8],Zt=k[9],Gt=k[10],Le=k[11],Yt=k[12],Wt=k[13],_e=k[14],te=k[15];m=F[0],et+=m*Jt,at+=m*Kt,ct+=m*Ae,Mt+=m*Vt,Ct+=m*kt,Dt+=m*De,Ee+=m*$t,qt+=m*Xt,Pt+=m*xe,Ut+=m*Zt,Et+=m*Gt,At+=m*Le,Ht+=m*Yt,wt+=m*Wt,St+=m*_e,Bt+=m*te,m=F[1],at+=m*Jt,ct+=m*Kt,Mt+=m*Ae,Ct+=m*Vt,Dt+=m*kt,Ee+=m*De,qt+=m*$t,Pt+=m*Xt,Ut+=m*xe,Et+=m*Zt,At+=m*Gt,Ht+=m*Le,wt+=m*Yt,St+=m*Wt,Bt+=m*_e,bt+=m*te,m=F[2],ct+=m*Jt,Mt+=m*Kt,Ct+=m*Ae,Dt+=m*Vt,Ee+=m*kt,qt+=m*De,Pt+=m*$t,Ut+=m*Xt,Et+=m*xe,At+=m*Zt,Ht+=m*Gt,wt+=m*Le,St+=m*Yt,Bt+=m*Wt,bt+=m*_e,Ot+=m*te,m=F[3],Mt+=m*Jt,Ct+=m*Kt,Dt+=m*Ae,Ee+=m*Vt,qt+=m*kt,Pt+=m*De,Ut+=m*$t,Et+=m*Xt,At+=m*xe,Ht+=m*Zt,wt+=m*Gt,St+=m*Le,Bt+=m*Yt,bt+=m*Wt,Ot+=m*_e,Qt+=m*te,m=F[4],Ct+=m*Jt,Dt+=m*Kt,Ee+=m*Ae,qt+=m*Vt,Pt+=m*kt,Ut+=m*De,Et+=m*$t,At+=m*Xt,Ht+=m*xe,wt+=m*Zt,St+=m*Gt,Bt+=m*Le,bt+=m*Yt,Ot+=m*Wt,Qt+=m*_e,_t+=m*te,m=F[5],Dt+=m*Jt,Ee+=m*Kt,qt+=m*Ae,Pt+=m*Vt,Ut+=m*kt,Et+=m*De,At+=m*$t,Ht+=m*Xt,wt+=m*xe,St+=m*Zt,Bt+=m*Gt,bt+=m*Le,Ot+=m*Yt,Qt+=m*Wt,_t+=m*_e,Nt+=m*te,m=F[6],Ee+=m*Jt,qt+=m*Kt,Pt+=m*Ae,Ut+=m*Vt,Et+=m*kt,At+=m*De,Ht+=m*$t,wt+=m*Xt,St+=m*xe,Bt+=m*Zt,bt+=m*Gt,Ot+=m*Le,Qt+=m*Yt,_t+=m*Wt,Nt+=m*_e,ie+=m*te,m=F[7],qt+=m*Jt,Pt+=m*Kt,Ut+=m*Ae,Et+=m*Vt,At+=m*kt,Ht+=m*De,wt+=m*$t,St+=m*Xt,Bt+=m*xe,bt+=m*Zt,Ot+=m*Gt,Qt+=m*Le,_t+=m*Yt,Nt+=m*Wt,ie+=m*_e,Tt+=m*te,m=F[8],Pt+=m*Jt,Ut+=m*Kt,Et+=m*Ae,At+=m*Vt,Ht+=m*kt,wt+=m*De,St+=m*$t,Bt+=m*Xt,bt+=m*xe,Ot+=m*Zt,Qt+=m*Gt,_t+=m*Le,Nt+=m*Yt,ie+=m*Wt,Tt+=m*_e,Lt+=m*te,m=F[9],Ut+=m*Jt,Et+=m*Kt,At+=m*Ae,Ht+=m*Vt,wt+=m*kt,St+=m*De,Bt+=m*$t,bt+=m*Xt,Ot+=m*xe,Qt+=m*Zt,_t+=m*Gt,Nt+=m*Le,ie+=m*Yt,Tt+=m*Wt,Lt+=m*_e,ze+=m*te,m=F[10],Et+=m*Jt,At+=m*Kt,Ht+=m*Ae,wt+=m*Vt,St+=m*kt,Bt+=m*De,bt+=m*$t,Ot+=m*Xt,Qt+=m*xe,_t+=m*Zt,Nt+=m*Gt,ie+=m*Le,Tt+=m*Yt,Lt+=m*Wt,ze+=m*_e,ce+=m*te,m=F[11],At+=m*Jt,Ht+=m*Kt,wt+=m*Ae,St+=m*Vt,Bt+=m*kt,bt+=m*De,Ot+=m*$t,Qt+=m*Xt,_t+=m*xe,Nt+=m*Zt,ie+=m*Gt,Tt+=m*Le,Lt+=m*Yt,ze+=m*Wt,ce+=m*_e,fe+=m*te,m=F[12],Ht+=m*Jt,wt+=m*Kt,St+=m*Ae,Bt+=m*Vt,bt+=m*kt,Ot+=m*De,Qt+=m*$t,_t+=m*Xt,Nt+=m*xe,ie+=m*Zt,Tt+=m*Gt,Lt+=m*Le,ze+=m*Yt,ce+=m*Wt,fe+=m*_e,hr+=m*te,m=F[13],wt+=m*Jt,St+=m*Kt,Bt+=m*Ae,bt+=m*Vt,Ot+=m*kt,Qt+=m*De,_t+=m*$t,Nt+=m*Xt,ie+=m*xe,Tt+=m*Zt,Lt+=m*Gt,ze+=m*Le,ce+=m*Yt,fe+=m*Wt,hr+=m*_e,ue+=m*te,m=F[14],St+=m*Jt,Bt+=m*Kt,bt+=m*Ae,Ot+=m*Vt,Qt+=m*kt,_t+=m*De,Nt+=m*$t,ie+=m*Xt,Tt+=m*xe,Lt+=m*Zt,ze+=m*Gt,ce+=m*Le,fe+=m*Yt,hr+=m*Wt,ue+=m*_e,we+=m*te,m=F[15],Bt+=m*Jt,bt+=m*Kt,Ot+=m*Ae,Qt+=m*Vt,_t+=m*kt,Nt+=m*De,ie+=m*$t,Tt+=m*Xt,Lt+=m*xe,ze+=m*Zt,ce+=m*Gt,fe+=m*Le,hr+=m*Yt,ue+=m*Wt,we+=m*_e,Sr+=m*te,et+=38*bt,at+=38*Ot,ct+=38*Qt,Mt+=38*_t,Ct+=38*Nt,Dt+=38*ie,Ee+=38*Tt,qt+=38*Lt,Pt+=38*ze,Ut+=38*ce,Et+=38*fe,At+=38*hr,Ht+=38*ue,wt+=38*we,St+=38*Sr,U=1,m=et+U+65535,U=Math.floor(m/65536),et=m-U*65536,m=at+U+65535,U=Math.floor(m/65536),at=m-U*65536,m=ct+U+65535,U=Math.floor(m/65536),ct=m-U*65536,m=Mt+U+65535,U=Math.floor(m/65536),Mt=m-U*65536,m=Ct+U+65535,U=Math.floor(m/65536),Ct=m-U*65536,m=Dt+U+65535,U=Math.floor(m/65536),Dt=m-U*65536,m=Ee+U+65535,U=Math.floor(m/65536),Ee=m-U*65536,m=qt+U+65535,U=Math.floor(m/65536),qt=m-U*65536,m=Pt+U+65535,U=Math.floor(m/65536),Pt=m-U*65536,m=Ut+U+65535,U=Math.floor(m/65536),Ut=m-U*65536,m=Et+U+65535,U=Math.floor(m/65536),Et=m-U*65536,m=At+U+65535,U=Math.floor(m/65536),At=m-U*65536,m=Ht+U+65535,U=Math.floor(m/65536),Ht=m-U*65536,m=wt+U+65535,U=Math.floor(m/65536),wt=m-U*65536,m=St+U+65535,U=Math.floor(m/65536),St=m-U*65536,m=Bt+U+65535,U=Math.floor(m/65536),Bt=m-U*65536,et+=U-1+37*(U-1),U=1,m=et+U+65535,U=Math.floor(m/65536),et=m-U*65536,m=at+U+65535,U=Math.floor(m/65536),at=m-U*65536,m=ct+U+65535,U=Math.floor(m/65536),ct=m-U*65536,m=Mt+U+65535,U=Math.floor(m/65536),Mt=m-U*65536,m=Ct+U+65535,U=Math.floor(m/65536),Ct=m-U*65536,m=Dt+U+65535,U=Math.floor(m/65536),Dt=m-U*65536,m=Ee+U+65535,U=Math.floor(m/65536),Ee=m-U*65536,m=qt+U+65535,U=Math.floor(m/65536),qt=m-U*65536,m=Pt+U+65535,U=Math.floor(m/65536),Pt=m-U*65536,m=Ut+U+65535,U=Math.floor(m/65536),Ut=m-U*65536,m=Et+U+65535,U=Math.floor(m/65536),Et=m-U*65536,m=At+U+65535,U=Math.floor(m/65536),At=m-U*65536,m=Ht+U+65535,U=Math.floor(m/65536),Ht=m-U*65536,m=wt+U+65535,U=Math.floor(m/65536),wt=m-U*65536,m=St+U+65535,U=Math.floor(m/65536),St=m-U*65536,m=Bt+U+65535,U=Math.floor(m/65536),Bt=m-U*65536,et+=U-1+37*(U-1),B[0]=et,B[1]=at,B[2]=ct,B[3]=Mt,B[4]=Ct,B[5]=Dt,B[6]=Ee,B[7]=qt,B[8]=Pt,B[9]=Ut,B[10]=Et,B[11]=At,B[12]=Ht,B[13]=wt,B[14]=St,B[15]=Bt}function T(B,F){y(B,F,F)}function nt(B,F){const k=s();let m;for(m=0;m<16;m++)k[m]=F[m];for(m=253;m>=0;m--)T(k,k),m!==2&&m!==4&&y(k,k,F);for(m=0;m<16;m++)B[m]=k[m]}function dt(B,F){const k=s();let m;for(m=0;m<16;m++)k[m]=F[m];for(m=250;m>=0;m--)T(k,k),m!==1&&y(k,k,F);for(m=0;m<16;m++)B[m]=k[m]}function lt(B,F){const k=s(),m=s(),U=s(),et=s(),at=s(),ct=s(),Mt=s(),Ct=s(),Dt=s();z(k,B[1],B[0]),z(Dt,F[1],F[0]),y(k,k,Dt),$(m,B[0],B[1]),$(Dt,F[0],F[1]),y(m,m,Dt),y(U,B[3],F[3]),y(U,U,d),y(et,B[2],F[2]),$(et,et,et),z(at,m,k),z(ct,et,U),$(Mt,et,U),$(Ct,m,k),y(B[0],at,ct),y(B[1],Ct,Mt),y(B[2],Mt,ct),y(B[3],at,Ct)}function mt(B,F,k){for(let m=0;m<4;m++)W(B[m],F[m],k)}function f(B,F){const k=s(),m=s(),U=s();nt(U,F[2]),y(k,F[0],U),y(m,F[1],U),H(B,m),B[31]^=G(k)<<7}function l(B,F,k){I(B[0],u),I(B[1],h),I(B[2],h),I(B[3],u);for(let m=255;m>=0;--m){const U=k[m/8|0]>>(m&7)&1;mt(B,F,U),lt(F,B),lt(B,B),mt(B,F,U)}}function w(B,F){const k=[s(),s(),s(),s()];I(k[0],b),I(k[1],_),I(k[2],h),y(k[3],b,_),l(B,k,F)}function D(B){if(B.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const F=(0,e.hash)(B);F[0]&=248,F[31]&=127,F[31]|=64;const k=new Uint8Array(32),m=[s(),s(),s(),s()];w(m,F),f(k,m);const U=new Uint8Array(64);return U.set(B),U.set(k,32),{publicKey:k,secretKey:U}}r.generateKeyPairFromSeed=D;function P(B){const F=(0,t.randomBytes)(32,B),k=D(F);return(0,i.wipe)(F),k}r.generateKeyPair=P;function C(B){if(B.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(B.subarray(32))}r.extractPublicKeyFromSecretKey=C;const L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function x(B,F){let k,m,U,et;for(m=63;m>=32;--m){for(k=0,U=m-32,et=m-12;U<et;++U)F[U]+=k-16*F[m]*L[U-(m-32)],k=Math.floor((F[U]+128)/256),F[U]-=k*256;F[U]+=k,F[m]=0}for(k=0,U=0;U<32;U++)F[U]+=k-(F[31]>>4)*L[U],k=F[U]>>8,F[U]&=255;for(U=0;U<32;U++)F[U]-=k*L[U];for(m=0;m<32;m++)F[m+1]+=F[m]>>8,B[m]=F[m]&255}function g(B){const F=new Float64Array(64);for(let k=0;k<64;k++)F[k]=B[k];for(let k=0;k<64;k++)B[k]=0;x(B,F)}function N(B,F){const k=new Float64Array(64),m=[s(),s(),s(),s()],U=(0,e.hash)(B.subarray(0,32));U[0]&=248,U[31]&=127,U[31]|=64;const et=new Uint8Array(64);et.set(U.subarray(32),32);const at=new e.SHA512;at.update(et.subarray(32)),at.update(F);const ct=at.digest();at.clean(),g(ct),w(m,ct),f(et,m),at.reset(),at.update(et.subarray(0,32)),at.update(B.subarray(32)),at.update(F);const Mt=at.digest();g(Mt);for(let Ct=0;Ct<32;Ct++)k[Ct]=ct[Ct];for(let Ct=0;Ct<32;Ct++)for(let Dt=0;Dt<32;Dt++)k[Ct+Dt]+=Mt[Ct]*U[Dt];return x(et.subarray(32),k),et}r.sign=N;function it(B,F){const k=s(),m=s(),U=s(),et=s(),at=s(),ct=s(),Mt=s();return I(B[2],h),j(B[1],F),T(U,B[1]),y(et,U,p),z(U,U,B[2]),$(et,B[2],et),T(at,et),T(ct,at),y(Mt,ct,at),y(k,Mt,U),y(k,k,et),dt(k,k),y(k,k,U),y(k,k,et),y(k,k,et),y(B[0],k,et),T(m,B[0]),y(m,m,et),V(m,U)&&y(B[0],B[0],S),T(m,B[0]),y(m,m,et),V(m,U)?-1:(G(B[0])===F[31]>>7&&z(B[0],u,B[0]),y(B[3],B[0],B[1]),0)}function ft(B,F,k){const m=new Uint8Array(32),U=[s(),s(),s(),s()],et=[s(),s(),s(),s()];if(k.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(it(et,B))return!1;const at=new e.SHA512;at.update(k.subarray(0,32)),at.update(B),at.update(F);const ct=at.digest();return g(ct),l(U,et,ct),w(et,k.subarray(32)),lt(U,et),f(m,U),!tt(k,m)}r.verify=ft;function E(B){let F=[s(),s(),s(),s()];if(it(F,B))throw new Error("Ed25519: invalid public key");let k=s(),m=s(),U=F[1];$(k,h,U),z(m,h,U),nt(m,m),y(k,k,m);let et=new Uint8Array(32);return H(et,k),et}r.convertPublicKeyToX25519=E;function Q(B){const F=(0,e.hash)(B.subarray(0,32));F[0]&=248,F[31]&=127,F[31]|=64;const k=new Uint8Array(F.subarray(0,32));return(0,i.wipe)(F),k}r.convertSecretKeyToX25519=Q})(pf);const ID="EdDSA",DD="JWT",Mm=".",Pm="base64url",xD="utf8",MD="utf8",PD=":",OD="did",CD="key",V0="base58btc",ND="z",RD="K36",TD=32;function gf(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Om(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?gf(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function LD(r,t){t||(t=r.reduce((s,a)=>s+a.length,0));const e=Om(t);let i=0;for(const s of r)e.set(s,i),i+=s.length;return gf(e)}function Cm(r,t,e,i){return{name:r,prefix:t,encoder:{name:r,prefix:t,encode:e},decoder:{decode:i}}}const G0=Cm("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ol=Cm("ascii","a",r=>{let t="a";for(let e=0;e<r.length;e++)t+=String.fromCharCode(r[e]);return t},r=>{r=r.substring(1);const t=Om(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return t}),Nm={utf8:G0,"utf-8":G0,hex:Qc.base16,latin1:ol,ascii:ol,binary:ol,...Qc};function mf(r,t="utf8"){const e=Nm[t];if(!e)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):e.encoder.encode(r).substring(1)}function vf(r,t="utf8"){const e=Nm[t];if(!e)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?gf(globalThis.Buffer.from(r,"utf-8")):e.decoder.decode(`${e.prefix}${r}`)}function ou(r){return mf(vf(xn(r),xD),Pm)}function Rm(r){const t=vf(RD,V0),e=ND+mf(LD([t,r]),V0);return[OD,CD,e].join(PD)}function UD(r){return mf(r,Pm)}function BD(r){return vf([ou(r.header),ou(r.payload)].join(Mm),MD)}function jD(r){return[ou(r.header),ou(r.payload),UD(r.signature)].join(Mm)}function W0(r=fo.randomBytes(TD)){return pf.generateKeyPairFromSeed(r)}async function qD(r,t,e,i,s=yt.fromMiliseconds(Date.now())){const a={alg:ID,typ:DD},u=Rm(i.publicKey),h=s+e,p={iss:u,sub:r,aud:t,iat:s,exp:h},d=BD({header:a,payload:p}),b=pf.sign(i.secretKey,d);return jD({header:a,payload:p,signature:b})}const $D="PARSE_ERROR",FD="INVALID_REQUEST",zD="METHOD_NOT_FOUND",kD="INVALID_PARAMS",Tm="INTERNAL_ERROR",yf="SERVER_ERROR",HD=[-32700,-32600,-32601,-32602,-32603],na={[$D]:{code:-32700,message:"Parse error"},[FD]:{code:-32600,message:"Invalid Request"},[zD]:{code:-32601,message:"Method not found"},[kD]:{code:-32602,message:"Invalid params"},[Tm]:{code:-32603,message:"Internal error"},[yf]:{code:-32e3,message:"Server error"}},Lm=yf;function KD(r){return HD.includes(r)}function Y0(r){return Object.keys(na).includes(r)?na[r]:na[Lm]}function VD(r){const t=Object.values(na).find(e=>e.code===r);return t||na[Lm]}function Um(r,t,e){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${e} RPC url at ${t}`):r}var Bm={},_n={},Q0;function GD(){if(Q0)return _n;Q0=1;var r={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.isBrowserCryptoAvailable=_n.getSubtleCrypto=_n.getBrowerCrypto=void 0;function t(){return(r==null?void 0:r.crypto)||(r==null?void 0:r.msCrypto)||{}}_n.getBrowerCrypto=t;function e(){const s=t();return s.subtle||s.webkitSubtle}_n.getSubtleCrypto=e;function i(){return!!t()&&!!e()}return _n.isBrowserCryptoAvailable=i,_n}var En={},J0;function WD(){if(J0)return En;J0=1,Object.defineProperty(En,"__esModule",{value:!0}),En.isBrowser=En.isNode=En.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}En.isReactNative=r;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}En.isNode=t;function e(){return!r()&&!t()}return En.isBrowser=e,En}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const t=pa;t.__exportStar(GD(),r),t.__exportStar(WD(),r)})(Bm);function Vn(r=3){const t=Date.now()*Math.pow(10,r),e=Math.floor(Math.random()*Math.pow(10,r));return t+e}function Es(r=6){return BigInt(Vn(r))}function ao(r,t,e){return{id:e||Vn(),jsonrpc:"2.0",method:r,params:t}}function wu(r,t){return{id:r,jsonrpc:"2.0",result:t}}function bu(r,t,e){return{id:r,jsonrpc:"2.0",error:YD(t)}}function YD(r,t){return typeof r>"u"?Y0(Tm):(typeof r=="string"&&(r=Object.assign(Object.assign({},Y0(yf)),{message:r})),KD(r.code)&&(r=VD(r.code)),r)}class QD{}class JD extends QD{constructor(){super()}}class XD extends JD{constructor(t){super()}}const ZD="^https?:",tx="^wss?:";function ex(r){const t=r.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function jm(r,t){const e=ex(r);return typeof e>"u"?!1:new RegExp(t).test(e)}function X0(r){return jm(r,ZD)}function Z0(r){return jm(r,tx)}function rx(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function qm(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function wf(r){return qm(r)&&"method"in r}function _u(r){return qm(r)&&(Ji(r)||Ai(r))}function Ji(r){return"result"in r}function Ai(r){return"error"in r}let Mn=class extends XD{constructor(t){super(t),this.events=new ii.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async request(t,e){return this.requestStrict(ao(t.method,t.params||[],t.id||Es().toString()),e)}async requestStrict(t,e){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(a){s(a)}this.events.on(`${t.id}`,a=>{Ai(a)?s(a.error):i(a.result)});try{await this.connection.send(t,e)}catch(a){s(a)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),_u(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};var sa={};const ix=()=>typeof WebSocket<"u"?WebSocket:typeof sa<"u"&&typeof sa.WebSocket<"u"?sa.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),nx=()=>typeof WebSocket<"u"||typeof sa<"u"&&typeof sa.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",tg=r=>r.split("?")[0],eg=10,sx=ix();let ox=class{constructor(t){if(this.url=t,this.events=new ii.EventEmitter,this.registering=!1,!Z0(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,e)=>{if(typeof this.socket>"u"){e(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(xn(t))}catch(e){this.onError(t.id,e)}}register(t=this.url){if(!Z0(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((i,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=t,this.registering=!0,new Promise((e,i)=>{const s=new URLSearchParams(t).get("origin"),a=Bm.isReactNative()?{headers:{origin:s}}:{rejectUnauthorized:!rx(t)},u=new sx(t,[],a);nx()?u.onerror=h=>{const p=h;i(this.emitError(p.error))}:u.on("error",h=>{i(this.emitError(h))}),u.onopen=()=>{this.onOpen(u),e(u)}})}onOpen(t){t.onmessage=e=>this.onPayload(e),t.onclose=e=>this.onClose(e),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const e=typeof t.data=="string"?_a(t.data):t.data;this.events.emit("payload",e)}onError(t,e){const i=this.parseError(e),s=i.message||i.toString(),a=bu(t,s);this.events.emit("payload",a)}parseError(t,e=this.url){return Um(t,tg(e),"WS")}resetMaxListeners(){this.events.getMaxListeners()>eg&&this.events.setMaxListeners(eg)}emitError(t){const e=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${tg(this.url)}`));return this.events.emit("register_error",e),e}};var au={exports:{}};au.exports;(function(r,t){var e={},i=200,s="__lodash_hash_undefined__",a=1,u=2,h=9007199254740991,p="[object Arguments]",d="[object Array]",b="[object AsyncFunction]",_="[object Boolean]",S="[object Date]",I="[object Error]",M="[object Function]",W="[object GeneratorFunction]",H="[object Map]",tt="[object Number]",V="[object Null]",G="[object Object]",j="[object Promise]",$="[object Proxy]",z="[object RegExp]",y="[object Set]",T="[object String]",nt="[object Symbol]",dt="[object Undefined]",lt="[object WeakMap]",mt="[object ArrayBuffer]",f="[object DataView]",l="[object Float32Array]",w="[object Float64Array]",D="[object Int8Array]",P="[object Int16Array]",C="[object Int32Array]",L="[object Uint8Array]",x="[object Uint8ClampedArray]",g="[object Uint16Array]",N="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,ft=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,Q={};Q[l]=Q[w]=Q[D]=Q[P]=Q[C]=Q[L]=Q[x]=Q[g]=Q[N]=!0,Q[p]=Q[d]=Q[mt]=Q[_]=Q[f]=Q[S]=Q[I]=Q[M]=Q[H]=Q[tt]=Q[G]=Q[z]=Q[y]=Q[T]=Q[lt]=!1;var B=typeof e=="object"&&e&&e.Object===Object&&e,F=typeof self=="object"&&self&&self.Object===Object&&self,k=B||F||Function("return this")(),m=t&&!t.nodeType&&t,U=m&&!0&&r&&!r.nodeType&&r,et=U&&U.exports===m,at=et&&B.process,ct=function(){try{return at&&at.binding&&at.binding("util")}catch{}}(),Mt=ct&&ct.isTypedArray;function Ct(q,J){for(var ht=-1,It=q==null?0:q.length,qe=0,ee=[];++ht<It;){var ke=q[ht];J(ke,ht,q)&&(ee[qe++]=ke)}return ee}function Dt(q,J){for(var ht=-1,It=J.length,qe=q.length;++ht<It;)q[qe+ht]=J[ht];return q}function Ee(q,J){for(var ht=-1,It=q==null?0:q.length;++ht<It;)if(J(q[ht],ht,q))return!0;return!1}function qt(q,J){for(var ht=-1,It=Array(q);++ht<q;)It[ht]=J(ht);return It}function Pt(q){return function(J){return q(J)}}function Ut(q,J){return q.has(J)}function Et(q,J){return q==null?void 0:q[J]}function At(q){var J=-1,ht=Array(q.size);return q.forEach(function(It,qe){ht[++J]=[qe,It]}),ht}function Ht(q,J){return function(ht){return q(J(ht))}}function wt(q){var J=-1,ht=Array(q.size);return q.forEach(function(It){ht[++J]=It}),ht}var St=Array.prototype,Bt=Function.prototype,bt=Object.prototype,Ot=k["__core-js_shared__"],Qt=Bt.toString,_t=bt.hasOwnProperty,Nt=function(){var q=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""}(),ie=bt.toString,Tt=RegExp("^"+Qt.call(_t).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=et?k.Buffer:void 0,ze=k.Symbol,ce=k.Uint8Array,fe=bt.propertyIsEnumerable,hr=St.splice,ue=ze?ze.toStringTag:void 0,we=Object.getOwnPropertySymbols,Sr=Lt?Lt.isBuffer:void 0,Jt=Ht(Object.keys,Object),Kt=un(k,"DataView"),Ae=un(k,"Map"),Vt=un(k,"Promise"),kt=un(k,"Set"),De=un(k,"WeakMap"),$t=un(Object,"create"),Xt=hn(Kt),xe=hn(Ae),Zt=hn(Vt),Gt=hn(kt),Le=hn(De),Yt=ze?ze.prototype:void 0,Wt=Yt?Yt.valueOf:void 0;function _e(q){var J=-1,ht=q==null?0:q.length;for(this.clear();++J<ht;){var It=q[J];this.set(It[0],It[1])}}function te(){this.__data__=$t?$t(null):{},this.size=0}function Oe(q){var J=this.has(q)&&delete this.__data__[q];return this.size-=J?1:0,J}function Di(q){var J=this.__data__;if($t){var ht=J[q];return ht===s?void 0:ht}return _t.call(J,q)?J[q]:void 0}function Ce(q){var J=this.__data__;return $t?J[q]!==void 0:_t.call(J,q)}function Me(q,J){var ht=this.__data__;return this.size+=this.has(q)?0:1,ht[q]=$t&&J===void 0?s:J,this}_e.prototype.clear=te,_e.prototype.delete=Oe,_e.prototype.get=Di,_e.prototype.has=Ce,_e.prototype.set=Me;function er(q){var J=-1,ht=q==null?0:q.length;for(this.clear();++J<ht;){var It=q[J];this.set(It[0],It[1])}}function si(){this.__data__=[],this.size=0}function oi(q){var J=this.__data__,ht=Nn(J,q);if(ht<0)return!1;var It=J.length-1;return ht==It?J.pop():hr.call(J,ht,1),--this.size,!0}function ai(q){var J=this.__data__,ht=Nn(J,q);return ht<0?void 0:J[ht][1]}function ci(q){return Nn(this.__data__,q)>-1}function ui(q,J){var ht=this.__data__,It=Nn(ht,q);return It<0?(++this.size,ht.push([q,J])):ht[It][1]=J,this}er.prototype.clear=si,er.prototype.delete=oi,er.prototype.get=ai,er.prototype.has=ci,er.prototype.set=ui;function yr(q){var J=-1,ht=q==null?0:q.length;for(this.clear();++J<ht;){var It=q[J];this.set(It[0],It[1])}}function Zn(){this.size=0,this.__data__={hash:new _e,map:new(Ae||er),string:new _e}}function zi(q){var J=Mi(this,q).delete(q);return this.size-=J?1:0,J}function ts(q){return Mi(this,q).get(q)}function es(q){return Mi(this,q).has(q)}function rs(q,J){var ht=Mi(this,q),It=ht.size;return ht.set(q,J),this.size+=ht.size==It?0:1,this}yr.prototype.clear=Zn,yr.prototype.delete=zi,yr.prototype.get=ts,yr.prototype.has=es,yr.prototype.set=rs;function xi(q){var J=-1,ht=q==null?0:q.length;for(this.__data__=new yr;++J<ht;)this.add(q[J])}function On(q){return this.__data__.set(q,s),this}function Cn(q){return this.__data__.has(q)}xi.prototype.add=xi.prototype.push=On,xi.prototype.has=Cn;function Lr(q){var J=this.__data__=new er(q);this.size=J.size}function is(){this.__data__=new er,this.size=0}function ns(q){var J=this.__data__,ht=J.delete(q);return this.size=J.size,ht}function ss(q){return this.__data__.get(q)}function Da(q){return this.__data__.has(q)}function xa(q,J){var ht=this.__data__;if(ht instanceof er){var It=ht.__data__;if(!Ae||It.length<i-1)return It.push([q,J]),this.size=++ht.size,this;ht=this.__data__=new yr(It)}return ht.set(q,J),this.size=ht.size,this}Lr.prototype.clear=is,Lr.prototype.delete=ns,Lr.prototype.get=ss,Lr.prototype.has=Da,Lr.prototype.set=xa;function Ma(q,J){var ht=Ns(q),It=!ht&&Pu(q),qe=!ht&&!It&&Io(q),ee=!ht&&!It&&!qe&&$a(q),ke=ht||It||qe||ee,ge=ke?qt(q.length,String):[],Qe=ge.length;for(var Se in q)_t.call(q,Se)&&!(ke&&(Se=="length"||qe&&(Se=="offset"||Se=="parent")||ee&&(Se=="buffer"||Se=="byteLength"||Se=="byteOffset")||Ta(Se,Qe)))&&ge.push(Se);return ge}function Nn(q,J){for(var ht=q.length;ht--;)if(So(q[ht][0],J))return ht;return-1}function Su(q,J,ht){var It=J(q);return Ns(q)?It:Dt(It,ht(q))}function Rn(q){return q==null?q===void 0?dt:V:ue&&ue in Object(q)?Ra(q):Mu(q)}function os(q){return as(q)&&Rn(q)==p}function _o(q,J,ht,It,qe){return q===J?!0:q==null||J==null||!as(q)&&!as(J)?q!==q&&J!==J:Iu(q,J,ht,It,_o,qe)}function Iu(q,J,ht,It,qe,ee){var ke=Ns(q),ge=Ns(J),Qe=ke?d:Pi(q),Se=ge?d:Pi(J);Qe=Qe==p?G:Qe,Se=Se==p?G:Se;var wr=Qe==G,Ir=Se==G,Ne=Qe==Se;if(Ne&&Io(q)){if(!Io(J))return!1;ke=!0,wr=!1}if(Ne&&!wr)return ee||(ee=new Lr),ke||$a(q)?Ca(q,J,ht,It,qe,ee):Na(q,J,Qe,ht,It,qe,ee);if(!(ht&a)){var Dr=wr&&_t.call(q,"__wrapped__"),xr=Ir&&_t.call(J,"__wrapped__");if(Dr||xr){var Oi=Dr?q.value():q,hi=xr?J.value():J;return ee||(ee=new Lr),qe(Oi,hi,ht,It,ee)}}return Ne?(ee||(ee=new Lr),Ao(q,J,ht,It,qe,ee)):!1}function Pa(q){if(!qa(q)||Ua(q))return!1;var J=Ba(q)?Tt:ft;return J.test(hn(q))}function Oa(q){return as(q)&&ja(q.length)&&!!Q[Rn(q)]}function Eo(q){if(!xu(q))return Jt(q);var J=[];for(var ht in Object(q))_t.call(q,ht)&&ht!="constructor"&&J.push(ht);return J}function Ca(q,J,ht,It,qe,ee){var ke=ht&a,ge=q.length,Qe=J.length;if(ge!=Qe&&!(ke&&Qe>ge))return!1;var Se=ee.get(q);if(Se&&ee.get(J))return Se==J;var wr=-1,Ir=!0,Ne=ht&u?new xi:void 0;for(ee.set(q,J),ee.set(J,q);++wr<ge;){var Dr=q[wr],xr=J[wr];if(It)var Oi=ke?It(xr,Dr,wr,J,q,ee):It(Dr,xr,wr,q,J,ee);if(Oi!==void 0){if(Oi)continue;Ir=!1;break}if(Ne){if(!Ee(J,function(hi,ki){if(!Ut(Ne,ki)&&(Dr===hi||qe(Dr,hi,ht,It,ee)))return Ne.push(ki)})){Ir=!1;break}}else if(!(Dr===xr||qe(Dr,xr,ht,It,ee))){Ir=!1;break}}return ee.delete(q),ee.delete(J),Ir}function Na(q,J,ht,It,qe,ee,ke){switch(ht){case f:if(q.byteLength!=J.byteLength||q.byteOffset!=J.byteOffset)return!1;q=q.buffer,J=J.buffer;case mt:return!(q.byteLength!=J.byteLength||!ee(new ce(q),new ce(J)));case _:case S:case tt:return So(+q,+J);case I:return q.name==J.name&&q.message==J.message;case z:case T:return q==J+"";case H:var ge=At;case y:var Qe=It&a;if(ge||(ge=wt),q.size!=J.size&&!Qe)return!1;var Se=ke.get(q);if(Se)return Se==J;It|=u,ke.set(q,J);var wr=Ca(ge(q),ge(J),It,qe,ee,ke);return ke.delete(q),wr;case nt:if(Wt)return Wt.call(q)==Wt.call(J)}return!1}function Ao(q,J,ht,It,qe,ee){var ke=ht&a,ge=Cs(q),Qe=ge.length,Se=Cs(J),wr=Se.length;if(Qe!=wr&&!ke)return!1;for(var Ir=Qe;Ir--;){var Ne=ge[Ir];if(!(ke?Ne in J:_t.call(J,Ne)))return!1}var Dr=ee.get(q);if(Dr&&ee.get(J))return Dr==J;var xr=!0;ee.set(q,J),ee.set(J,q);for(var Oi=ke;++Ir<Qe;){Ne=ge[Ir];var hi=q[Ne],ki=J[Ne];if(It)var xo=ke?It(ki,hi,Ne,J,q,ee):It(hi,ki,Ne,q,J,ee);if(!(xo===void 0?hi===ki||qe(hi,ki,ht,It,ee):xo)){xr=!1;break}Oi||(Oi=Ne=="constructor")}if(xr&&!Oi){var or=q.constructor,Rs=J.constructor;or!=Rs&&"constructor"in q&&"constructor"in J&&!(typeof or=="function"&&or instanceof or&&typeof Rs=="function"&&Rs instanceof Rs)&&(xr=!1)}return ee.delete(q),ee.delete(J),xr}function Cs(q){return Su(q,je,Du)}function Mi(q,J){var ht=q.__data__;return La(J)?ht[typeof J=="string"?"string":"hash"]:ht.map}function un(q,J){var ht=Et(q,J);return Pa(ht)?ht:void 0}function Ra(q){var J=_t.call(q,ue),ht=q[ue];try{q[ue]=void 0;var It=!0}catch{}var qe=ie.call(q);return It&&(J?q[ue]=ht:delete q[ue]),qe}var Du=we?function(q){return q==null?[]:(q=Object(q),Ct(we(q),function(J){return fe.call(q,J)}))}:Ue,Pi=Rn;(Kt&&Pi(new Kt(new ArrayBuffer(1)))!=f||Ae&&Pi(new Ae)!=H||Vt&&Pi(Vt.resolve())!=j||kt&&Pi(new kt)!=y||De&&Pi(new De)!=lt)&&(Pi=function(q){var J=Rn(q),ht=J==G?q.constructor:void 0,It=ht?hn(ht):"";if(It)switch(It){case Xt:return f;case xe:return H;case Zt:return j;case Gt:return y;case Le:return lt}return J});function Ta(q,J){return J=J??h,!!J&&(typeof q=="number"||E.test(q))&&q>-1&&q%1==0&&q<J}function La(q){var J=typeof q;return J=="string"||J=="number"||J=="symbol"||J=="boolean"?q!=="__proto__":q===null}function Ua(q){return!!Nt&&Nt in q}function xu(q){var J=q&&q.constructor,ht=typeof J=="function"&&J.prototype||bt;return q===ht}function Mu(q){return ie.call(q)}function hn(q){if(q!=null){try{return Qt.call(q)}catch{}try{return q+""}catch{}}return""}function So(q,J){return q===J||q!==q&&J!==J}var Pu=os(function(){return arguments}())?os:function(q){return as(q)&&_t.call(q,"callee")&&!fe.call(q,"callee")},Ns=Array.isArray;function Ou(q){return q!=null&&ja(q.length)&&!Ba(q)}var Io=Sr||Cu;function Do(q,J){return _o(q,J)}function Ba(q){if(!qa(q))return!1;var J=Rn(q);return J==M||J==W||J==b||J==$}function ja(q){return typeof q=="number"&&q>-1&&q%1==0&&q<=h}function qa(q){var J=typeof q;return q!=null&&(J=="object"||J=="function")}function as(q){return q!=null&&typeof q=="object"}var $a=Mt?Pt(Mt):Oa;function je(q){return Ou(q)?Ma(q):Eo(q)}function Ue(){return[]}function Cu(){return!1}r.exports=Do})(au,au.exports);var ax=au.exports;const cx=ho(ax);function ux(r,t){return t=t||{},new Promise(function(e,i){var s=new XMLHttpRequest,a=[],u=[],h={},p=function(){return{ok:(s.status/100|0)==2,statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:p,headers:{keys:function(){return a},entries:function(){return u},get:function(b){return h[b.toLowerCase()]},has:function(b){return b.toLowerCase()in h}}}};for(var d in s.open(t.method||"get",r,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(b,_,S){a.push(_=_.toLowerCase()),u.push([_,S]),h[_]=h[_]?h[_]+","+S:S}),e(p())},s.onerror=i,s.withCredentials=t.credentials=="include",t.headers)s.setRequestHeader(d,t.headers[d]);s.send(t.body||null)})}const hx=Object.freeze(Object.defineProperty({__proto__:null,default:ux},Symbol.toStringTag,{value:"Module"})),rg=Gl(hx);var lx=self.fetch||(self.fetch=rg.default||rg);const fx=ho(lx);var dx={};function px(r,t){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),i=0;i<e.length;i++)e[i]=255;for(var s=0;s<r.length;s++){var a=r.charAt(s),u=a.charCodeAt(0);if(e[u]!==255)throw new TypeError(a+" is ambiguous");e[u]=s}var h=r.length,p=r.charAt(0),d=Math.log(h)/Math.log(256),b=Math.log(256)/Math.log(h);function _(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var W=0,H=0,tt=0,V=M.length;tt!==V&&M[tt]===0;)tt++,W++;for(var G=(V-tt)*b+1>>>0,j=new Uint8Array(G);tt!==V;){for(var $=M[tt],z=0,y=G-1;($!==0||z<H)&&y!==-1;y--,z++)$+=256*j[y]>>>0,j[y]=$%h>>>0,$=$/h>>>0;if($!==0)throw new Error("Non-zero carry");H=z,tt++}for(var T=G-H;T!==G&&j[T]===0;)T++;for(var nt=p.repeat(W);T<G;++T)nt+=r.charAt(j[T]);return nt}function S(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var W=0;if(M[W]!==" "){for(var H=0,tt=0;M[W]===p;)H++,W++;for(var V=(M.length-W)*d+1>>>0,G=new Uint8Array(V);M[W];){var j=e[M.charCodeAt(W)];if(j===255)return;for(var $=0,z=V-1;(j!==0||$<tt)&&z!==-1;z--,$++)j+=h*G[z]>>>0,G[z]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");tt=$,W++}if(M[W]!==" "){for(var y=V-tt;y!==V&&G[y]===0;)y++;for(var T=new Uint8Array(H+(V-y)),nt=H;y!==V;)T[nt++]=G[y++];return T}}}function I(M){var W=S(M);if(W)return W;throw new Error(`Non-${t} character`)}return{encode:_,decodeUnsafe:S,decode:I}}var gx=px,mx=gx;const $m=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},vx=r=>new TextEncoder().encode(r),yx=r=>new TextDecoder().decode(r);class wx{constructor(t,e,i){this.name=t,this.prefix=e,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}let bx=class{constructor(t,e,i){if(this.name=t,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Fm(this,t)}},_x=class{constructor(t){this.decoders=t}or(t){return Fm(this,t)}decode(t){const e=t[0],i=this.decoders[e];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Fm=(r,t)=>new _x({...r.decoders||{[r.prefix]:r},...t.decoders||{[t.prefix]:t}});let Ex=class{constructor(t,e,i,s){this.name=t,this.prefix=e,this.baseEncode=i,this.baseDecode=s,this.encoder=new wx(t,e,i),this.decoder=new bx(t,e,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const Eu=({name:r,prefix:t,encode:e,decode:i})=>new Ex(r,t,e,i),Ia=({prefix:r,name:t,alphabet:e})=>{const{encode:i,decode:s}=mx(e,t);return Eu({prefix:r,name:t,encode:i,decode:a=>$m(s(a))})},Ax=(r,t,e,i)=>{const s={};for(let b=0;b<t.length;++b)s[t[b]]=b;let a=r.length;for(;r[a-1]==="=";)--a;const u=new Uint8Array(a*e/8|0);let h=0,p=0,d=0;for(let b=0;b<a;++b){const _=s[r[b]];if(_===void 0)throw new SyntaxError(`Non-${i} character`);p=p<<e|_,h+=e,h>=8&&(h-=8,u[d++]=255&p>>h)}if(h>=e||255&p<<8-h)throw new SyntaxError("Unexpected end of data");return u},Sx=(r,t,e)=>{const i=t[t.length-1]==="=",s=(1<<e)-1;let a="",u=0,h=0;for(let p=0;p<r.length;++p)for(h=h<<8|r[p],u+=8;u>e;)u-=e,a+=t[s&h>>u];if(u&&(a+=t[s&h<<e-u]),i)for(;a.length*e&7;)a+="=";return a},vr=({name:r,prefix:t,bitsPerChar:e,alphabet:i})=>Eu({prefix:t,name:r,encode(s){return Sx(s,i,e)},decode(s){return Ax(s,i,e,r)}}),Ix=Eu({prefix:"\0",name:"identity",encode:r=>yx(r),decode:r=>vx(r)});var Dx=Object.freeze({__proto__:null,identity:Ix});const xx=vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Mx=Object.freeze({__proto__:null,base2:xx});const Px=vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ox=Object.freeze({__proto__:null,base8:Px});const Cx=Ia({prefix:"9",name:"base10",alphabet:"0123456789"});var Nx=Object.freeze({__proto__:null,base10:Cx});const Rx=vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tx=vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Lx=Object.freeze({__proto__:null,base16:Rx,base16upper:Tx});const Ux=vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Bx=vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jx=vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qx=vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$x=vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Fx=vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zx=vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kx=vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hx=vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Kx=Object.freeze({__proto__:null,base32:Ux,base32upper:Bx,base32pad:jx,base32padupper:qx,base32hex:$x,base32hexupper:Fx,base32hexpad:zx,base32hexpadupper:kx,base32z:Hx});const Vx=Ia({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gx=Ia({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Wx=Object.freeze({__proto__:null,base36:Vx,base36upper:Gx});const Yx=Ia({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Qx=Ia({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Jx=Object.freeze({__proto__:null,base58btc:Yx,base58flickr:Qx});const Xx=vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Zx=vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tM=vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eM=vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rM=Object.freeze({__proto__:null,base64:Xx,base64pad:Zx,base64url:tM,base64urlpad:eM});const zm=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),iM=zm.reduce((r,t,e)=>(r[e]=t,r),[]),nM=zm.reduce((r,t,e)=>(r[t.codePointAt(0)]=e,r),[]);function sM(r){return r.reduce((t,e)=>(t+=iM[e],t),"")}function oM(r){const t=[];for(const e of r){const i=nM[e.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${e}`);t.push(i)}return new Uint8Array(t)}const aM=Eu({prefix:"🚀",name:"base256emoji",encode:sM,decode:oM});var cM=Object.freeze({__proto__:null,base256emoji:aM}),uM=km,ig=128,hM=127,lM=~hM,fM=Math.pow(2,31);function km(r,t,e){t=t||[],e=e||0;for(var i=e;r>=fM;)t[e++]=r&255|ig,r/=128;for(;r&lM;)t[e++]=r&255|ig,r>>>=7;return t[e]=r|0,km.bytes=e-i+1,t}var dM=jl,pM=128,ng=127;function jl(r,i){var e=0,i=i||0,s=0,a=i,u,h=r.length;do{if(a>=h)throw jl.bytes=0,new RangeError("Could not decode varint");u=r[a++],e+=s<28?(u&ng)<<s:(u&ng)*Math.pow(2,s),s+=7}while(u>=pM);return jl.bytes=a-i,e}var gM=Math.pow(2,7),mM=Math.pow(2,14),vM=Math.pow(2,21),yM=Math.pow(2,28),wM=Math.pow(2,35),bM=Math.pow(2,42),_M=Math.pow(2,49),EM=Math.pow(2,56),AM=Math.pow(2,63),SM=function(r){return r<gM?1:r<mM?2:r<vM?3:r<yM?4:r<wM?5:r<bM?6:r<_M?7:r<EM?8:r<AM?9:10},IM={encode:uM,decode:dM,encodingLength:SM},Hm=IM;const sg=(r,t,e=0)=>(Hm.encode(r,t,e),t),og=r=>Hm.encodingLength(r),ql=(r,t)=>{const e=t.byteLength,i=og(r),s=i+og(e),a=new Uint8Array(s+e);return sg(r,a,0),sg(e,a,i),a.set(t,s),new DM(r,e,t,a)};class DM{constructor(t,e,i,s){this.code=t,this.size=e,this.digest=i,this.bytes=s}}const Km=({name:r,code:t,encode:e})=>new xM(r,t,e);class xM{constructor(t,e,i){this.name=t,this.code=e,this.encode=i}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?ql(this.code,e):e.then(i=>ql(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Vm=r=>async t=>new Uint8Array(await crypto.subtle.digest(r,t)),MM=Km({name:"sha2-256",code:18,encode:Vm("SHA-256")}),PM=Km({name:"sha2-512",code:19,encode:Vm("SHA-512")});var OM=Object.freeze({__proto__:null,sha256:MM,sha512:PM});const Gm=0,CM="identity",Wm=$m,NM=r=>ql(Gm,Wm(r)),RM={code:Gm,name:CM,encode:Wm,digest:NM};var TM=Object.freeze({__proto__:null,identity:RM});new TextEncoder,new TextDecoder;const ag={...Dx,...Mx,...Ox,...Nx,...Lx,...Kx,...Wx,...Jx,...rM,...cM};({...OM,...TM});function LM(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Ym(r,t,e,i){return{name:r,prefix:t,encoder:{name:r,prefix:t,encode:e},decoder:{decode:i}}}const cg=Ym("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),al=Ym("ascii","a",r=>{let t="a";for(let e=0;e<r.length;e++)t+=String.fromCharCode(r[e]);return t},r=>{r=r.substring(1);const t=LM(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return t}),UM={utf8:cg,"utf-8":cg,hex:ag.base16,latin1:al,ascii:al,binary:al,...ag};function BM(r,t="utf8"){const e=UM[t];if(!e)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):e.decoder.decode(`${e.prefix}${r}`)}const Qm="wc",jM=2,bf="core",Yn=`${Qm}@2:${bf}:`,qM={name:bf,logger:"error"},$M={database:":memory:"},FM="crypto",ug="client_ed25519_seed",zM=yt.ONE_DAY,kM="keychain",HM="0.3",KM="messages",VM="0.3",GM=yt.SIX_HOURS,WM="publisher",Jm="irn",YM="error",Xm="wss://relay.walletconnect.com",hg="wss://relay.walletconnect.org",QM="relayer",Kr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},JM="_subscription",bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},XM=yt.ONE_SECOND,ZM="2.13.3",t7=1e4,e7="0.3",r7="WALLETCONNECT_CLIENT_ID",Xi={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},i7="subscription",n7="0.3",s7=yt.FIVE_SECONDS*1e3,o7="pairing",a7="0.3",Yo={wc_pairingDelete:{req:{ttl:yt.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:yt.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:yt.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:yt.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:yt.ONE_DAY,prompt:!1,tag:0},res:{ttl:yt.ONE_DAY,prompt:!1,tag:0}}},eo={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ui={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},c7="history",u7="0.3",h7="expirer",_i={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},l7="0.3",cl="verify-api",ro="https://verify.walletconnect.com",$l="https://verify.walletconnect.org",f7=[ro,$l],d7="echo",p7="https://echo.walletconnect.com";class g7{constructor(t,e){this.core=t,this.logger=e,this.keychain=new Map,this.name=kM,this.version=HM,this.initialized=!1,this.storagePrefix=Yn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:a}=gt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(a)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=t,this.logger=Wr(e,this.name)}get context(){return Gr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,P1(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?O1(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}}class m7{constructor(t,e,i){this.core=t,this.logger=e,this.name=FM,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),a=W0(s);return Rm(a.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=oI();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const a=await this.getClientSeed(),u=W0(a),h=Tl();return await qD(h,s,zM,u)},this.generateSharedKey=(s,a,u)=>{this.isInitialized();const h=this.getPrivateKey(s),p=aI(h,a);return this.setSymKey(p,u)},this.setSymKey=async(s,a)=>{this.isInitialized();const u=a||Hc(s);return await this.keychain.set(u,s),u},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,a,u)=>{this.isInitialized();const h=ym(u),p=xn(a);if(I0(h)){const S=h.senderPublicKey,I=h.receiverPublicKey;s=await this.generateSharedKey(S,I)}const d=this.getSymKey(s),{type:b,senderPublicKey:_}=h;return uI({type:b,symKey:d,message:p,senderPublicKey:_})},this.decode=async(s,a,u)=>{this.isInitialized();const h=fI(a,u);if(I0(h)){const p=h.receiverPublicKey,d=h.senderPublicKey;s=await this.generateSharedKey(p,d)}try{const p=this.getSymKey(s),d=hI({symKey:p,encoded:a});return _a(d)}catch(p){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(p)}},this.getPayloadType=s=>{const a=ru(s);return wa(a.type)},this.getPayloadSenderPublicKey=s=>{const a=ru(s);return a.senderPublicKey?Ii(a.senderPublicKey,Rr):void 0},this.core=t,this.logger=Wr(e,this.name),this.keychain=i||new g7(this.core,this.logger)}get context(){return Gr(this.logger)}async setPrivateKey(t,e){return await this.keychain.set(t,e),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(ug)}catch{t=Tl(),await this.keychain.set(ug,t)}return BM(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}}class v7 extends gD{constructor(t,e){super(t,e),this.logger=t,this.core=e,this.messages=new Map,this.name=KM,this.version=VM,this.initialized=!1,this.storagePrefix=Yn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const a=_s(s);let u=this.messages.get(i);return typeof u>"u"&&(u={}),typeof u[a]<"u"||(u[a]=s,this.messages.set(i,u),await this.persist()),a},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const a=this.get(i),u=_s(s);return typeof a[u]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Wr(t,this.name),this.core=e}get context(){return Gr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,P1(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?O1(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}}class y7 extends mD{constructor(t,e){super(t,e),this.relayer=t,this.logger=e,this.events=new ii.EventEmitter,this.name=WM,this.queue=new Map,this.publishTimeout=yt.toMiliseconds(yt.ONE_MINUTE),this.failedPublishTimeout=yt.toMiliseconds(yt.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,s,a)=>{var u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:a}});const h=(a==null?void 0:a.ttl)||GM,p=Ll(a),d=(a==null?void 0:a.prompt)||!1,b=(a==null?void 0:a.tag)||0,_=(a==null?void 0:a.id)||Es().toString(),S={topic:i,message:s,opts:{ttl:h,relay:p,prompt:d,tag:b,id:_}},I=`Failed to publish payload, please try again. id:${_} tag:${b}`,M=Date.now();let W,H=1;try{for(;W===void 0;){if(Date.now()-M>this.publishTimeout)throw new Error(I);this.logger.trace({id:_,attempts:H},`publisher.publish - attempt ${H}`),W=await await no(this.rpcPublish(i,s,h,p,d,b,_).catch(tt=>this.logger.warn(tt)),this.publishTimeout,I),H++,W||await new Promise(tt=>setTimeout(tt,this.failedPublishTimeout))}this.relayer.events.emit(Kr.publish,S),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:_,topic:i,message:s,opts:a}})}catch(tt){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(tt),(u=a==null?void 0:a.internal)!=null&&u.throwOnFailedPublish)throw tt;this.queue.set(_,S)}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=t,this.logger=Wr(e,this.name),this.registerEventListeners()}get context(){return Gr(this.logger)}rpcPublish(t,e,i,s,a,u,h){var p,d,b,_;const S={method:Zo(s.protocol).publish,params:{topic:t,message:e,ttl:i,prompt:a,tag:u},id:h};return Hr((p=S.params)==null?void 0:p.prompt)&&((d=S.params)==null||delete d.prompt),Hr((b=S.params)==null?void 0:b.tag)&&((_=S.params)==null||delete _.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:e,message:i,opts:s}=t;await this.publish(e,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ea.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Kr.connection_stalled);return}this.checkQueue()}),this.relayer.on(Kr.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class w7{constructor(){this.map=new Map,this.set=(t,e)=>{const i=this.get(t);this.exists(t,e)||this.map.set(t,[...i,e])},this.get=t=>this.map.get(t)||[],this.exists=(t,e)=>this.get(t).includes(e),this.delete=(t,e)=>{if(typeof e>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const i=this.get(t);if(!this.exists(t,e))return;const s=i.filter(a=>a!==e);if(!s.length){this.map.delete(t);return}this.map.set(t,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var b7=Object.defineProperty,_7=Object.defineProperties,E7=Object.getOwnPropertyDescriptors,lg=Object.getOwnPropertySymbols,A7=Object.prototype.hasOwnProperty,S7=Object.prototype.propertyIsEnumerable,fg=(r,t,e)=>t in r?b7(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Qo=(r,t)=>{for(var e in t||(t={}))A7.call(t,e)&&fg(r,e,t[e]);if(lg)for(var e of lg(t))S7.call(t,e)&&fg(r,e,t[e]);return r},ul=(r,t)=>_7(r,E7(t));class I7 extends wD{constructor(t,e){super(t,e),this.relayer=t,this.logger=e,this.subscriptions=new Map,this.topicMap=new w7,this.events=new ii.EventEmitter,this.name=i7,this.version=n7,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Yn,this.subscribeTimeout=yt.toMiliseconds(yt.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const a=Ll(s),u={topic:i,relay:a};this.pending.set(i,u);const h=await this.rpcSubscribe(i,a);return typeof h=="string"&&(this.onSubscribe(h,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),h}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((a,u)=>{const h=new yt.Watch;h.start(s);const p=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(p),h.stop(s),a(!0)),h.elapsed(s)>=s7&&(clearInterval(p),h.stop(s),u(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Wr(e,this.name),this.clientId=""}get context(){return Gr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,e){let i=!1;try{i=this.getSubscription(t).topic===e}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,e){const i=this.topicMap.get(t);await Promise.all(i.map(async s=>await this.unsubscribeById(t,s,e)))}async unsubscribeById(t,e,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:e,opts:i}});try{const s=Ll(i);await this.rpcUnsubscribe(t,e,s);const a=Te("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,e,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:e,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(t,e){const i={method:Zo(e.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await no(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)?_s(t+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Kr.connection_stalled)}return null}async rpcBatchSubscribe(t){if(!t.length)return;const e=t[0].relay,i={method:Zo(e.protocol).batchSubscribe,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await no(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(Kr.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const e=t[0].relay,i={method:Zo(e.protocol).batchFetchMessages,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await no(this.relayer.request(i).catch(a=>this.logger.warn(a)),this.subscribeTimeout)}catch{this.relayer.events.emit(Kr.connection_stalled)}return s}rpcUnsubscribe(t,e,i){const s={method:Zo(i.protocol).unsubscribe,params:{topic:t,id:e}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(t,e){this.setSubscription(t,ul(Qo({},e),{id:t})),this.pending.delete(e.topic)}onBatchSubscribe(t){t.length&&t.forEach(e=>{this.setSubscription(e.id,Qo({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(t,e,i){this.events.removeAllListeners(e),this.hasSubscription(e,t)&&this.deleteSubscription(e,i),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,e){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:e}),this.addSubscription(t,e)}addSubscription(t,e){this.subscriptions.set(t,Qo({},e)),this.topicMap.set(e.topic,t),this.events.emit(Xi.created,e)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const e=this.subscriptions.get(t);if(!e){const{message:i}=gt("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return e}deleteSubscription(t,e){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:e});const i=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(i.topic,t),this.events.emit(Xi.deleted,ul(Qo({},i),{reason:e}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Xi.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let e=0;e<t;e++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(Xi.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const e=await this.rpcBatchSubscribe(t);an(e)&&this.onBatchSubscribe(e.map((i,s)=>ul(Qo({},t[s]),{id:i})))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const e=await this.rpcBatchFetchMessages(t);e&&e.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(e.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const t=[];this.pending.forEach(e=>{t.push(e)}),await this.batchSubscribe(t),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(Ea.pulse,async()=>{await this.checkPending()}),this.events.on(Xi.created,async t=>{const e=Xi.created;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),await this.persist()}),this.events.on(Xi.deleted,async t=>{const e=Xi.deleted;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const e=setInterval(()=>{this.restartInProgress||(clearInterval(e),t())},this.pollingInterval)})}}var D7=Object.defineProperty,dg=Object.getOwnPropertySymbols,x7=Object.prototype.hasOwnProperty,M7=Object.prototype.propertyIsEnumerable,pg=(r,t,e)=>t in r?D7(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,P7=(r,t)=>{for(var e in t||(t={}))x7.call(t,e)&&pg(r,e,t[e]);if(dg)for(var e of dg(t))M7.call(t,e)&&pg(r,e,t[e]);return r};class O7 extends vD{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new ii.EventEmitter,this.name=QM,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=yt.toMiliseconds(yt.THIRTY_SECONDS+yt.ONE_SECOND),this.request=async e=>{var i,s;this.logger.debug("Publishing Request Payload");const a=e.id||Es().toString();await this.toEstablishConnection();try{const u=this.provider.request(e);this.requestsInFlight.set(a,{promise:u,request:e}),this.logger.trace({id:a,method:e.method,topic:(i=e.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const h=await new Promise(async(p,d)=>{const b=()=>{d(new Error(`relayer.request - publish interrupted, id: ${a}`))};this.provider.on(bi.disconnect,b);const _=await u;this.provider.off(bi.disconnect,b),p(_)});return this.logger.trace({id:a,method:e.method,topic:(s=e.params)==null?void 0:s.topic},"relayer.request - published"),h}catch(u){throw this.logger.debug(`Failed to Publish Request: ${a}`),u}finally{this.requestsInFlight.delete(a)}},this.resetPingTimeout=()=>{if(ca())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,i,s;(s=(i=(e=this.provider)==null?void 0:e.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(e){this.logger.warn(e)}},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.startPingTimeout(),this.events.emit(Kr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(Kr.error,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(bi.payload,this.onPayloadHandler),this.provider.on(bi.connect,this.onConnectHandler),this.provider.on(bi.disconnect,this.onDisconnectHandler),this.provider.on(bi.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Wr(t.logger,this.name):Aa(yu({level:t.logger||YM})),this.messages=new v7(this.logger,t.core),this.subscriber=new I7(this,this.logger),this.publisher=new y7(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||Xm,this.projectId=t.projectId,this.bundleId=JA(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${hg}...`),await this.restartTransport(hg)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},t7)}get context(){return Gr(this.logger)}get connected(){var t,e,i;return((i=(e=(t=this.provider)==null?void 0:t.connection)==null?void 0:e.socket)==null?void 0:i.readyState)===1}get connecting(){var t,e,i;return((i=(e=(t=this.provider)==null?void 0:t.connection)==null?void 0:e.socket)==null?void 0:i.readyState)===0}async publish(t,e,i){this.isInitialized(),await this.publisher.publish(t,e,i),await this.recordMessageEvent({topic:t,message:e,publishedAt:Date.now()})}async subscribe(t,e){var i;this.isInitialized();let s=((i=this.subscriber.topicMap.get(t))==null?void 0:i[0])||"",a;const u=h=>{h.topic===t&&(this.subscriber.off(Xi.created,u),a())};return await Promise.all([new Promise(h=>{a=h,this.subscriber.on(Xi.created,u)}),new Promise(async h=>{s=await this.subscriber.subscribe(t,e)||s,h()})]),s}async unsubscribe(t,e){this.isInitialized(),await this.subscriber.unsubscribe(t,e)}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(t=>t.promise))}catch(t){this.logger.warn(t)}this.hasExperiencedNetworkDisruption||this.connected?await no(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(e,i)=>{const s=()=>{this.provider.off(bi.disconnect,s),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(bi.disconnect,s),await no(this.provider.connect(),yt.toMiliseconds(yt.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{i(a)}),await this.subscriber.start(),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){this.logger.error(e);const i=e;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw e}finally{this.connectionAttemptInProgress=!1}}async restartTransport(t){this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await L0())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const e=t.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.trace(`Batch of ${e.length} message events sorted`);for(const i of e)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s)}this.logger.trace(`Batch of ${e.length} message events processed`)}startPingTimeout(){var t,e,i,s,a;if(ca())try{(e=(t=this.provider)==null?void 0:t.connection)!=null&&e.socket&&((a=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||a.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(u){this.logger.warn(u)}}isConnectionStalled(t){return this.staleConnectionErrors.some(e=>t.includes(e))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Mn(new ox(i5({sdkVersion:ZM,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:e,message:i}=t;await this.messages.set(e,i)}async shouldIgnoreMessageEvent(t){const{topic:e,message:i}=t;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(e))return this.logger.debug(`Ignoring message for non-subscribed topic ${e}`),!0;const s=this.messages.has(e,i);return s&&this.logger.debug(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),wf(t)){if(!t.method.endsWith(JM))return;const e=t.params,{topic:i,message:s,publishedAt:a}=e.data,u={topic:i,message:s,publishedAt:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(P7({type:"event",event:e.id},u)),this.events.emit(e.id,u),await this.acknowledgePayload(t),await this.onMessageEvent(u)}else _u(t)&&this.events.emit(Kr.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Kr.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const e=wu(t.id,!0);await this.provider.connection.send(e)}unregisterProviderListeners(){this.provider.off(bi.payload,this.onPayloadHandler),this.provider.off(bi.connect,this.onConnectHandler),this.provider.off(bi.disconnect,this.onDisconnectHandler),this.provider.off(bi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await L0();r4(async e=>{t!==e&&(t=e,e?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Kr.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t))},yt.toMiliseconds(XM))}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(t=>{const e=setInterval(()=>{this.connected&&(clearInterval(e),t())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var C7=Object.defineProperty,gg=Object.getOwnPropertySymbols,N7=Object.prototype.hasOwnProperty,R7=Object.prototype.propertyIsEnumerable,mg=(r,t,e)=>t in r?C7(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,vg=(r,t)=>{for(var e in t||(t={}))N7.call(t,e)&&mg(r,e,t[e]);if(gg)for(var e of gg(t))R7.call(t,e)&&mg(r,e,t[e]);return r};class Ps extends yD{constructor(t,e,i,s=Yn,a=void 0){super(t,e,i,s),this.core=t,this.logger=e,this.name=i,this.map=new Map,this.version=e7,this.cached=[],this.initialized=!1,this.storagePrefix=Yn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(u=>{this.getKey&&u!==null&&!Hr(u)?this.map.set(this.getKey(u),u):RI(u)?this.map.set(u.id,u):TI(u)&&this.map.set(u.topic,u)}),this.cached=[],this.initialized=!0)},this.set=async(u,h)=>{this.isInitialized(),this.map.has(u)?await this.update(u,h):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:u,value:h}),this.map.set(u,h),await this.persist())},this.get=u=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:u}),this.getData(u)),this.getAll=u=>(this.isInitialized(),u?this.values.filter(h=>Object.keys(u).every(p=>cx(h[p],u[p]))):this.values),this.update=async(u,h)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:u,update:h});const p=vg(vg({},this.getData(u)),h);this.map.set(u,p),await this.persist()},this.delete=async(u,h)=>{this.isInitialized(),this.map.has(u)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:u,reason:h}),this.map.delete(u),this.addToRecentlyDeleted(u),await this.persist())},this.logger=Wr(e,this.name),this.storagePrefix=s,this.getKey=a}get context(){return Gr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const e=this.map.get(t);if(!e){if(this.recentlyDeleted.includes(t)){const{message:s}=gt("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}const{message:i}=gt("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}return e}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}}class T7{constructor(t,e){this.core=t,this.logger=e,this.name=o7,this.version=a7,this.events=new Yl,this.initialized=!1,this.storagePrefix=Yn,this.ignoredPayloadTypes=[Dn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const s=Tl(),a=await this.core.crypto.setSymKey(s),u=pr(yt.FIVE_MINUTES),h={protocol:Jm},p={topic:a,expiry:u,relay:h,active:!1},d=AI({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:h,expiryTimestamp:u,methods:i==null?void 0:i.methods});return this.core.expirer.set(a,u),await this.pairings.set(a,p),await this.core.relayer.subscribe(a),{topic:a,uri:d}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:s,symKey:a,relay:u,expiryTimestamp:h,methods:p}=P0(i.uri);let d;if(this.pairings.keys.includes(s)&&(d=this.pairings.get(s),d.active))throw new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);const b=h||pr(yt.FIVE_MINUTES),_={topic:s,relay:u,expiry:b,active:!1,methods:p};return this.core.expirer.set(s,b),await this.pairings.set(s,_),i.activatePairing&&await this.activate({topic:s}),this.events.emit(eo.create,_),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(a,s),await this.core.relayer.subscribe(s,{relay:u}),_},this.activate=async({topic:i})=>{this.isInitialized();const s=pr(yt.THIRTY_DAYS);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const a=await this.sendRequest(s,"wc_pairingPing",{}),{done:u,resolve:h,reject:p}=ws();this.events.once(pe("pairing_ping",a),({error:d})=>{d?p(d):h()}),await u()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Te("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,a)=>{const u=ao(s,a),h=await this.core.crypto.encode(i,u),p=Yo[s].req;return this.core.history.set(i,u),this.core.relayer.publish(i,h,p),u.id},this.sendResult=async(i,s,a)=>{const u=wu(i,a),h=await this.core.crypto.encode(s,u),p=await this.core.history.get(s,i),d=Yo[p.request.method].res;await this.core.relayer.publish(s,h,d),await this.core.history.resolve(u)},this.sendError=async(i,s,a)=>{const u=bu(i,a),h=await this.core.crypto.encode(s,u),p=await this.core.history.get(s,i),d=Yo[p.request.method]?Yo[p.request.method].res:Yo.unregistered_method.res;await this.core.relayer.publish(s,h,d),await this.core.history.resolve(u)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Te("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>Hn(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:a}=i;switch(a.method){case"wc_pairingPing":return this.onPairingPingRequest(s,a);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,a);default:return this.onUnknownRpcMethodRequest(s,a)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:a}=i,u=(await this.core.history.get(s,a.id)).request.method;switch(u){case"wc_pairingPing":return this.onPairingPingResponse(s,a);default:return this.onUnknownRpcMethodResponse(u)}},this.onPairingPingRequest=async(i,s)=>{const{id:a}=s;try{this.isValidPing({topic:i}),await this.sendResult(a,i,!0),this.events.emit(eo.ping,{id:a,topic:i})}catch(u){await this.sendError(a,i,u),this.logger.error(u)}},this.onPairingPingResponse=(i,s)=>{const{id:a}=s;setTimeout(()=>{Ji(s)?this.events.emit(pe("pairing_ping",a),{}):Ai(s)&&this.events.emit(pe("pairing_ping",a),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(eo.delete,{id:a,topic:i})}catch(u){await this.sendError(a,i,u),this.logger.error(u)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:a,method:u}=s;try{if(this.registeredMethods.includes(u))return;const h=Te("WC_METHOD_UNSUPPORTED",u);await this.sendError(a,i,h),this.logger.error(h)}catch(h){await this.sendError(a,i,h),this.logger.error(h)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Te("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var s;if(!zr(i)){const{message:u}=gt("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(u)}if(!NI(i.uri)){const{message:u}=gt("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(u)}const a=P0(i.uri);if(!((s=a==null?void 0:a.relay)!=null&&s.protocol)){const{message:u}=gt("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(u)}if(!(a!=null&&a.symKey)){const{message:u}=gt("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(u)}if(a!=null&&a.expiryTimestamp&&yt.toMiliseconds(a==null?void 0:a.expiryTimestamp)<Date.now()){const{message:u}=gt("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}},this.isValidPing=async i=>{if(!zr(i)){const{message:a}=gt("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!zr(i)){const{message:a}=gt("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!tr(i,!1)){const{message:s}=gt("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=gt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(Hn(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=gt("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=t,this.logger=Wr(e,this.name),this.pairings=new Ps(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Gr(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Kr.message,async t=>{const{topic:e,message:i}=t;if(!this.pairings.keys.includes(e)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(e,i);try{wf(s)?(this.core.history.set(e,s),this.onRelayEventRequest({topic:e,payload:s})):_u(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:e,payload:s}),this.core.history.delete(e,s.id))}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(_i.expired,async t=>{const{topic:e}=N1(t.target);e&&this.pairings.keys.includes(e)&&(await this.deletePairing(e,!0),this.events.emit(eo.expire,{topic:e}))})}}class L7 extends pD{constructor(t,e){super(t,e),this.core=t,this.logger=e,this.records=new Map,this.events=new ii.EventEmitter,this.name=c7,this.version=u7,this.cached=[],this.initialized=!1,this.storagePrefix=Yn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:a}),this.records.has(s.id))return;const u={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:a,expiry:pr(yt.THIRTY_DAYS)};this.records.set(u.id,u),this.persist(),this.events.emit(Ui.created,u)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=Ai(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ui.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(a=>{if(a.topic===i){if(typeof s<"u"&&a.id!==s)return;this.records.delete(a.id),this.events.emit(Ui.deleted,a)}}),this.persist()},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=Wr(e,this.name)}get context(){return Gr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(e=>{if(typeof e.response<"u")return;const i={topic:e.topic,request:ao(e.request.method,e.request.params,e.id),chainId:e.chainId};return t.push(i)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const e=this.records.get(t);if(!e){const{message:i}=gt("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return e}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ui.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Ui.created,t=>{const e=Ui.created;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t})}),this.events.on(Ui.updated,t=>{const e=Ui.updated;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t})}),this.events.on(Ui.deleted,t=>{const e=Ui.deleted;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t})}),this.core.heartbeat.on(Ea.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(e=>{yt.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.records.delete(e.id),this.events.emit(Ui.deleted,e,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}}class U7 extends bD{constructor(t,e){super(t,e),this.core=t,this.logger=e,this.expirations=new Map,this.events=new ii.EventEmitter,this.name=h7,this.version=l7,this.cached=[],this.initialized=!1,this.storagePrefix=Yn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const a=this.formatTarget(i),u={target:a,expiry:s};this.expirations.set(a,u),this.checkExpiry(a,u),this.events.emit(_i.created,{target:a,expiration:u})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),a=this.getExpiration(s);this.expirations.delete(s),this.events.emit(_i.deleted,{target:s,expiration:a})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=Wr(e,this.name)}get context(){return Gr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return n5(t);if(typeof t=="number")return s5(t);const{message:e}=gt("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(e)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(_i.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const e=this.expirations.get(t);if(!e){const{message:i}=gt("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(i),new Error(i)}return e}checkExpiry(t,e){const{expiry:i}=e;yt.toMiliseconds(i)-Date.now()<=0&&this.expire(t,e)}expire(t,e){this.expirations.delete(t),this.events.emit(_i.expired,{target:t,expiration:e})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,e)=>this.checkExpiry(e,t))}registerEventListeners(){this.core.heartbeat.on(Ea.pulse,()=>this.checkExpirations()),this.events.on(_i.created,t=>{const e=_i.created;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()}),this.events.on(_i.expired,t=>{const e=_i.expired;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()}),this.events.on(_i.deleted,t=>{const e=_i.deleted;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}}}class B7 extends _D{constructor(t,e){super(t,e),this.projectId=t,this.logger=e,this.name=cl,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||po()||!go())return;const s=this.getVerifyUrl(i==null?void 0:i.verifyUrl);this.verifyUrl!==s&&this.removeIframe(),this.verifyUrl=s;try{await this.createIframe()}catch(a){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(a)}if(!this.initialized){this.removeIframe(),this.verifyUrl=$l;try{await this.createIframe()}catch(a){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(a),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const s=this.getVerifyUrl(i==null?void 0:i.verifyUrl);let a;try{a=await this.fetchAttestation(i.attestationId,s)}catch(u){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${s}`),this.logger.info(u),a=await this.fetchAttestation(i.attestationId,$l)}return a},this.fetchAttestation=async(i,s)=>{this.logger.info(`resolving attestation: ${i} from url: ${s}`);const a=this.startAbortTimer(yt.ONE_SECOND*2),u=await fetch(`${s}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(a),u.status===200?await u.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var s;try{if(!this.iframe)return;(s=this.iframe.contentWindow)==null||s.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const s=a=>{a.data==="verify_ready"&&(this.onInit(),window.removeEventListener("message",s),i())};await Promise.race([new Promise(a=>{const u=document.getElementById(cl);if(u)return this.iframe=u,this.onInit(),a();window.addEventListener("message",s);const h=document.createElement("iframe");h.id=cl,h.src=`${this.verifyUrl}/${this.projectId}`,h.style.display="none",document.body.append(h),this.iframe=h,i=a}),new Promise((a,u)=>setTimeout(()=>{window.removeEventListener("message",s),u("verify iframe load timeout")},yt.toMiliseconds(yt.FIVE_SECONDS)))])},this.onInit=()=>{this.initialized=!0,this.processQueue()},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let s=i||ro;return f7.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${ro}`),s=ro),s},this.logger=Wr(e,this.name),this.verifyUrl=ro,this.abortController=new AbortController,this.isDevEnv=ca()&&dx.IS_VITEST}get context(){return Gr(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),yt.toMiliseconds(t))}}let j7=class extends ED{constructor(t,e){super(t,e),this.projectId=t,this.logger=e,this.context=d7,this.registerDeviceToken=async i=>{const{clientId:s,token:a,notificationType:u,enableEncrypted:h=!1}=i,p=`${p7}/${this.projectId}/clients`;await fx(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:u,token:a,always_raw:h})})},this.logger=Wr(e,this.context)}};var q7=Object.defineProperty,yg=Object.getOwnPropertySymbols,$7=Object.prototype.hasOwnProperty,F7=Object.prototype.propertyIsEnumerable,wg=(r,t,e)=>t in r?q7(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,bg=(r,t)=>{for(var e in t||(t={}))$7.call(t,e)&&wg(r,e,t[e]);if(yg)for(var e of yg(t))F7.call(t,e)&&wg(r,e,t[e]);return r};let z7=class Zm extends dD{constructor(t){var e;super(t),this.protocol=Qm,this.version=jM,this.name=bf,this.events=new ii.EventEmitter,this.initialized=!1,this.on=(u,h)=>this.events.on(u,h),this.once=(u,h)=>this.events.once(u,h),this.off=(u,h)=>this.events.off(u,h),this.removeListener=(u,h)=>this.events.removeListener(u,h),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||Xm,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=yu({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:qM.logger}),{logger:s,chunkLoggerController:a}=fD({opts:i,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=a,(e=this.logChunkController)!=null&&e.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var u,h;(u=this.logChunkController)!=null&&u.downloadLogsBlobInBrowser&&((h=this.logChunkController)==null||h.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Wr(s,this.name),this.heartbeat=new j4,this.crypto=new m7(this,this.logger,t==null?void 0:t.keychain),this.history=new L7(this,this.logger),this.expirer=new U7(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new U4(bg(bg({},$M),t==null?void 0:t.storageOptions)),this.relayer=new O7({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new T7(this,this.logger),this.verify=new B7(this.projectId||"",this.logger),this.echoClient=new j7(this.projectId||"",this.logger)}static async init(t){const e=new Zm(t);await e.initialize();const i=await e.crypto.getClientId();return await e.storage.setItem(r7,i),e}get context(){return Gr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const k7=z7,tv="wc",ev=2,rv="client",_f=`${tv}@${ev}:${rv}:`,hl={name:rv,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},_g="WALLETCONNECT_DEEPLINK_CHOICE",H7="proposal",iv="Proposal expired",K7="session",Qs=yt.SEVEN_DAYS,V7="engine",dr={wc_sessionPropose:{req:{ttl:yt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:yt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:yt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:yt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:yt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:yt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:yt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:yt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:yt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:yt.ONE_DAY,prompt:!1,tag:1114},res:{ttl:yt.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:yt.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:yt.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:yt.FIVE_MINUTES,prompt:!1,tag:1119}}},ll={min:yt.FIVE_MINUTES,max:yt.SEVEN_DAYS},Wi={idle:"IDLE",active:"ACTIVE"},G7="request",W7=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],Y7="wc",Q7="auth",J7="authKeys",X7="pairingTopics",Z7="requests",Au=`${Y7}@${1.5}:${Q7}:`,Gc=`${Au}:PUB_KEY`;var tP=Object.defineProperty,eP=Object.defineProperties,rP=Object.getOwnPropertyDescriptors,Eg=Object.getOwnPropertySymbols,iP=Object.prototype.hasOwnProperty,nP=Object.prototype.propertyIsEnumerable,Ag=(r,t,e)=>t in r?tP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,nr=(r,t)=>{for(var e in t||(t={}))iP.call(t,e)&&Ag(r,e,t[e]);if(Eg)for(var e of Eg(t))nP.call(t,e)&&Ag(r,e,t[e]);return r},ys=(r,t)=>eP(r,rP(t));class sP extends SD{constructor(t){super(t),this.name=V7,this.events=new Yl,this.initialized=!1,this.requestQueue={state:Wi.idle,queue:[]},this.sessionRequestQueue={state:Wi.idle,queue:[]},this.requestQueueDelay=yt.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(dr)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},yt.toMiliseconds(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();const i=ys(nr({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:u,sessionProperties:h,relays:p}=i;let d=s,b,_=!1;try{d&&(_=this.client.core.pairing.pairings.get(d).active)}catch(j){throw this.client.logger.error(`connect() -> pairing.get(${d}) failed`),j}if(!d||!_){const{topic:j,uri:$}=await this.client.core.pairing.create();d=j,b=$}if(!d){const{message:j}=gt("NO_MATCHING_KEY",`connect() pairing topic: ${d}`);throw new Error(j)}const S=await this.client.core.crypto.generateKeyPair(),I=dr.wc_sessionPropose.req.ttl||yt.FIVE_MINUTES,M=pr(I),W=nr({requiredNamespaces:a,optionalNamespaces:u,relays:p??[{protocol:Jm}],proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:M,pairingTopic:d},h&&{sessionProperties:h}),{reject:H,resolve:tt,done:V}=ws(I,iv);this.events.once(pe("session_connect"),async({error:j,session:$})=>{if(j)H(j);else if($){$.self.publicKey=S;const z=ys(nr({},$),{pairingTopic:W.pairingTopic,requiredNamespaces:W.requiredNamespaces,optionalNamespaces:W.optionalNamespaces});await this.client.session.set($.topic,z),await this.setExpiry($.topic,$.expiry),d&&await this.client.core.pairing.updateMetadata({topic:d,metadata:$.peer.metadata}),this.cleanupDuplicatePairings(z),tt(z)}});const G=await this.sendRequest({topic:d,method:"wc_sessionPropose",params:W,throwOnFailedPublish:!0});return await this.setProposal(G,nr({id:G},W)),{uri:b,approval:V}},this.pair=async e=>{await this.isInitialized();try{return await this.client.core.pairing.pair(e)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async e=>{await this.isInitialized();try{await this.isValidApprove(e)}catch(V){throw this.client.logger.error("approve() -> isValidApprove() failed"),V}const{id:i,relayProtocol:s,namespaces:a,sessionProperties:u,sessionConfig:h}=e;let p;try{p=this.client.proposal.get(i)}catch(V){throw this.client.logger.error(`approve() -> proposal.get(${i}) failed`),V}const{pairingTopic:d,proposer:b,requiredNamespaces:_,optionalNamespaces:S}=p,I=await this.client.core.crypto.generateKeyPair(),M=b.publicKey,W=await this.client.core.crypto.generateSharedKey(I,M),H=nr(nr({relay:{protocol:s??"irn"},namespaces:a,controller:{publicKey:I,metadata:this.client.metadata},expiry:pr(Qs)},u&&{sessionProperties:u}),h&&{sessionConfig:h});await this.client.core.relayer.subscribe(W);const tt=ys(nr({},H),{topic:W,requiredNamespaces:_,optionalNamespaces:S,pairingTopic:d,acknowledged:!1,self:H.controller,peer:{publicKey:b.publicKey,metadata:b.metadata},controller:I});await this.client.session.set(W,tt);try{await this.sendResult({id:i,topic:d,result:{relay:{protocol:s??"irn"},responderPublicKey:I},throwOnFailedPublish:!0}),await this.sendRequest({topic:W,method:"wc_sessionSettle",params:H,throwOnFailedPublish:!0})}catch(V){throw this.client.logger.error(V),this.client.session.delete(W,Te("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(W),V}return await this.client.core.pairing.updateMetadata({topic:d,metadata:b.metadata}),await this.client.proposal.delete(i,Te("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(W,pr(Qs)),{topic:W,acknowledged:()=>new Promise(V=>setTimeout(()=>V(this.client.session.get(W)),500))}},this.reject=async e=>{await this.isInitialized();try{await this.isValidReject(e)}catch(u){throw this.client.logger.error("reject() -> isValidReject() failed"),u}const{id:i,reason:s}=e;let a;try{a=this.client.proposal.get(i).pairingTopic}catch(u){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),u}a&&(await this.sendError({id:i,topic:a,error:s,rpcOpts:dr.wc_sessionPropose.reject}),await this.client.proposal.delete(i,Te("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized();try{await this.isValidUpdate(e)}catch(_){throw this.client.logger.error("update() -> isValidUpdate() failed"),_}const{topic:i,namespaces:s}=e,{done:a,resolve:u,reject:h}=ws(),p=Vn(),d=Es().toString(),b=this.client.session.get(i).namespaces;return this.events.once(pe("session_update",p),({error:_})=>{_?h(_):u()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:p,relayRpcId:d}).catch(_=>{this.client.logger.error(_),this.client.session.update(i,{namespaces:b}),h(_)}),{acknowledged:a}},this.extend=async e=>{await this.isInitialized();try{await this.isValidExtend(e)}catch(p){throw this.client.logger.error("extend() -> isValidExtend() failed"),p}const{topic:i}=e,s=Vn(),{done:a,resolve:u,reject:h}=ws();return this.events.once(pe("session_extend",s),({error:p})=>{p?h(p):u()}),await this.setExpiry(i,pr(Qs)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(p=>{h(p)}),{acknowledged:a}},this.request=async e=>{await this.isInitialized();try{await this.isValidRequest(e)}catch(I){throw this.client.logger.error("request() -> isValidRequest() failed"),I}const{chainId:i,request:s,topic:a,expiry:u=dr.wc_sessionRequest.req.ttl}=e,h=this.client.session.get(a),p=Vn(),d=Es().toString(),{done:b,resolve:_,reject:S}=ws(u,"Request expired. Please try again.");return this.events.once(pe("session_request",p),({error:I,result:M})=>{I?S(I):_(M)}),await Promise.all([new Promise(async I=>{await this.sendRequest({clientRpcId:p,relayRpcId:d,topic:a,method:"wc_sessionRequest",params:{request:ys(nr({},s),{expiryTimestamp:pr(u)}),chainId:i},expiry:u,throwOnFailedPublish:!0}).catch(M=>S(M)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:i,id:p}),I()}),new Promise(async I=>{var M;if(!((M=h.sessionConfig)!=null&&M.disableDeepLink)){const W=await a5(this.client.core.storage,_g);o5({id:p,topic:a,wcDeepLink:W})}I()}),b()]).then(I=>I[2])},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);const{topic:i,response:s}=e,{id:a}=s;Ji(s)?await this.sendResult({id:a,topic:i,result:s.result,throwOnFailedPublish:!0}):Ai(s)&&await this.sendError({id:a,topic:i,error:s.error}),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized();try{await this.isValidPing(e)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=e;if(this.client.session.keys.includes(i)){const s=Vn(),a=Es().toString(),{done:u,resolve:h,reject:p}=ws();this.events.once(pe("session_ping",s),({error:d})=>{d?p(d):h()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:a}),u()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);const{topic:i,event:s,chainId:a}=e,u=Es().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:a},throwOnFailedPublish:!0,relayRpcId:u})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);const{topic:i}=e;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Te("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=gt("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(i=>OI(i,e))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async e=>{this.isInitialized(),this.isValidAuthenticate(e);const{chains:i,statement:s="",uri:a,domain:u,nonce:h,type:p,exp:d,nbf:b,methods:_=[],expiry:S}=e,I=[...e.resources||[]],{topic:M,uri:W}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:M,uri:W}});const H=await this.client.core.crypto.generateKeyPair(),tt=Hc(H);if(await Promise.all([this.client.auth.authKeys.set(Gc,{responseTopic:tt,publicKey:H}),this.client.auth.pairingTopics.set(tt,{topic:tt,pairingTopic:M})]),await this.client.core.relayer.subscribe(tt),this.client.logger.info(`sending request to new pairing topic: ${M}`),_.length>0){const{namespace:f}=jc(i[0]);let l=tI(f,"request",_);kc(I)&&(l=rI(l,I.pop())),I.push(l)}const V=S&&S>dr.wc_sessionAuthenticate.req.ttl?S:dr.wc_sessionAuthenticate.req.ttl,G={authPayload:{type:p??"caip122",chains:i,statement:s,aud:a,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:d,nbf:b,resources:I},requester:{publicKey:H,metadata:this.client.metadata},expiryTimestamp:pr(V)},j={eip155:{chains:i,methods:[...new Set(["personal_sign",..._])],events:["chainChanged","accountsChanged"]}},$={requiredNamespaces:{},optionalNamespaces:j,relays:[{protocol:"irn"}],pairingTopic:M,proposer:{publicKey:H,metadata:this.client.metadata},expiryTimestamp:pr(dr.wc_sessionPropose.req.ttl)},{done:z,resolve:y,reject:T}=ws(V,"Request expired"),nt=async({error:f,session:l})=>{if(this.events.off(pe("session_request",lt),dt),f)T(f);else if(l){l.self.publicKey=H,await this.client.session.set(l.topic,l),await this.setExpiry(l.topic,l.expiry),M&&await this.client.core.pairing.updateMetadata({topic:M,metadata:l.peer.metadata});const w=this.client.session.get(l.topic);await this.deleteProposal(mt),y({session:w})}},dt=async f=>{if(await this.deletePendingAuthRequest(lt,{message:"fulfilled",code:0}),f.error){const x=Te("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return f.error.code===x.code?void 0:(this.events.off(pe("session_connect"),nt),T(f.error.message))}await this.deleteProposal(mt),this.events.off(pe("session_connect"),nt);const{cacaos:l,responder:w}=f.result,D=[],P=[];for(const x of l){await _0({cacao:x,projectId:this.client.core.projectId})||(this.client.logger.error(x,"Signature verification failed"),T(Te("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:g}=x,N=kc(g.resources),it=[b0(g.iss)],ft=eu(g.iss);if(N){const E=E0(N),Q=A0(N);D.push(...E),it.push(...Q)}for(const E of it)P.push(`${E}:${ft}`)}const C=await this.client.core.crypto.generateSharedKey(H,w.publicKey);let L;D.length>0&&(L={topic:C,acknowledged:!0,self:{publicKey:H,metadata:this.client.metadata},peer:w,controller:w.publicKey,expiry:pr(Qs),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:M,namespaces:O0([...new Set(D)],[...new Set(P)])},await this.client.core.relayer.subscribe(C),await this.client.session.set(C,L),L=this.client.session.get(C)),y({auths:l,session:L})},lt=Vn(),mt=Vn();this.events.once(pe("session_connect"),nt),this.events.once(pe("session_request",lt),dt);try{await Promise.all([this.sendRequest({topic:M,method:"wc_sessionAuthenticate",params:G,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:lt}),this.sendRequest({topic:M,method:"wc_sessionPropose",params:$,expiry:dr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:mt})])}catch(f){throw this.events.off(pe("session_connect"),nt),this.events.off(pe("session_request",lt),dt),f}return await this.setProposal(mt,nr({id:mt},$)),await this.setAuthRequest(lt,{request:ys(nr({},G),{verifyContext:{}}),pairingTopic:M}),{uri:W,response:z}},this.approveSessionAuthenticate=async e=>{this.isInitialized();const{id:i,auths:s}=e,a=this.getPendingAuthRequest(i);if(!a)throw new Error(`Could not find pending auth request with id ${i}`);const u=a.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),p=Hc(u),d={type:Dn,receiverPublicKey:u,senderPublicKey:h},b=[],_=[];for(const M of s){if(!await _0({cacao:M,projectId:this.client.core.projectId})){const G=Te("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:p,error:G,encodeOpts:d}),new Error(G.message)}const{p:W}=M,H=kc(W.resources),tt=[b0(W.iss)],V=eu(W.iss);if(H){const G=E0(H),j=A0(H);b.push(...G),tt.push(...j)}for(const G of tt)_.push(`${G}:${V}`)}const S=await this.client.core.crypto.generateSharedKey(h,u);let I;return(b==null?void 0:b.length)>0&&(I={topic:S,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:u,metadata:a.requester.metadata},controller:u,expiry:pr(Qs),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:"",namespaces:O0([...new Set(b)],[...new Set(_)])},await this.client.core.relayer.subscribe(S),await this.client.session.set(S,I)),await this.sendResult({topic:p,id:i,result:{cacaos:s,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0}),await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:a.pairingTopic}),{session:I}},this.rejectSessionAuthenticate=async e=>{await this.isInitialized();const{id:i,reason:s}=e,a=this.getPendingAuthRequest(i);if(!a)throw new Error(`Could not find pending auth request with id ${i}`);const u=a.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),p=Hc(u),d={type:Dn,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:i,topic:p,error:s,encodeOpts:d,rpcOpts:dr.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,Te("USER_DISCONNECTED"))},this.formatAuthMessage=e=>{this.isInitialized();const{request:i,iss:s}=e;return pm(i,s)},this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const i=this.client.core.pairing.pairings.get(e.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(a=>{var u,h;return((u=a.peerMetadata)==null?void 0:u.url)&&((h=a.peerMetadata)==null?void 0:h.url)===e.peer.metadata.url&&a.topic&&a.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async e=>{var i;const{topic:s,expirerHasDeleted:a=!1,emitEvent:u=!0,id:h=0}=e,{self:p}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Te("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(p.publicKey)&&await this.client.core.crypto.deleteKeyPair(p.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),a||this.client.core.expirer.del(s),this.client.core.storage.removeItem(_g).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===s&&this.deletePendingSessionRequest(d.id,Te("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=Wi.idle),u&&this.client.events.emit("session_delete",{id:h,topic:s})},this.deleteProposal=async(e,i)=>{await Promise.all([this.client.proposal.delete(e,Te("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async(e,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,i),s?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==e),s&&(this.sessionRequestQueue.state=Wi.idle,this.client.events.emit("session_request_expire",{id:e}))},this.deletePendingAuthRequest=async(e,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(e,i),s?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,i)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,i),await this.client.session.update(e,{expiry:i}))},this.setProposal=async(e,i)=>{this.client.core.expirer.set(e,pr(dr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,i)},this.setAuthRequest=async(e,i)=>{const{request:s,pairingTopic:a}=i;this.client.core.expirer.set(e,s.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:e,pairingTopic:a,verifyContext:s.verifyContext})},this.setPendingSessionRequest=async e=>{const{id:i,topic:s,params:a,verifyContext:u}=e,h=a.request.expiryTimestamp||pr(dr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,h),await this.client.pendingRequest.set(i,{id:i,topic:s,params:a,verifyContext:u})},this.sendRequest=async e=>{const{topic:i,method:s,params:a,expiry:u,relayRpcId:h,clientRpcId:p,throwOnFailedPublish:d}=e,b=ao(s,a,p);if(go()&&W7.includes(s)){const I=_s(JSON.stringify(b));this.client.core.verify.register({attestationId:I})}let _;try{_=await this.client.core.crypto.encode(i,b)}catch(I){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),I}const S=dr[s].req;return u&&(S.ttl=u),h&&(S.id=h),this.client.core.history.set(i,b),d?(S.internal=ys(nr({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,_,S)):this.client.core.relayer.publish(i,_,S).catch(I=>this.client.logger.error(I)),b.id},this.sendResult=async e=>{const{id:i,topic:s,result:a,throwOnFailedPublish:u,encodeOpts:h}=e,p=wu(i,a);let d;try{d=await this.client.core.crypto.encode(s,p,h)}catch(S){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),S}let b;try{b=await this.client.core.history.get(s,i)}catch(S){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),S}const _=dr[b.request.method].res;u?(_.internal=ys(nr({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,d,_)):this.client.core.relayer.publish(s,d,_).catch(S=>this.client.logger.error(S)),await this.client.core.history.resolve(p)},this.sendError=async e=>{const{id:i,topic:s,error:a,encodeOpts:u,rpcOpts:h}=e,p=bu(i,a);let d;try{d=await this.client.core.crypto.encode(s,p,u)}catch(S){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),S}let b;try{b=await this.client.core.history.get(s,i)}catch(S){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),S}const _=h||dr[b.request.method].res;this.client.core.relayer.publish(s,d,_),await this.client.core.history.resolve(p)},this.cleanup=async()=>{const e=[],i=[];this.client.session.getAll().forEach(s=>{let a=!1;Hn(s.expiry)&&(a=!0),this.client.core.crypto.keychain.has(s.topic)||(a=!0),a&&e.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Hn(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...e.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Wi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Wi.active;const e=this.requestQueue.queue.shift();if(e)try{this.processRequest(e),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=Wi.idle},this.processRequest=e=>{const{topic:i,payload:s}=e,a=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:a}))switch(a){case"wc_sessionPropose":return this.onSessionProposeRequest(i,s);case"wc_sessionSettle":return this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return this.onSessionExtendRequest(i,s);case"wc_sessionPing":return this.onSessionPingRequest(i,s);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return this.onSessionRequest(i,s);case"wc_sessionEvent":return this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateRequest(i,s);default:return this.client.logger.info(`Unsupported request method ${a}`)}},this.onRelayEventResponse=async e=>{const{topic:i,payload:s}=e,a=(await this.client.core.history.get(i,s.id)).request.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${a}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:i}=e,{message:s}=gt("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=e=>{const{topic:i,requestMethod:s}=e,a=this.expectedPairingMethodMap.get(i);return!a||a.includes(s)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async(e,i)=>{const{params:s,id:a}=i;try{this.isValidConnect(nr({},i.params));const u=s.expiryTimestamp||pr(dr.wc_sessionPropose.req.ttl),h=nr({id:a,pairingTopic:e,expiryTimestamp:u},s);await this.setProposal(a,h);const p=_s(JSON.stringify(i)),d=await this.getVerifyContext(p,h.proposer.metadata);this.client.events.emit("session_proposal",{id:a,params:h,verifyContext:d})}catch(u){await this.sendError({id:a,topic:e,error:u,rpcOpts:dr.wc_sessionPropose.autoReject}),this.client.logger.error(u)}},this.onSessionProposeResponse=async(e,i)=>{const{id:s}=i;if(Ji(i)){const{result:a}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const u=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const h=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:h});const p=a.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:p});const d=await this.client.core.crypto.generateSharedKey(h,p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:d});const b=await this.client.core.relayer.subscribe(d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:b}),await this.client.core.pairing.activate({topic:e})}else if(Ai(i)){await this.client.proposal.delete(s,Te("USER_DISCONNECTED"));const a=pe("session_connect");if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners, 954`);this.events.emit(pe("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(e,i)=>{const{id:s,params:a}=i;try{this.isValidSessionSettleRequest(a);const{relay:u,controller:h,expiry:p,namespaces:d,sessionProperties:b,sessionConfig:_}=i.params,S=nr(nr({topic:e,relay:u,expiry:p,namespaces:d,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:h.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:h.publicKey,metadata:h.metadata}},b&&{sessionProperties:b}),_&&{sessionConfig:_});await this.sendResult({id:i.id,topic:e,result:!0,throwOnFailedPublish:!0});const I=pe("session_connect");if(this.events.listenerCount(I)===0)throw new Error(`emitting ${I} without any listeners 997`);this.events.emit(pe("session_connect"),{session:S})}catch(u){await this.sendError({id:s,topic:e,error:u}),this.client.logger.error(u)}},this.onSessionSettleResponse=async(e,i)=>{const{id:s}=i;Ji(i)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(pe("session_approve",s),{})):Ai(i)&&(await this.client.session.delete(e,Te("USER_DISCONNECTED")),this.events.emit(pe("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(e,i)=>{const{params:s,id:a}=i;try{const u=`${e}_session_update`,h=Wo.get(u);if(h&&this.isRequestOutOfSync(h,a)){this.client.logger.info(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:e,error:Te("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(nr({topic:e},s));try{Wo.set(u,a),await this.client.session.update(e,{namespaces:s.namespaces}),await this.sendResult({id:a,topic:e,result:!0,throwOnFailedPublish:!0})}catch(p){throw Wo.delete(u),p}this.client.events.emit("session_update",{id:a,topic:e,params:s})}catch(u){await this.sendError({id:a,topic:e,error:u}),this.client.logger.error(u)}},this.isRequestOutOfSync=(e,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,i)=>{const{id:s}=i,a=pe("session_update",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Ji(i)?this.events.emit(pe("session_update",s),{}):Ai(i)&&this.events.emit(pe("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(e,i)=>{const{id:s}=i;try{this.isValidExtend({topic:e}),await this.setExpiry(e,pr(Qs)),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:e})}catch(a){await this.sendError({id:s,topic:e,error:a}),this.client.logger.error(a)}},this.onSessionExtendResponse=(e,i)=>{const{id:s}=i,a=pe("session_extend",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Ji(i)?this.events.emit(pe("session_extend",s),{}):Ai(i)&&this.events.emit(pe("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(e,i)=>{const{id:s}=i;try{this.isValidPing({topic:e}),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:e})}catch(a){await this.sendError({id:s,topic:e,error:a}),this.client.logger.error(a)}},this.onSessionPingResponse=(e,i)=>{const{id:s}=i,a=pe("session_ping",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);setTimeout(()=>{Ji(i)?this.events.emit(pe("session_ping",s),{}):Ai(i)&&this.events.emit(pe("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(e,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:e,reason:i.params}),await Promise.all([new Promise(a=>{this.client.core.relayer.once(Kr.publish,async()=>{a(await this.deleteSession({topic:e,id:s}))})}),this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Te("USER_DISCONNECTED")})])}catch(a){this.client.logger.error(a)}},this.onSessionRequest=async(e,i)=>{var s;const{id:a,params:u}=i;try{await this.isValidRequest(nr({topic:e},u));const h=_s(JSON.stringify(ao("wc_sessionRequest",u,a))),p=this.client.session.get(e),d=await this.getVerifyContext(h,p.peer.metadata),b={id:a,topic:e,params:u,verifyContext:d};await this.setPendingSessionRequest(b),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(b):(this.addSessionRequestToSessionRequestQueue(b),this.processSessionRequestQueue())}catch(h){await this.sendError({id:a,topic:e,error:h}),this.client.logger.error(h)}},this.onSessionRequestResponse=(e,i)=>{const{id:s}=i,a=pe("session_request",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Ji(i)?this.events.emit(pe("session_request",s),{result:i.result}):Ai(i)&&this.events.emit(pe("session_request",s),{error:i.error})},this.onSessionEventRequest=async(e,i)=>{const{id:s,params:a}=i;try{const u=`${e}_session_event_${a.event.name}`,h=Wo.get(u);if(h&&this.isRequestOutOfSync(h,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(nr({topic:e},a)),this.client.events.emit("session_event",{id:s,topic:e,params:a}),Wo.set(u,s)}catch(u){await this.sendError({id:s,topic:e,error:u}),this.client.logger.error(u)}},this.onSessionAuthenticateResponse=(e,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:i}),Ji(i)?this.events.emit(pe("session_request",s),{result:i.result}):Ai(i)&&this.events.emit(pe("session_request",s),{error:i.error})},this.onSessionAuthenticateRequest=async(e,i)=>{try{const{requester:s,authPayload:a,expiryTimestamp:u}=i.params,h=_s(JSON.stringify(i)),p=await this.getVerifyContext(h,this.client.metadata),d={requester:s,pairingTopic:e,id:i.id,authPayload:a,verifyContext:p,expiryTimestamp:u};await this.setAuthRequest(i.id,{request:d,pairingTopic:e}),this.client.events.emit("session_authenticate",{topic:e,params:i.params,id:i.id})}catch(s){this.client.logger.error(s);const a=i.params.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),h={type:Dn,receiverPublicKey:a,senderPublicKey:u};await this.sendError({id:i.id,topic:e,error:s,encodeOpts:h,rpcOpts:dr.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Wi.idle,this.processSessionRequestQueue()},yt.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(a=>a.topic===e&&a.request.method==="wc_sessionRequest").forEach(a=>{const u=a.request.id,h=pe("session_request",u);if(this.events.listenerCount(h)===0)throw new Error(`emitting ${h} without any listeners`);this.events.emit(pe("session_request",a.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Wi.active){this.client.logger.info("session request queue is already active.");return}const e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Wi.active,this.emitSessionRequest(e)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onPairingCreated=e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===e.topic);i&&this.onSessionProposeRequest(e.topic,ao("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async e=>{if(!zr(e)){const{message:p}=gt("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(p)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:u,relays:h}=e;if(Hr(i)||await this.isValidPairingTopic(i),!zI(h)){const{message:p}=gt("MISSING_OR_INVALID",`connect() relays: ${h}`);throw new Error(p)}!Hr(s)&&la(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Hr(a)&&la(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),Hr(u)||this.validateSessionProps(u,"sessionProperties")},this.validateNamespaces=(e,i)=>{const s=FI(e,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async e=>{if(!zr(e))throw new Error(gt("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:i,namespaces:s,relayProtocol:a,sessionProperties:u}=e;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const h=this.client.proposal.get(i),p=el(s,"approve()");if(p)throw new Error(p.message);const d=R0(h.requiredNamespaces,s,"approve()");if(d)throw new Error(d.message);if(!tr(a,!0)){const{message:b}=gt("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(b)}Hr(u)||this.validateSessionProps(u,"sessionProperties")},this.isValidReject=async e=>{if(!zr(e)){const{message:a}=gt("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(a)}const{id:i,reason:s}=e;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!HI(s)){const{message:a}=gt("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}},this.isValidSessionSettleRequest=e=>{if(!zr(e)){const{message:d}=gt("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(d)}const{relay:i,controller:s,namespaces:a,expiry:u}=e;if(!bm(i)){const{message:d}=gt("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const h=LI(s,"onSessionSettleRequest()");if(h)throw new Error(h.message);const p=el(a,"onSessionSettleRequest()");if(p)throw new Error(p.message);if(Hn(u)){const{message:d}=gt("EXPIRED","onSessionSettleRequest()");throw new Error(d)}},this.isValidUpdate=async e=>{if(!zr(e)){const{message:p}=gt("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(p)}const{topic:i,namespaces:s}=e;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const a=this.client.session.get(i),u=el(s,"update()");if(u)throw new Error(u.message);const h=R0(a.requiredNamespaces,s,"update()");if(h)throw new Error(h.message)},this.isValidExtend=async e=>{if(!zr(e)){const{message:s}=gt("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(s)}const{topic:i}=e;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async e=>{if(!zr(e)){const{message:p}=gt("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(p)}const{topic:i,request:s,chainId:a,expiry:u}=e;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:h}=this.client.session.get(i);if(!N0(h,a)){const{message:p}=gt("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(p)}if(!KI(s)){const{message:p}=gt("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(p)}if(!WI(h,a,s.method)){const{message:p}=gt("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(p)}if(u&&!XI(u,ll)){const{message:p}=gt("MISSING_OR_INVALID",`request() expiry: ${u}. Expiry must be a number (in seconds) between ${ll.min} and ${ll.max}`);throw new Error(p)}},this.isValidRespond=async e=>{var i;if(!zr(e)){const{message:u}=gt("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(u)}const{topic:s,response:a}=e;try{await this.isValidSessionTopic(s)}catch(u){throw(i=e==null?void 0:e.response)!=null&&i.id&&this.cleanupAfterResponse(e),u}if(!VI(a)){const{message:u}=gt("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(u)}},this.isValidPing=async e=>{if(!zr(e)){const{message:s}=gt("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(s)}const{topic:i}=e;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async e=>{if(!zr(e)){const{message:h}=gt("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(h)}const{topic:i,event:s,chainId:a}=e;await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!N0(u,a)){const{message:h}=gt("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(h)}if(!GI(s)){const{message:h}=gt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(h)}if(!YI(u,a,s.name)){const{message:h}=gt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(h)}},this.isValidDisconnect=async e=>{if(!zr(e)){const{message:s}=gt("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(s)}const{topic:i}=e;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=e=>{const{chains:i,uri:s,domain:a,nonce:u}=e;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!tr(s,!1))throw new Error("uri is required parameter");if(!tr(a,!1))throw new Error("domain is required parameter");if(!tr(u,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(p=>jc(p).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:h}=jc(i[0]);if(h!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async(e,i)=>{const s={verified:{verifyUrl:i.verifyUrl||ro,validation:"UNKNOWN",origin:i.url||""}};try{const a=await this.client.core.verify.resolve({attestationId:e,verifyUrl:i.verifyUrl});a&&(s.verified.origin=a.origin,s.verified.isScam=a.isScam,s.verified.validation=a.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(a){this.client.logger.info(a)}return this.client.logger.info(`Verify context: ${JSON.stringify(s)}`),s},this.validateSessionProps=(e,i)=>{Object.values(e).forEach(s=>{if(!tr(s,!1)){const{message:a}=gt("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(a)}})},this.getPendingAuthRequest=e=>{const i=this.client.auth.requests.get(e);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(e,i)=>{if(this.recentlyDeletedMap.set(e,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const a=this.recentlyDeletedLimit/2;for(const u of this.recentlyDeletedMap.keys()){if(s++>=a)break;this.recentlyDeletedMap.delete(u)}}},this.checkRecentlyDeleted=e=>{const i=this.recentlyDeletedMap.get(e);if(i){const{message:s}=gt("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${e}`);throw new Error(s)}}}async isInitialized(){if(!this.initialized){const{message:t}=gt("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Kr.message,async t=>{const{topic:e,message:i}=t,{publicKey:s}=this.client.auth.authKeys.keys.includes(Gc)?this.client.auth.authKeys.get(Gc):{responseTopic:void 0,publicKey:void 0},a=await this.client.core.crypto.decode(e,i,{receiverPublicKey:s});try{wf(a)?(this.client.core.history.set(e,a),this.onRelayEventRequest({topic:e,payload:a})):_u(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:e,payload:a}),this.client.core.history.delete(e,a.id)):this.onRelayEventUnknownPayload({topic:e,payload:a})}catch(u){this.client.logger.error(u)}})}registerExpirerEvents(){this.client.core.expirer.on(_i.expired,async t=>{const{topic:e,id:i}=N1(t.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,gt("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,gt("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession({topic:e,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:e})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(eo.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(eo.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!tr(t,!1)){const{message:e}=gt("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=gt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(e)}if(Hn(this.client.core.pairing.pairings.get(t).expiry)){const{message:e}=gt("EXPIRED",`pairing topic: ${t}`);throw new Error(e)}}async isValidSessionTopic(t){if(!tr(t,!1)){const{message:e}=gt("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(e)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:e}=gt("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(e)}if(Hn(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:e}=gt("EXPIRED",`session topic: ${t}`);throw new Error(e)}if(!this.client.core.crypto.keychain.has(t)){const{message:e}=gt("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(e)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(tr(t,!1)){const{message:e}=gt("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(e)}else{const{message:e}=gt("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(e)}}async isValidProposalId(t){if(!kI(t)){const{message:e}=gt("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(e)}if(!this.client.proposal.keys.includes(t)){const{message:e}=gt("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(e)}if(Hn(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:e}=gt("EXPIRED",`proposal id: ${t}`);throw new Error(e)}}}class oP extends Ps{constructor(t,e){super(t,e,H7,_f),this.core=t,this.logger=e}}class aP extends Ps{constructor(t,e){super(t,e,K7,_f),this.core=t,this.logger=e}}class cP extends Ps{constructor(t,e){super(t,e,G7,_f,i=>i.id),this.core=t,this.logger=e}}class uP extends Ps{constructor(t,e){super(t,e,J7,Au,()=>Gc),this.core=t,this.logger=e}}class hP extends Ps{constructor(t,e){super(t,e,X7,Au),this.core=t,this.logger=e}}class lP extends Ps{constructor(t,e){super(t,e,Z7,Au,i=>i.id),this.core=t,this.logger=e}}class fP{constructor(t,e){this.core=t,this.logger=e,this.authKeys=new uP(this.core,this.logger),this.pairingTopics=new hP(this.core,this.logger),this.requests=new lP(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class Ef extends AD{constructor(t){super(t),this.protocol=tv,this.version=ev,this.name=hl.name,this.events=new ii.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async i=>{try{return await this.engine.authenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||hl.name,this.metadata=(t==null?void 0:t.metadata)||ZA(),this.signConfig=t==null?void 0:t.signConfig;const e=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Aa(yu({level:(t==null?void 0:t.logger)||hl.logger}));this.core=(t==null?void 0:t.core)||new k7(t),this.logger=Wr(e,this.name),this.session=new aP(this.core,this.logger),this.proposal=new oP(this.core,this.logger),this.pendingRequest=new cP(this.core,this.logger),this.engine=new sP(this),this.auth=new fP(this.core,this.logger)}static async init(t){const e=new Ef(t);return await e.initialize(),e}get context(){return Gr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var Fl={exports:{}};(function(r,t){var e=typeof self<"u"?self:$_,i=function(){function a(){this.fetch=!1,this.DOMException=e.DOMException}return a.prototype=e,new a}();(function(a){(function(u){var h={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function p(l){return l&&DataView.prototype.isPrototypeOf(l)}if(h.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(l){return l&&d.indexOf(Object.prototype.toString.call(l))>-1};function _(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(l))throw new TypeError("Invalid character in header field name");return l.toLowerCase()}function S(l){return typeof l!="string"&&(l=String(l)),l}function I(l){var w={next:function(){var D=l.shift();return{done:D===void 0,value:D}}};return h.iterable&&(w[Symbol.iterator]=function(){return w}),w}function M(l){this.map={},l instanceof M?l.forEach(function(w,D){this.append(D,w)},this):Array.isArray(l)?l.forEach(function(w){this.append(w[0],w[1])},this):l&&Object.getOwnPropertyNames(l).forEach(function(w){this.append(w,l[w])},this)}M.prototype.append=function(l,w){l=_(l),w=S(w);var D=this.map[l];this.map[l]=D?D+", "+w:w},M.prototype.delete=function(l){delete this.map[_(l)]},M.prototype.get=function(l){return l=_(l),this.has(l)?this.map[l]:null},M.prototype.has=function(l){return this.map.hasOwnProperty(_(l))},M.prototype.set=function(l,w){this.map[_(l)]=S(w)},M.prototype.forEach=function(l,w){for(var D in this.map)this.map.hasOwnProperty(D)&&l.call(w,this.map[D],D,this)},M.prototype.keys=function(){var l=[];return this.forEach(function(w,D){l.push(D)}),I(l)},M.prototype.values=function(){var l=[];return this.forEach(function(w){l.push(w)}),I(l)},M.prototype.entries=function(){var l=[];return this.forEach(function(w,D){l.push([D,w])}),I(l)},h.iterable&&(M.prototype[Symbol.iterator]=M.prototype.entries);function W(l){if(l.bodyUsed)return Promise.reject(new TypeError("Already read"));l.bodyUsed=!0}function H(l){return new Promise(function(w,D){l.onload=function(){w(l.result)},l.onerror=function(){D(l.error)}})}function tt(l){var w=new FileReader,D=H(w);return w.readAsArrayBuffer(l),D}function V(l){var w=new FileReader,D=H(w);return w.readAsText(l),D}function G(l){for(var w=new Uint8Array(l),D=new Array(w.length),P=0;P<w.length;P++)D[P]=String.fromCharCode(w[P]);return D.join("")}function j(l){if(l.slice)return l.slice(0);var w=new Uint8Array(l.byteLength);return w.set(new Uint8Array(l)),w.buffer}function $(){return this.bodyUsed=!1,this._initBody=function(l){this._bodyInit=l,l?typeof l=="string"?this._bodyText=l:h.blob&&Blob.prototype.isPrototypeOf(l)?this._bodyBlob=l:h.formData&&FormData.prototype.isPrototypeOf(l)?this._bodyFormData=l:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)?this._bodyText=l.toString():h.arrayBuffer&&h.blob&&p(l)?(this._bodyArrayBuffer=j(l.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(l)||b(l))?this._bodyArrayBuffer=j(l):this._bodyText=l=Object.prototype.toString.call(l):this._bodyText="",this.headers.get("content-type")||(typeof l=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var l=W(this);if(l)return l;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?W(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(tt)}),this.text=function(){var l=W(this);if(l)return l;if(this._bodyBlob)return V(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(G(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(nt)}),this.json=function(){return this.text().then(JSON.parse)},this}var z=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(l){var w=l.toUpperCase();return z.indexOf(w)>-1?w:l}function T(l,w){w=w||{};var D=w.body;if(l instanceof T){if(l.bodyUsed)throw new TypeError("Already read");this.url=l.url,this.credentials=l.credentials,w.headers||(this.headers=new M(l.headers)),this.method=l.method,this.mode=l.mode,this.signal=l.signal,!D&&l._bodyInit!=null&&(D=l._bodyInit,l.bodyUsed=!0)}else this.url=String(l);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new M(w.headers)),this.method=y(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(D)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function nt(l){var w=new FormData;return l.trim().split("&").forEach(function(D){if(D){var P=D.split("="),C=P.shift().replace(/\+/g," "),L=P.join("=").replace(/\+/g," ");w.append(decodeURIComponent(C),decodeURIComponent(L))}}),w}function dt(l){var w=new M,D=l.replace(/\r?\n[\t ]+/g," ");return D.split(/\r?\n/).forEach(function(P){var C=P.split(":"),L=C.shift().trim();if(L){var x=C.join(":").trim();w.append(L,x)}}),w}$.call(T.prototype);function lt(l,w){w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in w?w.statusText:"OK",this.headers=new M(w.headers),this.url=w.url||"",this._initBody(l)}$.call(lt.prototype),lt.prototype.clone=function(){return new lt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new M(this.headers),url:this.url})},lt.error=function(){var l=new lt(null,{status:0,statusText:""});return l.type="error",l};var mt=[301,302,303,307,308];lt.redirect=function(l,w){if(mt.indexOf(w)===-1)throw new RangeError("Invalid status code");return new lt(null,{status:w,headers:{location:l}})},u.DOMException=a.DOMException;try{new u.DOMException}catch{u.DOMException=function(w,D){this.message=w,this.name=D;var P=Error(w);this.stack=P.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function f(l,w){return new Promise(function(D,P){var C=new T(l,w);if(C.signal&&C.signal.aborted)return P(new u.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function x(){L.abort()}L.onload=function(){var g={status:L.status,statusText:L.statusText,headers:dt(L.getAllResponseHeaders()||"")};g.url="responseURL"in L?L.responseURL:g.headers.get("X-Request-URL");var N="response"in L?L.response:L.responseText;D(new lt(N,g))},L.onerror=function(){P(new TypeError("Network request failed"))},L.ontimeout=function(){P(new TypeError("Network request failed"))},L.onabort=function(){P(new u.DOMException("Aborted","AbortError"))},L.open(C.method,C.url,!0),C.credentials==="include"?L.withCredentials=!0:C.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&h.blob&&(L.responseType="blob"),C.headers.forEach(function(g,N){L.setRequestHeader(N,g)}),C.signal&&(C.signal.addEventListener("abort",x),L.onreadystatechange=function(){L.readyState===4&&C.signal.removeEventListener("abort",x)}),L.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return f.polyfill=!0,a.fetch||(a.fetch=f,a.Headers=M,a.Request=T,a.Response=lt),u.Headers=M,u.Request=T,u.Response=lt,u.fetch=f,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,r.exports=t})(Fl,Fl.exports);var dP=Fl.exports;const Sg=ho(dP);var pP=Object.defineProperty,gP=Object.defineProperties,mP=Object.getOwnPropertyDescriptors,Ig=Object.getOwnPropertySymbols,vP=Object.prototype.hasOwnProperty,yP=Object.prototype.propertyIsEnumerable,Dg=(r,t,e)=>t in r?pP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,xg=(r,t)=>{for(var e in t||(t={}))vP.call(t,e)&&Dg(r,e,t[e]);if(Ig)for(var e of Ig(t))yP.call(t,e)&&Dg(r,e,t[e]);return r},Mg=(r,t)=>gP(r,mP(t));const wP={Accept:"application/json","Content-Type":"application/json"},bP="POST",Pg={headers:wP,method:bP},Og=10;class Xn{constructor(t,e=!1){if(this.url=t,this.disableProviderPing=e,this.events=new ii.EventEmitter,this.isAvailable=!1,this.registering=!1,!X0(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const e=xn(t),i=await(await Sg(this.url,Mg(xg({},Pg),{body:e}))).json();this.onPayload({data:i})}catch(e){this.onError(t.id,e)}}async register(t=this.url){if(!X0(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((i,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const e=xn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Sg(t,Mg(xg({},Pg),{body:e}))}this.onOpen()}catch(e){const i=this.parseError(e);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const e=typeof t.data=="string"?_a(t.data):t.data;this.events.emit("payload",e)}onError(t,e){const i=this.parseError(e),s=i.message||i.toString(),a=bu(t,s);this.events.emit("payload",a)}parseError(t,e=this.url){return Um(t,e,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Og&&this.events.setMaxListeners(Og)}}var Cg={};const Ng="error",_P="wss://relay.walletconnect.com",EP="wc",AP="universal_provider",Rg=`${EP}@2:${AP}:`,SP="https://rpc.walletconnect.com/v1/",Pn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Cg<"u"?Cg:typeof self<"u"?self:{},zl={exports:{}};(function(r,t){(function(){var e,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",h="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",d=500,b="__lodash_placeholder__",_=1,S=2,I=4,M=1,W=2,H=1,tt=2,V=4,G=8,j=16,$=32,z=64,y=128,T=256,nt=512,dt=30,lt="...",mt=800,f=16,l=1,w=2,D=3,P=1/0,C=9007199254740991,L=17976931348623157e292,x=NaN,g=4294967295,N=g-1,it=g>>>1,ft=[["ary",y],["bind",H],["bindKey",tt],["curry",G],["curryRight",j],["flip",nt],["partial",$],["partialRight",z],["rearg",T]],E="[object Arguments]",Q="[object Array]",B="[object AsyncFunction]",F="[object Boolean]",k="[object Date]",m="[object DOMException]",U="[object Error]",et="[object Function]",at="[object GeneratorFunction]",ct="[object Map]",Mt="[object Number]",Ct="[object Null]",Dt="[object Object]",Ee="[object Promise]",qt="[object Proxy]",Pt="[object RegExp]",Ut="[object Set]",Et="[object String]",At="[object Symbol]",Ht="[object Undefined]",wt="[object WeakMap]",St="[object WeakSet]",Bt="[object ArrayBuffer]",bt="[object DataView]",Ot="[object Float32Array]",Qt="[object Float64Array]",_t="[object Int8Array]",Nt="[object Int16Array]",ie="[object Int32Array]",Tt="[object Uint8Array]",Lt="[object Uint8ClampedArray]",ze="[object Uint16Array]",ce="[object Uint32Array]",fe=/\b__p \+= '';/g,hr=/\b(__p \+=) '' \+/g,ue=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,Sr=/[&<>"']/g,Jt=RegExp(we.source),Kt=RegExp(Sr.source),Ae=/<%-([\s\S]+?)%>/g,Vt=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,Xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xe=/[\\^$.*+?()[\]{}|]/g,Zt=RegExp(xe.source),Gt=/^\s+/,Le=/\s/,Yt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wt=/\{\n\/\* \[wrapped with (.+)\] \*/,_e=/,? & /,te=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Oe=/[()=,{}\[\]\/\s]/,Di=/\\(\\)?/g,Ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Me=/\w*$/,er=/^[-+]0x[0-9a-f]+$/i,si=/^0b[01]+$/i,oi=/^\[object .+?Constructor\]$/,ai=/^0o[0-7]+$/i,ci=/^(?:0|[1-9]\d*)$/,ui=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yr=/($^)/,Zn=/['\n\r\u2028\u2029\\]/g,zi="\\ud800-\\udfff",ts="\\u0300-\\u036f",es="\\ufe20-\\ufe2f",rs="\\u20d0-\\u20ff",xi=ts+es+rs,On="\\u2700-\\u27bf",Cn="a-z\\xdf-\\xf6\\xf8-\\xff",Lr="\\xac\\xb1\\xd7\\xf7",is="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ns="\\u2000-\\u206f",ss=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Da="A-Z\\xc0-\\xd6\\xd8-\\xde",xa="\\ufe0e\\ufe0f",Ma=Lr+is+ns+ss,Nn="['’]",Su="["+zi+"]",Rn="["+Ma+"]",os="["+xi+"]",_o="\\d+",Iu="["+On+"]",Pa="["+Cn+"]",Oa="[^"+zi+Ma+_o+On+Cn+Da+"]",Eo="\\ud83c[\\udffb-\\udfff]",Ca="(?:"+os+"|"+Eo+")",Na="[^"+zi+"]",Ao="(?:\\ud83c[\\udde6-\\uddff]){2}",Cs="[\\ud800-\\udbff][\\udc00-\\udfff]",Mi="["+Da+"]",un="\\u200d",Ra="(?:"+Pa+"|"+Oa+")",Du="(?:"+Mi+"|"+Oa+")",Pi="(?:"+Nn+"(?:d|ll|m|re|s|t|ve))?",Ta="(?:"+Nn+"(?:D|LL|M|RE|S|T|VE))?",La=Ca+"?",Ua="["+xa+"]?",xu="(?:"+un+"(?:"+[Na,Ao,Cs].join("|")+")"+Ua+La+")*",Mu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",So=Ua+La+xu,Pu="(?:"+[Iu,Ao,Cs].join("|")+")"+So,Ns="(?:"+[Na+os+"?",os,Ao,Cs,Su].join("|")+")",Ou=RegExp(Nn,"g"),Io=RegExp(os,"g"),Do=RegExp(Eo+"(?="+Eo+")|"+Ns+So,"g"),Ba=RegExp([Mi+"?"+Pa+"+"+Pi+"(?="+[Rn,Mi,"$"].join("|")+")",Du+"+"+Ta+"(?="+[Rn,Mi+Ra,"$"].join("|")+")",Mi+"?"+Ra+"+"+Pi,Mi+"+"+Ta,hn,Mu,_o,Pu].join("|"),"g"),ja=RegExp("["+un+zi+xi+xa+"]"),qa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,as=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$a=-1,je={};je[Ot]=je[Qt]=je[_t]=je[Nt]=je[ie]=je[Tt]=je[Lt]=je[ze]=je[ce]=!0,je[E]=je[Q]=je[Bt]=je[F]=je[bt]=je[k]=je[U]=je[et]=je[ct]=je[Mt]=je[Dt]=je[Pt]=je[Ut]=je[Et]=je[wt]=!1;var Ue={};Ue[E]=Ue[Q]=Ue[Bt]=Ue[bt]=Ue[F]=Ue[k]=Ue[Ot]=Ue[Qt]=Ue[_t]=Ue[Nt]=Ue[ie]=Ue[ct]=Ue[Mt]=Ue[Dt]=Ue[Pt]=Ue[Ut]=Ue[Et]=Ue[At]=Ue[Tt]=Ue[Lt]=Ue[ze]=Ue[ce]=!0,Ue[U]=Ue[et]=Ue[wt]=!1;var Cu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},J={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ht={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},It=parseFloat,qe=parseInt,ee=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo,ke=typeof self=="object"&&self&&self.Object===Object&&self,ge=ee||ke||Function("return this")(),Qe=t&&!t.nodeType&&t,Se=Qe&&!0&&r&&!r.nodeType&&r,wr=Se&&Se.exports===Qe,Ir=wr&&ee.process,Ne=function(){try{var X=Se&&Se.require&&Se.require("util").types;return X||Ir&&Ir.binding&&Ir.binding("util")}catch{}}(),Dr=Ne&&Ne.isArrayBuffer,xr=Ne&&Ne.isDate,Oi=Ne&&Ne.isMap,hi=Ne&&Ne.isRegExp,ki=Ne&&Ne.isSet,xo=Ne&&Ne.isTypedArray;function or(X,st,rt){switch(rt.length){case 0:return X.call(st);case 1:return X.call(st,rt[0]);case 2:return X.call(st,rt[0],rt[1]);case 3:return X.call(st,rt[0],rt[1],rt[2])}return X.apply(st,rt)}function Rs(X,st,rt,xt){for(var re=-1,Ie=X==null?0:X.length;++re<Ie;){var rr=X[re];st(xt,rr,rt(rr),X)}return xt}function li(X,st){for(var rt=-1,xt=X==null?0:X.length;++rt<xt&&st(X[rt],rt,X)!==!1;);return X}function cv(X,st){for(var rt=X==null?0:X.length;rt--&&st(X[rt],rt,X)!==!1;);return X}function If(X,st){for(var rt=-1,xt=X==null?0:X.length;++rt<xt;)if(!st(X[rt],rt,X))return!1;return!0}function Tn(X,st){for(var rt=-1,xt=X==null?0:X.length,re=0,Ie=[];++rt<xt;){var rr=X[rt];st(rr,rt,X)&&(Ie[re++]=rr)}return Ie}function Fa(X,st){var rt=X==null?0:X.length;return!!rt&&Ts(X,st,0)>-1}function Nu(X,st,rt){for(var xt=-1,re=X==null?0:X.length;++xt<re;)if(rt(st,X[xt]))return!0;return!1}function He(X,st){for(var rt=-1,xt=X==null?0:X.length,re=Array(xt);++rt<xt;)re[rt]=st(X[rt],rt,X);return re}function Ln(X,st){for(var rt=-1,xt=st.length,re=X.length;++rt<xt;)X[re+rt]=st[rt];return X}function Ru(X,st,rt,xt){var re=-1,Ie=X==null?0:X.length;for(xt&&Ie&&(rt=X[++re]);++re<Ie;)rt=st(rt,X[re],re,X);return rt}function uv(X,st,rt,xt){var re=X==null?0:X.length;for(xt&&re&&(rt=X[--re]);re--;)rt=st(rt,X[re],re,X);return rt}function Tu(X,st){for(var rt=-1,xt=X==null?0:X.length;++rt<xt;)if(st(X[rt],rt,X))return!0;return!1}var hv=Lu("length");function lv(X){return X.split("")}function fv(X){return X.match(te)||[]}function Df(X,st,rt){var xt;return rt(X,function(re,Ie,rr){if(st(re,Ie,rr))return xt=Ie,!1}),xt}function za(X,st,rt,xt){for(var re=X.length,Ie=rt+(xt?1:-1);xt?Ie--:++Ie<re;)if(st(X[Ie],Ie,X))return Ie;return-1}function Ts(X,st,rt){return st===st?Sv(X,st,rt):za(X,xf,rt)}function dv(X,st,rt,xt){for(var re=rt-1,Ie=X.length;++re<Ie;)if(xt(X[re],st))return re;return-1}function xf(X){return X!==X}function Mf(X,st){var rt=X==null?0:X.length;return rt?Bu(X,st)/rt:x}function Lu(X){return function(st){return st==null?e:st[X]}}function Uu(X){return function(st){return X==null?e:X[st]}}function Pf(X,st,rt,xt,re){return re(X,function(Ie,rr,$e){rt=xt?(xt=!1,Ie):st(rt,Ie,rr,$e)}),rt}function pv(X,st){var rt=X.length;for(X.sort(st);rt--;)X[rt]=X[rt].value;return X}function Bu(X,st){for(var rt,xt=-1,re=X.length;++xt<re;){var Ie=st(X[xt]);Ie!==e&&(rt=rt===e?Ie:rt+Ie)}return rt}function ju(X,st){for(var rt=-1,xt=Array(X);++rt<X;)xt[rt]=st(rt);return xt}function gv(X,st){return He(st,function(rt){return[rt,X[rt]]})}function Of(X){return X&&X.slice(0,Tf(X)+1).replace(Gt,"")}function Yr(X){return function(st){return X(st)}}function qu(X,st){return He(st,function(rt){return X[rt]})}function Mo(X,st){return X.has(st)}function Cf(X,st){for(var rt=-1,xt=X.length;++rt<xt&&Ts(st,X[rt],0)>-1;);return rt}function Nf(X,st){for(var rt=X.length;rt--&&Ts(st,X[rt],0)>-1;);return rt}function mv(X,st){for(var rt=X.length,xt=0;rt--;)X[rt]===st&&++xt;return xt}var vv=Uu(Cu),yv=Uu(q);function wv(X){return"\\"+ht[X]}function bv(X,st){return X==null?e:X[st]}function Ls(X){return ja.test(X)}function _v(X){return qa.test(X)}function Ev(X){for(var st,rt=[];!(st=X.next()).done;)rt.push(st.value);return rt}function $u(X){var st=-1,rt=Array(X.size);return X.forEach(function(xt,re){rt[++st]=[re,xt]}),rt}function Rf(X,st){return function(rt){return X(st(rt))}}function Un(X,st){for(var rt=-1,xt=X.length,re=0,Ie=[];++rt<xt;){var rr=X[rt];(rr===st||rr===b)&&(X[rt]=b,Ie[re++]=rt)}return Ie}function ka(X){var st=-1,rt=Array(X.size);return X.forEach(function(xt){rt[++st]=xt}),rt}function Av(X){var st=-1,rt=Array(X.size);return X.forEach(function(xt){rt[++st]=[xt,xt]}),rt}function Sv(X,st,rt){for(var xt=rt-1,re=X.length;++xt<re;)if(X[xt]===st)return xt;return-1}function Iv(X,st,rt){for(var xt=rt+1;xt--;)if(X[xt]===st)return xt;return xt}function Us(X){return Ls(X)?xv(X):hv(X)}function Ci(X){return Ls(X)?Mv(X):lv(X)}function Tf(X){for(var st=X.length;st--&&Le.test(X.charAt(st)););return st}var Dv=Uu(J);function xv(X){for(var st=Do.lastIndex=0;Do.test(X);)++st;return st}function Mv(X){return X.match(Do)||[]}function Pv(X){return X.match(Ba)||[]}var Ov=function X(st){st=st==null?ge:Bs.defaults(ge.Object(),st,Bs.pick(ge,as));var rt=st.Array,xt=st.Date,re=st.Error,Ie=st.Function,rr=st.Math,$e=st.Object,Fu=st.RegExp,Cv=st.String,fi=st.TypeError,Ha=rt.prototype,Nv=Ie.prototype,js=$e.prototype,Ka=st["__core-js_shared__"],Va=Nv.toString,Re=js.hasOwnProperty,Rv=0,Lf=function(){var n=/[^.]+$/.exec(Ka&&Ka.keys&&Ka.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Ga=js.toString,Tv=Va.call($e),Lv=ge._,Uv=Fu("^"+Va.call(Re).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wa=wr?st.Buffer:e,Bn=st.Symbol,Ya=st.Uint8Array,Uf=Wa?Wa.allocUnsafe:e,Qa=Rf($e.getPrototypeOf,$e),Bf=$e.create,jf=js.propertyIsEnumerable,Ja=Ha.splice,qf=Bn?Bn.isConcatSpreadable:e,Po=Bn?Bn.iterator:e,cs=Bn?Bn.toStringTag:e,Xa=function(){try{var n=ds($e,"defineProperty");return n({},"",{}),n}catch{}}(),Bv=st.clearTimeout!==ge.clearTimeout&&st.clearTimeout,jv=xt&&xt.now!==ge.Date.now&&xt.now,qv=st.setTimeout!==ge.setTimeout&&st.setTimeout,Za=rr.ceil,tc=rr.floor,zu=$e.getOwnPropertySymbols,$v=Wa?Wa.isBuffer:e,$f=st.isFinite,Fv=Ha.join,zv=Rf($e.keys,$e),ir=rr.max,br=rr.min,kv=xt.now,Hv=st.parseInt,Ff=rr.random,Kv=Ha.reverse,ku=ds(st,"DataView"),Oo=ds(st,"Map"),Hu=ds(st,"Promise"),qs=ds(st,"Set"),Co=ds(st,"WeakMap"),No=ds($e,"create"),ec=Co&&new Co,$s={},Vv=ps(ku),Gv=ps(Oo),Wv=ps(Hu),Yv=ps(qs),Qv=ps(Co),rc=Bn?Bn.prototype:e,Ro=rc?rc.valueOf:e,zf=rc?rc.toString:e;function O(n){if(We(n)&&!ne(n)&&!(n instanceof me)){if(n instanceof di)return n;if(Re.call(n,"__wrapped__"))return kd(n)}return new di(n)}var Fs=function(){function n(){}return function(o){if(!Ge(o))return{};if(Bf)return Bf(o);n.prototype=o;var c=new n;return n.prototype=e,c}}();function ic(){}function di(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=e}O.templateSettings={escape:Ae,evaluate:Vt,interpolate:kt,variable:"",imports:{_:O}},O.prototype=ic.prototype,O.prototype.constructor=O,di.prototype=Fs(ic.prototype),di.prototype.constructor=di;function me(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Jv(){var n=new me(this.__wrapped__);return n.__actions__=Ur(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ur(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ur(this.__views__),n}function Xv(){if(this.__filtered__){var n=new me(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Zv(){var n=this.__wrapped__.value(),o=this.__dir__,c=ne(n),v=o<0,A=c?n.length:0,R=lw(0,A,this.__views__),K=R.start,Y=R.end,Z=Y-K,ot=v?Y:K-1,ut=this.__iteratees__,pt=ut.length,vt=0,Rt=br(Z,this.__takeCount__);if(!c||!v&&A==Z&&Rt==Z)return fd(n,this.__actions__);var Ft=[];t:for(;Z--&&vt<Rt;){ot+=o;for(var he=-1,zt=n[ot];++he<pt;){var de=ut[he],be=de.iteratee,Xr=de.type,Or=be(zt);if(Xr==w)zt=Or;else if(!Or){if(Xr==l)continue t;break t}}Ft[vt++]=zt}return Ft}me.prototype=Fs(ic.prototype),me.prototype.constructor=me;function us(n){var o=-1,c=n==null?0:n.length;for(this.clear();++o<c;){var v=n[o];this.set(v[0],v[1])}}function ty(){this.__data__=No?No(null):{},this.size=0}function ey(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}function ry(n){var o=this.__data__;if(No){var c=o[n];return c===p?e:c}return Re.call(o,n)?o[n]:e}function iy(n){var o=this.__data__;return No?o[n]!==e:Re.call(o,n)}function ny(n,o){var c=this.__data__;return this.size+=this.has(n)?0:1,c[n]=No&&o===e?p:o,this}us.prototype.clear=ty,us.prototype.delete=ey,us.prototype.get=ry,us.prototype.has=iy,us.prototype.set=ny;function ln(n){var o=-1,c=n==null?0:n.length;for(this.clear();++o<c;){var v=n[o];this.set(v[0],v[1])}}function sy(){this.__data__=[],this.size=0}function oy(n){var o=this.__data__,c=nc(o,n);if(c<0)return!1;var v=o.length-1;return c==v?o.pop():Ja.call(o,c,1),--this.size,!0}function ay(n){var o=this.__data__,c=nc(o,n);return c<0?e:o[c][1]}function cy(n){return nc(this.__data__,n)>-1}function uy(n,o){var c=this.__data__,v=nc(c,n);return v<0?(++this.size,c.push([n,o])):c[v][1]=o,this}ln.prototype.clear=sy,ln.prototype.delete=oy,ln.prototype.get=ay,ln.prototype.has=cy,ln.prototype.set=uy;function fn(n){var o=-1,c=n==null?0:n.length;for(this.clear();++o<c;){var v=n[o];this.set(v[0],v[1])}}function hy(){this.size=0,this.__data__={hash:new us,map:new(Oo||ln),string:new us}}function ly(n){var o=mc(this,n).delete(n);return this.size-=o?1:0,o}function fy(n){return mc(this,n).get(n)}function dy(n){return mc(this,n).has(n)}function py(n,o){var c=mc(this,n),v=c.size;return c.set(n,o),this.size+=c.size==v?0:1,this}fn.prototype.clear=hy,fn.prototype.delete=ly,fn.prototype.get=fy,fn.prototype.has=dy,fn.prototype.set=py;function hs(n){var o=-1,c=n==null?0:n.length;for(this.__data__=new fn;++o<c;)this.add(n[o])}function gy(n){return this.__data__.set(n,p),this}function my(n){return this.__data__.has(n)}hs.prototype.add=hs.prototype.push=gy,hs.prototype.has=my;function Ni(n){var o=this.__data__=new ln(n);this.size=o.size}function vy(){this.__data__=new ln,this.size=0}function yy(n){var o=this.__data__,c=o.delete(n);return this.size=o.size,c}function wy(n){return this.__data__.get(n)}function by(n){return this.__data__.has(n)}function _y(n,o){var c=this.__data__;if(c instanceof ln){var v=c.__data__;if(!Oo||v.length<s-1)return v.push([n,o]),this.size=++c.size,this;c=this.__data__=new fn(v)}return c.set(n,o),this.size=c.size,this}Ni.prototype.clear=vy,Ni.prototype.delete=yy,Ni.prototype.get=wy,Ni.prototype.has=by,Ni.prototype.set=_y;function kf(n,o){var c=ne(n),v=!c&&gs(n),A=!c&&!v&&zn(n),R=!c&&!v&&!A&&Ks(n),K=c||v||A||R,Y=K?ju(n.length,Cv):[],Z=Y.length;for(var ot in n)(o||Re.call(n,ot))&&!(K&&(ot=="length"||A&&(ot=="offset"||ot=="parent")||R&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||mn(ot,Z)))&&Y.push(ot);return Y}function Hf(n){var o=n.length;return o?n[eh(0,o-1)]:e}function Ey(n,o){return vc(Ur(n),ls(o,0,n.length))}function Ay(n){return vc(Ur(n))}function Ku(n,o,c){(c!==e&&!Ri(n[o],c)||c===e&&!(o in n))&&dn(n,o,c)}function To(n,o,c){var v=n[o];(!(Re.call(n,o)&&Ri(v,c))||c===e&&!(o in n))&&dn(n,o,c)}function nc(n,o){for(var c=n.length;c--;)if(Ri(n[c][0],o))return c;return-1}function Sy(n,o,c,v){return jn(n,function(A,R,K){o(v,A,c(A),K)}),v}function Kf(n,o){return n&&Ki(o,ar(o),n)}function Iy(n,o){return n&&Ki(o,jr(o),n)}function dn(n,o,c){o=="__proto__"&&Xa?Xa(n,o,{configurable:!0,enumerable:!0,value:c,writable:!0}):n[o]=c}function Vu(n,o){for(var c=-1,v=o.length,A=rt(v),R=n==null;++c<v;)A[c]=R?e:Dh(n,o[c]);return A}function ls(n,o,c){return n===n&&(c!==e&&(n=n<=c?n:c),o!==e&&(n=n>=o?n:o)),n}function pi(n,o,c,v,A,R){var K,Y=o&_,Z=o&S,ot=o&I;if(c&&(K=A?c(n,v,A,R):c(n)),K!==e)return K;if(!Ge(n))return n;var ut=ne(n);if(ut){if(K=dw(n),!Y)return Ur(n,K)}else{var pt=_r(n),vt=pt==et||pt==at;if(zn(n))return gd(n,Y);if(pt==Dt||pt==E||vt&&!A){if(K=Z||vt?{}:Td(n),!Y)return Z?rw(n,Iy(K,n)):ew(n,Kf(K,n))}else{if(!Ue[pt])return A?n:{};K=pw(n,pt,Y)}}R||(R=new Ni);var Rt=R.get(n);if(Rt)return Rt;R.set(n,K),up(n)?n.forEach(function(zt){K.add(pi(zt,o,c,zt,n,R))}):ap(n)&&n.forEach(function(zt,de){K.set(de,pi(zt,o,c,de,n,R))});var Ft=ot?Z?fh:lh:Z?jr:ar,he=ut?e:Ft(n);return li(he||n,function(zt,de){he&&(de=zt,zt=n[de]),To(K,de,pi(zt,o,c,de,n,R))}),K}function Dy(n){var o=ar(n);return function(c){return Vf(c,n,o)}}function Vf(n,o,c){var v=c.length;if(n==null)return!v;for(n=$e(n);v--;){var A=c[v],R=o[A],K=n[A];if(K===e&&!(A in n)||!R(K))return!1}return!0}function Gf(n,o,c){if(typeof n!="function")throw new fi(u);return Fo(function(){n.apply(e,c)},o)}function Lo(n,o,c,v){var A=-1,R=Fa,K=!0,Y=n.length,Z=[],ot=o.length;if(!Y)return Z;c&&(o=He(o,Yr(c))),v?(R=Nu,K=!1):o.length>=s&&(R=Mo,K=!1,o=new hs(o));t:for(;++A<Y;){var ut=n[A],pt=c==null?ut:c(ut);if(ut=v||ut!==0?ut:0,K&&pt===pt){for(var vt=ot;vt--;)if(o[vt]===pt)continue t;Z.push(ut)}else R(o,pt,v)||Z.push(ut)}return Z}var jn=bd(Hi),Wf=bd(Wu,!0);function xy(n,o){var c=!0;return jn(n,function(v,A,R){return c=!!o(v,A,R),c}),c}function sc(n,o,c){for(var v=-1,A=n.length;++v<A;){var R=n[v],K=o(R);if(K!=null&&(Y===e?K===K&&!Jr(K):c(K,Y)))var Y=K,Z=R}return Z}function My(n,o,c,v){var A=n.length;for(c=ae(c),c<0&&(c=-c>A?0:A+c),v=v===e||v>A?A:ae(v),v<0&&(v+=A),v=c>v?0:lp(v);c<v;)n[c++]=o;return n}function Yf(n,o){var c=[];return jn(n,function(v,A,R){o(v,A,R)&&c.push(v)}),c}function lr(n,o,c,v,A){var R=-1,K=n.length;for(c||(c=mw),A||(A=[]);++R<K;){var Y=n[R];o>0&&c(Y)?o>1?lr(Y,o-1,c,v,A):Ln(A,Y):v||(A[A.length]=Y)}return A}var Gu=_d(),Qf=_d(!0);function Hi(n,o){return n&&Gu(n,o,ar)}function Wu(n,o){return n&&Qf(n,o,ar)}function oc(n,o){return Tn(o,function(c){return vn(n[c])})}function fs(n,o){o=$n(o,n);for(var c=0,v=o.length;n!=null&&c<v;)n=n[Vi(o[c++])];return c&&c==v?n:e}function Jf(n,o,c){var v=o(n);return ne(n)?v:Ln(v,c(n))}function Mr(n){return n==null?n===e?Ht:Ct:cs&&cs in $e(n)?hw(n):Aw(n)}function Yu(n,o){return n>o}function Py(n,o){return n!=null&&Re.call(n,o)}function Oy(n,o){return n!=null&&o in $e(n)}function Cy(n,o,c){return n>=br(o,c)&&n<ir(o,c)}function Qu(n,o,c){for(var v=c?Nu:Fa,A=n[0].length,R=n.length,K=R,Y=rt(R),Z=1/0,ot=[];K--;){var ut=n[K];K&&o&&(ut=He(ut,Yr(o))),Z=br(ut.length,Z),Y[K]=!c&&(o||A>=120&&ut.length>=120)?new hs(K&&ut):e}ut=n[0];var pt=-1,vt=Y[0];t:for(;++pt<A&&ot.length<Z;){var Rt=ut[pt],Ft=o?o(Rt):Rt;if(Rt=c||Rt!==0?Rt:0,!(vt?Mo(vt,Ft):v(ot,Ft,c))){for(K=R;--K;){var he=Y[K];if(!(he?Mo(he,Ft):v(n[K],Ft,c)))continue t}vt&&vt.push(Ft),ot.push(Rt)}}return ot}function Ny(n,o,c,v){return Hi(n,function(A,R,K){o(v,c(A),R,K)}),v}function Uo(n,o,c){o=$n(o,n),n=jd(n,o);var v=n==null?n:n[Vi(mi(o))];return v==null?e:or(v,n,c)}function Xf(n){return We(n)&&Mr(n)==E}function Ry(n){return We(n)&&Mr(n)==Bt}function Ty(n){return We(n)&&Mr(n)==k}function Bo(n,o,c,v,A){return n===o?!0:n==null||o==null||!We(n)&&!We(o)?n!==n&&o!==o:Ly(n,o,c,v,Bo,A)}function Ly(n,o,c,v,A,R){var K=ne(n),Y=ne(o),Z=K?Q:_r(n),ot=Y?Q:_r(o);Z=Z==E?Dt:Z,ot=ot==E?Dt:ot;var ut=Z==Dt,pt=ot==Dt,vt=Z==ot;if(vt&&zn(n)){if(!zn(o))return!1;K=!0,ut=!1}if(vt&&!ut)return R||(R=new Ni),K||Ks(n)?Cd(n,o,c,v,A,R):cw(n,o,Z,c,v,A,R);if(!(c&M)){var Rt=ut&&Re.call(n,"__wrapped__"),Ft=pt&&Re.call(o,"__wrapped__");if(Rt||Ft){var he=Rt?n.value():n,zt=Ft?o.value():o;return R||(R=new Ni),A(he,zt,c,v,R)}}return vt?(R||(R=new Ni),uw(n,o,c,v,A,R)):!1}function Uy(n){return We(n)&&_r(n)==ct}function Ju(n,o,c,v){var A=c.length,R=A,K=!v;if(n==null)return!R;for(n=$e(n);A--;){var Y=c[A];if(K&&Y[2]?Y[1]!==n[Y[0]]:!(Y[0]in n))return!1}for(;++A<R;){Y=c[A];var Z=Y[0],ot=n[Z],ut=Y[1];if(K&&Y[2]){if(ot===e&&!(Z in n))return!1}else{var pt=new Ni;if(v)var vt=v(ot,ut,Z,n,o,pt);if(!(vt===e?Bo(ut,ot,M|W,v,pt):vt))return!1}}return!0}function Zf(n){if(!Ge(n)||yw(n))return!1;var o=vn(n)?Uv:oi;return o.test(ps(n))}function By(n){return We(n)&&Mr(n)==Pt}function jy(n){return We(n)&&_r(n)==Ut}function qy(n){return We(n)&&Ac(n.length)&&!!je[Mr(n)]}function td(n){return typeof n=="function"?n:n==null?qr:typeof n=="object"?ne(n)?id(n[0],n[1]):rd(n):Ep(n)}function Xu(n){if(!$o(n))return zv(n);var o=[];for(var c in $e(n))Re.call(n,c)&&c!="constructor"&&o.push(c);return o}function $y(n){if(!Ge(n))return Ew(n);var o=$o(n),c=[];for(var v in n)v=="constructor"&&(o||!Re.call(n,v))||c.push(v);return c}function Zu(n,o){return n<o}function ed(n,o){var c=-1,v=Br(n)?rt(n.length):[];return jn(n,function(A,R,K){v[++c]=o(A,R,K)}),v}function rd(n){var o=ph(n);return o.length==1&&o[0][2]?Ud(o[0][0],o[0][1]):function(c){return c===n||Ju(c,n,o)}}function id(n,o){return mh(n)&&Ld(o)?Ud(Vi(n),o):function(c){var v=Dh(c,n);return v===e&&v===o?xh(c,n):Bo(o,v,M|W)}}function ac(n,o,c,v,A){n!==o&&Gu(o,function(R,K){if(A||(A=new Ni),Ge(R))Fy(n,o,K,c,ac,v,A);else{var Y=v?v(yh(n,K),R,K+"",n,o,A):e;Y===e&&(Y=R),Ku(n,K,Y)}},jr)}function Fy(n,o,c,v,A,R,K){var Y=yh(n,c),Z=yh(o,c),ot=K.get(Z);if(ot){Ku(n,c,ot);return}var ut=R?R(Y,Z,c+"",n,o,K):e,pt=ut===e;if(pt){var vt=ne(Z),Rt=!vt&&zn(Z),Ft=!vt&&!Rt&&Ks(Z);ut=Z,vt||Rt||Ft?ne(Y)?ut=Y:Je(Y)?ut=Ur(Y):Rt?(pt=!1,ut=gd(Z,!0)):Ft?(pt=!1,ut=md(Z,!0)):ut=[]:zo(Z)||gs(Z)?(ut=Y,gs(Y)?ut=fp(Y):(!Ge(Y)||vn(Y))&&(ut=Td(Z))):pt=!1}pt&&(K.set(Z,ut),A(ut,Z,v,R,K),K.delete(Z)),Ku(n,c,ut)}function nd(n,o){var c=n.length;if(c)return o+=o<0?c:0,mn(o,c)?n[o]:e}function sd(n,o,c){o.length?o=He(o,function(R){return ne(R)?function(K){return fs(K,R.length===1?R[0]:R)}:R}):o=[qr];var v=-1;o=He(o,Yr(jt()));var A=ed(n,function(R,K,Y){var Z=He(o,function(ot){return ot(R)});return{criteria:Z,index:++v,value:R}});return pv(A,function(R,K){return tw(R,K,c)})}function zy(n,o){return od(n,o,function(c,v){return xh(n,v)})}function od(n,o,c){for(var v=-1,A=o.length,R={};++v<A;){var K=o[v],Y=fs(n,K);c(Y,K)&&jo(R,$n(K,n),Y)}return R}function ky(n){return function(o){return fs(o,n)}}function th(n,o,c,v){var A=v?dv:Ts,R=-1,K=o.length,Y=n;for(n===o&&(o=Ur(o)),c&&(Y=He(n,Yr(c)));++R<K;)for(var Z=0,ot=o[R],ut=c?c(ot):ot;(Z=A(Y,ut,Z,v))>-1;)Y!==n&&Ja.call(Y,Z,1),Ja.call(n,Z,1);return n}function ad(n,o){for(var c=n?o.length:0,v=c-1;c--;){var A=o[c];if(c==v||A!==R){var R=A;mn(A)?Ja.call(n,A,1):nh(n,A)}}return n}function eh(n,o){return n+tc(Ff()*(o-n+1))}function Hy(n,o,c,v){for(var A=-1,R=ir(Za((o-n)/(c||1)),0),K=rt(R);R--;)K[v?R:++A]=n,n+=c;return K}function rh(n,o){var c="";if(!n||o<1||o>C)return c;do o%2&&(c+=n),o=tc(o/2),o&&(n+=n);while(o);return c}function le(n,o){return wh(Bd(n,o,qr),n+"")}function Ky(n){return Hf(Vs(n))}function Vy(n,o){var c=Vs(n);return vc(c,ls(o,0,c.length))}function jo(n,o,c,v){if(!Ge(n))return n;o=$n(o,n);for(var A=-1,R=o.length,K=R-1,Y=n;Y!=null&&++A<R;){var Z=Vi(o[A]),ot=c;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return n;if(A!=K){var ut=Y[Z];ot=v?v(ut,Z,Y):e,ot===e&&(ot=Ge(ut)?ut:mn(o[A+1])?[]:{})}To(Y,Z,ot),Y=Y[Z]}return n}var cd=ec?function(n,o){return ec.set(n,o),n}:qr,Gy=Xa?function(n,o){return Xa(n,"toString",{configurable:!0,enumerable:!1,value:Ph(o),writable:!0})}:qr;function Wy(n){return vc(Vs(n))}function gi(n,o,c){var v=-1,A=n.length;o<0&&(o=-o>A?0:A+o),c=c>A?A:c,c<0&&(c+=A),A=o>c?0:c-o>>>0,o>>>=0;for(var R=rt(A);++v<A;)R[v]=n[v+o];return R}function Yy(n,o){var c;return jn(n,function(v,A,R){return c=o(v,A,R),!c}),!!c}function cc(n,o,c){var v=0,A=n==null?v:n.length;if(typeof o=="number"&&o===o&&A<=it){for(;v<A;){var R=v+A>>>1,K=n[R];K!==null&&!Jr(K)&&(c?K<=o:K<o)?v=R+1:A=R}return A}return ih(n,o,qr,c)}function ih(n,o,c,v){var A=0,R=n==null?0:n.length;if(R===0)return 0;o=c(o);for(var K=o!==o,Y=o===null,Z=Jr(o),ot=o===e;A<R;){var ut=tc((A+R)/2),pt=c(n[ut]),vt=pt!==e,Rt=pt===null,Ft=pt===pt,he=Jr(pt);if(K)var zt=v||Ft;else ot?zt=Ft&&(v||vt):Y?zt=Ft&&vt&&(v||!Rt):Z?zt=Ft&&vt&&!Rt&&(v||!he):Rt||he?zt=!1:zt=v?pt<=o:pt<o;zt?A=ut+1:R=ut}return br(R,N)}function ud(n,o){for(var c=-1,v=n.length,A=0,R=[];++c<v;){var K=n[c],Y=o?o(K):K;if(!c||!Ri(Y,Z)){var Z=Y;R[A++]=K===0?0:K}}return R}function hd(n){return typeof n=="number"?n:Jr(n)?x:+n}function Qr(n){if(typeof n=="string")return n;if(ne(n))return He(n,Qr)+"";if(Jr(n))return zf?zf.call(n):"";var o=n+"";return o=="0"&&1/n==-P?"-0":o}function qn(n,o,c){var v=-1,A=Fa,R=n.length,K=!0,Y=[],Z=Y;if(c)K=!1,A=Nu;else if(R>=s){var ot=o?null:ow(n);if(ot)return ka(ot);K=!1,A=Mo,Z=new hs}else Z=o?[]:Y;t:for(;++v<R;){var ut=n[v],pt=o?o(ut):ut;if(ut=c||ut!==0?ut:0,K&&pt===pt){for(var vt=Z.length;vt--;)if(Z[vt]===pt)continue t;o&&Z.push(pt),Y.push(ut)}else A(Z,pt,c)||(Z!==Y&&Z.push(pt),Y.push(ut))}return Y}function nh(n,o){return o=$n(o,n),n=jd(n,o),n==null||delete n[Vi(mi(o))]}function ld(n,o,c,v){return jo(n,o,c(fs(n,o)),v)}function uc(n,o,c,v){for(var A=n.length,R=v?A:-1;(v?R--:++R<A)&&o(n[R],R,n););return c?gi(n,v?0:R,v?R+1:A):gi(n,v?R+1:0,v?A:R)}function fd(n,o){var c=n;return c instanceof me&&(c=c.value()),Ru(o,function(v,A){return A.func.apply(A.thisArg,Ln([v],A.args))},c)}function sh(n,o,c){var v=n.length;if(v<2)return v?qn(n[0]):[];for(var A=-1,R=rt(v);++A<v;)for(var K=n[A],Y=-1;++Y<v;)Y!=A&&(R[A]=Lo(R[A]||K,n[Y],o,c));return qn(lr(R,1),o,c)}function dd(n,o,c){for(var v=-1,A=n.length,R=o.length,K={};++v<A;){var Y=v<R?o[v]:e;c(K,n[v],Y)}return K}function oh(n){return Je(n)?n:[]}function ah(n){return typeof n=="function"?n:qr}function $n(n,o){return ne(n)?n:mh(n,o)?[n]:zd(Pe(n))}var Qy=le;function Fn(n,o,c){var v=n.length;return c=c===e?v:c,!o&&c>=v?n:gi(n,o,c)}var pd=Bv||function(n){return ge.clearTimeout(n)};function gd(n,o){if(o)return n.slice();var c=n.length,v=Uf?Uf(c):new n.constructor(c);return n.copy(v),v}function ch(n){var o=new n.constructor(n.byteLength);return new Ya(o).set(new Ya(n)),o}function Jy(n,o){var c=o?ch(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.byteLength)}function Xy(n){var o=new n.constructor(n.source,Me.exec(n));return o.lastIndex=n.lastIndex,o}function Zy(n){return Ro?$e(Ro.call(n)):{}}function md(n,o){var c=o?ch(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.length)}function vd(n,o){if(n!==o){var c=n!==e,v=n===null,A=n===n,R=Jr(n),K=o!==e,Y=o===null,Z=o===o,ot=Jr(o);if(!Y&&!ot&&!R&&n>o||R&&K&&Z&&!Y&&!ot||v&&K&&Z||!c&&Z||!A)return 1;if(!v&&!R&&!ot&&n<o||ot&&c&&A&&!v&&!R||Y&&c&&A||!K&&A||!Z)return-1}return 0}function tw(n,o,c){for(var v=-1,A=n.criteria,R=o.criteria,K=A.length,Y=c.length;++v<K;){var Z=vd(A[v],R[v]);if(Z){if(v>=Y)return Z;var ot=c[v];return Z*(ot=="desc"?-1:1)}}return n.index-o.index}function yd(n,o,c,v){for(var A=-1,R=n.length,K=c.length,Y=-1,Z=o.length,ot=ir(R-K,0),ut=rt(Z+ot),pt=!v;++Y<Z;)ut[Y]=o[Y];for(;++A<K;)(pt||A<R)&&(ut[c[A]]=n[A]);for(;ot--;)ut[Y++]=n[A++];return ut}function wd(n,o,c,v){for(var A=-1,R=n.length,K=-1,Y=c.length,Z=-1,ot=o.length,ut=ir(R-Y,0),pt=rt(ut+ot),vt=!v;++A<ut;)pt[A]=n[A];for(var Rt=A;++Z<ot;)pt[Rt+Z]=o[Z];for(;++K<Y;)(vt||A<R)&&(pt[Rt+c[K]]=n[A++]);return pt}function Ur(n,o){var c=-1,v=n.length;for(o||(o=rt(v));++c<v;)o[c]=n[c];return o}function Ki(n,o,c,v){var A=!c;c||(c={});for(var R=-1,K=o.length;++R<K;){var Y=o[R],Z=v?v(c[Y],n[Y],Y,c,n):e;Z===e&&(Z=n[Y]),A?dn(c,Y,Z):To(c,Y,Z)}return c}function ew(n,o){return Ki(n,gh(n),o)}function rw(n,o){return Ki(n,Nd(n),o)}function hc(n,o){return function(c,v){var A=ne(c)?Rs:Sy,R=o?o():{};return A(c,n,jt(v,2),R)}}function zs(n){return le(function(o,c){var v=-1,A=c.length,R=A>1?c[A-1]:e,K=A>2?c[2]:e;for(R=n.length>3&&typeof R=="function"?(A--,R):e,K&&Pr(c[0],c[1],K)&&(R=A<3?e:R,A=1),o=$e(o);++v<A;){var Y=c[v];Y&&n(o,Y,v,R)}return o})}function bd(n,o){return function(c,v){if(c==null)return c;if(!Br(c))return n(c,v);for(var A=c.length,R=o?A:-1,K=$e(c);(o?R--:++R<A)&&v(K[R],R,K)!==!1;);return c}}function _d(n){return function(o,c,v){for(var A=-1,R=$e(o),K=v(o),Y=K.length;Y--;){var Z=K[n?Y:++A];if(c(R[Z],Z,R)===!1)break}return o}}function iw(n,o,c){var v=o&H,A=qo(n);function R(){var K=this&&this!==ge&&this instanceof R?A:n;return K.apply(v?c:this,arguments)}return R}function Ed(n){return function(o){o=Pe(o);var c=Ls(o)?Ci(o):e,v=c?c[0]:o.charAt(0),A=c?Fn(c,1).join(""):o.slice(1);return v[n]()+A}}function ks(n){return function(o){return Ru(bp(wp(o).replace(Ou,"")),n,"")}}function qo(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var c=Fs(n.prototype),v=n.apply(c,o);return Ge(v)?v:c}}function nw(n,o,c){var v=qo(n);function A(){for(var R=arguments.length,K=rt(R),Y=R,Z=Hs(A);Y--;)K[Y]=arguments[Y];var ot=R<3&&K[0]!==Z&&K[R-1]!==Z?[]:Un(K,Z);if(R-=ot.length,R<c)return xd(n,o,lc,A.placeholder,e,K,ot,e,e,c-R);var ut=this&&this!==ge&&this instanceof A?v:n;return or(ut,this,K)}return A}function Ad(n){return function(o,c,v){var A=$e(o);if(!Br(o)){var R=jt(c,3);o=ar(o),c=function(Y){return R(A[Y],Y,A)}}var K=n(o,c,v);return K>-1?A[R?o[K]:K]:e}}function Sd(n){return gn(function(o){var c=o.length,v=c,A=di.prototype.thru;for(n&&o.reverse();v--;){var R=o[v];if(typeof R!="function")throw new fi(u);if(A&&!K&&gc(R)=="wrapper")var K=new di([],!0)}for(v=K?v:c;++v<c;){R=o[v];var Y=gc(R),Z=Y=="wrapper"?dh(R):e;Z&&vh(Z[0])&&Z[1]==(y|G|$|T)&&!Z[4].length&&Z[9]==1?K=K[gc(Z[0])].apply(K,Z[3]):K=R.length==1&&vh(R)?K[Y]():K.thru(R)}return function(){var ot=arguments,ut=ot[0];if(K&&ot.length==1&&ne(ut))return K.plant(ut).value();for(var pt=0,vt=c?o[pt].apply(this,ot):ut;++pt<c;)vt=o[pt].call(this,vt);return vt}})}function lc(n,o,c,v,A,R,K,Y,Z,ot){var ut=o&y,pt=o&H,vt=o&tt,Rt=o&(G|j),Ft=o&nt,he=vt?e:qo(n);function zt(){for(var de=arguments.length,be=rt(de),Xr=de;Xr--;)be[Xr]=arguments[Xr];if(Rt)var Or=Hs(zt),Zr=mv(be,Or);if(v&&(be=yd(be,v,A,Rt)),R&&(be=wd(be,R,K,Rt)),de-=Zr,Rt&&de<ot){var Xe=Un(be,Or);return xd(n,o,lc,zt.placeholder,c,be,Xe,Y,Z,ot-de)}var Ti=pt?c:this,wn=vt?Ti[n]:n;return de=be.length,Y?be=Sw(be,Y):Ft&&de>1&&be.reverse(),ut&&Z<de&&(be.length=Z),this&&this!==ge&&this instanceof zt&&(wn=he||qo(wn)),wn.apply(Ti,be)}return zt}function Id(n,o){return function(c,v){return Ny(c,n,o(v),{})}}function fc(n,o){return function(c,v){var A;if(c===e&&v===e)return o;if(c!==e&&(A=c),v!==e){if(A===e)return v;typeof c=="string"||typeof v=="string"?(c=Qr(c),v=Qr(v)):(c=hd(c),v=hd(v)),A=n(c,v)}return A}}function uh(n){return gn(function(o){return o=He(o,Yr(jt())),le(function(c){var v=this;return n(o,function(A){return or(A,v,c)})})})}function dc(n,o){o=o===e?" ":Qr(o);var c=o.length;if(c<2)return c?rh(o,n):o;var v=rh(o,Za(n/Us(o)));return Ls(o)?Fn(Ci(v),0,n).join(""):v.slice(0,n)}function sw(n,o,c,v){var A=o&H,R=qo(n);function K(){for(var Y=-1,Z=arguments.length,ot=-1,ut=v.length,pt=rt(ut+Z),vt=this&&this!==ge&&this instanceof K?R:n;++ot<ut;)pt[ot]=v[ot];for(;Z--;)pt[ot++]=arguments[++Y];return or(vt,A?c:this,pt)}return K}function Dd(n){return function(o,c,v){return v&&typeof v!="number"&&Pr(o,c,v)&&(c=v=e),o=yn(o),c===e?(c=o,o=0):c=yn(c),v=v===e?o<c?1:-1:yn(v),Hy(o,c,v,n)}}function pc(n){return function(o,c){return typeof o=="string"&&typeof c=="string"||(o=vi(o),c=vi(c)),n(o,c)}}function xd(n,o,c,v,A,R,K,Y,Z,ot){var ut=o&G,pt=ut?K:e,vt=ut?e:K,Rt=ut?R:e,Ft=ut?e:R;o|=ut?$:z,o&=~(ut?z:$),o&V||(o&=~(H|tt));var he=[n,o,A,Rt,pt,Ft,vt,Y,Z,ot],zt=c.apply(e,he);return vh(n)&&qd(zt,he),zt.placeholder=v,$d(zt,n,o)}function hh(n){var o=rr[n];return function(c,v){if(c=vi(c),v=v==null?0:br(ae(v),292),v&&$f(c)){var A=(Pe(c)+"e").split("e"),R=o(A[0]+"e"+(+A[1]+v));return A=(Pe(R)+"e").split("e"),+(A[0]+"e"+(+A[1]-v))}return o(c)}}var ow=qs&&1/ka(new qs([,-0]))[1]==P?function(n){return new qs(n)}:Nh;function Md(n){return function(o){var c=_r(o);return c==ct?$u(o):c==Ut?Av(o):gv(o,n(o))}}function pn(n,o,c,v,A,R,K,Y){var Z=o&tt;if(!Z&&typeof n!="function")throw new fi(u);var ot=v?v.length:0;if(ot||(o&=~($|z),v=A=e),K=K===e?K:ir(ae(K),0),Y=Y===e?Y:ae(Y),ot-=A?A.length:0,o&z){var ut=v,pt=A;v=A=e}var vt=Z?e:dh(n),Rt=[n,o,c,v,A,ut,pt,R,K,Y];if(vt&&_w(Rt,vt),n=Rt[0],o=Rt[1],c=Rt[2],v=Rt[3],A=Rt[4],Y=Rt[9]=Rt[9]===e?Z?0:n.length:ir(Rt[9]-ot,0),!Y&&o&(G|j)&&(o&=~(G|j)),!o||o==H)var Ft=iw(n,o,c);else o==G||o==j?Ft=nw(n,o,Y):(o==$||o==(H|$))&&!A.length?Ft=sw(n,o,c,v):Ft=lc.apply(e,Rt);var he=vt?cd:qd;return $d(he(Ft,Rt),n,o)}function Pd(n,o,c,v){return n===e||Ri(n,js[c])&&!Re.call(v,c)?o:n}function Od(n,o,c,v,A,R){return Ge(n)&&Ge(o)&&(R.set(o,n),ac(n,o,e,Od,R),R.delete(o)),n}function aw(n){return zo(n)?e:n}function Cd(n,o,c,v,A,R){var K=c&M,Y=n.length,Z=o.length;if(Y!=Z&&!(K&&Z>Y))return!1;var ot=R.get(n),ut=R.get(o);if(ot&&ut)return ot==o&&ut==n;var pt=-1,vt=!0,Rt=c&W?new hs:e;for(R.set(n,o),R.set(o,n);++pt<Y;){var Ft=n[pt],he=o[pt];if(v)var zt=K?v(he,Ft,pt,o,n,R):v(Ft,he,pt,n,o,R);if(zt!==e){if(zt)continue;vt=!1;break}if(Rt){if(!Tu(o,function(de,be){if(!Mo(Rt,be)&&(Ft===de||A(Ft,de,c,v,R)))return Rt.push(be)})){vt=!1;break}}else if(!(Ft===he||A(Ft,he,c,v,R))){vt=!1;break}}return R.delete(n),R.delete(o),vt}function cw(n,o,c,v,A,R,K){switch(c){case bt:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case Bt:return!(n.byteLength!=o.byteLength||!R(new Ya(n),new Ya(o)));case F:case k:case Mt:return Ri(+n,+o);case U:return n.name==o.name&&n.message==o.message;case Pt:case Et:return n==o+"";case ct:var Y=$u;case Ut:var Z=v&M;if(Y||(Y=ka),n.size!=o.size&&!Z)return!1;var ot=K.get(n);if(ot)return ot==o;v|=W,K.set(n,o);var ut=Cd(Y(n),Y(o),v,A,R,K);return K.delete(n),ut;case At:if(Ro)return Ro.call(n)==Ro.call(o)}return!1}function uw(n,o,c,v,A,R){var K=c&M,Y=lh(n),Z=Y.length,ot=lh(o),ut=ot.length;if(Z!=ut&&!K)return!1;for(var pt=Z;pt--;){var vt=Y[pt];if(!(K?vt in o:Re.call(o,vt)))return!1}var Rt=R.get(n),Ft=R.get(o);if(Rt&&Ft)return Rt==o&&Ft==n;var he=!0;R.set(n,o),R.set(o,n);for(var zt=K;++pt<Z;){vt=Y[pt];var de=n[vt],be=o[vt];if(v)var Xr=K?v(be,de,vt,o,n,R):v(de,be,vt,n,o,R);if(!(Xr===e?de===be||A(de,be,c,v,R):Xr)){he=!1;break}zt||(zt=vt=="constructor")}if(he&&!zt){var Or=n.constructor,Zr=o.constructor;Or!=Zr&&"constructor"in n&&"constructor"in o&&!(typeof Or=="function"&&Or instanceof Or&&typeof Zr=="function"&&Zr instanceof Zr)&&(he=!1)}return R.delete(n),R.delete(o),he}function gn(n){return wh(Bd(n,e,Vd),n+"")}function lh(n){return Jf(n,ar,gh)}function fh(n){return Jf(n,jr,Nd)}var dh=ec?function(n){return ec.get(n)}:Nh;function gc(n){for(var o=n.name+"",c=$s[o],v=Re.call($s,o)?c.length:0;v--;){var A=c[v],R=A.func;if(R==null||R==n)return A.name}return o}function Hs(n){var o=Re.call(O,"placeholder")?O:n;return o.placeholder}function jt(){var n=O.iteratee||Oh;return n=n===Oh?td:n,arguments.length?n(arguments[0],arguments[1]):n}function mc(n,o){var c=n.__data__;return vw(o)?c[typeof o=="string"?"string":"hash"]:c.map}function ph(n){for(var o=ar(n),c=o.length;c--;){var v=o[c],A=n[v];o[c]=[v,A,Ld(A)]}return o}function ds(n,o){var c=bv(n,o);return Zf(c)?c:e}function hw(n){var o=Re.call(n,cs),c=n[cs];try{n[cs]=e;var v=!0}catch{}var A=Ga.call(n);return v&&(o?n[cs]=c:delete n[cs]),A}var gh=zu?function(n){return n==null?[]:(n=$e(n),Tn(zu(n),function(o){return jf.call(n,o)}))}:Rh,Nd=zu?function(n){for(var o=[];n;)Ln(o,gh(n)),n=Qa(n);return o}:Rh,_r=Mr;(ku&&_r(new ku(new ArrayBuffer(1)))!=bt||Oo&&_r(new Oo)!=ct||Hu&&_r(Hu.resolve())!=Ee||qs&&_r(new qs)!=Ut||Co&&_r(new Co)!=wt)&&(_r=function(n){var o=Mr(n),c=o==Dt?n.constructor:e,v=c?ps(c):"";if(v)switch(v){case Vv:return bt;case Gv:return ct;case Wv:return Ee;case Yv:return Ut;case Qv:return wt}return o});function lw(n,o,c){for(var v=-1,A=c.length;++v<A;){var R=c[v],K=R.size;switch(R.type){case"drop":n+=K;break;case"dropRight":o-=K;break;case"take":o=br(o,n+K);break;case"takeRight":n=ir(n,o-K);break}}return{start:n,end:o}}function fw(n){var o=n.match(Wt);return o?o[1].split(_e):[]}function Rd(n,o,c){o=$n(o,n);for(var v=-1,A=o.length,R=!1;++v<A;){var K=Vi(o[v]);if(!(R=n!=null&&c(n,K)))break;n=n[K]}return R||++v!=A?R:(A=n==null?0:n.length,!!A&&Ac(A)&&mn(K,A)&&(ne(n)||gs(n)))}function dw(n){var o=n.length,c=new n.constructor(o);return o&&typeof n[0]=="string"&&Re.call(n,"index")&&(c.index=n.index,c.input=n.input),c}function Td(n){return typeof n.constructor=="function"&&!$o(n)?Fs(Qa(n)):{}}function pw(n,o,c){var v=n.constructor;switch(o){case Bt:return ch(n);case F:case k:return new v(+n);case bt:return Jy(n,c);case Ot:case Qt:case _t:case Nt:case ie:case Tt:case Lt:case ze:case ce:return md(n,c);case ct:return new v;case Mt:case Et:return new v(n);case Pt:return Xy(n);case Ut:return new v;case At:return Zy(n)}}function gw(n,o){var c=o.length;if(!c)return n;var v=c-1;return o[v]=(c>1?"& ":"")+o[v],o=o.join(c>2?", ":" "),n.replace(Yt,`{
/* [wrapped with `+o+`] */
`)}function mw(n){return ne(n)||gs(n)||!!(qf&&n&&n[qf])}function mn(n,o){var c=typeof n;return o=o??C,!!o&&(c=="number"||c!="symbol"&&ci.test(n))&&n>-1&&n%1==0&&n<o}function Pr(n,o,c){if(!Ge(c))return!1;var v=typeof o;return(v=="number"?Br(c)&&mn(o,c.length):v=="string"&&o in c)?Ri(c[o],n):!1}function mh(n,o){if(ne(n))return!1;var c=typeof n;return c=="number"||c=="symbol"||c=="boolean"||n==null||Jr(n)?!0:$t.test(n)||!De.test(n)||o!=null&&n in $e(o)}function vw(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}function vh(n){var o=gc(n),c=O[o];if(typeof c!="function"||!(o in me.prototype))return!1;if(n===c)return!0;var v=dh(c);return!!v&&n===v[0]}function yw(n){return!!Lf&&Lf in n}var ww=Ka?vn:Th;function $o(n){var o=n&&n.constructor,c=typeof o=="function"&&o.prototype||js;return n===c}function Ld(n){return n===n&&!Ge(n)}function Ud(n,o){return function(c){return c==null?!1:c[n]===o&&(o!==e||n in $e(c))}}function bw(n){var o=_c(n,function(v){return c.size===d&&c.clear(),v}),c=o.cache;return o}function _w(n,o){var c=n[1],v=o[1],A=c|v,R=A<(H|tt|y),K=v==y&&c==G||v==y&&c==T&&n[7].length<=o[8]||v==(y|T)&&o[7].length<=o[8]&&c==G;if(!(R||K))return n;v&H&&(n[2]=o[2],A|=c&H?0:V);var Y=o[3];if(Y){var Z=n[3];n[3]=Z?yd(Z,Y,o[4]):Y,n[4]=Z?Un(n[3],b):o[4]}return Y=o[5],Y&&(Z=n[5],n[5]=Z?wd(Z,Y,o[6]):Y,n[6]=Z?Un(n[5],b):o[6]),Y=o[7],Y&&(n[7]=Y),v&y&&(n[8]=n[8]==null?o[8]:br(n[8],o[8])),n[9]==null&&(n[9]=o[9]),n[0]=o[0],n[1]=A,n}function Ew(n){var o=[];if(n!=null)for(var c in $e(n))o.push(c);return o}function Aw(n){return Ga.call(n)}function Bd(n,o,c){return o=ir(o===e?n.length-1:o,0),function(){for(var v=arguments,A=-1,R=ir(v.length-o,0),K=rt(R);++A<R;)K[A]=v[o+A];A=-1;for(var Y=rt(o+1);++A<o;)Y[A]=v[A];return Y[o]=c(K),or(n,this,Y)}}function jd(n,o){return o.length<2?n:fs(n,gi(o,0,-1))}function Sw(n,o){for(var c=n.length,v=br(o.length,c),A=Ur(n);v--;){var R=o[v];n[v]=mn(R,c)?A[R]:e}return n}function yh(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}var qd=Fd(cd),Fo=qv||function(n,o){return ge.setTimeout(n,o)},wh=Fd(Gy);function $d(n,o,c){var v=o+"";return wh(n,gw(v,Iw(fw(v),c)))}function Fd(n){var o=0,c=0;return function(){var v=kv(),A=f-(v-c);if(c=v,A>0){if(++o>=mt)return arguments[0]}else o=0;return n.apply(e,arguments)}}function vc(n,o){var c=-1,v=n.length,A=v-1;for(o=o===e?v:o;++c<o;){var R=eh(c,A),K=n[R];n[R]=n[c],n[c]=K}return n.length=o,n}var zd=bw(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(Xt,function(c,v,A,R){o.push(A?R.replace(Di,"$1"):v||c)}),o});function Vi(n){if(typeof n=="string"||Jr(n))return n;var o=n+"";return o=="0"&&1/n==-P?"-0":o}function ps(n){if(n!=null){try{return Va.call(n)}catch{}try{return n+""}catch{}}return""}function Iw(n,o){return li(ft,function(c){var v="_."+c[0];o&c[1]&&!Fa(n,v)&&n.push(v)}),n.sort()}function kd(n){if(n instanceof me)return n.clone();var o=new di(n.__wrapped__,n.__chain__);return o.__actions__=Ur(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}function Dw(n,o,c){(c?Pr(n,o,c):o===e)?o=1:o=ir(ae(o),0);var v=n==null?0:n.length;if(!v||o<1)return[];for(var A=0,R=0,K=rt(Za(v/o));A<v;)K[R++]=gi(n,A,A+=o);return K}function xw(n){for(var o=-1,c=n==null?0:n.length,v=0,A=[];++o<c;){var R=n[o];R&&(A[v++]=R)}return A}function Mw(){var n=arguments.length;if(!n)return[];for(var o=rt(n-1),c=arguments[0],v=n;v--;)o[v-1]=arguments[v];return Ln(ne(c)?Ur(c):[c],lr(o,1))}var Pw=le(function(n,o){return Je(n)?Lo(n,lr(o,1,Je,!0)):[]}),Ow=le(function(n,o){var c=mi(o);return Je(c)&&(c=e),Je(n)?Lo(n,lr(o,1,Je,!0),jt(c,2)):[]}),Cw=le(function(n,o){var c=mi(o);return Je(c)&&(c=e),Je(n)?Lo(n,lr(o,1,Je,!0),e,c):[]});function Nw(n,o,c){var v=n==null?0:n.length;return v?(o=c||o===e?1:ae(o),gi(n,o<0?0:o,v)):[]}function Rw(n,o,c){var v=n==null?0:n.length;return v?(o=c||o===e?1:ae(o),o=v-o,gi(n,0,o<0?0:o)):[]}function Tw(n,o){return n&&n.length?uc(n,jt(o,3),!0,!0):[]}function Lw(n,o){return n&&n.length?uc(n,jt(o,3),!0):[]}function Uw(n,o,c,v){var A=n==null?0:n.length;return A?(c&&typeof c!="number"&&Pr(n,o,c)&&(c=0,v=A),My(n,o,c,v)):[]}function Hd(n,o,c){var v=n==null?0:n.length;if(!v)return-1;var A=c==null?0:ae(c);return A<0&&(A=ir(v+A,0)),za(n,jt(o,3),A)}function Kd(n,o,c){var v=n==null?0:n.length;if(!v)return-1;var A=v-1;return c!==e&&(A=ae(c),A=c<0?ir(v+A,0):br(A,v-1)),za(n,jt(o,3),A,!0)}function Vd(n){var o=n==null?0:n.length;return o?lr(n,1):[]}function Bw(n){var o=n==null?0:n.length;return o?lr(n,P):[]}function jw(n,o){var c=n==null?0:n.length;return c?(o=o===e?1:ae(o),lr(n,o)):[]}function qw(n){for(var o=-1,c=n==null?0:n.length,v={};++o<c;){var A=n[o];v[A[0]]=A[1]}return v}function Gd(n){return n&&n.length?n[0]:e}function $w(n,o,c){var v=n==null?0:n.length;if(!v)return-1;var A=c==null?0:ae(c);return A<0&&(A=ir(v+A,0)),Ts(n,o,A)}function Fw(n){var o=n==null?0:n.length;return o?gi(n,0,-1):[]}var zw=le(function(n){var o=He(n,oh);return o.length&&o[0]===n[0]?Qu(o):[]}),kw=le(function(n){var o=mi(n),c=He(n,oh);return o===mi(c)?o=e:c.pop(),c.length&&c[0]===n[0]?Qu(c,jt(o,2)):[]}),Hw=le(function(n){var o=mi(n),c=He(n,oh);return o=typeof o=="function"?o:e,o&&c.pop(),c.length&&c[0]===n[0]?Qu(c,e,o):[]});function Kw(n,o){return n==null?"":Fv.call(n,o)}function mi(n){var o=n==null?0:n.length;return o?n[o-1]:e}function Vw(n,o,c){var v=n==null?0:n.length;if(!v)return-1;var A=v;return c!==e&&(A=ae(c),A=A<0?ir(v+A,0):br(A,v-1)),o===o?Iv(n,o,A):za(n,xf,A,!0)}function Gw(n,o){return n&&n.length?nd(n,ae(o)):e}var Ww=le(Wd);function Wd(n,o){return n&&n.length&&o&&o.length?th(n,o):n}function Yw(n,o,c){return n&&n.length&&o&&o.length?th(n,o,jt(c,2)):n}function Qw(n,o,c){return n&&n.length&&o&&o.length?th(n,o,e,c):n}var Jw=gn(function(n,o){var c=n==null?0:n.length,v=Vu(n,o);return ad(n,He(o,function(A){return mn(A,c)?+A:A}).sort(vd)),v});function Xw(n,o){var c=[];if(!(n&&n.length))return c;var v=-1,A=[],R=n.length;for(o=jt(o,3);++v<R;){var K=n[v];o(K,v,n)&&(c.push(K),A.push(v))}return ad(n,A),c}function bh(n){return n==null?n:Kv.call(n)}function Zw(n,o,c){var v=n==null?0:n.length;return v?(c&&typeof c!="number"&&Pr(n,o,c)?(o=0,c=v):(o=o==null?0:ae(o),c=c===e?v:ae(c)),gi(n,o,c)):[]}function tb(n,o){return cc(n,o)}function eb(n,o,c){return ih(n,o,jt(c,2))}function rb(n,o){var c=n==null?0:n.length;if(c){var v=cc(n,o);if(v<c&&Ri(n[v],o))return v}return-1}function ib(n,o){return cc(n,o,!0)}function nb(n,o,c){return ih(n,o,jt(c,2),!0)}function sb(n,o){var c=n==null?0:n.length;if(c){var v=cc(n,o,!0)-1;if(Ri(n[v],o))return v}return-1}function ob(n){return n&&n.length?ud(n):[]}function ab(n,o){return n&&n.length?ud(n,jt(o,2)):[]}function cb(n){var o=n==null?0:n.length;return o?gi(n,1,o):[]}function ub(n,o,c){return n&&n.length?(o=c||o===e?1:ae(o),gi(n,0,o<0?0:o)):[]}function hb(n,o,c){var v=n==null?0:n.length;return v?(o=c||o===e?1:ae(o),o=v-o,gi(n,o<0?0:o,v)):[]}function lb(n,o){return n&&n.length?uc(n,jt(o,3),!1,!0):[]}function fb(n,o){return n&&n.length?uc(n,jt(o,3)):[]}var db=le(function(n){return qn(lr(n,1,Je,!0))}),pb=le(function(n){var o=mi(n);return Je(o)&&(o=e),qn(lr(n,1,Je,!0),jt(o,2))}),gb=le(function(n){var o=mi(n);return o=typeof o=="function"?o:e,qn(lr(n,1,Je,!0),e,o)});function mb(n){return n&&n.length?qn(n):[]}function vb(n,o){return n&&n.length?qn(n,jt(o,2)):[]}function yb(n,o){return o=typeof o=="function"?o:e,n&&n.length?qn(n,e,o):[]}function _h(n){if(!(n&&n.length))return[];var o=0;return n=Tn(n,function(c){if(Je(c))return o=ir(c.length,o),!0}),ju(o,function(c){return He(n,Lu(c))})}function Yd(n,o){if(!(n&&n.length))return[];var c=_h(n);return o==null?c:He(c,function(v){return or(o,e,v)})}var wb=le(function(n,o){return Je(n)?Lo(n,o):[]}),bb=le(function(n){return sh(Tn(n,Je))}),_b=le(function(n){var o=mi(n);return Je(o)&&(o=e),sh(Tn(n,Je),jt(o,2))}),Eb=le(function(n){var o=mi(n);return o=typeof o=="function"?o:e,sh(Tn(n,Je),e,o)}),Ab=le(_h);function Sb(n,o){return dd(n||[],o||[],To)}function Ib(n,o){return dd(n||[],o||[],jo)}var Db=le(function(n){var o=n.length,c=o>1?n[o-1]:e;return c=typeof c=="function"?(n.pop(),c):e,Yd(n,c)});function Qd(n){var o=O(n);return o.__chain__=!0,o}function xb(n,o){return o(n),n}function yc(n,o){return o(n)}var Mb=gn(function(n){var o=n.length,c=o?n[0]:0,v=this.__wrapped__,A=function(R){return Vu(R,n)};return o>1||this.__actions__.length||!(v instanceof me)||!mn(c)?this.thru(A):(v=v.slice(c,+c+(o?1:0)),v.__actions__.push({func:yc,args:[A],thisArg:e}),new di(v,this.__chain__).thru(function(R){return o&&!R.length&&R.push(e),R}))});function Pb(){return Qd(this)}function Ob(){return new di(this.value(),this.__chain__)}function Cb(){this.__values__===e&&(this.__values__=hp(this.value()));var n=this.__index__>=this.__values__.length,o=n?e:this.__values__[this.__index__++];return{done:n,value:o}}function Nb(){return this}function Rb(n){for(var o,c=this;c instanceof ic;){var v=kd(c);v.__index__=0,v.__values__=e,o?A.__wrapped__=v:o=v;var A=v;c=c.__wrapped__}return A.__wrapped__=n,o}function Tb(){var n=this.__wrapped__;if(n instanceof me){var o=n;return this.__actions__.length&&(o=new me(this)),o=o.reverse(),o.__actions__.push({func:yc,args:[bh],thisArg:e}),new di(o,this.__chain__)}return this.thru(bh)}function Lb(){return fd(this.__wrapped__,this.__actions__)}var Ub=hc(function(n,o,c){Re.call(n,c)?++n[c]:dn(n,c,1)});function Bb(n,o,c){var v=ne(n)?If:xy;return c&&Pr(n,o,c)&&(o=e),v(n,jt(o,3))}function jb(n,o){var c=ne(n)?Tn:Yf;return c(n,jt(o,3))}var qb=Ad(Hd),$b=Ad(Kd);function Fb(n,o){return lr(wc(n,o),1)}function zb(n,o){return lr(wc(n,o),P)}function kb(n,o,c){return c=c===e?1:ae(c),lr(wc(n,o),c)}function Jd(n,o){var c=ne(n)?li:jn;return c(n,jt(o,3))}function Xd(n,o){var c=ne(n)?cv:Wf;return c(n,jt(o,3))}var Hb=hc(function(n,o,c){Re.call(n,c)?n[c].push(o):dn(n,c,[o])});function Kb(n,o,c,v){n=Br(n)?n:Vs(n),c=c&&!v?ae(c):0;var A=n.length;return c<0&&(c=ir(A+c,0)),Sc(n)?c<=A&&n.indexOf(o,c)>-1:!!A&&Ts(n,o,c)>-1}var Vb=le(function(n,o,c){var v=-1,A=typeof o=="function",R=Br(n)?rt(n.length):[];return jn(n,function(K){R[++v]=A?or(o,K,c):Uo(K,o,c)}),R}),Gb=hc(function(n,o,c){dn(n,c,o)});function wc(n,o){var c=ne(n)?He:ed;return c(n,jt(o,3))}function Wb(n,o,c,v){return n==null?[]:(ne(o)||(o=o==null?[]:[o]),c=v?e:c,ne(c)||(c=c==null?[]:[c]),sd(n,o,c))}var Yb=hc(function(n,o,c){n[c?0:1].push(o)},function(){return[[],[]]});function Qb(n,o,c){var v=ne(n)?Ru:Pf,A=arguments.length<3;return v(n,jt(o,4),c,A,jn)}function Jb(n,o,c){var v=ne(n)?uv:Pf,A=arguments.length<3;return v(n,jt(o,4),c,A,Wf)}function Xb(n,o){var c=ne(n)?Tn:Yf;return c(n,Ec(jt(o,3)))}function Zb(n){var o=ne(n)?Hf:Ky;return o(n)}function t2(n,o,c){(c?Pr(n,o,c):o===e)?o=1:o=ae(o);var v=ne(n)?Ey:Vy;return v(n,o)}function e2(n){var o=ne(n)?Ay:Wy;return o(n)}function r2(n){if(n==null)return 0;if(Br(n))return Sc(n)?Us(n):n.length;var o=_r(n);return o==ct||o==Ut?n.size:Xu(n).length}function i2(n,o,c){var v=ne(n)?Tu:Yy;return c&&Pr(n,o,c)&&(o=e),v(n,jt(o,3))}var n2=le(function(n,o){if(n==null)return[];var c=o.length;return c>1&&Pr(n,o[0],o[1])?o=[]:c>2&&Pr(o[0],o[1],o[2])&&(o=[o[0]]),sd(n,lr(o,1),[])}),bc=jv||function(){return ge.Date.now()};function s2(n,o){if(typeof o!="function")throw new fi(u);return n=ae(n),function(){if(--n<1)return o.apply(this,arguments)}}function Zd(n,o,c){return o=c?e:o,o=n&&o==null?n.length:o,pn(n,y,e,e,e,e,o)}function tp(n,o){var c;if(typeof o!="function")throw new fi(u);return n=ae(n),function(){return--n>0&&(c=o.apply(this,arguments)),n<=1&&(o=e),c}}var Eh=le(function(n,o,c){var v=H;if(c.length){var A=Un(c,Hs(Eh));v|=$}return pn(n,v,o,c,A)}),ep=le(function(n,o,c){var v=H|tt;if(c.length){var A=Un(c,Hs(ep));v|=$}return pn(o,v,n,c,A)});function rp(n,o,c){o=c?e:o;var v=pn(n,G,e,e,e,e,e,o);return v.placeholder=rp.placeholder,v}function ip(n,o,c){o=c?e:o;var v=pn(n,j,e,e,e,e,e,o);return v.placeholder=ip.placeholder,v}function np(n,o,c){var v,A,R,K,Y,Z,ot=0,ut=!1,pt=!1,vt=!0;if(typeof n!="function")throw new fi(u);o=vi(o)||0,Ge(c)&&(ut=!!c.leading,pt="maxWait"in c,R=pt?ir(vi(c.maxWait)||0,o):R,vt="trailing"in c?!!c.trailing:vt);function Rt(Xe){var Ti=v,wn=A;return v=A=e,ot=Xe,K=n.apply(wn,Ti),K}function Ft(Xe){return ot=Xe,Y=Fo(de,o),ut?Rt(Xe):K}function he(Xe){var Ti=Xe-Z,wn=Xe-ot,Ap=o-Ti;return pt?br(Ap,R-wn):Ap}function zt(Xe){var Ti=Xe-Z,wn=Xe-ot;return Z===e||Ti>=o||Ti<0||pt&&wn>=R}function de(){var Xe=bc();if(zt(Xe))return be(Xe);Y=Fo(de,he(Xe))}function be(Xe){return Y=e,vt&&v?Rt(Xe):(v=A=e,K)}function Xr(){Y!==e&&pd(Y),ot=0,v=Z=A=Y=e}function Or(){return Y===e?K:be(bc())}function Zr(){var Xe=bc(),Ti=zt(Xe);if(v=arguments,A=this,Z=Xe,Ti){if(Y===e)return Ft(Z);if(pt)return pd(Y),Y=Fo(de,o),Rt(Z)}return Y===e&&(Y=Fo(de,o)),K}return Zr.cancel=Xr,Zr.flush=Or,Zr}var o2=le(function(n,o){return Gf(n,1,o)}),a2=le(function(n,o,c){return Gf(n,vi(o)||0,c)});function c2(n){return pn(n,nt)}function _c(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new fi(u);var c=function(){var v=arguments,A=o?o.apply(this,v):v[0],R=c.cache;if(R.has(A))return R.get(A);var K=n.apply(this,v);return c.cache=R.set(A,K)||R,K};return c.cache=new(_c.Cache||fn),c}_c.Cache=fn;function Ec(n){if(typeof n!="function")throw new fi(u);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}function u2(n){return tp(2,n)}var h2=Qy(function(n,o){o=o.length==1&&ne(o[0])?He(o[0],Yr(jt())):He(lr(o,1),Yr(jt()));var c=o.length;return le(function(v){for(var A=-1,R=br(v.length,c);++A<R;)v[A]=o[A].call(this,v[A]);return or(n,this,v)})}),Ah=le(function(n,o){var c=Un(o,Hs(Ah));return pn(n,$,e,o,c)}),sp=le(function(n,o){var c=Un(o,Hs(sp));return pn(n,z,e,o,c)}),l2=gn(function(n,o){return pn(n,T,e,e,e,o)});function f2(n,o){if(typeof n!="function")throw new fi(u);return o=o===e?o:ae(o),le(n,o)}function d2(n,o){if(typeof n!="function")throw new fi(u);return o=o==null?0:ir(ae(o),0),le(function(c){var v=c[o],A=Fn(c,0,o);return v&&Ln(A,v),or(n,this,A)})}function p2(n,o,c){var v=!0,A=!0;if(typeof n!="function")throw new fi(u);return Ge(c)&&(v="leading"in c?!!c.leading:v,A="trailing"in c?!!c.trailing:A),np(n,o,{leading:v,maxWait:o,trailing:A})}function g2(n){return Zd(n,1)}function m2(n,o){return Ah(ah(o),n)}function v2(){if(!arguments.length)return[];var n=arguments[0];return ne(n)?n:[n]}function y2(n){return pi(n,I)}function w2(n,o){return o=typeof o=="function"?o:e,pi(n,I,o)}function b2(n){return pi(n,_|I)}function _2(n,o){return o=typeof o=="function"?o:e,pi(n,_|I,o)}function E2(n,o){return o==null||Vf(n,o,ar(o))}function Ri(n,o){return n===o||n!==n&&o!==o}var A2=pc(Yu),S2=pc(function(n,o){return n>=o}),gs=Xf(function(){return arguments}())?Xf:function(n){return We(n)&&Re.call(n,"callee")&&!jf.call(n,"callee")},ne=rt.isArray,I2=Dr?Yr(Dr):Ry;function Br(n){return n!=null&&Ac(n.length)&&!vn(n)}function Je(n){return We(n)&&Br(n)}function D2(n){return n===!0||n===!1||We(n)&&Mr(n)==F}var zn=$v||Th,x2=xr?Yr(xr):Ty;function M2(n){return We(n)&&n.nodeType===1&&!zo(n)}function P2(n){if(n==null)return!0;if(Br(n)&&(ne(n)||typeof n=="string"||typeof n.splice=="function"||zn(n)||Ks(n)||gs(n)))return!n.length;var o=_r(n);if(o==ct||o==Ut)return!n.size;if($o(n))return!Xu(n).length;for(var c in n)if(Re.call(n,c))return!1;return!0}function O2(n,o){return Bo(n,o)}function C2(n,o,c){c=typeof c=="function"?c:e;var v=c?c(n,o):e;return v===e?Bo(n,o,e,c):!!v}function Sh(n){if(!We(n))return!1;var o=Mr(n);return o==U||o==m||typeof n.message=="string"&&typeof n.name=="string"&&!zo(n)}function N2(n){return typeof n=="number"&&$f(n)}function vn(n){if(!Ge(n))return!1;var o=Mr(n);return o==et||o==at||o==B||o==qt}function op(n){return typeof n=="number"&&n==ae(n)}function Ac(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=C}function Ge(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}function We(n){return n!=null&&typeof n=="object"}var ap=Oi?Yr(Oi):Uy;function R2(n,o){return n===o||Ju(n,o,ph(o))}function T2(n,o,c){return c=typeof c=="function"?c:e,Ju(n,o,ph(o),c)}function L2(n){return cp(n)&&n!=+n}function U2(n){if(ww(n))throw new re(a);return Zf(n)}function B2(n){return n===null}function j2(n){return n==null}function cp(n){return typeof n=="number"||We(n)&&Mr(n)==Mt}function zo(n){if(!We(n)||Mr(n)!=Dt)return!1;var o=Qa(n);if(o===null)return!0;var c=Re.call(o,"constructor")&&o.constructor;return typeof c=="function"&&c instanceof c&&Va.call(c)==Tv}var Ih=hi?Yr(hi):By;function q2(n){return op(n)&&n>=-C&&n<=C}var up=ki?Yr(ki):jy;function Sc(n){return typeof n=="string"||!ne(n)&&We(n)&&Mr(n)==Et}function Jr(n){return typeof n=="symbol"||We(n)&&Mr(n)==At}var Ks=xo?Yr(xo):qy;function $2(n){return n===e}function F2(n){return We(n)&&_r(n)==wt}function z2(n){return We(n)&&Mr(n)==St}var k2=pc(Zu),H2=pc(function(n,o){return n<=o});function hp(n){if(!n)return[];if(Br(n))return Sc(n)?Ci(n):Ur(n);if(Po&&n[Po])return Ev(n[Po]());var o=_r(n),c=o==ct?$u:o==Ut?ka:Vs;return c(n)}function yn(n){if(!n)return n===0?n:0;if(n=vi(n),n===P||n===-P){var o=n<0?-1:1;return o*L}return n===n?n:0}function ae(n){var o=yn(n),c=o%1;return o===o?c?o-c:o:0}function lp(n){return n?ls(ae(n),0,g):0}function vi(n){if(typeof n=="number")return n;if(Jr(n))return x;if(Ge(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=Ge(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=Of(n);var c=si.test(n);return c||ai.test(n)?qe(n.slice(2),c?2:8):er.test(n)?x:+n}function fp(n){return Ki(n,jr(n))}function K2(n){return n?ls(ae(n),-C,C):n===0?n:0}function Pe(n){return n==null?"":Qr(n)}var V2=zs(function(n,o){if($o(o)||Br(o)){Ki(o,ar(o),n);return}for(var c in o)Re.call(o,c)&&To(n,c,o[c])}),dp=zs(function(n,o){Ki(o,jr(o),n)}),Ic=zs(function(n,o,c,v){Ki(o,jr(o),n,v)}),G2=zs(function(n,o,c,v){Ki(o,ar(o),n,v)}),W2=gn(Vu);function Y2(n,o){var c=Fs(n);return o==null?c:Kf(c,o)}var Q2=le(function(n,o){n=$e(n);var c=-1,v=o.length,A=v>2?o[2]:e;for(A&&Pr(o[0],o[1],A)&&(v=1);++c<v;)for(var R=o[c],K=jr(R),Y=-1,Z=K.length;++Y<Z;){var ot=K[Y],ut=n[ot];(ut===e||Ri(ut,js[ot])&&!Re.call(n,ot))&&(n[ot]=R[ot])}return n}),J2=le(function(n){return n.push(e,Od),or(pp,e,n)});function X2(n,o){return Df(n,jt(o,3),Hi)}function Z2(n,o){return Df(n,jt(o,3),Wu)}function t3(n,o){return n==null?n:Gu(n,jt(o,3),jr)}function e3(n,o){return n==null?n:Qf(n,jt(o,3),jr)}function r3(n,o){return n&&Hi(n,jt(o,3))}function i3(n,o){return n&&Wu(n,jt(o,3))}function n3(n){return n==null?[]:oc(n,ar(n))}function s3(n){return n==null?[]:oc(n,jr(n))}function Dh(n,o,c){var v=n==null?e:fs(n,o);return v===e?c:v}function o3(n,o){return n!=null&&Rd(n,o,Py)}function xh(n,o){return n!=null&&Rd(n,o,Oy)}var a3=Id(function(n,o,c){o!=null&&typeof o.toString!="function"&&(o=Ga.call(o)),n[o]=c},Ph(qr)),c3=Id(function(n,o,c){o!=null&&typeof o.toString!="function"&&(o=Ga.call(o)),Re.call(n,o)?n[o].push(c):n[o]=[c]},jt),u3=le(Uo);function ar(n){return Br(n)?kf(n):Xu(n)}function jr(n){return Br(n)?kf(n,!0):$y(n)}function h3(n,o){var c={};return o=jt(o,3),Hi(n,function(v,A,R){dn(c,o(v,A,R),v)}),c}function l3(n,o){var c={};return o=jt(o,3),Hi(n,function(v,A,R){dn(c,A,o(v,A,R))}),c}var f3=zs(function(n,o,c){ac(n,o,c)}),pp=zs(function(n,o,c,v){ac(n,o,c,v)}),d3=gn(function(n,o){var c={};if(n==null)return c;var v=!1;o=He(o,function(R){return R=$n(R,n),v||(v=R.length>1),R}),Ki(n,fh(n),c),v&&(c=pi(c,_|S|I,aw));for(var A=o.length;A--;)nh(c,o[A]);return c});function p3(n,o){return gp(n,Ec(jt(o)))}var g3=gn(function(n,o){return n==null?{}:zy(n,o)});function gp(n,o){if(n==null)return{};var c=He(fh(n),function(v){return[v]});return o=jt(o),od(n,c,function(v,A){return o(v,A[0])})}function m3(n,o,c){o=$n(o,n);var v=-1,A=o.length;for(A||(A=1,n=e);++v<A;){var R=n==null?e:n[Vi(o[v])];R===e&&(v=A,R=c),n=vn(R)?R.call(n):R}return n}function v3(n,o,c){return n==null?n:jo(n,o,c)}function y3(n,o,c,v){return v=typeof v=="function"?v:e,n==null?n:jo(n,o,c,v)}var mp=Md(ar),vp=Md(jr);function w3(n,o,c){var v=ne(n),A=v||zn(n)||Ks(n);if(o=jt(o,4),c==null){var R=n&&n.constructor;A?c=v?new R:[]:Ge(n)?c=vn(R)?Fs(Qa(n)):{}:c={}}return(A?li:Hi)(n,function(K,Y,Z){return o(c,K,Y,Z)}),c}function b3(n,o){return n==null?!0:nh(n,o)}function _3(n,o,c){return n==null?n:ld(n,o,ah(c))}function E3(n,o,c,v){return v=typeof v=="function"?v:e,n==null?n:ld(n,o,ah(c),v)}function Vs(n){return n==null?[]:qu(n,ar(n))}function A3(n){return n==null?[]:qu(n,jr(n))}function S3(n,o,c){return c===e&&(c=o,o=e),c!==e&&(c=vi(c),c=c===c?c:0),o!==e&&(o=vi(o),o=o===o?o:0),ls(vi(n),o,c)}function I3(n,o,c){return o=yn(o),c===e?(c=o,o=0):c=yn(c),n=vi(n),Cy(n,o,c)}function D3(n,o,c){if(c&&typeof c!="boolean"&&Pr(n,o,c)&&(o=c=e),c===e&&(typeof o=="boolean"?(c=o,o=e):typeof n=="boolean"&&(c=n,n=e)),n===e&&o===e?(n=0,o=1):(n=yn(n),o===e?(o=n,n=0):o=yn(o)),n>o){var v=n;n=o,o=v}if(c||n%1||o%1){var A=Ff();return br(n+A*(o-n+It("1e-"+((A+"").length-1))),o)}return eh(n,o)}var x3=ks(function(n,o,c){return o=o.toLowerCase(),n+(c?yp(o):o)});function yp(n){return Mh(Pe(n).toLowerCase())}function wp(n){return n=Pe(n),n&&n.replace(ui,vv).replace(Io,"")}function M3(n,o,c){n=Pe(n),o=Qr(o);var v=n.length;c=c===e?v:ls(ae(c),0,v);var A=c;return c-=o.length,c>=0&&n.slice(c,A)==o}function P3(n){return n=Pe(n),n&&Kt.test(n)?n.replace(Sr,yv):n}function O3(n){return n=Pe(n),n&&Zt.test(n)?n.replace(xe,"\\$&"):n}var C3=ks(function(n,o,c){return n+(c?"-":"")+o.toLowerCase()}),N3=ks(function(n,o,c){return n+(c?" ":"")+o.toLowerCase()}),R3=Ed("toLowerCase");function T3(n,o,c){n=Pe(n),o=ae(o);var v=o?Us(n):0;if(!o||v>=o)return n;var A=(o-v)/2;return dc(tc(A),c)+n+dc(Za(A),c)}function L3(n,o,c){n=Pe(n),o=ae(o);var v=o?Us(n):0;return o&&v<o?n+dc(o-v,c):n}function U3(n,o,c){n=Pe(n),o=ae(o);var v=o?Us(n):0;return o&&v<o?dc(o-v,c)+n:n}function B3(n,o,c){return c||o==null?o=0:o&&(o=+o),Hv(Pe(n).replace(Gt,""),o||0)}function j3(n,o,c){return(c?Pr(n,o,c):o===e)?o=1:o=ae(o),rh(Pe(n),o)}function q3(){var n=arguments,o=Pe(n[0]);return n.length<3?o:o.replace(n[1],n[2])}var $3=ks(function(n,o,c){return n+(c?"_":"")+o.toLowerCase()});function F3(n,o,c){return c&&typeof c!="number"&&Pr(n,o,c)&&(o=c=e),c=c===e?g:c>>>0,c?(n=Pe(n),n&&(typeof o=="string"||o!=null&&!Ih(o))&&(o=Qr(o),!o&&Ls(n))?Fn(Ci(n),0,c):n.split(o,c)):[]}var z3=ks(function(n,o,c){return n+(c?" ":"")+Mh(o)});function k3(n,o,c){return n=Pe(n),c=c==null?0:ls(ae(c),0,n.length),o=Qr(o),n.slice(c,c+o.length)==o}function H3(n,o,c){var v=O.templateSettings;c&&Pr(n,o,c)&&(o=e),n=Pe(n),o=Ic({},o,v,Pd);var A=Ic({},o.imports,v.imports,Pd),R=ar(A),K=qu(A,R),Y,Z,ot=0,ut=o.interpolate||yr,pt="__p += '",vt=Fu((o.escape||yr).source+"|"+ut.source+"|"+(ut===kt?Ce:yr).source+"|"+(o.evaluate||yr).source+"|$","g"),Rt="//# sourceURL="+(Re.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$a+"]")+`
`;n.replace(vt,function(zt,de,be,Xr,Or,Zr){return be||(be=Xr),pt+=n.slice(ot,Zr).replace(Zn,wv),de&&(Y=!0,pt+=`' +
__e(`+de+`) +
'`),Or&&(Z=!0,pt+=`';
`+Or+`;
__p += '`),be&&(pt+=`' +
((__t = (`+be+`)) == null ? '' : __t) +
'`),ot=Zr+zt.length,zt}),pt+=`';
`;var Ft=Re.call(o,"variable")&&o.variable;if(!Ft)pt=`with (obj) {
`+pt+`
}
`;else if(Oe.test(Ft))throw new re(h);pt=(Z?pt.replace(fe,""):pt).replace(hr,"$1").replace(ue,"$1;"),pt="function("+(Ft||"obj")+`) {
`+(Ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pt+`return __p
}`;var he=_p(function(){return Ie(R,Rt+"return "+pt).apply(e,K)});if(he.source=pt,Sh(he))throw he;return he}function K3(n){return Pe(n).toLowerCase()}function V3(n){return Pe(n).toUpperCase()}function G3(n,o,c){if(n=Pe(n),n&&(c||o===e))return Of(n);if(!n||!(o=Qr(o)))return n;var v=Ci(n),A=Ci(o),R=Cf(v,A),K=Nf(v,A)+1;return Fn(v,R,K).join("")}function W3(n,o,c){if(n=Pe(n),n&&(c||o===e))return n.slice(0,Tf(n)+1);if(!n||!(o=Qr(o)))return n;var v=Ci(n),A=Nf(v,Ci(o))+1;return Fn(v,0,A).join("")}function Y3(n,o,c){if(n=Pe(n),n&&(c||o===e))return n.replace(Gt,"");if(!n||!(o=Qr(o)))return n;var v=Ci(n),A=Cf(v,Ci(o));return Fn(v,A).join("")}function Q3(n,o){var c=dt,v=lt;if(Ge(o)){var A="separator"in o?o.separator:A;c="length"in o?ae(o.length):c,v="omission"in o?Qr(o.omission):v}n=Pe(n);var R=n.length;if(Ls(n)){var K=Ci(n);R=K.length}if(c>=R)return n;var Y=c-Us(v);if(Y<1)return v;var Z=K?Fn(K,0,Y).join(""):n.slice(0,Y);if(A===e)return Z+v;if(K&&(Y+=Z.length-Y),Ih(A)){if(n.slice(Y).search(A)){var ot,ut=Z;for(A.global||(A=Fu(A.source,Pe(Me.exec(A))+"g")),A.lastIndex=0;ot=A.exec(ut);)var pt=ot.index;Z=Z.slice(0,pt===e?Y:pt)}}else if(n.indexOf(Qr(A),Y)!=Y){var vt=Z.lastIndexOf(A);vt>-1&&(Z=Z.slice(0,vt))}return Z+v}function J3(n){return n=Pe(n),n&&Jt.test(n)?n.replace(we,Dv):n}var X3=ks(function(n,o,c){return n+(c?" ":"")+o.toUpperCase()}),Mh=Ed("toUpperCase");function bp(n,o,c){return n=Pe(n),o=c?e:o,o===e?_v(n)?Pv(n):fv(n):n.match(o)||[]}var _p=le(function(n,o){try{return or(n,e,o)}catch(c){return Sh(c)?c:new re(c)}}),Z3=gn(function(n,o){return li(o,function(c){c=Vi(c),dn(n,c,Eh(n[c],n))}),n});function t_(n){var o=n==null?0:n.length,c=jt();return n=o?He(n,function(v){if(typeof v[1]!="function")throw new fi(u);return[c(v[0]),v[1]]}):[],le(function(v){for(var A=-1;++A<o;){var R=n[A];if(or(R[0],this,v))return or(R[1],this,v)}})}function e_(n){return Dy(pi(n,_))}function Ph(n){return function(){return n}}function r_(n,o){return n==null||n!==n?o:n}var i_=Sd(),n_=Sd(!0);function qr(n){return n}function Oh(n){return td(typeof n=="function"?n:pi(n,_))}function s_(n){return rd(pi(n,_))}function o_(n,o){return id(n,pi(o,_))}var a_=le(function(n,o){return function(c){return Uo(c,n,o)}}),c_=le(function(n,o){return function(c){return Uo(n,c,o)}});function Ch(n,o,c){var v=ar(o),A=oc(o,v);c==null&&!(Ge(o)&&(A.length||!v.length))&&(c=o,o=n,n=this,A=oc(o,ar(o)));var R=!(Ge(c)&&"chain"in c)||!!c.chain,K=vn(n);return li(A,function(Y){var Z=o[Y];n[Y]=Z,K&&(n.prototype[Y]=function(){var ot=this.__chain__;if(R||ot){var ut=n(this.__wrapped__),pt=ut.__actions__=Ur(this.__actions__);return pt.push({func:Z,args:arguments,thisArg:n}),ut.__chain__=ot,ut}return Z.apply(n,Ln([this.value()],arguments))})}),n}function u_(){return ge._===this&&(ge._=Lv),this}function Nh(){}function h_(n){return n=ae(n),le(function(o){return nd(o,n)})}var l_=uh(He),f_=uh(If),d_=uh(Tu);function Ep(n){return mh(n)?Lu(Vi(n)):ky(n)}function p_(n){return function(o){return n==null?e:fs(n,o)}}var g_=Dd(),m_=Dd(!0);function Rh(){return[]}function Th(){return!1}function v_(){return{}}function y_(){return""}function w_(){return!0}function b_(n,o){if(n=ae(n),n<1||n>C)return[];var c=g,v=br(n,g);o=jt(o),n-=g;for(var A=ju(v,o);++c<n;)o(c);return A}function __(n){return ne(n)?He(n,Vi):Jr(n)?[n]:Ur(zd(Pe(n)))}function E_(n){var o=++Rv;return Pe(n)+o}var A_=fc(function(n,o){return n+o},0),S_=hh("ceil"),I_=fc(function(n,o){return n/o},1),D_=hh("floor");function x_(n){return n&&n.length?sc(n,qr,Yu):e}function M_(n,o){return n&&n.length?sc(n,jt(o,2),Yu):e}function P_(n){return Mf(n,qr)}function O_(n,o){return Mf(n,jt(o,2))}function C_(n){return n&&n.length?sc(n,qr,Zu):e}function N_(n,o){return n&&n.length?sc(n,jt(o,2),Zu):e}var R_=fc(function(n,o){return n*o},1),T_=hh("round"),L_=fc(function(n,o){return n-o},0);function U_(n){return n&&n.length?Bu(n,qr):0}function B_(n,o){return n&&n.length?Bu(n,jt(o,2)):0}return O.after=s2,O.ary=Zd,O.assign=V2,O.assignIn=dp,O.assignInWith=Ic,O.assignWith=G2,O.at=W2,O.before=tp,O.bind=Eh,O.bindAll=Z3,O.bindKey=ep,O.castArray=v2,O.chain=Qd,O.chunk=Dw,O.compact=xw,O.concat=Mw,O.cond=t_,O.conforms=e_,O.constant=Ph,O.countBy=Ub,O.create=Y2,O.curry=rp,O.curryRight=ip,O.debounce=np,O.defaults=Q2,O.defaultsDeep=J2,O.defer=o2,O.delay=a2,O.difference=Pw,O.differenceBy=Ow,O.differenceWith=Cw,O.drop=Nw,O.dropRight=Rw,O.dropRightWhile=Tw,O.dropWhile=Lw,O.fill=Uw,O.filter=jb,O.flatMap=Fb,O.flatMapDeep=zb,O.flatMapDepth=kb,O.flatten=Vd,O.flattenDeep=Bw,O.flattenDepth=jw,O.flip=c2,O.flow=i_,O.flowRight=n_,O.fromPairs=qw,O.functions=n3,O.functionsIn=s3,O.groupBy=Hb,O.initial=Fw,O.intersection=zw,O.intersectionBy=kw,O.intersectionWith=Hw,O.invert=a3,O.invertBy=c3,O.invokeMap=Vb,O.iteratee=Oh,O.keyBy=Gb,O.keys=ar,O.keysIn=jr,O.map=wc,O.mapKeys=h3,O.mapValues=l3,O.matches=s_,O.matchesProperty=o_,O.memoize=_c,O.merge=f3,O.mergeWith=pp,O.method=a_,O.methodOf=c_,O.mixin=Ch,O.negate=Ec,O.nthArg=h_,O.omit=d3,O.omitBy=p3,O.once=u2,O.orderBy=Wb,O.over=l_,O.overArgs=h2,O.overEvery=f_,O.overSome=d_,O.partial=Ah,O.partialRight=sp,O.partition=Yb,O.pick=g3,O.pickBy=gp,O.property=Ep,O.propertyOf=p_,O.pull=Ww,O.pullAll=Wd,O.pullAllBy=Yw,O.pullAllWith=Qw,O.pullAt=Jw,O.range=g_,O.rangeRight=m_,O.rearg=l2,O.reject=Xb,O.remove=Xw,O.rest=f2,O.reverse=bh,O.sampleSize=t2,O.set=v3,O.setWith=y3,O.shuffle=e2,O.slice=Zw,O.sortBy=n2,O.sortedUniq=ob,O.sortedUniqBy=ab,O.split=F3,O.spread=d2,O.tail=cb,O.take=ub,O.takeRight=hb,O.takeRightWhile=lb,O.takeWhile=fb,O.tap=xb,O.throttle=p2,O.thru=yc,O.toArray=hp,O.toPairs=mp,O.toPairsIn=vp,O.toPath=__,O.toPlainObject=fp,O.transform=w3,O.unary=g2,O.union=db,O.unionBy=pb,O.unionWith=gb,O.uniq=mb,O.uniqBy=vb,O.uniqWith=yb,O.unset=b3,O.unzip=_h,O.unzipWith=Yd,O.update=_3,O.updateWith=E3,O.values=Vs,O.valuesIn=A3,O.without=wb,O.words=bp,O.wrap=m2,O.xor=bb,O.xorBy=_b,O.xorWith=Eb,O.zip=Ab,O.zipObject=Sb,O.zipObjectDeep=Ib,O.zipWith=Db,O.entries=mp,O.entriesIn=vp,O.extend=dp,O.extendWith=Ic,Ch(O,O),O.add=A_,O.attempt=_p,O.camelCase=x3,O.capitalize=yp,O.ceil=S_,O.clamp=S3,O.clone=y2,O.cloneDeep=b2,O.cloneDeepWith=_2,O.cloneWith=w2,O.conformsTo=E2,O.deburr=wp,O.defaultTo=r_,O.divide=I_,O.endsWith=M3,O.eq=Ri,O.escape=P3,O.escapeRegExp=O3,O.every=Bb,O.find=qb,O.findIndex=Hd,O.findKey=X2,O.findLast=$b,O.findLastIndex=Kd,O.findLastKey=Z2,O.floor=D_,O.forEach=Jd,O.forEachRight=Xd,O.forIn=t3,O.forInRight=e3,O.forOwn=r3,O.forOwnRight=i3,O.get=Dh,O.gt=A2,O.gte=S2,O.has=o3,O.hasIn=xh,O.head=Gd,O.identity=qr,O.includes=Kb,O.indexOf=$w,O.inRange=I3,O.invoke=u3,O.isArguments=gs,O.isArray=ne,O.isArrayBuffer=I2,O.isArrayLike=Br,O.isArrayLikeObject=Je,O.isBoolean=D2,O.isBuffer=zn,O.isDate=x2,O.isElement=M2,O.isEmpty=P2,O.isEqual=O2,O.isEqualWith=C2,O.isError=Sh,O.isFinite=N2,O.isFunction=vn,O.isInteger=op,O.isLength=Ac,O.isMap=ap,O.isMatch=R2,O.isMatchWith=T2,O.isNaN=L2,O.isNative=U2,O.isNil=j2,O.isNull=B2,O.isNumber=cp,O.isObject=Ge,O.isObjectLike=We,O.isPlainObject=zo,O.isRegExp=Ih,O.isSafeInteger=q2,O.isSet=up,O.isString=Sc,O.isSymbol=Jr,O.isTypedArray=Ks,O.isUndefined=$2,O.isWeakMap=F2,O.isWeakSet=z2,O.join=Kw,O.kebabCase=C3,O.last=mi,O.lastIndexOf=Vw,O.lowerCase=N3,O.lowerFirst=R3,O.lt=k2,O.lte=H2,O.max=x_,O.maxBy=M_,O.mean=P_,O.meanBy=O_,O.min=C_,O.minBy=N_,O.stubArray=Rh,O.stubFalse=Th,O.stubObject=v_,O.stubString=y_,O.stubTrue=w_,O.multiply=R_,O.nth=Gw,O.noConflict=u_,O.noop=Nh,O.now=bc,O.pad=T3,O.padEnd=L3,O.padStart=U3,O.parseInt=B3,O.random=D3,O.reduce=Qb,O.reduceRight=Jb,O.repeat=j3,O.replace=q3,O.result=m3,O.round=T_,O.runInContext=X,O.sample=Zb,O.size=r2,O.snakeCase=$3,O.some=i2,O.sortedIndex=tb,O.sortedIndexBy=eb,O.sortedIndexOf=rb,O.sortedLastIndex=ib,O.sortedLastIndexBy=nb,O.sortedLastIndexOf=sb,O.startCase=z3,O.startsWith=k3,O.subtract=L_,O.sum=U_,O.sumBy=B_,O.template=H3,O.times=b_,O.toFinite=yn,O.toInteger=ae,O.toLength=lp,O.toLower=K3,O.toNumber=vi,O.toSafeInteger=K2,O.toString=Pe,O.toUpper=V3,O.trim=G3,O.trimEnd=W3,O.trimStart=Y3,O.truncate=Q3,O.unescape=J3,O.uniqueId=E_,O.upperCase=X3,O.upperFirst=Mh,O.each=Jd,O.eachRight=Xd,O.first=Gd,Ch(O,function(){var n={};return Hi(O,function(o,c){Re.call(O.prototype,c)||(n[c]=o)}),n}(),{chain:!1}),O.VERSION=i,li(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){O[n].placeholder=O}),li(["drop","take"],function(n,o){me.prototype[n]=function(c){c=c===e?1:ir(ae(c),0);var v=this.__filtered__&&!o?new me(this):this.clone();return v.__filtered__?v.__takeCount__=br(c,v.__takeCount__):v.__views__.push({size:br(c,g),type:n+(v.__dir__<0?"Right":"")}),v},me.prototype[n+"Right"]=function(c){return this.reverse()[n](c).reverse()}}),li(["filter","map","takeWhile"],function(n,o){var c=o+1,v=c==l||c==D;me.prototype[n]=function(A){var R=this.clone();return R.__iteratees__.push({iteratee:jt(A,3),type:c}),R.__filtered__=R.__filtered__||v,R}}),li(["head","last"],function(n,o){var c="take"+(o?"Right":"");me.prototype[n]=function(){return this[c](1).value()[0]}}),li(["initial","tail"],function(n,o){var c="drop"+(o?"":"Right");me.prototype[n]=function(){return this.__filtered__?new me(this):this[c](1)}}),me.prototype.compact=function(){return this.filter(qr)},me.prototype.find=function(n){return this.filter(n).head()},me.prototype.findLast=function(n){return this.reverse().find(n)},me.prototype.invokeMap=le(function(n,o){return typeof n=="function"?new me(this):this.map(function(c){return Uo(c,n,o)})}),me.prototype.reject=function(n){return this.filter(Ec(jt(n)))},me.prototype.slice=function(n,o){n=ae(n);var c=this;return c.__filtered__&&(n>0||o<0)?new me(c):(n<0?c=c.takeRight(-n):n&&(c=c.drop(n)),o!==e&&(o=ae(o),c=o<0?c.dropRight(-o):c.take(o-n)),c)},me.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},me.prototype.toArray=function(){return this.take(g)},Hi(me.prototype,function(n,o){var c=/^(?:filter|find|map|reject)|While$/.test(o),v=/^(?:head|last)$/.test(o),A=O[v?"take"+(o=="last"?"Right":""):o],R=v||/^find/.test(o);A&&(O.prototype[o]=function(){var K=this.__wrapped__,Y=v?[1]:arguments,Z=K instanceof me,ot=Y[0],ut=Z||ne(K),pt=function(de){var be=A.apply(O,Ln([de],Y));return v&&vt?be[0]:be};ut&&c&&typeof ot=="function"&&ot.length!=1&&(Z=ut=!1);var vt=this.__chain__,Rt=!!this.__actions__.length,Ft=R&&!vt,he=Z&&!Rt;if(!R&&ut){K=he?K:new me(this);var zt=n.apply(K,Y);return zt.__actions__.push({func:yc,args:[pt],thisArg:e}),new di(zt,vt)}return Ft&&he?n.apply(this,Y):(zt=this.thru(pt),Ft?v?zt.value()[0]:zt.value():zt)})}),li(["pop","push","shift","sort","splice","unshift"],function(n){var o=Ha[n],c=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",v=/^(?:pop|shift)$/.test(n);O.prototype[n]=function(){var A=arguments;if(v&&!this.__chain__){var R=this.value();return o.apply(ne(R)?R:[],A)}return this[c](function(K){return o.apply(ne(K)?K:[],A)})}}),Hi(me.prototype,function(n,o){var c=O[o];if(c){var v=c.name+"";Re.call($s,v)||($s[v]=[]),$s[v].push({name:o,func:c})}}),$s[lc(e,tt).name]=[{name:"wrapper",func:e}],me.prototype.clone=Jv,me.prototype.reverse=Xv,me.prototype.value=Zv,O.prototype.at=Mb,O.prototype.chain=Pb,O.prototype.commit=Ob,O.prototype.next=Cb,O.prototype.plant=Rb,O.prototype.reverse=Tb,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=Lb,O.prototype.first=O.prototype.head,Po&&(O.prototype[Po]=Nb),O},Bs=Ov();Se?((Se.exports=Bs)._=Bs,Qe._=Bs):ge._=Bs}).call(Jo)})(zl,zl.exports);var IP=Object.defineProperty,DP=Object.defineProperties,xP=Object.getOwnPropertyDescriptors,Tg=Object.getOwnPropertySymbols,MP=Object.prototype.hasOwnProperty,PP=Object.prototype.propertyIsEnumerable,Lg=(r,t,e)=>t in r?IP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Tc=(r,t)=>{for(var e in t||(t={}))MP.call(t,e)&&Lg(r,e,t[e]);if(Tg)for(var e of Tg(t))PP.call(t,e)&&Lg(r,e,t[e]);return r},OP=(r,t)=>DP(r,xP(t));function Qn(r,t,e){var i;const s=jc(r);return((i=t.rpcMap)==null?void 0:i[s.reference])||`${SP}?chainId=${s.namespace}:${s.reference}&projectId=${e}`}function Os(r){return r.includes(":")?r.split(":")[1]:r}function nv(r){return r.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function CP(r,t){const e=Object.keys(t.namespaces).filter(s=>s.includes(r));if(!e.length)return[];const i=[];return e.forEach(s=>{const a=t.namespaces[s].accounts;i.push(...a)}),i}function fl(r={},t={}){const e=Ug(r),i=Ug(t);return zl.exports.merge(e,i)}function Ug(r){var t,e,i,s;const a={};if(!la(r))return a;for(const[u,h]of Object.entries(r)){const p=lf(u)?[u]:h.chains,d=h.methods||[],b=h.events||[],_=h.rpcMap||{},S=ta(u);a[S]=OP(Tc(Tc({},a[S]),h),{chains:qc(p,(t=a[S])==null?void 0:t.chains),methods:qc(d,(e=a[S])==null?void 0:e.methods),events:qc(b,(i=a[S])==null?void 0:i.events),rpcMap:Tc(Tc({},_),(s=a[S])==null?void 0:s.rpcMap)})}return a}function NP(r){return r.includes(":")?r.split(":")[2]:r}function Bg(r){const t={};for(const[e,i]of Object.entries(r)){const s=i.methods||[],a=i.events||[],u=i.accounts||[],h=lf(e)?[e]:i.chains?i.chains:nv(i.accounts);t[e]={chains:h,methods:s,events:a,accounts:u}}return t}function dl(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const sv={},Ve=r=>sv[r],pl=(r,t)=>{sv[r]=t};class RP{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Os(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||Qn(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mn(new Xn(i,Ve("disableProviderPing")))}}var TP=Object.defineProperty,LP=Object.defineProperties,UP=Object.getOwnPropertyDescriptors,jg=Object.getOwnPropertySymbols,BP=Object.prototype.hasOwnProperty,jP=Object.prototype.propertyIsEnumerable,qg=(r,t,e)=>t in r?TP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,$g=(r,t)=>{for(var e in t||(t={}))BP.call(t,e)&&qg(r,e,t[e]);if(jg)for(var e of jg(t))jP.call(t,e)&&qg(r,e,t[e]);return r},Fg=(r,t)=>LP(r,UP(t));class qP{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(parseInt(t),e),this.chainId=parseInt(t),this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,e){const i=e||Qn(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mn(new Xn(i,Ve("disableProviderPing")))}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=parseInt(Os(e));t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}async handleSwitchChain(t){var e,i;let s=t.request.params?(e=t.request.params[0])==null?void 0:e.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const a=parseInt(s,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var e,i,s;const a=(i=(e=t.request)==null?void 0:e.params)==null?void 0:i[0];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(t.topic),h=((s=u==null?void 0:u.sessionProperties)==null?void 0:s.capabilities)||{};if(h!=null&&h[a])return h==null?void 0:h[a];const p=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:Fg($g({},u.sessionProperties||{}),{capabilities:Fg($g({},h||{}),{[a]:p})})})}catch(d){console.warn("Failed to update session with capabilities",d)}return p}}class $P{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Os(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||Qn(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mn(new Xn(i,Ve("disableProviderPing")))}}class FP{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Os(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||Qn(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mn(new Xn(i,Ve("disableProviderPing")))}}class zP{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{const i=this.getCardanoRPCUrl(e),s=Os(e);t[s]=this.createHttpProvider(s,i)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}getCardanoRPCUrl(t){const e=this.namespace.rpcMap;if(e)return e[t]}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||this.getCardanoRPCUrl(t);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mn(new Xn(i,Ve("disableProviderPing")))}}class kP{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Os(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||Qn(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mn(new Xn(i,Ve("disableProviderPing")))}}class HP{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Os(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||Qn(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mn(new Xn(i,Ve("disableProviderPing")))}}class KP{constructor(t){this.name="near",this.namespace=t.namespace,this.events=Ve("events"),this.client=Ve("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){const i=e||Qn(`${this.name}:${t}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;t[e]=this.createHttpProvider(e,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||Qn(t,this.namespace);return typeof i>"u"?void 0:new Mn(new Xn(i,Ve("disableProviderPing")))}}var VP=Object.defineProperty,GP=Object.defineProperties,WP=Object.getOwnPropertyDescriptors,zg=Object.getOwnPropertySymbols,YP=Object.prototype.hasOwnProperty,QP=Object.prototype.propertyIsEnumerable,kg=(r,t,e)=>t in r?VP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Lc=(r,t)=>{for(var e in t||(t={}))YP.call(t,e)&&kg(r,e,t[e]);if(zg)for(var e of zg(t))QP.call(t,e)&&kg(r,e,t[e]);return r},gl=(r,t)=>GP(r,WP(t));class Af{constructor(t){this.events=new Yl,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Aa(yu({level:(t==null?void 0:t.logger)||Ng})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const e=new Af(t);return await e.initialize(),e}async request(t,e,i){const[s,a]=this.validateChain(e);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Lc({},t),chainId:`${s}:${a}`,topic:this.session.topic,expiry:i})}sendAsync(t,e,i,s){const a=new Date().getTime();this.request(t,i,s).then(u=>e(null,wu(a,u))).catch(u=>e(u,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Te("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:e,response:i}=await this.client.authenticate(t);e&&(this.uri=e,this.events.emit("display_uri",e));const s=await i();if(this.session=s.session,this.session){const a=Bg(this.session.namespaces);this.namespaces=fl(this.namespaces,a),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}removeListener(t,e){this.events.removeListener(t,e)}off(t,e){this.events.off(t,e)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let e=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(e>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(a=>{this.session=a;const u=Bg(a.namespaces);this.namespaces=fl(this.namespaces,u),this.persist("namespaces",this.namespaces)}).catch(a=>{if(a.message!==iv)throw a;e++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,e){try{if(!this.session)return;const[i,s]=this.validateChain(t);this.getProvider(i).setDefaultChain(s,e)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const e=this.client.pairing.getAll();if(an(e)){for(const i of e)t.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${e.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Ef.init({logger:this.providerOpts.logger||Ng,relayUrl:this.providerOpts.relayUrl||_P,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(e=>ta(e)))];pl("client",this.client),pl("events",this.events),pl("disableProviderPing",this.disableProviderPing),t.forEach(e=>{if(!this.session)return;const i=CP(e,this.session),s=nv(i),a=fl(this.namespaces,this.optionalNamespaces),u=gl(Lc({},a[e]),{accounts:i,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new qP({namespace:u});break;case"solana":this.rpcProviders[e]=new $P({namespace:u});break;case"cosmos":this.rpcProviders[e]=new FP({namespace:u});break;case"polkadot":this.rpcProviders[e]=new RP({namespace:u});break;case"cip34":this.rpcProviders[e]=new zP({namespace:u});break;case"elrond":this.rpcProviders[e]=new kP({namespace:u});break;case"multiversx":this.rpcProviders[e]=new HP({namespace:u});break;case"near":this.rpcProviders[e]=new KP({namespace:u});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:e}=t,{event:i}=e;if(i.name==="accountsChanged"){const s=i.data;s&&an(s)&&this.events.emit("accountsChanged",s.map(NP))}else if(i.name==="chainChanged"){const s=e.chainId,a=e.event.data,u=ta(s),h=dl(s)!==dl(a)?`${u}:${dl(a)}`:s;this.onChainChanged(h)}else this.events.emit(i.name,i.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:e})=>{var i;const{namespaces:s}=e,a=(i=this.client)==null?void 0:i.session.get(t);this.session=gl(Lc({},a),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:e})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",gl(Lc({},Te("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Pn.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var e;this.getProvider(t).updateNamespace((e=this.session)==null?void 0:e.namespaces[t])})}setNamespaces(t){const{namespaces:e,optionalNamespaces:i,sessionProperties:s}=t;e&&Object.keys(e).length&&(this.namespaces=e),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist("namespaces",e),this.persist("optionalNamespaces",i)}validateChain(t){const[e,i]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[e,i];if(e&&!Object.keys(this.namespaces||{}).map(u=>ta(u)).includes(e))throw new Error(`Namespace '${e}' is not configured. Please call connect() first with namespace config.`);if(e&&i)return[e,i];const s=ta(Object.keys(this.namespaces)[0]),a=this.rpcProviders[s].getDefaultChain();return[s,a]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,e=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(t);s&&(e||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,e){this.client.core.storage.setItem(`${Rg}/${t}`,e)}async getFromStore(t){return await this.client.core.storage.getItem(`${Rg}/${t}`)}}const ov=Af,JP="wc",XP="ethereum_provider",ZP=`${JP}@2:${XP}:`,tO="https://rpc.walletconnect.com/v1/",kl=["eth_sendTransaction","personal_sign"],eO=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Hl=["chainChanged","accountsChanged"],rO=["chainChanged","accountsChanged","message","disconnect","connect"];var iO=Object.defineProperty,nO=Object.defineProperties,sO=Object.getOwnPropertyDescriptors,Hg=Object.getOwnPropertySymbols,oO=Object.prototype.hasOwnProperty,aO=Object.prototype.propertyIsEnumerable,Kg=(r,t,e)=>t in r?iO(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Zs=(r,t)=>{for(var e in t||(t={}))oO.call(t,e)&&Kg(r,e,t[e]);if(Hg)for(var e of Hg(t))aO.call(t,e)&&Kg(r,e,t[e]);return r},ml=(r,t)=>nO(r,sO(t));function cu(r){return Number(r[0].split(":")[1])}function Uc(r){return`0x${r.toString(16)}`}function cO(r){const{chains:t,optionalChains:e,methods:i,optionalMethods:s,events:a,optionalEvents:u,rpcMap:h}=r;if(!an(t))throw new Error("Invalid chains");const p={chains:t,methods:i||kl,events:a||Hl,rpcMap:Zs({},t.length?{[cu(t)]:h[cu(t)]}:{})},d=a==null?void 0:a.filter(I=>!Hl.includes(I)),b=i==null?void 0:i.filter(I=>!kl.includes(I));if(!e&&!u&&!s&&!(d!=null&&d.length)&&!(b!=null&&b.length))return{required:t.length?p:void 0};const _=(d==null?void 0:d.length)&&(b==null?void 0:b.length)||!e,S={chains:[...new Set(_?p.chains.concat(e||[]):e)],methods:[...new Set(p.methods.concat(s!=null&&s.length?s:eO))],events:[...new Set(p.events.concat(u!=null&&u.length?u:rO))],rpcMap:h};return{required:t.length?p:void 0,optional:e.length?S:void 0}}class Sf{constructor(){this.events=new ii.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=ZP,this.on=(t,e)=>(this.events.on(t,e),this),this.once=(t,e)=>(this.events.once(t,e),this),this.removeListener=(t,e)=>(this.events.removeListener(t,e),this),this.off=(t,e)=>(this.events.off(t,e),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const e=new Sf;return await e.initialize(t),e}async request(t,e){return await this.signer.request(t,this.formatChainId(this.chainId),e)}sendAsync(t,e,i){this.signer.sendAsync(t,e,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:e,optional:i}=cO(this.rpc);try{const s=await new Promise(async(u,h)=>{var p;this.rpc.showQrModal&&((p=this.modal)==null||p.subscribeModal(d=>{!d.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),h(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(ml(Zs({namespaces:Zs({},e&&{[this.namespace]:e})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(d=>{u(d)}).catch(d=>{h(new Error(d.message))})});if(!s)return;const a=Vp(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:Uc(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async authenticate(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:t==null?void 0:t.chains});try{const e=await new Promise(async(s,a)=>{var u;this.rpc.showQrModal&&((u=this.modal)==null||u.subscribeModal(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(ml(Zs({},t),{chains:this.rpc.chains})).then(h=>{s(h)}).catch(h=>{a(new Error(h.message))})}),i=e.session;if(i){const s=Vp(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:Uc(this.chainId)})}return e}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:e}=t,{event:i}=e;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const e=parseInt(t);this.chainId=e,this.events.emit("chainChanged",Uc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",ml(Zs({},Te("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var e,i;this.rpc.showQrModal&&((e=this.modal)==null||e.closeModal(),(i=this.modal)==null||i.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const e=t.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));e.length&&(this.chainId=e[0],this.events.emit("chainChanged",Uc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const e=this.parseChainId(t);this.chainId=e,this.switchEthereumChain(e)}}parseAccountId(t){const[e,i,s]=t.split(":");return{chainId:`${e}:${i}`,address:s}}setAccounts(t){this.accounts=t.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var e,i;const s=(e=t==null?void 0:t.chains)!=null?e:[],a=(i=t==null?void 0:t.optionalChains)!=null?i:[],u=s.concat(a);if(!u.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const h=s.length?(t==null?void 0:t.methods)||kl:[],p=s.length?(t==null?void 0:t.events)||Hl:[],d=(t==null?void 0:t.optionalMethods)||[],b=(t==null?void 0:t.optionalEvents)||[],_=(t==null?void 0:t.rpcMap)||this.buildRpcMap(u,t.projectId),S=(t==null?void 0:t.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(I=>this.formatChainId(I)),optionalChains:a.map(I=>this.formatChainId(I)),methods:h,events:p,optionalMethods:d,optionalEvents:b,rpcMap:_,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:S,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,e){const i={};return t.forEach(s=>{i[s]=this.getRpcUrl(s,e)}),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?cu(this.rpc.chains):cu(this.rpc.optionalChains),this.signer=await ov.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{const{WalletConnectModal:i}=await Vl(()=>import("./index-CJiwH4tD.js").then(s=>s.i),__vite__mapDeps([0,1]));e=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(Zs({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:e,optionalChains:i,rpcMap:s}=t;e&&an(e)&&(this.rpc.chains=e.map(a=>this.formatChainId(a)),e.forEach(a=>{this.rpc.rpcMap[a]=(s==null?void 0:s[a])||this.getRpcUrl(a)})),i&&an(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(a=>this.formatChainId(a)),i.forEach(a=>{this.rpc.rpcMap[a]=(s==null?void 0:s[a])||this.getRpcUrl(a)}))}getRpcUrl(t,e){var i;return((i=this.rpc.rpcMap)==null?void 0:i[t])||`${tO}?chainId=eip155:${t}&projectId=${e||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),e=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:e==null?void 0:e.accounts),this.setAccounts(e==null?void 0:e.accounts)}catch(t){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(t),await this.disconnect().catch(e=>this.signer.logger.warn(e))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(e=>this.parseAccount(e))}}var uO=class{constructor(r){this.config=r,this.storage=hO()}get prefix(){return this.config.storagePrefix??""}get separator(){return this.config.storageSeparator??":"}set(r,t){if(this.storage)try{const e=this.key(r),i=typeof t!="string"?JSON.stringify(t):t;this.storage.setItem(e,i)}catch(e){console.warn(e)}}get(r,t){if(!this.storage)return null;try{const e=this.key(r),i=this.storage.getItem(e);return i===null?null:t(i)}catch(e){return console.warn(e),null}}remove(r){if(this.storage)try{const t=this.key(r);this.storage.removeItem(t)}catch(t){console.warn(t)}}update(r,t){const e=this.get(r,Gg),i=t(e);return this.set(r,i),i}updateEntity(r,t,e){const s={...this.get(r,Gg)??{},[t]:e};this.set(r,s)}key(r){return[this.prefix,r].join(this.separator)}};function hO(){return Vg(window.localStorage)?window.localStorage:Vg(window.sessionStorage)?window.sessionStorage:null}function Vg(r){if(window!=null&&window.localStorage)try{r.setItem("@__test__@","1");const t=window.localStorage.getItem("@__test__@");r.removeItem("@__test__@");const e=r.getItem("@__test__@");return t==="1"&&e===null}catch{return!1}return!1}function Gg(r){return JSON.parse(r)}var Wg=new uO({storagePrefix:"one-inch",storageSeparator:":"}),lO=r=>[...Array(r)].map(()=>Math.floor(Math.random()*16).toString(16)).join(""),fO=class av extends Sf{constructor(t){super(),this.persistStorePrefix=t}static async initProvider(t,e){const i=new av(e);return await i.initialize(t),i}async connect(t){const e=new MutationObserver(i=>{i.forEach(s=>{s.type!=="attributes"||s.attributeName!=="theme"||this.modal.closeModal()})});try{const i=document.querySelector("html");return e.observe(i,{attributes:!0}),await super.connect(t)}finally{e.disconnect()}}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?Yg(this.rpc.chains):Yg(this.rpc.optionalChains),this.signer=await ov.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions,storage:to.init(this.persistStorePrefix)}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{const{WalletConnectModal:i}=await Vl(async()=>{const{WalletConnectModal:s}=await import("./index-CJiwH4tD.js").then(a=>a.i);return{WalletConnectModal:s}},__vite__mapDeps([0,1]));e=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e({projectId:this.rpc.projectId,...this.rpc.qrModalOptions})}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}async disconnect(){await super.disconnect(),await this.dropPersist()}async dropPersist(){return this.signer.client.core.storage.dropStorage()}},to=class ea extends F_{static async dropStorage(t){await ea.init(t).dropStorage()}static async dropStorageByName(t){await new ea(t).dropStorage()}static getDatabaseName(t){return`wallet-connect-connection-storage-${t}`}static init(t){return new ea(ea.getDatabaseName(t))}constructor(t){super(t),this.version(1).stores({data:["key","value"].join(", ")})}async dropStorage(){this.delete()}async getKeys(){return await this.data.toCollection().keys()}async getEntries(){const t=[];return await this.data.each(e=>{t.push([e.key,e.value])}),t}async getItem(t){return await this.data.get(t).then(e=>e==null?void 0:e.value)}async setItem(t,e){await this.data.put({key:t,value:e})}async removeItem(t){await this.data.delete(t)}};function Yg(r){return Number(r[0].split(":")[1])}var Qg=["accountsChanged"],VO=class Kl{constructor(){this.storage=new Map,this.activeAddress=null,this.eventEmitter=new V_}static async connect(){const t=new Kl;return await t.connect(),t}static async restoreConnect(){const t=new Kl;return await t.restoreConnect(),t}get signer(){var t;return this.activeAddress&&this.storage.has(this.activeAddress)?((t=this.storage.get(this.activeAddress))==null?void 0:t.provider)??null:null}get chainId(){var t;return((t=this.signer)==null?void 0:t.chainId)??j_.eth}async connect(){const t=lO(10);try{const e=await Jg(t),i=this.listenEvents(e),{topic:s,uri:a}=await e.signer.client.core.pairing.create();await e.connect({pairingTopic:s});const u=e.accounts[0];if(this.storage.has(u))return;const h={provider:e,topic:s,uri:a,address:u,persistStorePrefix:t,subscription:i};this.storage.set(u,h),this.activeAddress=u,this.updatePersist(),this.eventEmitter.emit("accountsChanged",this.getAddresses())}catch(e){throw await to.dropStorage(t),e}}async restoreConnect(){const t=this.getPersistData();for(const e of t)try{const i=await Jg(e.persistStorePrefix),s=this.listenEvents(i),a=i.accounts[0];if(a!==e.address){await to.dropStorage(e.persistStorePrefix);continue}this.storage.set(a,{provider:i,uri:e.uri,topic:e.topic,address:e.address,persistStorePrefix:e.persistStorePrefix,subscription:s}),e.isActive&&(this.activeAddress=a)}catch(i){throw await to.dropStorage(e.persistStorePrefix),i}this.eventEmitter.emit("accountsChanged",this.getAddresses())}setActiveAddress(t){t&&(this.activeAddress=t,this.eventEmitter.emit("accountsChanged",this.getAddresses()))}async disconnect(){}isConnected(){return this.activeAddress!==null}async request(t){var i;const e=t.method;return e==="eth_requestAccounts"||e==="eth_accounts"?this.getAddresses():await((i=this.signer)==null?void 0:i.request(t))??null}async enable(){return this.getAddresses()}on(t,e){var i;if(Qg.includes(t)){this.eventEmitter.on(t,e);return}(i=this.signer)==null||i.on(t,e)}removeListener(t,e){var i;if(Qg.includes(t)){this.eventEmitter.removeListener(t,e);return}(i=this.signer)==null||i.removeListener(t,e)}updatePersist(){const t=new Set,e=[];this.storage.forEach(({uri:i,topic:s,address:a,persistStorePrefix:u})=>{t.add(u),e.push({uri:i,topic:s,address:a,persistStorePrefix:u,isActive:!!this.activeAddress&&z_(this.activeAddress,a)})}),this.cleanOldStorage().catch(),Wg.set("wc2_persist",e)}getPersistData(){return Wg.get("wc2_persist",JSON.parse)??[]}getAddresses(){const t=new Set;return this.activeAddress&&t.add(this.activeAddress),this.storage.forEach(e=>{t.add(e.address)}),[...t]}listenEvents(t){let e;return q_(k_(t,"disconnect").pipe(H_(()=>{if(this.storage.forEach(i=>{i.provider===t&&(e=i.address)}),e&&this.storage.has(e)){const i=this.storage.get(e);if(this.storage.delete(e),i.subscription.unsubscribe(),this.activeAddress===e){const s=[...this.storage.values()][0];this.activeAddress=(s==null?void 0:s.address)??null}this.eventEmitter.emit("accountsChanged",this.getAddresses()),this.updatePersist()}}))).subscribe()}async cleanOldStorage(){const t=await indexedDB.databases(),e=new Set;this.storage.forEach(i=>e.add(to.getDatabaseName(i.persistStorePrefix)));for(const i of t)i.name&&i.name.startsWith("wallet-connect")&&!e.has(i.name)&&await to.dropStorageByName(i.name)}};async function Jg(r){const t=await Vl(()=>import("./wallet-connect-init-options-ACAHGVFG-CRe5U6-o.js"),__vite__mapDeps([2,1,3,4,5,6])).then(e=>e.options());return await fO.initProvider(t,r)}export{VO as MultiConnectProvider};
//# sourceMappingURL=multi-connect-provider-SAZA4Z6C-CvQbhbwF.js.map
