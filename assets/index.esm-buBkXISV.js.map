{"version":3,"file":"index.esm-buBkXISV.js","sources":["../../../libs/widgets/select-token/index.esm.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n// libs/widgets/src/lib/select-token/select-token.element.ts\nimport { html as html6, LitElement as LitElement6 } from \"lit\";\nimport { customElement as customElement6, property as property4 } from \"lit/decorators.js\";\nimport { ContextProvider } from \"@lit/context\";\nimport \"@one-inch-community/ui-components/card\";\n\n// libs/widgets/src/lib/select-token/select-token.style.ts\nimport { css } from \"lit\";\nvar selectTokenStyle = css`\n\n    :host {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n    }\n    \n    .empty {\n        pointer-events: none;\n    }\n\n`;\n\n// libs/widgets/src/lib/select-token/context.ts\nimport { createContext } from \"@lit/context\";\nvar selectTokenContext = createContext(Symbol(\"select token context\"));\n\n// libs/widgets/src/lib/select-token/select-token.context.ts\nimport { TokenController } from \"@one-inch-community/sdk\";\nimport {\n  ReplaySubject,\n  Subject,\n  BehaviorSubject,\n  combineLatest,\n  switchMap,\n  mergeMap,\n  tap,\n  startWith,\n  debounceTime,\n  distinctUntilChanged\n} from \"rxjs\";\nvar SelectTokenContext = class {\n  constructor() {\n    this.chainId$ = new ReplaySubject(1);\n    this.connectedWalletAddress$ = new BehaviorSubject(null);\n    this.searchToken$ = new BehaviorSubject(\"\");\n    this.changeFavoriteTokenState$ = new Subject();\n    this.searchInProgress$ = new BehaviorSubject(false);\n    this.favoriteTokens$ = this.chainId$.pipe(\n      mergeMap((chainId) => TokenController.liveQuery(() => TokenController.getAllFavoriteTokenAddresses(chainId)))\n    );\n    this.tokenAddressList$ = combineLatest([\n      this.chainId$,\n      this.connectedWalletAddress$,\n      this.searchToken$.pipe(\n        debounceTime(300),\n        startWith(\"\"),\n        distinctUntilChanged()\n      )\n    ]).pipe(\n      switchMap(([chainId, address, searchToken]) => TokenController.getSortedForViewTokenAddresses(chainId, searchToken, address ?? void 0)),\n      tap(() => this.searchInProgress$.next(false))\n    );\n  }\n  setChainId(chainId) {\n    this.chainId$.next(chainId);\n  }\n  setConnectedWalletAddress(address) {\n    this.connectedWalletAddress$.next(address ?? null);\n  }\n  async setFavoriteTokenState(chainId, address, state3) {\n    await TokenController.setFavoriteState(chainId, address, state3);\n    this.changeFavoriteTokenState$.next([chainId, address]);\n  }\n  setSearchToken(state3) {\n    this.searchInProgress$.next(true);\n    this.searchToken$.next(state3);\n  }\n  getSearchTokenValue() {\n    return this.searchToken$.value;\n  }\n};\n\n// libs/widgets/src/lib/select-token/elements/search-token-input/search-token-input.element.ts\nimport { html, LitElement } from \"lit\";\nimport { customElement, state } from \"lit/decorators.js\";\nimport { classMap } from \"lit/directives/class-map.js\";\n\n// libs/widgets/src/lib/select-token/elements/search-token-input/search-token-input.style.ts\nimport { css as css2 } from \"lit\";\nvar searchTokenInputStyle = css2`\n\n    .search-token-input-container {\n        display: flex;\n        background-color: var(--color-background-bg-secondary);\n        height: 48px;\n        border-radius: 12px;\n        color: var(--color-content-content-tertiary);\n        align-items: center;\n        padding-left: 12px;\n        padding-right: 12px;\n        box-sizing: border-box;\n        gap: 8px;\n        margin-top: 5px;\n        transition: box-shadow .2s;\n    }\n    \n    .search-token-input {\n        border: none;\n        background-color: transparent;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        color: var(--color-content-content-primary);\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 24px;\n    }\n    \n    .loader {\n        width: 24px;\n        min-width: 24px;\n        height: 24px;\n        min-height: 24px;\n        border-radius: 50%;\n        border: 2px solid;\n        border-bottom-color: var(--secondary);\n        border-top-color: var(--secondary);\n        animation: spin 1s linear infinite;\n    }\n\n    @keyframes spin {\n        0% {\n            transform: rotate(0deg);\n        }\n\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n    \n    .search-token-input::placeholder {\n        color: var(--color-content-content-secondary);\n    }\n    \n    @media (hover: hover) {\n        .search-token-input-container:hover {\n            box-shadow: 0 0 0 1px var(--primary);\n        }\n    }\n    \n    .search-token-input-container__focused {\n        box-shadow: 0 0 0 1px var(--primary);\n    }\n\n`;\n\n// libs/widgets/src/lib/select-token/elements/search-token-input/search-token-input.element.ts\nimport \"@one-inch-community/ui-components/icon\";\nimport { sceneContext } from \"@one-inch-community/ui-components/scene\";\nimport { consume } from \"@lit/context\";\nimport { subscribe } from \"@one-inch-community/lit\";\nimport { of, tap as tap2 } from \"rxjs\";\nimport { when } from \"lit/directives/when.js\";\nvar SearchTokenInputElement = class extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isFocused = false;\n    this.searchInProgress = false;\n  }\n  render() {\n    const classes = {\n      \"search-token-input-container\": true,\n      \"search-token-input-container__focused\": this.isFocused\n    };\n    return html`\n      <div class=\"${classMap(classes)}\">\n        <inch-icon icon=\"search24\"></inch-icon>\n        <input\n          id=\"search\"\n          autofocus\n          autocomplete=\"off\"\n          maxlength=\"40\"\n          @input=\"${(event) => this.onChange(event)}\"\n          @focus=\"${() => this.isFocused = true}\"\n          @blur=\"${() => this.isFocused = false}\"\n          placeholder=\"Search token by name or address\"\n          class=\"search-token-input\"\n        >\n        ${when(\n      this.searchInProgress,\n      () => html`<span class=\"loader\"></span>`,\n      () => html``\n    )}\n      </div>\n    `;\n  }\n  async firstUpdated() {\n    subscribe(this, [\n      this.context?.searchInProgress$.pipe(tap2((state3) => this.searchInProgress = state3)) ?? of()\n    ], { requestUpdate: false });\n  }\n  onChange(event) {\n    const value = event.target.value;\n    this.context?.setSearchToken(value);\n  }\n};\nSearchTokenInputElement.tagName = \"inch-search-token-input\";\nSearchTokenInputElement.styles = searchTokenInputStyle;\n__decorateClass([\n  state()\n], SearchTokenInputElement.prototype, \"isFocused\", 2);\n__decorateClass([\n  state()\n], SearchTokenInputElement.prototype, \"searchInProgress\", 2);\n__decorateClass([\n  consume({ context: sceneContext })\n], SearchTokenInputElement.prototype, \"sceneContext\", 2);\n__decorateClass([\n  consume({ context: selectTokenContext })\n], SearchTokenInputElement.prototype, \"context\", 2);\nSearchTokenInputElement = __decorateClass([\n  customElement(SearchTokenInputElement.tagName)\n], SearchTokenInputElement);\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.element.ts\nimport { html as html4, LitElement as LitElement4 } from \"lit\";\nimport { customElement as customElement4, state as state2, property as property3 } from \"lit/decorators.js\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nimport { html as html3, LitElement as LitElement3 } from \"lit\";\nimport { customElement as customElement3, property as property2 } from \"lit/decorators.js\";\nimport { classMap as classMap3 } from \"lit/directives/class-map.js\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.style.ts\nimport { mobileMediaCSS } from \"@one-inch-community/lit\";\nimport { css as css3 } from \"lit\";\nvar tokenListItemStyle = css3`\n    \n    :host {\n        height: 72px;\n        width: 100%;\n        outline: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n    }\n    \n    .item-container {\n        padding: 12px 16px;\n        display: flex;\n        gap: 8px;\n        align-items: center;\n        cursor: pointer;\n        border-radius: 16px;\n        transition: background-color .2s;\n    }\n\n    .name-and-balance {\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n        max-width: 50%;\n    }\n\n    .name-and-balance .name {\n        color: var(--color-content-content-primary);\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 24px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n\n    .name-and-balance .balance {\n        color: var(--color-content-content-secondary);\n        font-size: 14px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 20px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n    }\n    \n    .usd-balance {\n        color: var(--color-content-content-primary);\n        text-align: right;\n        font-size: 16px;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 24px;\n        white-space: nowrap\n    }\n    \n    .usd-balance-and-favorite-start {\n        display: flex;\n        align-items: center;\n        margin-left: auto;\n    }\n    \n    .is-favorite-start {\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    @media (hover: hover) {\n        .item-container:hover {\n            background-color: var(--color-background-bg-secondary);\n        }\n\n        .item-container:not(.is-favorite-token) .usd-balance {\n            transform: translateX(24px);\n            transition: transform .2s;\n        }\n\n        .item-container:not(.is-favorite-token) .is-favorite-start {\n            transform: scale(0);\n            transition: transform .2s;\n        }\n\n        .item-container:hover .is-favorite-start {\n            transform: scale(1);\n        }\n\n        .item-container:hover .usd-balance {\n            transform: translateX(0);\n        }\n    }\n    \n    ${mobileMediaCSS(css3`\n        .item-container {\n            padding: 8px 8px;\n        }\n    `)}\n\n    .item-container:active {\n        background-color: var(--color-background-bg-secondary);\n    }\n\n`;\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nimport { formatUnits, isAddressEqual } from \"viem\";\nimport { Task } from \"@lit/task\";\nimport { formatNumber, TokenController as TokenController2 } from \"@one-inch-community/sdk\";\nimport \"@one-inch-community/widgets/token-icon\";\nimport \"@one-inch-community/ui-components/icon\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-stub-item/token-list-stub-tem.element.ts\nimport { html as html2, LitElement as LitElement2 } from \"lit\";\nimport { customElement as customElement2, property } from \"lit/decorators.js\";\nimport { classMap as classMap2 } from \"lit/directives/class-map.js\";\n\n// libs/widgets/src/lib/select-token/elements/token-list-stub-item/token-list-stub-item.style.ts\nimport { mobileMediaCSS as mobileMediaCSS2 } from \"@one-inch-community/lit\";\nimport { css as css4 } from \"lit\";\nvar tokenListStubItemStyle = css4`\n    \n    :host {\n        height: 72px;\n        width: 100%;\n    }\n    \n    .item-container {\n        padding: 12px 16px;\n        display: flex;\n        gap: 8px;\n        align-items: center;\n        cursor: pointer;\n        border-radius: 16px;\n        transition: background-color .2s;\n    }\n\n    .name-and-balance {\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n        width: 100%;\n    }\n\n    .stub-loader {\n        will-change: filter;\n        animation: stub-loader-animation 3s ease-in-out infinite;\n    }\n\n    .stub-token-icon {\n        min-width: 40px;\n        min-height: 40px;\n        border-radius: 50%;\n        background-color: var(--color-background-bg-secondary);\n    }\n\n    .name-stub {\n        background-color: var(--color-background-bg-secondary);\n        height: 24px;\n        width: 40%;\n        border-radius: 8px;\n    }\n\n    .balance-stub {\n        background-color: var(--color-background-bg-secondary);\n        height: 20px;\n        width: 30%;\n        border-radius: 8px;\n    }\n\n    @keyframes stub-loader-animation {\n        0%, 100% {\n            filter: opacity(1);\n        }\n        50% {\n            filter: opacity(0.5);\n        }\n    }\n\n    ${mobileMediaCSS2(css4`\n        .item-container {\n            padding: 8px 8px;\n        }\n    `)}\n\n`;\n\n// libs/widgets/src/lib/select-token/elements/token-list-stub-item/token-list-stub-tem.element.ts\nvar TokenListStubTemElement = class extends LitElement2 {\n  constructor() {\n    super(...arguments);\n    this.notShowLoader = false;\n  }\n  render() {\n    const classes = {\n      \"item-container\": true,\n      \"stub-loader\": !this.notShowLoader\n    };\n    return html2`\n      <div class=\"${classMap2(classes)}\">\n        <div class=\"stub-token-icon\"></div>\n        <div class=\"name-and-balance\">\n          <span class=\"name-stub\"></span>\n          <span class=\"balance-stub\"></span>\n        </div>\n      </div>\n    `;\n  }\n};\nTokenListStubTemElement.tagName = \"inch-token-list-stub-item\";\nTokenListStubTemElement.styles = tokenListStubItemStyle;\n__decorateClass([\n  property({ type: Boolean, attribute: true })\n], TokenListStubTemElement.prototype, \"notShowLoader\", 2);\nTokenListStubTemElement = __decorateClass([\n  customElement2(TokenListStubTemElement.tagName)\n], TokenListStubTemElement);\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nimport { subscribe as subscribe2 } from \"@one-inch-community/lit\";\nimport { filter, merge, switchMap as switchMap2, timer } from \"rxjs\";\nimport { consume as consume2 } from \"@lit/context\";\n\n// libs/widgets/src/lib/select-token/events.ts\nimport { dispatchEvent } from \"@one-inch-community/lit\";\nfunction emitSelectTokenEvent(ctx, value, event) {\n  dispatchEvent(ctx, \"selectToken\", value, event);\n}\n\n// libs/widgets/src/lib/select-token/elements/token-list-item/token-list-item.element.ts\nvar TokenListItemElement = class extends LitElement3 {\n  constructor() {\n    super(...arguments);\n    this.isDestroy = false;\n    this.preRenderTemplate = null;\n    this.isFavorite = false;\n    this.task = new Task(\n      this,\n      async ([chainId, tokenAddress, walletAddress, fastUpdate]) => {\n        if (fastUpdate) {\n          const result = this.task.value;\n          if (result)\n            return result;\n        }\n        if (!chainId || !tokenAddress)\n          return [];\n        if (this.isDestroy)\n          throw new Error(\"\");\n        const token = await TokenController2.getToken(chainId, tokenAddress);\n        let balance = null;\n        let balanceUsd = null;\n        if (walletAddress && token) {\n          balance = await TokenController2.getTokenBalance(chainId, tokenAddress, walletAddress);\n          const tokenPrice = await TokenController2.getTokenUSDPrice(chainId, tokenAddress);\n          const balanceFormatted = formatUnits(BigInt(balance?.amount ?? 0), token.decimals);\n          balanceUsd = Number(balanceFormatted) * Number(tokenPrice);\n        }\n        return [token, balance, balanceUsd];\n      },\n      () => [this.chainId, this.tokenAddress, this.walletAddress, false]\n    );\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.isDestroy = true;\n  }\n  firstUpdated() {\n    subscribe2(this, merge(\n      timer(12e3),\n      this.getTokenUpdateEmitter()\n    ).pipe(\n      switchMap2(() => this.task.run([this.chainId, this.tokenAddress, this.walletAddress, false]))\n    ), { requestUpdate: false });\n  }\n  render() {\n    return html3`\n      ${this.task.render({\n      complete: ([token, balance, balanceUsd]) => this.getTokenView(token, balance, balanceUsd),\n      pending: () => {\n        if (this.preRenderTemplate)\n          return this.preRenderTemplate;\n        return this.getStub();\n      },\n      error: () => {\n        if (this.preRenderTemplate)\n          return this.preRenderTemplate;\n        return this.getStub();\n      }\n    })}\n    `;\n  }\n  getTokenView(token, balance, balanceUsd) {\n    if (!token) {\n      return this.getStub();\n    }\n    this.isFavorite = token.isFavorite ?? false;\n    let balanceFormat = \"0\";\n    if (balance) {\n      balanceFormat = formatNumber(formatUnits(BigInt(balance.amount), token.decimals), 6);\n    }\n    let balanceUsdFormat = \"$0\";\n    if (balanceUsd) {\n      balanceUsdFormat = \"$\" + formatNumber(balanceUsd.toString(), 2);\n    }\n    let startColor = { border: \"var(--color-border-border-secondary)\", body: \"none\" };\n    if (this.isFavorite) {\n      startColor = { border: \"var(--color-core-orange-warning)\", body: \"var(--color-core-orange-warning)\" };\n    }\n    const classes = {\n      \"item-container\": true,\n      \"is-favorite-token\": token.isFavorite\n    };\n    this.preRenderTemplate = html3`\n      <div class=\"${classMap3(classes)}\" @click=\"${(event) => emitSelectTokenEvent(this, token, event)}\">\n        <inch-token-icon symbol=\"${token.symbol}\" address=\"${token.address}\" chainId=\"${token.chainId}\"\n                         size=\"40\"></inch-token-icon>\n        <div class=\"name-and-balance\">\n          <span class=\"name\">${token.name}</span>\n          <span class=\"balance\">${balanceFormat} ${token.symbol}</span>\n        </div>\n\n        <div class=\"usd-balance-and-favorite-start\">\n          <span class=\"usd-balance\">${balanceUsdFormat}</span>\n          <inch-icon class=\"is-favorite-start\" @click=\"${(event) => this.onMarkFavoriteToken(event, token)}\"\n                     icon=\"startDefault16\" .props=\"${startColor}\"></inch-icon>\n        </div>\n      </div>\n    `;\n    return this.preRenderTemplate;\n  }\n  async onMarkFavoriteToken(event, token) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isFavorite = !token.isFavorite;\n    await this.task.run([this.chainId, this.tokenAddress, this.walletAddress, true]);\n    await this.context?.setFavoriteTokenState(token.chainId, token.address, !token.isFavorite);\n  }\n  getTokenUpdateEmitter() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.changeFavoriteTokenState$.pipe(\n      filter(([chainId, address]) => {\n        const token = this.task?.value?.[0] ?? null;\n        return token && token.chainId === chainId && isAddressEqual(token.address, address);\n      })\n    );\n  }\n  getStub() {\n    return html3`\n      <inch-token-list-stub-item></inch-token-list-stub-item>\n    `;\n  }\n};\nTokenListItemElement.tagName = \"inch-token-list-item\";\nTokenListItemElement.styles = tokenListItemStyle;\n__decorateClass([\n  property2({ type: String, attribute: true })\n], TokenListItemElement.prototype, \"tokenAddress\", 2);\n__decorateClass([\n  property2({ type: String, attribute: true })\n], TokenListItemElement.prototype, \"walletAddress\", 2);\n__decorateClass([\n  property2({ type: Number, attribute: true })\n], TokenListItemElement.prototype, \"chainId\", 2);\n__decorateClass([\n  consume2({ context: selectTokenContext })\n], TokenListItemElement.prototype, \"context\", 2);\nTokenListItemElement = __decorateClass([\n  customElement3(TokenListItemElement.tagName)\n], TokenListItemElement);\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.element.ts\nimport \"@one-inch-community/ui-components/icon\";\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.style.ts\nimport { mobileMediaCSS as mobileMediaCSS3 } from \"@one-inch-community/lit\";\nimport { css as css5 } from \"lit\";\nvar tokenListStyle = css5`\n\n    :host {\n        height: 50vh;\n        width: 100%;\n        //position: relative;\n    }\n    \n    .overlay-message {\n        position: absolute;\n        top: 35%;\n        left: 0;\n        width: 100%;\n        text-align: center;\n        color: var(--color-content-content-primary);\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    \n    ${mobileMediaCSS3(css5`\n        :host {\n            height: 100%;\n            width: 100%;\n        }\n    `)}\n`;\n\n// libs/widgets/src/lib/select-token/elements/token-list/token-list.element.ts\nimport { consume as consume3 } from \"@lit/context\";\nimport { ChainId } from \"@one-inch-community/models\";\nimport { defer, shareReplay, tap as tap3 } from \"rxjs\";\nimport { observe, subscribe as subscribe3 } from \"@one-inch-community/lit\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\nimport { sceneContext as sceneContext2 } from \"@one-inch-community/ui-components/scene\";\nimport \"@one-inch-community/ui-components/scroll\";\nimport { when as when2 } from \"lit/directives/when.js\";\nimport { getChainById, isChainId } from \"@one-inch-community/sdk\";\nvar TokenListElement = class extends LitElement4 {\n  constructor() {\n    super(...arguments);\n    this.chainId = null;\n    this.walletAddress = null;\n    this.isEmpty = false;\n    this.addressList$ = defer(() => this.getTokenAddressList()).pipe(\n      tap3((list) => {\n        this.isEmpty = list.length === 0;\n        this.requestUpdate();\n      }),\n      shareReplay({ refCount: true, bufferSize: 1 })\n    );\n  }\n  render() {\n    const searchValue = this.context?.getSearchTokenValue() ?? \"\";\n    const searchValueExist = searchValue !== \"\";\n    const unsupportedChainId = !isChainId(this.chainId);\n    const chain = getChainById(this.chainId ?? ChainId.eth);\n    return html4`\n      ${when2(unsupportedChainId, () => html4`\n        <div class=\"overlay-message\">\n          <h3>Unsupported chain</h3>\n        </div>\n      `)}\n      ${when2(this.isEmpty && searchValueExist && !unsupportedChainId, () => html4`\n        <div class=\"overlay-message\">\n          <inch-icon icon=\"emptySearch\"></inch-icon>\n          <h3>Token not found on ${chain.name} Network</h3>\n          <span>Try changing your search query, or switch to another Network</span>\n        </div>\n      `)}\n      <inch-scroll-view-virtualizer-consumer\n        .header=\"${this.header}\"\n        .items=${observe(this.addressList$, this.getStubAddresses())}\n        .keyFunction=\"${(address) => [this.chainId, this.walletAddress, address].join(\":\")}\"\n        .renderItem=${(address) => html4`\n            <inch-token-list-item\n              tokenAddress=\"${address}\"\n              walletAddress=\"${ifDefined(this.walletAddress ?? void 0)}\"\n              chainId=\"${ifDefined(this.chainId ?? void 0)}\"\n            ></inch-token-list-item>`}\n      ></inch-scroll-view-virtualizer-consumer>\n    `;\n  }\n  async firstUpdated() {\n    subscribe3(this, [\n      this.getConnectedWalletAddress().pipe(tap3((address) => this.walletAddress = address)),\n      this.getChainId().pipe(tap3((chainId) => this.chainId = chainId)),\n      this.addressList$\n    ], { requestUpdate: false });\n    subscribe3(this, [\n      this.getFavoriteTokens()\n    ]);\n  }\n  getTokenAddressList() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.tokenAddressList$;\n  }\n  getChainId() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.chainId$;\n  }\n  getFavoriteTokens() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.favoriteTokens$;\n  }\n  getConnectedWalletAddress() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.connectedWalletAddress$;\n  }\n  getStubAddresses() {\n    return Array.from(Array(30)).map((_, index) => `0x${index.toString(16)}`);\n  }\n};\nTokenListElement.tagName = \"inch-token-list\";\nTokenListElement.styles = [\n  tokenListStyle\n];\n__decorateClass([\n  property3({ type: Object })\n], TokenListElement.prototype, \"header\", 2);\n__decorateClass([\n  consume3({ context: selectTokenContext })\n], TokenListElement.prototype, \"context\", 2);\n__decorateClass([\n  consume3({ context: sceneContext2 })\n], TokenListElement.prototype, \"sceneContext\", 2);\n__decorateClass([\n  state2()\n], TokenListElement.prototype, \"chainId\", 2);\n__decorateClass([\n  state2()\n], TokenListElement.prototype, \"walletAddress\", 2);\n__decorateClass([\n  state2()\n], TokenListElement.prototype, \"isEmpty\", 2);\nTokenListElement = __decorateClass([\n  customElement4(TokenListElement.tagName)\n], TokenListElement);\n\n// libs/widgets/src/lib/select-token/elements/favorite-tokens/favorite-tokens.element.ts\nimport { html as html5, LitElement as LitElement5 } from \"lit\";\nimport { customElement as customElement5 } from \"lit/decorators.js\";\nimport { when as when3 } from \"lit/directives/when.js\";\nimport { consume as consume4 } from \"@lit/context\";\nimport \"@one-inch-community/ui-components/button\";\nimport \"@one-inch-community/widgets/token-icon\";\nimport \"@one-inch-community/ui-components/icon\";\n\n// libs/widgets/src/lib/select-token/elements/favorite-tokens/favorite-tokens.styles.ts\nimport { css as css6 } from \"lit\";\nvar favoriteTokensStyles = css6`\n    :host {\n        display: flex;\n        width: 100%;\n        height: 60px;\n    }\n    \n    :host(.empty) {\n        height: 16px;\n        padding-bottom: 0;\n        margin-bottom: 0;\n    }\n    \n    :host(.transition-host) {\n        transition: height .2s, padding-bottom .2s, margin-bottom .2s;\n    }\n    \n    :host(.remove-favorite-token-show) .remove-favorite-token {\n        transform: scale(1) translate(0, 0);\n    }\n    \n    .favorite-container-scroll {\n        overflow-y: hidden;\n        overflow-x: auto;\n        touch-action: pan-x;\n        position: relative;\n        width: 100%;\n        padding-top: 16px;\n        padding-bottom: 8px;\n        margin-bottom: 8px;\n        height: 36px;\n        scrollbar-width: none;\n    }\n\n    .favorite-container-scroll::-webkit-scrollbar {\n        display: none;\n    }\n    \n    .favorite-container {\n        display: flex;\n        gap: 12px;\n        height: 36px;\n        position: absolute;\n    }\n    \n    .favorite-token-item-container {\n        position: relative;\n    }\n    \n    .remove-favorite-token {\n        position: absolute;\n        top: -8px;\n        right: -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background-color: var(--color-background-bg-secondary);\n        z-index: 9;\n        transition: transform .2s;\n        transform: scale(0) translate(-16px, 16px);\n        cursor: pointer;\n        color: var(--color-content-content-primary);\n    }\n    \n    @media (hover: hover) {\n        .favorite-token-item-container:hover .remove-favorite-token {\n            transform: scale(1) translate(0, 0);\n        }\n        .remove-favorite-token:hover {\n            background-color: var(--secondary-hover);\n        }\n        .edit-favorite-token-list {\n            display: none;\n        }\n    }\n    \n    \n\n`;\n\n// libs/widgets/src/lib/select-token/elements/favorite-tokens/favorite-tokens.element.ts\nimport { BehaviorSubject as BehaviorSubject2, combineLatest as combineLatest2, debounceTime as debounceTime2, defer as defer2, map, shareReplay as shareReplay2, startWith as startWith2, switchMap as switchMap3, tap as tap4 } from \"rxjs\";\nimport { observe as observe2, animationMap, subscribe as subscribe4 } from \"@one-inch-community/lit\";\nimport { TokenController as TokenController3 } from \"@one-inch-community/sdk\";\nvar FavoriteTokensElement = class extends LitElement5 {\n  constructor() {\n    super(...arguments);\n    this.editAllMode$ = new BehaviorSubject2(false);\n    this.favoriteTokensView$ = combineLatest2([\n      defer2(() => this.getFavoriteTokens()),\n      defer2(() => this.getChainId())\n    ]).pipe(\n      debounceTime2(0),\n      switchMap3(([tokens, chainId]) => TokenController3.getTokenList(chainId, tokens)),\n      map((tokens) => tokens.sort((token1, token2) => token2.priority - token1.priority)),\n      startWith2([]),\n      tap4((tokens) => {\n        if (tokens.length && this.classList.contains(\"empty\")) {\n          this.classList.remove(\"empty\");\n        }\n        if (!tokens.length && !this.classList.contains(\"empty\")) {\n          this.classList.add(\"empty\");\n        }\n      }),\n      tap4(() => {\n        if (!this.classList.contains(\"transition-host\")) {\n          setTimeout(() => {\n            this.classList.add(\"transition-host\");\n          }, 300);\n        }\n      }),\n      map((tokens) => {\n        if (tokens.length) {\n          tokens.push(null);\n        }\n        return html5`\n        <div class=\"favorite-container-scroll\">\n          <div class=\"favorite-container\">\n            ${html5`${animationMap(\n          tokens,\n          (token) => token !== null ? \"t\" + token.address : \"edit\",\n          itemAnimation,\n          (token) => when3(\n            token,\n            (token2) => html5`\n                <div class=\"favorite-token-item-container\">\n                  <div class=\"remove-favorite-token\" @click=\"${(event) => this.onRemoveFavoriteToken(token2, event)}\">\n                    <inch-icon icon=\"cross8\"></inch-icon>\n                  </div>\n                  <inch-button size=\"m\" type=\"secondary\" class=\"favorite-token-item\" @click=\"${(event) => emitSelectTokenEvent(this, token2, event)}\">\n                    <inch-token-icon symbol=\"${token2.symbol}\" address=\"${token2.address}\"\n                                     chainId=\"${token2.chainId}\"></inch-token-icon>\n                    <span>${token2.symbol}</span>\n                  </inch-button>\n                </div>\n              `,\n            () => html5`\n                <inch-button size=\"l\" type=\"secondary\" class=\"favorite-token-item edit-favorite-token-list\"\n                             @click=\"${() => this.editAllMode$.next(!this.editAllMode$.value)}\">\n                  <inch-icon icon=\"edit24\"></inch-icon>\n                </inch-button>\n              `\n          )\n        )}`}\n          </div>\n        </div>\n      `;\n      }),\n      shareReplay2({ bufferSize: 1, refCount: true })\n    );\n  }\n  firstUpdated() {\n    subscribe4(this, this.editAllMode$.pipe(\n      tap4((state3) => {\n        state3 ? this.classList.add(\"remove-favorite-token-show\") : this.classList.remove(\"remove-favorite-token-show\");\n      })\n    ), { requestUpdate: false });\n  }\n  render() {\n    return html5`${observe2(this.favoriteTokensView$)}`;\n  }\n  getFavoriteTokens() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.favoriteTokens$;\n  }\n  getChainId() {\n    if (!this.context)\n      throw new Error(\"\");\n    return this.context.chainId$;\n  }\n  async onRemoveFavoriteToken(token, event) {\n    event.stopPropagation();\n    event.preventDefault();\n    await this.context?.setFavoriteTokenState(token.chainId, token.address, false);\n  }\n};\nFavoriteTokensElement.tagName = \"inch-favorite-tokens\";\nFavoriteTokensElement.styles = [\n  favoriteTokensStyles\n];\n__decorateClass([\n  consume4({ context: selectTokenContext })\n], FavoriteTokensElement.prototype, \"context\", 2);\nFavoriteTokensElement = __decorateClass([\n  customElement5(FavoriteTokensElement.tagName)\n], FavoriteTokensElement);\nvar itemAnimation = {\n  deleteElement: async (element) => {\n    element.style.overflow = \"hidden\";\n    await element.animate([\n      { flexBasis: `${element.offsetWidth}px`, transform: \"scale(1) translateX(0)\" },\n      { flexBasis: \"0\", transform: \"scale(0) translateX(-20%)\" }\n    ], {\n      duration: element.id === \"edit\" ? 50 : 150\n    }).finished;\n    element.style.overflow = \"\";\n  },\n  addedElement: async (element) => {\n    element.style.overflow = \"hidden\";\n    element.style.transform = \"scale(0) translateX(-20%)\";\n    element.style.position = \"absolute\";\n    element.style.top = \"-9999\";\n    element.style.left = \"-9999\";\n    document.body.appendChild(element);\n    await new Promise((resolve) => requestAnimationFrame(resolve));\n    const width = element.offsetWidth;\n    element.remove();\n    element.style.position = \"\";\n    element.style.top = \"\";\n    element.style.left = \"\";\n    return async (element2) => {\n      await element2.animate([\n        { flexBasis: \"0\", transform: \"scale(0) translateX(-20%)\" },\n        { flexBasis: `${width}px`, transform: \"scale(1) translateX(0)\" }\n      ], {\n        duration: 150\n      }).finished;\n      element2.style.transform = \"\";\n      element2.style.overflow = \"\";\n    };\n  }\n};\n\n// libs/widgets/src/lib/select-token/select-token.element.ts\nimport { subscribe as subscribe5 } from \"@one-inch-community/lit\";\nimport { tap as tap5 } from \"rxjs\";\nimport { classMap as classMap4 } from \"lit/directives/class-map.js\";\nvar SelectTokenElement = class extends LitElement6 {\n  constructor() {\n    super(...arguments);\n    this.isEmpty = true;\n    this.context = new ContextProvider(this, { context: selectTokenContext });\n  }\n  render() {\n    const classes = {\n      empty: this.isEmpty\n    };\n    this.initContext();\n    return html6`\n      <inch-token-list\n        class=\"${classMap4(classes)}\"\n        .header=\"${() => html6`\n          <div style=\"margin-left: 1px; margin-right: 1px; pointer-events: auto;\">\n            <inch-card-header backButton headerText=\"Select token\"></inch-card-header>\n            <inch-search-token-input></inch-search-token-input>\n            <inch-favorite-tokens></inch-favorite-tokens>\n          </div>\n        `}\"\n      ></inch-token-list>\n    `;\n  }\n  firstUpdated() {\n    subscribe5(this, [\n      this.getTokenAddressList().pipe(tap5((list) => this.isEmpty = list.length === 0))\n    ]);\n  }\n  updated(changedProperties) {\n    let isDirty = false;\n    const context = this.context.value;\n    if (changedProperties.has(\"chainId\") && this.chainId) {\n      context.setChainId(this.chainId);\n      isDirty = true;\n    }\n    if (changedProperties.has(\"connectedWalletAddress\")) {\n      context.setConnectedWalletAddress(this.connectedWalletAddress);\n      isDirty = true;\n    }\n    if (isDirty) {\n      this.requestUpdate();\n    }\n  }\n  initContext() {\n    if (this.context.value)\n      return;\n    const { chainId, connectedWalletAddress } = this;\n    if (!chainId)\n      throw new Error(\"\");\n    const context = new SelectTokenContext();\n    context.setChainId(chainId);\n    context.setConnectedWalletAddress(connectedWalletAddress);\n    this.context.setValue(context);\n  }\n  getTokenAddressList() {\n    if (!this.context.value)\n      throw new Error(\"\");\n    return this.context.value.tokenAddressList$;\n  }\n};\nSelectTokenElement.tagName = \"inch-select-token\";\nSelectTokenElement.styles = selectTokenStyle;\n__decorateClass([\n  property4({ type: Number })\n], SelectTokenElement.prototype, \"chainId\", 2);\n__decorateClass([\n  property4({ type: String })\n], SelectTokenElement.prototype, \"connectedWalletAddress\", 2);\nSelectTokenElement = __decorateClass([\n  customElement6(SelectTokenElement.tagName)\n], SelectTokenElement);\nexport {\n  SelectTokenElement\n};\n//# sourceMappingURL=index.esm.js.map\n"],"names":["__defProp","__getOwnPropDesc","__decorateClass","decorators","target","key","kind","result","i","decorator","selectTokenStyle","css","selectTokenContext","createContext","SelectTokenContext","ReplaySubject","BehaviorSubject","Subject","mergeMap","chainId","TokenController","combineLatest","debounceTime","startWith","distinctUntilChanged","switchMap","address","searchToken","tap","state3","searchTokenInputStyle","css2","SearchTokenInputElement","LitElement","classes","html","classMap","event","when","subscribe","_a","tap2","of","value","state","consume","sceneContext","customElement","tokenListItemStyle","css3","mobileMediaCSS","tokenListStubItemStyle","css4","mobileMediaCSS2","TokenListStubTemElement","LitElement2","html2","classMap2","property","customElement2","emitSelectTokenEvent","ctx","dispatchEvent","TokenListItemElement","LitElement3","Task","tokenAddress","walletAddress","fastUpdate","token","TokenController2","balance","balanceUsd","tokenPrice","balanceFormatted","formatUnits","subscribe2","merge","timer","switchMap2","html3","balanceFormat","formatNumber","balanceUsdFormat","startColor","classMap3","filter","_b","isAddressEqual","property2","consume2","customElement3","tokenListStyle","css5","mobileMediaCSS3","TokenListElement","LitElement4","defer","tap3","list","shareReplay","searchValueExist","unsupportedChainId","isChainId","chain","getChainById","ChainId","html4","when2","observe","ifDefined","subscribe3","_","index","property3","consume3","sceneContext2","state2","customElement4","favoriteTokensStyles","css6","FavoriteTokensElement","LitElement5","BehaviorSubject2","combineLatest2","defer2","debounceTime2","switchMap3","tokens","TokenController3","map","token1","token2","startWith2","tap4","html5","animationMap","itemAnimation","when3","shareReplay2","subscribe4","observe2","consume4","customElement5","element","resolve","width","element2","SelectTokenElement","LitElement6","ContextProvider","html6","classMap4","subscribe5","tap5","changedProperties","isDirty","context","connectedWalletAddress","property4","customElement6"],"mappings":"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"}