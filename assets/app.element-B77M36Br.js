const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ucwa5e3k.js","assets/index-sLWOp1cP.js","assets/index.esm-CGEC4wRC.js","assets/index.esm-DfotAdpM.js","assets/index.esm-CjXD2v0E.js","assets/index.esm-COc-PyqV.js","assets/combineLatest-Cx3jWXTV.js","assets/asap-BqWvnQ_m.js","assets/index.esm-BXWn27hg.js","assets/index.esm-B4YiEjKM.js","assets/index.esm-OfUlTTgs.js","assets/tap-CWNNm5Pt.js","assets/takeUntil-CSuw8jL4.js","assets/index.esm-5Aerb1sL.js","assets/index.esm-MFwAEsBN.js","assets/index.esm-7KRQhKpb.js","assets/import-wrapper-prod-mRNndFxq.js","assets/index.esm-BBcS9skV.js","assets/firstValueFrom-Ch7AjPMY.js","assets/one-inch.repository-AF3TE4XT-BDmhtuiN.js","assets/uniswap.repository-MXTOGC4T-CRmcPcT8.js","assets/trustwallet.repository-P6G45YEI-BdDmb-7v.js","assets/pancakeswap.repository-LI7PUPCX-CatHHD3Z.js","assets/swap-form-mobile.element-CRZEa7GX.js","assets/swap-form.style-C9hd8cmm.js","assets/swap-form-desktop.element-CnUROHx0.js"])))=>i.map(i=>d[i]);
import{i as f,t as y,s as $,x as a,A as F,a as ze,_ as q,j as cn,r as ln,e as hn}from"./index-sLWOp1cP.js";import{m as O,s as pn,d as I,a as et,b as T,g as Pt,c as Le,e as J,o as E,f as te,i as Bt,l as De,r as un,h as dn,j as Fe,k as fn,t as x}from"./index.esm-CGEC4wRC.js";import{n as w,e as Y,c as S,r as P,h as ae,f as ce,a as g,o as tt,O as We,b as Be,d as ee,g as je,i as mn,S as gn,j as Ce,k as Se,s as bt,l as He,m as ke}from"./index.esm-BXWn27hg.js";import{L as wn,s as L,m as vn,d as jt,a as Ue,o as Wt}from"./index.esm-OfUlTTgs.js";import{i as ne,n as bn,f as z,g as Ie,a as xn,b as le,c as qe,d as Ye,e as he,h as yn,j as $n,k as Cn,l as Sn,m as kn,U as In}from"./index.esm-MFwAEsBN.js";import{C as pe,i as Ht,B as En,a as Tn}from"./index.esm-7KRQhKpb.js";import{o as An,c as _n,i as Pn,C as M,d as b,m as A,S as Rt,L as Ee,s as U,a as Zt,f as Ut,b as Mn,B as Rn}from"./index.esm-DfotAdpM.js";import{i as Nn,S as Q,w as Ge}from"./index.esm-BBcS9skV.js";import{t as _}from"./tap-CWNNm5Pt.js";import{f as _t}from"./takeUntil-CSuw8jL4.js";import{getRainbowGradient as On,getThemeChange as Vn,scrollbarStyle as zn}from"./index.esm-B4YiEjKM.js";import{storage as Te,JsonParser as Ln}from"./index.esm-COc-PyqV.js";import{f as Nt}from"./firstValueFrom-Ch7AjPMY.js";import{c as mt}from"./combineLatest-Cx3jWXTV.js";function ue(t){return An(function(e,n){var i=null,s=!1,o;i=e.subscribe(_n(n,void 0,void 0,function(r){o=Pn(t(r,ue(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):s=!0})),s&&(i.unsubscribe(),i=null,o.subscribe(n))})}function ie(t,e){let[n,i="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),i=i.replace(/(0+)$/,""),e===0)Math.round(+`.${i}`)===1&&(n=`${BigInt(n)+1n}`),i="";else if(i.length>e){const[o,r,l]=[i.slice(0,e-1),i.slice(e-1,e),i.slice(e)],c=Math.round(+`${r}.${l}`);c>9?i=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):i=`${o}${c}`,i.length>e&&(i=i.slice(1),n=`${BigInt(n)+1n}`),i=i.slice(0,e)}else i=i.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${i}`)}const Dn=f`:host{--height:100vh;overflow-y:auto;overflow-x:hidden!important;height:var(--height);display:flex;flex-direction:column;justify-content:space-between;background-color:var(--color-background-bg-body);overscroll-behavior:none;touch-action:pan-y;transition:height .2s}@supports (height:100dvh){:host{--height:100dvh}}${O(f`:host::-webkit-scrollbar{display:none}`)}${pn(f`:host{height:calc(var(--height) - 10px)}`)}.content{display:flex;width:100%;justify-content:center;margin-bottom:auto}`,Fn=f`.header-container{width:100%;box-sizing:border-box;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:0 auto}.mobile-header{height:56px;padding:8px;max-width:100vw}.right-content{display:flex;align-items:center;gap:8px}`;var Wn=Object.defineProperty,Bn=Object.getOwnPropertyDescriptor,gt=(t,e,n,i)=>{for(var s=i>1?void 0:i?Bn(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&Wn(e,n,s),s},jn=f`:host{background-color:var(--color-background-bg-primary);border-radius:24px;width:fit-content;height:fit-content;display:block}:host(.shadow){box-shadow:0 -3px 4px 0 var(--primary-12),0 6px 12px 0 var(--primary-12)}:host(.mobile){border-bottom-left-radius:0;border-bottom-right-radius:0;width:100vw;height:fit-content;box-shadow:none}.card-content{padding:8px;display:flex;width:100%;height:100%;box-sizing:border-box;flex-direction:column;gap:8px}`,st=class extends ${constructor(){super(...arguments),this.forMobileView=!1,this.showShadow=!1}render(){return a`<slot name="header"></slot><div class="card-content"><slot></slot></div>`}firstUpdated(){this.forMobileView&&!this.classList.contains("mobile")&&this.classList.add("mobile"),this.showShadow&&!this.classList.contains("shadow")&&this.classList.add("shadow")}};st.tagName="inch-card";st.styles=jn;gt([w({type:Boolean})],st.prototype,"forMobileView",2);gt([w({type:Boolean})],st.prototype,"showShadow",2);st=gt([y(st.tagName)],st);var Hn=f`:host{display:flex;height:60px;width:100%;padding:16px 16px 0;box-sizing:border-box;border-top-left-radius:32px;border-top-right-radius:32px}:host(.not-native-mode){height:44px;padding:0}.card-header-container{display:grid;grid-template-columns:1fr 1fr 1fr;width:100%;height:100%}.position-container{height:100%;width:100%;display:flex;align-items:center;color:var(--color-content-content-primary);gap:8px;word-wrap:break-word;white-space:nowrap}.center-container{justify-content:center}.left-container{justify-content:flex-start}.right-container{justify-content:flex-end}.card-header-title{font-size:20px;font-weight:600;line-height:28px;letter-spacing:0;text-align:center}.card-header-title__left:not(.card-header-title__and-back){margin-left:8px}.card-header-title__left:not(.card-header-title__and-back):dir(rtl){margin-right:8px}${O(f`.card-header-title{font-size:16px}:host{padding:8px 8px 0}`)}`,G=class extends ${constructor(){super(),this.headerTextPosition="center",this.backButton=!1,this.closeButton=!1,this.slotDirty={},this.slot="header"}render(){return a`<div class="card-header-container"><div class="position-container left-container"><slot @slotchange="${()=>this.onSlotChange("left")}" name="left-container"></slot>${this.getBackButton("left")} ${this.getHeader("left")}</div><div class="position-container center-container"><slot @slotchange="${()=>this.onSlotChange("center")}" name="center-container"></slot>${this.getHeader("center")}</div><div class="position-container right-container"><slot @slotchange="${()=>this.onSlotChange("right")}" name="right-container"></slot>${this.getCloseButton("right")}</div></div>`}firstUpdated(){var t;((t=this.parentElement)==null?void 0:t.localName)!=="inch-card"&&this.classList.add("not-native-mode")}getHeader(t){const e=this.slotDirty[t]??!1,n={"card-header-title":!0,[`card-header-title__${t}`]:!0,"card-header-title__and-back":this.backButton};return this.headerTextPosition===t&&!e?a`<span class="${Y(n)}">${this.headerText}</span>`:""}getBackButton(t){const e=this.slotDirty[t]??!1;return this.backButton&&!e?a`<inch-button @click="${n=>I(this,"backCard",null,n)}" size="l" type="tertiary-gray"><inch-icon icon="arrowLeft24"></inch-icon></inch-button>`:""}getCloseButton(t){const e=this.slotDirty[t]??!1;return this.closeButton&&!e?a`<inch-button @click="${n=>I(this,"closeCard",null,n)}" size="l" type="tertiary-gray"><inch-icon icon="cross24"></inch-icon></inch-button>`:""}onSlotChange(t){this.slotDirty={...this.slotDirty,[t]:!0},this.requestUpdate()}};G.tahName="inch-card-header";G.styles=Hn;gt([w({type:String,attribute:!0})],G.prototype,"headerText",2);gt([w({type:String,attribute:!0})],G.prototype,"headerTextPosition",2);gt([w({type:Boolean,attribute:!0})],G.prototype,"backButton",2);gt([w({type:Boolean,attribute:!0})],G.prototype,"closeButton",2);G=gt([y(G.tahName)],G);const Un=Object.freeze(Object.defineProperty({__proto__:null,get CardElement(){return st},get CardHeaderElement(){return G}},Symbol.toStringTag,{value:"Module"}));function*de(t,e){if(t!==void 0){let n=0;for(const i of t)yield e(i,n++)}}var qn=Object.defineProperty,Yn=Object.getOwnPropertyDescriptor,v=(t,e,n,i)=>{for(var s=i>1?void 0:i?Yn(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&qn(e,n,s),s},Gn=f``,Zn=f`:host{display:block;transition:height .2s;overflow:hidden}.wallet-view-container{display:flex;align-content:center;justify-content:space-between;padding:20px 16px;border-radius:16px;transition:background-color .2s,height .2s;position:relative;overflow:hidden;color:var(--color-content-content-primary)}.wallet-icon{width:24px;height:24px}.wallet-name{color:var(--color-content-content-primary);font-size:16px;font-style:normal;font-weight:400;line-height:24px}.connect-icon{color:var(--color-content-content-primary);margin-left:auto;transform:scale(0);transition:transform .2s}.connect-icon__connected{transform:scale(1);transition:color .2s;color:var(--color-content-content-primary)}.connect-icon__active{transform:scale(1);transition:color .2s;color:var(--primary)}.data-container{display:flex;align-items:center;gap:8px}.loader-icon{height:24px;width:24px;margin-left:auto}.address-list{display:flex;flex-direction:column}inch-wallet-view-address-balance{transform:translate3d(24px,0,0);transition:transform .2s;will-change:transform}.add-connection{transition:transform .2s;transform:scale(0)}.address-container__active inch-wallet-view-address-balance{transform:translate3d(0,0,0)}.wallet-view-container__wc.wallet-view-container__connected:not(.wallet-view-container__loading) .right-data{transform:translate3d(36px,0,0);transition:transform .2s}.sub-wallet-icon:dir(rtl){transform:scale(-1,1)}@media (hover:hover){.wallet-view-container:hover{background-color:var(--color-background-bg-secondary)}.wallet-view-container:hover .connect-icon{transform:scale(1)}.wallet-view-container:hover inch-wallet-view-address-balance{transform:translate3d(0,0,0)}.wallet-view-container:hover .add-connection{transform:scale(1)}.wallet-view-container:hover.wallet-view-container__wc.wallet-view-container__connected .right-data{transform:translate3d(0,0,0)}}@media (hover:none){.wallet-view-container__wc.wallet-view-container__connected:not(.wallet-view-container__loading) .right-data{transform:translate3d(0,0,0)}.add-connection{transform:scale(1)}}@keyframes rainbow{0%{background-position:0}100%{background-position:100%}}`,fe=Be(Symbol("controller context")),Kn=f`:host{color:var(--color-content-content-primary);text-align:right;font-size:16px;font-style:normal;font-weight:500;line-height:24px}.loader{will-change:filter;height:20px;width:60px;background-color:var(--color-background-bg-secondary);border-radius:4px;animation:stub-loader-animation 3s ease-in-out infinite}@keyframes stub-loader-animation{0%,100%{filter:opacity(1)}50%{filter:opacity(.5)}}`,Ae=new wn("inch-wallet-view-address-balance",7),ot=class extends ${constructor(){super(...arguments),this.task=new ae(this,async([t,e])=>{if(!t||!e)throw new Error("");const n=await this.applicationContext.tokenController.getTokenBalance(t,bn,e),i=ce(z(BigInt((n==null?void 0:n.amount)??0),18),6);return Ae.set([this.chainId,this.address].join(":"),i),i},()=>[this.chainId,this.address])}render(){return this.task.render({pending:()=>this.getLoader(),error:()=>this.getLoader(),complete:t=>{if(this.chainId===void 0)throw new Error("");const e=Ie(this.chainId);return a`<span>${t} ${e.nativeCurrency.symbol}</span>`}})}getLoader(){const t=()=>a`<div class="loader"></div>`;if(!this.chainId||!this.address)return t();const e=Ae.get([this.chainId,this.address].join(":")),n=Ie(this.chainId);return e?a`<span>${e} ${n.nativeCurrency.symbol}</span>`:t()}};ot.tagName="inch-wallet-view-address-balance";ot.styles=Kn;v([w({type:Number})],ot.prototype,"chainId",2);v([w({type:String})],ot.prototype,"address",2);v([S({context:F})],ot.prototype,"applicationContext",2);ot=v([y(ot.tagName)],ot);var N=class extends ${constructor(){super(...arguments),this.showLoader=!1,this.isWalletConnected=!1,this.addressList=null,this.activeAddress=null,this.showAddresses=!1,this.isActiveWallet=!1}firstUpdated(){if(!this.info)throw new Error("");const t=this.getController().getDataAdapter(this.info),e=this.getController().data;et(this,[t.isConnected$.pipe(_(n=>this.isWalletConnected=n)),t.activeAddress$.pipe(_(n=>this.activeAddress=n)),t.addresses$.pipe(_(n=>this.addressList=n.length?n:null)),e.chainId$.pipe(_(n=>this.chainId=n??void 0)),e.isActiveWallet$(this.info).pipe(_(n=>this.isActiveWallet=n))],{requestUpdate:!1})}render(){var s;if(!this.info)throw new Error("");const t=((s=this.addressList)==null?void 0:s.length)??0,e=(this.showAddresses&&t>1?t*64:0)+64;T(this,{height:`${e}px`});const n=this.info.uuid==="walletConnect",i={"wallet-view-container":!0,"wallet-view-container__wc":n,"wallet-view-container__connected":this.isWalletConnected,"wallet-view-container__loading":this.showLoader};return a`<div class="${Y(i)}" @click="${()=>this.onClick()}"><div class="data-container left-data"><img class="wallet-icon" alt="${this.info.name}" src="${this.info.icon}"> <span class="wallet-name">${this.info.name}</span></div><div class="data-container right-data">${g(this.activeAddress,o=>a`<span>${ee(o)}</span>`)} ${g(this.showLoader,()=>a`<inch-icon class="loader-icon" icon="fire48"></inch-icon>`,()=>{const o={"connect-icon":!0,"connect-icon__connected":this.isWalletConnected,"connect-icon__active":this.isActiveWallet};return a`<inch-icon class="${Y(o)}" icon="connect16"></inch-icon>${g(n&&this.activeAddress,()=>a`<inch-button @click="${r=>this.onConnect(r)}" class="add-connection" size="l" type="tertiary"><inch-icon icon="plusCircle16"></inch-icon></inch-button>`)}`})}</div></div>${g(this.addressList&&this.addressList.length>1,()=>a`<div class="address-list">${de(this.addressList,o=>a`<div @click="${()=>this.setActiveAddress(o)}" class="wallet-view-container address-container ${te(this.isActiveAddress(o).then(r=>r?"address-container__active":""))}"><div class="data-container left-data"><inch-icon class="sub-wallet-icon" icon="cornerDownRight16"></inch-icon><span>${ee(o,{width:this.offsetWidth})}</span></div><div class="data-container right-data"><inch-wallet-view-address-balance chainId="${tt(this.chainId)}" address="${o}"></inch-wallet-view-address-balance><inch-icon class="connect-icon ${te(this.isActiveAddress(o).then(r=>r?"connect-icon__active":""))}" icon="link16"></inch-icon></div></div>`)}</div>`)}`}async onClick(){if(this.isWalletConnected){if(this.addressList&&this.addressList.length===1){await this.setActiveAddress(this.addressList[0]);return}this.showAddresses=!this.showAddresses;return}await this.onConnect()}async onConnect(t){if(!this.info||this.showLoader)return;t==null||t.preventDefault(),t==null||t.stopPropagation(),this.showLoader=!0;const e=this.info.uuid==="walletConnect";this.isWalletConnected&&e?this.showAddresses=await this.getController().addConnection(this.info):this.showAddresses=await this.getController().connect(this.info),this.showLoader=!1}async setActiveAddress(t){this.info&&await this.getController().setActiveAddress(this.info,t)}getController(){if(!this.controller)throw new Error("");return this.controller}isActiveAddress(t){if(!this.info)throw new Error("");return this.getController().data.isActiveAddress(this.info,t)}};N.tagName="inch-wallet-view";N.styles=Zn;v([w({type:Object})],N.prototype,"info",2);v([P()],N.prototype,"showLoader",2);v([P()],N.prototype,"isWalletConnected",2);v([P()],N.prototype,"addressList",2);v([P()],N.prototype,"activeAddress",2);v([P()],N.prototype,"showAddresses",2);v([P()],N.prototype,"isActiveWallet",2);v([P()],N.prototype,"chainId",2);v([S({context:fe})],N.prototype,"controller",2);N=v([y(N.tagName)],N);var Ot=class extends ${constructor(){super(...arguments),this.task=new ae(this,async()=>await this.getController().getSupportedWallets(),()=>[])}render(){return this.task.render({pending:()=>a`<inch-icon icon="unicornRun"></inch-icon>`,complete:t=>a`<inch-scroll-view-consumer>${de(t,e=>a`<inch-wallet-view .info="${e}"></inch-wallet-view>`)}</inch-scroll-view-consumer>`})}getController(){if(!this.controller)throw new Error("");return this.controller}};Ot.tagName="inch-wallet-list";v([S({context:fe})],Ot.prototype,"controller",2);Ot=v([y(Ot.tagName)],Ot);var rt=class extends ${constructor(){super(...arguments),this.mobileMedia=Pt(),this.context=new ze(this,{context:fe})}firstUpdated(){Le(this)}render(){if(!this.controller)throw new Error("For the inch-wallet-manage widget to work, you need to pass the controller corresponding to the interface in the controller field");this.context.value||this.context.setValue(this.controller);const t=this.controller.isConnected?"Wallet management":"Connect wallet";return a`<inch-card showShadow="${tt(this.showShadow)}" forMobileView="${tt(this.mobileMedia.matches?"":void 0)}"><inch-card-header closeButton headerText="${t}"></inch-card-header><inch-wallet-list></inch-wallet-list></inch-card>`}};rt.tagName="inch-wallet-manage";rt.styles=Gn;v([w({type:Object,attribute:!1})],rt.prototype,"controller",2);v([w({type:Boolean})],rt.prototype,"showShadow",2);rt=v([y(rt.tagName)],rt);var Xn=f`.connect-wallet-view-container{padding:8px 5px 8px 8px;display:flex;align-items:center;gap:8px;border-radius:12px;background:var(--color-background-bg-primary);height:40px;box-sizing:border-box}.connect-wallet-view-icon{width:24px;height:24px}${O(f`.connect-wallet-view-container{padding:6px;width:36px;height:36px}`)}`,at=class extends ${constructor(){super(...arguments),this.mobileMatchMedia=J(this),this.overlay=new We("#app-root",this),this.overlayId=null,this.chainId$=b(()=>this.getController().data.chainId$),this.activeAddress$=b(()=>this.getController().data.activeAddress$),this.info$=b(()=>this.getController().data.info$),this.icon$=this.info$.pipe(A(t=>t.icon)),this.name$=this.info$.pipe(A(t=>t.name)),this.activeAddressView$=this.activeAddress$.pipe(A(t=>t&&ee(t))),this.view$=b(()=>this.getController().data.isConnected$).pipe(A(t=>t?this.getConnectedView():this.getConnectWalletButton()))}render(){return a`${E(this.view$)}`}getConnectedView(){return a`<div class="connect-wallet-view-container" @click="${()=>this.mobileMatchMedia.matches&&this.onOpenConnectView()}"><img class="connect-wallet-view-icon" alt="${E(this.name$)}" src="${E(this.icon$)}"> ${g(!this.mobileMatchMedia.matches,()=>a`<inch-wallet-view-address-balance address="${E(this.activeAddress$)}" chainId="${E(this.chainId$)}"></inch-wallet-view-address-balance><inch-button @click="${()=>this.onOpenConnectView()}" type="secondary" size="m">${E(this.activeAddressView$)}</inch-button>`)}</div>`}getConnectWalletButton(){return a`<inch-button @click="${()=>this.onOpenConnectView()}" type="${this.mobileMatchMedia.matches?"primary-gray":"secondary"}" size="${this.mobileMatchMedia.matches?"l":"xl"}">${g(this.mobileMatchMedia.matches,()=>a`<inch-icon icon="wallet24"></inch-icon>`,()=>a`<span>Connect wallet</span>`)}</inch-button>`}getController(){if(!this.controller)throw new Error("");return this.controller}async onOpenConnectView(){if(this.overlay.isOpen){await this.overlay.close(this.overlayId??0),this.overlayId=null;return}this.overlayId=await this.overlay.open(a`<inch-wallet-manage @closeCard="${()=>{this.overlayId&&(this.overlay.close(this.overlayId),this.overlayId=null)}}" .controller="${this.controller}"></inch-wallet-manage>`)}};at.tagName="inch-connect-wallet-view";at.styles=Xn;v([w({type:Object,attribute:!1})],at.prototype,"controller",2);v([pe()],at.prototype,"onOpenConnectView",1);at=v([y(at.tagName)],at);var Jn=f`.unsupported{color:var(--color-core-red-critical)}`,vt={[M.eth]:{name:"Ethereum",iconName:"eth24"},[M.arbitrum]:{name:"Arbitrum",iconName:"arbitrum24"},[M.op]:{name:"Optimism",iconName:"op24"},[M.zkSyncEra]:{name:"zkSync Era",iconName:"zkSyncEra24"},[M.bnb]:{name:"BNB Smart Chain",iconName:"bnb24",priority:1},[M.matic]:{name:"Polygon",iconName:"matic24",priority:1},[M.gnosis]:{name:"Gnosis",iconName:"gnosis24"},[M.avalanche]:{name:"Avalanche",iconName:"avalanche24"},[M.fantom]:{name:"Fantom",iconName:"fantom24"},[M.aurora]:{name:"Aurora",iconName:"aurora24"},[M.klaytn]:{name:"Klaytn",iconName:"klaytn24"}},Qn=Object.keys(vt).filter(t=>Nn(+t)).map(t=>({...vt[t],chainId:Number(t)})).sort((t,e)=>t.chainId==M.eth?-1:e.chainId==M.eth?1:ne(t.chainId)?-1:ne(e.chainId)?1:(e.priority??0)-(t.priority??0)),ti=f`.card{height:100%}.scroll-container{position:relative;height:100%;overflow-y:auto}.scroll-overlay{position:absolute;top:0;left:0;height:100%;width:100%}`,ei=f`:host{width:100%;height:100%}.container{display:flex;align-items:center;gap:8px;height:40px;padding:0 8px;border-radius:12px;background-color:transparent;transition:background-color .2s;color:var(--color-content-content-primary);font-size:14px}.active .list-icon{transform:scale(1);color:var(--primary)}.list-icon{margin-left:auto;transition:transform .2s;transform:scale(0)}@media (hover:hover){.container:hover{background-color:var(--color-background-bg-secondary)}.container:hover .list-icon{transform:scale(1)}}.container:active{background-color:var(--color-background-bg-secondary)}${O(f`.container{height:50px;font-size:16px}`)}`,ct=class extends ${constructor(){super(...arguments),this.mobileMedia=J(this)}render(){if(!this.info)return;const t=ne(this.info.chainId),n={container:!0,active:Number(this.info.chainId)===this.activeChainId},i=this.mobileMedia.matches?26:24;return a`<div class="${Y(n)}" @click="${()=>this.setChainId()}">${g(t,()=>a`<inch-icon icon="${Bt()?"l2ChainRTL24":"l2Chain24"}"></inch-icon>`)}<inch-icon width="${i}px" height="${i}px" icon="${this.info.iconName}"></inch-icon><span>${this.info.name}</span><inch-icon class="list-icon" icon="link16"></inch-icon></div>`}async setChainId(){var t;if(!this.info)throw new Error("");await((t=this.controller)==null?void 0:t.changeChain(this.info.chainId)),I(this,"closeCard",null)}};ct.tagName="inch-chain-selector-list-item";ct.styles=ei;v([w({type:Object})],ct.prototype,"info",2);v([w({type:Number})],ct.prototype,"activeChainId",2);v([w({type:Object,attribute:!1})],ct.prototype,"controller",2);ct=v([y(ct.tagName)],ct);var lt=class extends ${constructor(){super(...arguments),this.mobileMedia=J(this)}firstUpdated(){if(!this.controller)throw new Error("");et(this,[this.controller.data.chainId$.pipe(_(t=>this.activeChainId=t??void 0))],{requestUpdate:!1})}render(){return this.mobileMedia.matches?this.getMobileList():this.getDesktopList()}getList(){return Qn.map(t=>a`<inch-chain-selector-list-item .info="${t}" .controller="${this.controller}" activeChainId="${tt(this.activeChainId)}"></inch-chain-selector-list-item>`)}getMobileList(){return a`<inch-card class="card" forMobileView><inch-card-header closeButton headerText="Select chain"></inch-card-header><inch-scroll-view-consumer>${this.getList()}</inch-scroll-view-consumer></inch-card>`}getDesktopList(){return a`<inch-card>${this.getList()}</inch-card>`}};lt.tagName="inch-chain-selector-list";lt.styles=[ti];v([w({type:Object,attribute:!1})],lt.prototype,"controller",2);v([P()],lt.prototype,"activeChainId",2);lt=v([y(lt.tagName)],lt);var ht=class extends ${constructor(){super(...arguments),this.mobileMedia=J(this),this.overlay=new We("#app-root",this),this.overlayId=null,this.chainId$=b(()=>this.getController().data.chainId$),this.unsupportedChainId$=this.chainId$.pipe(A(t=>t&&vt[t]?"":"unsupported")),this.chainIdIconName$=this.chainId$.pipe(_t(Boolean),A(t=>vt[t]?vt[t].iconName:"alert24")),this.chainIdName$=this.chainId$.pipe(_t(Boolean),A(t=>vt[t]?vt[t].name:"Unsupported chain"))}render(){return a`<inch-button @click="${()=>this.onClick()}" size="l" type="primary-gray"><inch-icon class="${E(this.unsupportedChainId$)}" icon="${E(this.chainIdIconName$)}"></inch-icon>${g(!this.mobileMedia.matches,()=>a`<span>${E(this.chainIdName$)}</span><inch-icon icon="chevronDown16"></inch-icon>`)}</inch-button>`}async onClick(){if(this.overlay.isOpenOverlay(this.overlayId??0)){this.closeOverlay();return}this.overlayId=await this.overlay.open(a`<inch-chain-selector-list .controller="${this.controller}" @closeCard="${()=>this.closeOverlay()}"></inch-chain-selector-list>`)}closeOverlay(){this.overlayId&&(this.overlay.close(this.overlayId),this.overlayId=null)}getController(){if(!this.controller)throw new Error("");return this.controller}};ht.tagName="inch-chain-selector";ht.styles=Jn;v([w({type:Object,attribute:!1})],ht.prototype,"controller",2);v([pe()],ht.prototype,"onClick",1);ht=v([y(ht.tagName)],ht);const Ys=Object.freeze(Object.defineProperty({__proto__:null,get ChainSelectorElement(){return ht},get ChainSelectorListElement(){return lt},get ConnectWalletViewElement(){return at},get WalletManageElement(){return rt}},Symbol.toStringTag,{value:"Module"}));function ni(){return Pt().matches?56:72}function ii(){return Pt().matches?56:72}var si=Object.defineProperty,oi=Object.getOwnPropertyDescriptor,Ze=(t,e,n,i)=>{for(var s=i>1?void 0:i?oi(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&si(e,n,s),s};let yt=class extends ${constructor(){super(...arguments),this.mobileMedia=J(this)}render(){return this.mobileMedia.matches?this.getMobileHeader():this.getDesktopHeader()}getDesktopHeader(){const t={height:`${ni()}px`};return a`<div class="header-container" style="${je(t)}"><div class="left-content"><inch-icon icon="logoFull"></inch-icon></div><div class="right-content"><inch-chain-selector .controller="${this.applicationContext.connectWalletController}"></inch-chain-selector><inch-connect-wallet-view .controller="${this.applicationContext.connectWalletController}"></inch-connect-wallet-view><inch-notifications-open-button></inch-notifications-open-button></div></div>`}getMobileHeader(){return a`<div class="header-container mobile-header"><inch-icon icon="logoFull"></inch-icon></div>`}};yt.tagName="inch-header";yt.styles=Fn;Ze([S({context:F})],yt.prototype,"applicationContext",2);yt=Ze([y(yt.tagName)],yt);const ri=f`.footer-container{width:100%;box-sizing:border-box;display:flex;align-items:center;position:relative;border-top:1px solid var(--color-border-border-tertiary);padding:0 72px;background-color:var(--color-background-bg-body);gap:8px;margin-top:32px}.mobile-footer{height:72px;width:100vw;position:sticky;padding:16px 8px;bottom:0;z-index:9;justify-content:space-between}.power-by{color:var(--color-content-content-secondary);font-size:13px;font-style:normal;font-weight:400;line-height:16px}.version{color:var(--color-content-content-secondary);font-size:13px;font-style:normal;font-weight:400;line-height:16px;transform:translateX(-100%);opacity:0;transition:transform .2s,opacity .2s}.version:dir(rtl){transform:translateX(100%)}.footer-content-container{display:flex;gap:8px}@media (hover:hover){.footer-container:hover .version{transform:translateX(0);opacity:1}}`;var ai=Object.defineProperty,ci=Object.getOwnPropertyDescriptor,Ke=(t,e,n,i)=>{for(var s=i>1?void 0:i?ci(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&ai(e,n,s),s};q(()=>Promise.resolve().then(()=>Un),void 0);q(()=>import("./index-Ucwa5e3k.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]));let $t=class extends ${constructor(){super(...arguments),this.mobileMedia=Pt(),this.mobileOverlay=new mn("app-root")}connectedCallback(){super.connectedCallback(),Le(this)}render(){return this.mobileMedia.matches?this.getMobileFooter():this.getDesktopFooter()}getDesktopFooter(){const t={height:`${ii()}px`};return a`<div class="footer-container" style="${je(t)}"><span class="power-by">© ${new Date().getFullYear()} Powered by 1inch</span> <span class="version">version: ${xn("appVersion")}</span></div>`}getMobileFooter(){return a`<div class="footer-container mobile-footer"><inch-chain-selector .controller="${this.applicationContext.connectWalletController}"></inch-chain-selector><inch-connect-wallet-view .controller="${this.applicationContext.connectWalletController}"></inch-connect-wallet-view><inch-notifications-open-button></inch-notifications-open-button><inch-button @click="${()=>this.onOpenSettings()}" type="primary-gray" size="l"><inch-icon icon="settings24"></inch-icon></inch-button></div>`}async onOpenSettings(){const t=await this.mobileOverlay.open(a`<inch-card forMobileView><inch-settings @closeSettings="${()=>this.mobileOverlay.close(t)}"></inch-settings></inch-card>`)}};$t.tagName="inch-footer";$t.styles=ri;Ke([S({context:F})],$t.prototype,"applicationContext",2);$t=Ke([y($t.tagName)],$t);var li=Object.defineProperty,hi=Object.getOwnPropertyDescriptor,d=(t,e,n,i)=>{for(var s=i>1?void 0:i?hi(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&li(e,n,s),s},pi=Object.defineProperty,ui=Object.getOwnPropertyDescriptor,Mt=(t,e,n,i)=>{for(var s=i>1?void 0:i?ui(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&pi(e,n,s),s},di=[()=>q(()=>import("./one-inch.repository-AF3TE4XT-BDmhtuiN.js"),__vite__mapDeps([19,3])).then(t=>t.oneInchRepository),()=>q(()=>import("./uniswap.repository-MXTOGC4T-CRmcPcT8.js"),__vite__mapDeps([20,3,14,1,10,5])).then(t=>t.uniSwapRepository),()=>q(()=>import("./trustwallet.repository-P6G45YEI-BdDmb-7v.js"),__vite__mapDeps([21,3,14,1,10,5])).then(t=>t.trustWalletRepository),()=>q(()=>import("./pancakeswap.repository-LI7PUPCX-CatHHD3Z.js"),__vite__mapDeps([22,3,14,1,10,5])).then(t=>t.pancakeSwapRepository)],Z=class extends ${constructor(){super(...arguments),this.size=24,this.task=new ae(this,{task:([t,e,n],{signal:i})=>this.iconLoader(i,n,t,e),args:()=>[this.symbol,this.address,this.chainId]})}render(){return this.task.render({error:()=>Qt(this.size,this.symbol),pending:()=>Qt(this.size,this.symbol,!0),initial:()=>Qt(this.size,this.symbol,!0),complete:t=>(t.width=this.size,t.height=this.size,t.ondragstart=()=>!1,a`${t}`)})}updated(){this.style.width=`${this.size}px`,this.style.height=`${this.size}px`}async iconLoader(t,e,n,i){let s=await this.loadFromDatabase({chainId:e,symbol:n,address:i,signal:t});if(s===null&&(s=await se({chainId:e,symbol:n,address:i,signal:t})),s===null&&(s=await this.loadIconFromMultiChain({chainId:e,symbol:n,address:i,signal:t})),s===null)throw new Error("token icon not fount");return s}async loadFromDatabase(t){if(!t.chainId||!t.address)return null;const e=await this.applicationContext.tokenController.getTokenLogoURL(t.chainId,t.address);return e?await new Promise(n=>{const i=new Image;i.onerror=()=>n(null),i.onload=()=>n(i),i.src=e}):null}async loadIconFromMultiChain(t){if(t.chainId===M.eth||!t.symbol)return null;const e=await this.applicationContext.tokenController.getTokenBySymbol(M.eth,t.symbol);if(t.chainId&&t.address&&le(t.address)){const n=qe(t.chainId);e.push(n)}for(const n of e){const i=await se({...t,chainId:n.chainId,address:n.address});if(i)return i}return null}};Z.tagName="inch-token-icon";Z.styles=f`

      :host {
          user-select: none;
          outline: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: transparent;
      }

      .stub {
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: var(--color-background-bg-secondary);
          border-radius: 50%;
          color: var(--color-content-content-secondary);
          position: relative;
      }
      .stub-loader {
          position: absolute;
          width: 100%;
          height: 100%;
          border-radius: 50%;
          border: 1px solid;
          border-bottom-color: var(--secondary);
          border-top-color: var(--secondary);
          animation: spin 1s linear infinite;
      }
      
      img {
          user-select: none;
          outline: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: transparent;
      }

      @keyframes spin {
          0% {
              transform: rotate(0deg);
          }

          100% {
              transform: rotate(360deg);
          }
      }
  
  `;Mt([w({type:String,attribute:!0})],Z.prototype,"symbol",2);Mt([w({type:String,attribute:!0})],Z.prototype,"address",2);Mt([w({type:Number,attribute:!0})],Z.prototype,"chainId",2);Mt([w({type:Number,attribute:!0})],Z.prototype,"size",2);Mt([S({context:F})],Z.prototype,"applicationContext",2);Z=Mt([y(Z.tagName)],Z);function Qt(t,e,n){return a`
    <div style="width: ${t}px; height: ${t}px; font-size: ${t<40?13:16}px" class="stub">
      <span>${(e==null?void 0:e.slice(0,t<40?1:2))??""}</span>
      ${n?a`<span class="stub-loader"></span>`:""}
    </div>
  `}async function se(t,e=0){const n=di[e];if(!n)return null;try{return await(await n())(t)}catch{return await se(t,e+1)}}const Xe=(t,e,n)=>{for(const i of e)if(i[0]===t)return(0,i[1])();return n==null?void 0:n()};var fi=Object.defineProperty,mi=Object.getOwnPropertyDescriptor,Kt=(t,e,n,i)=>{for(var s=i>1?void 0:i?mi(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&fi(e,n,s),s},gi=f`:host{display:block}.container{position:relative;background-color:var(--color-background-bg-secondary);padding:2px;display:flex;align-items:center;cursor:pointer;user-select:none;outline:0;box-sizing:border-box;width:100%}.container-m{border-radius:10px;height:36px}.container-l{border-radius:12px;height:48px}.caret{position:absolute;background-color:var(--color-background-bg-active);height:32px;border-radius:8px;box-shadow:0 4px 12px 0 rgba(0,0,0,.12),0 1px 4px 0 rgba(0,0,0,.12);color:var(--primary);width:30px;z-index:0}.caret-transition{transition:transform .2s}`,wi=f`.item{box-sizing:border-box;display:flex;align-items:center;justify-items:center;padding:6px 16px;z-index:1;width:100%;font-size:16px;justify-content:center;text-wrap:nowrap;transition:color .2s,background-color .2s;color:var(--color-content-content-primary)}.select{color:var(--primary)}.item-input{user-select:none;outline:0;border:none;background-color:transparent}${O(f`.item{font-size:13px;padding:6px 12px}`)}`,pt=class extends ${constructor(){super(...arguments),this.size="m",this.items=[],this.itemRefList=[],this.caretRef=null}render(){const t={[`container-${this.size}`]:!0};return a`<div class="container ${Y(t)}">${de(this.items||[],e=>this.getItemView(e))}<div class="caret"></div></div>`}async firstUpdated(){var t;this.itemRefList=Array.from(this.renderRoot.querySelectorAll("div.item")),this.caretRef=this.renderRoot.querySelector(".caret"),await this.updateComplete,this.requestUpdate(),await new Promise(e=>setTimeout(e,60)),(t=this.caretRef)==null||t.classList.add("caret-transition"),this.requestUpdate(),et(this,[De.pipe(_(()=>this.updated())),un(this.parentElement).pipe(_(()=>this.updated()))])}updated(){if(!this.caretRef)return;let t=0,e=0;for(const n of this.itemRefList){if(n.classList.contains("select")){e=n.offsetWidth;break}t+=n.offsetWidth}this.caretRef.style.width=`${e}px`,this.caretRef.style.transform=`translateX(${t*(Bt()?-1:1)}px)`}getItemView(t){var i,s;const e={[`item-${this.size}`]:!0,select:t.value===((i=this.select)==null?void 0:i.value)};let n=a`${t.label}`;return t.template&&(n=t.template(t,t.value===((s=this.select)==null?void 0:s.value),this.caretRef)),a`<div @click="${o=>this.onSelect(t,o)}" class="item ${Y(e)}">${n}</div>`}onSelect(t,e){this.select=t,this.requestUpdate(),this.dispatchEvent(dn("change",t.value,e))}};pt.tagName="inch-segmented-control";pt.styles=[gi,wi];Kt([w({type:String})],pt.prototype,"size",2);Kt([w({type:Array,attribute:!1})],pt.prototype,"items",2);Kt([w({type:Object,attribute:!1})],pt.prototype,"select",2);pt=Kt([y(pt.tagName)],pt);var vi=Object.defineProperty,bi=Object.getOwnPropertyDescriptor,xi=(t,e,n,i)=>{for(var s=i>1?void 0:i?bi(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&vi(e,n,s),s},yi={sceneBackgroundColor:"var(--color-background-bg-primary)"},$i=t=>{const e={...yi,...t};return f`:host{display:flex;--scene-background-color:${ln(e.sceneBackgroundColor)}}.scene-container{min-height:50px;min-width:50px;position:relative;overflow:hidden;border-radius:16px;will-change:width,height,transform,filter}`},Ci=Be(Symbol("scene context")),Si=class{constructor(){this.animationInProgress=!1,this.animationInStart$=new Rt,this.animationInEnd$=new Rt,this.animationOutStart$=new Rt,this.animationOutEnd$=new Rt}get animationInStart(){return Nt(this.animationInStart$)}get animationInEnd(){return Nt(this.animationInEnd$)}get animationOutStart(){return Nt(this.animationOutStart$)}get animationOutEnd(){return Nt(this.animationOutEnd$)}animationInStartNext(){this.animationInProgress=!0,this.animationInStart$.next()}animationInEndNext(){this.animationInProgress=!1,this.animationInEnd$.next()}animationOutStartNext(){this.animationInProgress=!0,this.animationOutStart$.next()}animationOutEndNext(){this.animationInProgress=!1,this.animationOutEnd$.next()}},Ct=class extends ${constructor(){super(),this.context=new ze(this,{context:Ci}),this.context.setValue(new Si)}animationInStart(){this.context.value.animationInStartNext()}animationInEnd(){this.context.value.animationInEndNext()}animationOutStart(){this.context.value.animationOutStartNext()}animationOutEnd(){this.context.value.animationOutEndNext()}render(){return a`<slot></slot>`}};Ct.tagName="inch-scene-wrapper";Ct.styles=f`:host{background-color:var(--scene-background-color);will-change:transform;transform:translate3d(0,0,0);height:fit-content;box-sizing:border-box;position:relative;display:block}`;Ct=xi([y(Ct.tagName)],Ct);function ki(){const t={position:"absolute",top:"0",left:"0",bottom:"0",right:"0",zIndex:"9",backfaceVisibility:"hidden",height:Fe()?"110%":""},e={position:"",top:"",left:"",bottom:"",right:"",zIndex:"",transform:"",filter:"",backfaceVisibility:"",height:""},n={duration:500,easing:"cubic-bezier(.2, .8, .2, 1)"};return{preparation:async(i,s,o)=>{T(i,{...t,zIndex:"9",transform:o?"translate3d(0, 0, 0)":"translate3d(110%, 0, 0)"}),T(s,{...t,zIndex:"8",transform:o?"translate3d(-110%, 0, 0)":"translate3d(0, 0, 0)"})},transition:async(i,s,o)=>{await Promise.all([i.animate([{transform:o?"translate3d(0, 0, 0)":"translate3d(110%, 0, 0)"},{transform:o?"translate3d(110%, 0, 0)":"translate3d(0, 0, 0)"}],n),s.animate([{transform:o?"translate3d(-110%, 0, 0)":"translate3d(0, 0, 0)"},{transform:o?"translate3d(0, 0, 0)":"translate3d(-110%, 0, 0)"}],n).finished]),T(i,{...e}),T(s,{...e})}}}function Ii(){const t={position:"absolute",top:"0",left:"0",bottom:"0",right:"0",zIndex:"9",backfaceVisibility:"hidden",height:Fe()?"100%":""},e={position:"",top:"",left:"",bottom:"",right:"",zIndex:"",transform:"",filter:"",backfaceVisibility:"",willChange:"",height:""},n={duration:800,easing:"cubic-bezier(.2, .8, .2, 1)"};return{preparation:async(i,s,o)=>{T(i,{...t,zIndex:"9",transform:o?"translate3d(0, 0, 0)":"translate3d(100%, 0, 0)"}),T(s,{...t,zIndex:"8",willChange:"transform, filter",transform:o?"translate3d(-50%, 0, 0) scale(.9)":"translate3d(0, 0, 0) scale(1)",filter:o?"blur(3px)":"blur(0)"})},transition:async(i,s,o)=>{await Promise.all([i.animate([{transform:o?"translate3d(0, 0, 0)":"translate3d(105%, 0, 0)"},{transform:o?"translate3d(105%, 0, 0)":"translate3d(0, 0, 0)"}],n),s.animate([{transform:o?"translate3d(-50%, 0, 0) scale(.9)":"translate3d(0, 0, 0) scale(1)",filter:o?"blur(3px)":"blur(0)"},{transform:o?"translate3d(0, 0, 0) scale(1)":"translate3d(-50%, 0, 0) scale(.9)",filter:o?"blur(0)":"blur(3px)"}],n).finished]),T(i,{...e}),T(s,{...e})}}}function Ei(){return new Promise(t=>requestAnimationFrame(t))}var At,Je=(At=class{constructor(e,n,i=Ii()){this.rootSceneName=e,this.config=n,this.animation=i,this.sceneStack=[],this.sceneContainer=Ti(),this.transitionInProgress=!1}get activeScene(){return this.sceneStack[this.sceneStack.length-1]}render(e){if(this.transitionInProgress)return a`${this.sceneContainer}`;const n=!this.currentScenes;this.currentScenes=e;const i=this.getCurrentSceneName();if(!(this.config[i].lazyRender??!1)||n){const r=this.getScene(i);if(!r)throw new Error("Scene not exist");const l=this.buildSceneWrapper(r(),i);this.clearContainer(),this.sceneContainerAppendChild(l),this.applySceneConfigBySceneName(i)}return a`${this.sceneContainer}`}async nextTo(e){this.transitionInProgress||(await this.transition(e),this.sceneStack.push(e))}async back(){if(this.transitionInProgress)return;const e=this.sceneStack[this.sceneStack.length-2]??this.rootSceneName;await this.transition(e,!0),this.sceneStack.pop()}resetScene(){this.sceneStack=[]}getCurrentSceneName(){let e=this.rootSceneName;return this.sceneContainer.firstChild&&(e=this.sceneContainer.firstChild.id),e}getCurrentScene(){if(!this.currentScenes)return null;const e=this.getCurrentSceneName();return this.getScene(e)}async transition(e,n){this.transitionInProgress=!0;try{if(this.getCurrentSceneName()===e)return;const s=this.getScene(e);if(!s)throw new Error(`Scene ${e} not exist`);const o=this.buildSceneWrapper(s(),e),r=this.sceneContainer.firstChild,l=n?r:o,c=n?o:r;n?l.animationOutStart():l.animationInStart(),n?c.animationOutStart():c.animationInStart(),this.sceneContainerAppendChild(o),await Ei();const h=o.getBoundingClientRect(),p=r.getBoundingClientRect();await this.animation.preparation(l,c,n??!1),h.height>p.height&&this.applySceneConfigBySceneName(e),await Promise.all([this.animation.transition(l,c,n??!1),this.resizeContainer(h,p)]),h.height<p.height&&this.applySceneConfigBySceneName(e),T(this.sceneContainer,{width:"",height:""}),this.sceneContainer.firstChild&&this.sceneContainer.removeChild(this.sceneContainer.firstChild),n?l.animationOutEnd():l.animationInEnd(),n?c.animationOutEnd():c.animationInEnd()}finally{this.transitionInProgress=!1}}getScene(e){return this.currentScenes?this.currentScenes[e]??null:null}clearContainer(){for(;this.sceneContainer.firstChild;)this.sceneContainer.removeChild(this.sceneContainer.firstChild)}buildSceneWrapper(e,n){const i=document.createElement(Ct.tagName);return i.id=n,i.classList.add("scene-wrapper",n),cn(e,i),i}sceneContainerAppendChild(e){this.sceneContainer.appendChild(e)}applySceneConfigBySceneName(e){const n=this.config[e];this.applySceneSizes(n)}applySceneSizes(e){const n=i=>i?typeof i=="number"?`${i}px`:i:"";e.maxHeight&&(this.sceneContainer.maxHeight=parseInt(e.maxHeight.toString())),T(this.sceneContainer,{minWidth:n(e.minWidth),maxWidth:n(e.maxWidth)})}async resizeContainer(e,n){const i={height:`${n.height}px`,width:`${n.width}px`},s={height:`${e.height}px`,width:`${e.width}px`};T(this.sceneContainer,i),await this.sceneContainer.animate([i,s],{duration:500,easing:"cubic-bezier(.2, .8, .2, 1)"}).finished,T(this.sceneContainer,s)}},At.styles=$i,At);function Ti(){const t=document.createElement(gn.tagName);return t.id="scene-container",t.classList.add("scene-container"),t}fn({[Ee.en]:()=>q(()=>import("./en-ANTPJ7PG-CCYv60hu.js"),[]).then(t=>t.default),[Ee.ar]:()=>q(()=>import("./ar-EHVYY5BX-C_gxvB5t.js"),[]).then(t=>t.default)});var Ai=f`.swap-form-container{display:flex;flex-direction:column;gap:8px;height:fit-content;width:100%;min-width:300px}.input-container{width:100%;display:flex;flex-direction:column}.input-header{height:68px;padding:16px 0 16px 8px;box-sizing:border-box;color:var(--color-content-content-primary);font-size:20px;font-weight:600;line-height:28px;margin-top:-16px;letter-spacing:0;text-align:center;display:flex;align-items:center;justify-content:space-between}`,me={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},_i=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const t=this.past.pop();t&&this.now&&(this.future.push(this.now),this.updateElement(t,"historyUndo"))}redo(){const t=this.future.pop();t&&this.now&&(this.past.push(this.now),this.updateElement(t,"historyRedo"))}updateHistory(t){if(!this.now){this.now=t;return}const e=this.now.value!==t.value,n=this.now.selection.some((i,s)=>i!==t.selection[s]);!e&&!n||(e&&(this.past.push(this.now),this.future=[]),this.now=t)}updateElement(t,e){this.now=t,this.updateElementState(t,{inputType:e,data:null})}};function Pi(t,...e){return e.every(({value:n})=>n===t.value)}function Mi(t,...e){return e.every(({value:n,selection:i})=>n===t.value&&i[0]===t.selection[0]&&i[1]===t.selection[1])}function Ri({value:t,selection:e},n,i){const[s,o]=e,r=typeof i=="function"?i({value:t,selection:e}):i;return{value:t,selection:r==="replace"?[s,s+n.length]:[s,o]}}function Xt(t){return typeof t=="string"}function _e(t,e,n,i){let s="";for(let o=e.length;o<t.length;o++){const r=t[o],l=(i==null?void 0:i.value[o])===r;if(!Xt(r)||r===n&&!l)return s;s+=r}return s}function Qe(t,e){return Array.isArray(e)?t.length===e.length&&Array.from(t).every((n,i)=>{const s=e[i];return Xt(s)?n===s:n.match(s)}):e.test(t)}function Ni(t,e,n){let i=null,s=null;const o=Array.from(t.value).reduce((l,c,h)=>{const p=_e(e,l,c,n),u=l+p,m=e[u.length];return Xt(m)?u+m:c.match(m)?(i===null&&h>=t.selection[0]&&(i=u.length),s===null&&h>=t.selection[1]&&(s=u.length),u+c):u},""),r=_e(e,o,"",n);return{value:Qe(o+r,e)?o+r:o,selection:[i??o.length,s??o.length]}}function Oi({value:t,selection:e},n){const[i,s]=e;let o=i,r=s;return{value:Array.from(t).reduce((c,h,p)=>{const u=c+h;return i===p&&(o=c.length),s===p&&(r=c.length),u.match(n)?u:c},""),selection:[o,r]}}function Ft(t,e,n=null){if(Qe(t.value,e))return t;const{value:i,selection:s}=Array.isArray(e)?Ni(t,e,n):Oi(t,e);return{selection:s,value:Array.isArray(e)?i.slice(0,e.length):i}}function Pe(t,e){if(!Array.isArray(e))return t;const[n,i]=t.selection,s=[],o=Array.from(t.value).reduce((r,l,c)=>{const h=e[c];return c===n&&s.push(r.length),c===i&&s.push(r.length),Xt(h)&&h===l?r:r+l},"");return s.length<2&&s.push(...new Array(2-s.length).fill(o.length)),{value:o,selection:[s[0],s[1]]}}var oe=class{constructor(t,e){this.initialElementState=t,this.maskOptions=e,this.value="",this.selection=[0,0];const{value:n,selection:i}=Ft(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=n,this.selection=i}addCharacters([t,e],n){const{value:i}=this,s=this.getMaskExpression({value:i.slice(0,t)+n+i.slice(e),selection:[t+n.length,t+n.length]}),o={value:i,selection:[t,e]},r=Pe(o,s),[l,c]=Ri(r,n,this.maskOptions.overwriteMode).selection,h=r.value.slice(0,l)+n,p=h.length,u=Ft({value:h+r.value.slice(c),selection:[p,p]},s,o);if(i.slice(0,l)===Ft({value:h,selection:[p,p]},s,o).value||Mi(this,u))throw new Error("Invalid mask value");this.value=u.value,this.selection=u.selection}deleteCharacters([t,e]){if(t===e||!e)return;const{value:n}=this,i=this.getMaskExpression({value:n.slice(0,t)+n.slice(e),selection:[t,t]}),s={value:n,selection:[t,e]},o=Pe(s,i),[r,l]=o.selection,c=o.value.slice(0,r)+o.value.slice(l),h=Ft({value:c,selection:[r,r]},i,s);this.value=h.value,this.selection=h.selection}getMaskExpression(t){const{mask:e}=this.maskOptions;return typeof e=="function"?e(t):e}},Vi=class{constructor(t){this.element=t,this.listeners=[]}listen(t,e,n){const i=e;this.element.addEventListener(t,i,n),this.listeners.push(()=>this.element.removeEventListener(t,i))}destroy(){this.listeners.forEach(t=>t())}},W={CTRL:1,ALT:2,SHIFT:4,META:8},Vt={Y:89,Z:90};function zt(t,e,n){return t.ctrlKey===!!(e&W.CTRL)&&t.altKey===!!(e&W.ALT)&&t.shiftKey===!!(e&W.SHIFT)&&t.metaKey===!!(e&W.META)&&t.keyCode===n}function zi(t){return zt(t,W.CTRL,Vt.Y)||zt(t,W.CTRL|W.SHIFT,Vt.Z)||zt(t,W.META|W.SHIFT,Vt.Z)}function Li(t){return zt(t,W.CTRL,Vt.Z)||zt(t,W.META,Vt.Z)}function ge(t,e){var n;const i=t.value;if(typeof e=="string")t.value=e;else{const[s,o]=e.selection;t.value=e.value,t.matches(":focus")&&((n=t.setSelectionRange)===null||n===void 0||n.call(t,s,o))}t.value!==i&&t.dispatchEvent(new Event("input",{bubbles:!0}))}function Di({value:t,selection:e},n){const[i,s]=e;if(i!==s)return[i,s];const o=n?t.slice(i).indexOf(`
`)+1||t.length:t.slice(0,s).lastIndexOf(`
`)+1;return[n?i:o,n?o:s]}function Fi({value:t,selection:e},n){const[i,s]=e;return i!==s?[i,s]:(n?[i,s+1]:[i-1,s]).map(r=>Math.min(Math.max(r,0),t.length))}var Wi=/\s+$/g,Bi=/^\s+/g,Me=/\s/;function ji({value:t,selection:e},n){const[i,s]=e;if(i!==s)return[i,s];if(n){const c=t.slice(i),[h]=c.match(Bi)||[""],p=c.trimStart().search(Me);return[i,p!==-1?i+h.length+p:t.length]}const o=t.slice(0,s),[r]=o.match(Wi)||[""],l=o.trimEnd().split("").reverse().findIndex(c=>c.match(Me));return[l!==-1?s-r.length-l:0,s]}function qt(t=[]){return(e,...n)=>t.reduce((i,s)=>Object.assign(Object.assign({},i),s(i,...n)),e)}function we(t,e){const n=Object.assign(Object.assign({},me),e),i=qt(n.preprocessors),s=qt(n.postprocessors),o=typeof t=="string"?{value:t,selection:[0,0]}:t,{elementState:r}=i({elementState:o,data:""},"validation"),l=new oe(r,n),{value:c,selection:h}=s(l,o);return typeof t=="string"?c:{value:c,selection:h}}var ve=class extends _i{constructor(t,e){super(),this.element=t,this.maskitoOptions=e,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new Vi(this.element),this.options=Object.assign(Object.assign({},me),this.maskitoOptions),this.preprocessor=qt(this.options.preprocessors),this.postprocessor=qt(this.options.postprocessors),this.teardowns=this.options.plugins.map(n=>n(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",n=>{if(zi(n))return n.preventDefault(),this.redo();if(Li(n))return n.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",n=>{var i;const s=n.inputType.includes("Forward");switch(this.updateHistory(this.elementState),n.inputType){case"historyUndo":return n.preventDefault(),this.undo();case"historyRedo":return n.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:n,isForward:s,selection:Fi(this.elementState,s)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:n,isForward:s,selection:ji(this.elementState,s),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:n,isForward:s,selection:Di(this.elementState,s),force:!0});case"insertCompositionText":return;case"insertReplacementText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(n);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(n,n.data||((i=n.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"))||"")}}),this.eventListener.listen("input",({inputType:n})=>{n!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:t,selectionStart:e,selectionEnd:n}=this.element;return{value:t,selection:[e||0,n||0]}}get maxLength(){const{maxLength:t}=this.element;return t===-1?1/0:t}destroy(){this.eventListener.destroy(),this.teardowns.forEach(t=>t==null?void 0:t())}updateElementState({value:t,selection:e},n={inputType:"insertText",data:null}){const i=this.elementState.value;this.updateValue(t),this.updateSelectionRange(e),i!==t&&this.dispatchInputEvent(n)}updateSelectionRange([t,e]){var n;const{element:i}=this;i.matches(":focus")&&(i.selectionStart!==t||i.selectionEnd!==e)&&((n=i.setSelectionRange)===null||n===void 0||n.call(i,t,e))}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(we(this.elementState,this.options))}dispatchInputEvent(t={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:!0,cancelable:!1})))}handleDelete({event:t,selection:e,isForward:n,force:i=!1}){const s={value:this.elementState.value,selection:e},[o,r]=s.selection,{elementState:l}=this.preprocessor({elementState:s,data:""},n?"deleteForward":"deleteBackward"),c=new oe(l,this.options),[h,p]=l.selection;c.deleteCharacters([h,p]);const u=this.postprocessor(c,s);if(!(s.value.slice(0,o)+s.value.slice(r)===u.value&&!i&&!this.element.isContentEditable)){if(t.preventDefault(),Pi(s,l,c,u))return this.updateSelectionRange(n?[p,p]:[h,h]);this.updateElementState(u,{inputType:t.inputType,data:null}),this.updateHistory(u)}}handleInsert(t,e){const n=this.elementState,{elementState:i,data:s=e}=this.preprocessor({data:e,elementState:n},"insert"),o=new oe(i,this.options);try{o.addCharacters(i.selection,s)}catch{return t.preventDefault()}const[r,l]=i.selection,c=n.value.slice(0,r)+e+n.value.slice(l),h=this.postprocessor(o,n);if(h.value.length>this.maxLength)return t.preventDefault();(c!==h.value||this.element.isContentEditable)&&(t.preventDefault(),this.updateElementState(h,{data:e,inputType:t.inputType}),this.updateHistory(h))}handleEnter(t){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(t,`
`)}};function Yt(t,e,n){const i=Math.min(Number(n),Math.max(Number(e),Number(t)));return t instanceof Date?new Date(i):i}var Hi=[".",",","б","ю"],Ui=[":","."],qi=" ",Yi="​",tn="–",en="—",Gt="-",re="−",nn="ー",sn=/[\\^$.*+?()[\]{}|]/g,Gi=new RegExp(sn.source);function R(t){return t&&Gi.test(t)?t.replaceAll(sn,"\\$&"):t}function j(t,{prefix:e,postfix:n}){var i,s;const o=new RegExp(`^${R(e)}`),r=new RegExp(`${R(n)}$`),[l=""]=(i=t.match(o))!==null&&i!==void 0?i:[],[c=""]=(s=t.match(r))!==null&&s!==void 0?s:[],h=t.replace(o,"").replace(r,"");return{extractedPrefix:l,extractedPostfix:c,cleanValue:h}}function Zi(t,e){let n="";for(let i=0;i<t.length;i++){if(t[i]!==e[i])return n;n+=t[i]}return n}function Dt(t){return t}function Re(t){return t.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function Ki(){return({elementState:t,data:e})=>{const{value:n,selection:i}=t;return{elementState:{selection:i,value:Re(n)},data:Re(e)}}}function Xi(t){const e=new RegExp(`${R(t)}$`);return t?({value:n,selection:i},s)=>{if(!n&&!s.value.endsWith(t))return{value:n,selection:i};if(!n.endsWith(t)&&!s.value.endsWith(t))return{selection:i,value:n+t};const o=s.value.replace(e,""),r=s.selection[1]>=o.length,l=Zi(o,n);return{selection:i,value:Array.from(t).reverse().reduce((c,h,p)=>{const u=c.length-1-p,m=l[u]===h&&r;return c[u]!==h||m?c.slice(0,u+1)+h+c.slice(u+1):c},n)}}:Dt}function Ji(t){return t?({value:e,selection:n},i)=>{if(e.startsWith(t)||!e&&!i.value.startsWith(t))return{value:e,selection:n};const[s,o]=n,r=Array.from(t).reduce((c,h,p)=>c[p]===h?c:c.slice(0,p)+h+c.slice(p),e),l=r.length-e.length;return{selection:[s+l,o+l],value:r}}:Dt}function be(t,e,n){return(i,s)=>{const o=()=>e(i,s);return i.addEventListener(t,o,n),()=>i.removeEventListener(t,o,n)}}new RegExp(`[${Ui.map(R).join("")}]$`);function Qi({prefix:t,postfix:e}){return({elementState:n,data:i})=>{const{cleanValue:s}=j(i,{prefix:t,postfix:e});return{elementState:n,data:s}}}function on({decimalSeparator:t,isNegativeAllowed:e,precision:n,thousandSeparator:i,prefix:s,postfix:o,decimalPseudoSeparators:r=[],pseudoMinuses:l=[],minusSign:c}){const h=Ne(s),p="\\d",u=e?`[${c}${l.map(V=>`\\${V}`).join("")}]?`:"",m=i?`[${p}${R(i).replaceAll(/\s/g,"\\s")}]*`:`[${p}]*`,C=n>0?`([${R(t)}${r.map(R).join("")}]${p}{0,${Number.isFinite(n)?n:""}})?`:"",k=Ne(o);return new RegExp(`^${h}${u}${m}${C}${k}$`)}function Ne(t){return t?`${t.split("").map(e=>`${R(e)}?`).join("")}`:""}function xe(t,e="."){const n=!!t.match(new RegExp(`^\\D*[${re}\\${Gt}${tn}${en}${nn}]`)),i=R(e),s=t.replaceAll(new RegExp(`${i}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${i}]`,"g"),"").replace(e,".");return s?Number((n?Gt:"")+s):NaN}function ts(t){const e=String(t),[n,i]=e.split("e-");let s=e;if(i){const[,o]=n.split("."),r=Number(i)+((o==null?void 0:o.length)||0);s=t.toFixed(r)}return s}function rn(t,{decimalSeparator:e,thousandSeparator:n}){const[i="",s=""]=t.split(e),[,o="",r=""]=i.match(new RegExp(`([^\\d${R(n)}]+)?(.*)`))||[];return{minus:o,integerPart:r,decimalPart:s}}function es({decimalSeparator:t,thousandSeparator:e,decimalPseudoSeparators:n=Hi}){return n.filter(i=>i!==e&&i!==t)}function ns({decimalSeparator:t,precision:e,decimalZeroPadding:n,prefix:i,postfix:s}){return e<=0||!n?Dt:({value:o,selection:r})=>{const{cleanValue:l,extractedPrefix:c,extractedPostfix:h}=j(o,{prefix:i,postfix:s});if(Number.isNaN(xe(l,t)))return{value:o,selection:r};const[p,u=""]=l.split(t);return{value:c+p+t+u.padEnd(e,"0")+h,selection:r}}}function is({prefix:t,postfix:e,decimalSeparator:n,thousandSeparator:i}){return({value:s,selection:o})=>{const[r]=o,{cleanValue:l,extractedPrefix:c,extractedPostfix:h}=j(s,{prefix:t,postfix:e}),{minus:p,integerPart:u,decimalPart:m}=rn(l,{decimalSeparator:n,thousandSeparator:i}),C=!u&&!m&&l.includes(n);return!u&&!Number(m)&&r===(p+c).length||C?{selection:o,value:c+p+h}:{value:s,selection:o}}}function ss({decimalSeparator:t,decimalPseudoSeparators:e,pseudoMinuses:n,prefix:i,postfix:s,minusSign:o}){let r=!0;const l=on({decimalSeparator:t,decimalPseudoSeparators:e,pseudoMinuses:n,prefix:"",postfix:"",thousandSeparator:"",precision:1/0,isNegativeAllowed:!0,minusSign:o});return({elementState:c,data:h})=>{if(!r)return{elementState:c,data:h};r=!1;const{value:p,selection:u}=c,[m,C]=u,{extractedPrefix:k,cleanValue:V,extractedPostfix:nt}=j(p,{prefix:i,postfix:s}),xt=we({selection:[Math.max(m-k.length,0),Yt(C-k.length,0,V.length)],value:V},{mask:l}),[H,it]=xt.selection;return{elementState:{selection:[H+k.length,it+k.length],value:k+xt.value+nt},data:h}}}function os({decimalSeparator:t,thousandSeparator:e,prefix:n,postfix:i}){const s=r=>{const l=R(e);return r.replace(new RegExp(`^(\\D+)?[0${l}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${l}]+(?=[1-9])`),"$1")},o=(r,l)=>{const c=r.slice(0,l),h=r.slice(l).startsWith("0");return c.length-s(c).length+(h?1:0)};return({value:r,selection:l})=>{const[c,h]=l,{cleanValue:p,extractedPrefix:u,extractedPostfix:m}=j(r,{prefix:n,postfix:i}),C=p.includes(t),[k,V=""]=p.split(t),nt=s(k);if(k===nt)return{value:r,selection:l};const xt=c-o(r,c),H=h-o(r,h);return{value:u+nt+(C?t:"")+V+m,selection:[Math.max(xt,0),Math.max(H,0)]}}}function rs({min:t,max:e,decimalSeparator:n,minusSign:i}){return({value:s,selection:o})=>{const r=xe(s,n),l=r>0?Math.min(r,e):Math.max(r,t);if(r&&l!==r){const c=`${l}`.replace(".",n).replace(Gt,i);return{value:c,selection:[c.length,c.length]}}return{value:s,selection:o}}}function as({decimalSeparator:t,thousandSeparator:e,decimalZeroPadding:n}){return({elementState:i,data:s},o)=>{const{value:r,selection:l}=i,[c,h]=l,p=r.slice(c,h),u=n?[t,e]:[e],m=n&&c>r.indexOf(t)&&!!p.match(/^0+$/gi);return o!=="deleteBackward"&&o!=="deleteForward"||!u.includes(p)&&!m?{elementState:i,data:s}:{elementState:{value:r,selection:o==="deleteForward"?[h,h]:[c,c]},data:s}}}function cs({decimalSeparator:t,precision:e,prefix:n,postfix:i}){const s=new RegExp(`^\\D*${R(t)}`);return({elementState:o,data:r})=>{const{value:l,selection:c}=o,{cleanValue:h,extractedPrefix:p}=j(l,{prefix:n,postfix:i}),[u,m]=c,C=Yt(u-p.length,0,h.length),k=Yt(m-p.length,0,h.length);if(e<=0||h.slice(0,C).includes(t)||h.slice(k).includes(t)||!r.match(s))return{elementState:o,data:r};const V=h.slice(0,C).match(/\d+/);return{elementState:o,data:V?r:`0${r}`}}}function Oe({validCharacter:t,pseudoCharacters:e,prefix:n,postfix:i}){const s=new RegExp(`[${e.join("")}]`,"gi");return({elementState:o,data:r})=>{const{value:l,selection:c}=o,{cleanValue:h,extractedPostfix:p,extractedPrefix:u}=j(l,{prefix:n,postfix:i});return{elementState:{selection:c,value:u+h.replace(s,t)+p},data:r.replace(s,t)}}}function ls({decimalSeparator:t,prefix:e,postfix:n}){return({elementState:i,data:s})=>{const{value:o,selection:r}=i,[l,c]=r,{cleanValue:h}=j(o,{prefix:e,postfix:n});return{elementState:i,data:!h.includes(t)||o.slice(l,c+1).includes(t)?s:s.replaceAll(new RegExp(R(t),"gi"),"")}}}function hs({thousandSeparator:t,decimalSeparator:e,prefix:n,postfix:i}){if(!t)return Dt;const s=(...o)=>o.every(r=>/\s/.test(r));return({value:o,selection:r})=>{const{cleanValue:l,extractedPostfix:c,extractedPrefix:h}=j(o,{prefix:n,postfix:i}),{minus:p,integerPart:u,decimalPart:m}=rn(l,{decimalSeparator:e,thousandSeparator:t}),[C,k]=r;let[V,nt]=r;const xt=Array.from(u).reduceRight((H,it,wt)=>{const Jt=!(!wt&&it===t)&&H.length&&(H.length+1)%4===0;return Jt&&(it===t||s(it,t))?t+H:it===t&&!Jt?(wt&&wt<=C&&V--,wt&&wt<=k&&nt--,H):Jt?(wt<=C&&V++,wt<=k&&nt++,it+t+H):it+H},"");return{value:h+p+xt+(l.includes(e)?e:"")+m+c,selection:[V,nt]}}}function ps({precision:t,decimalSeparator:e,prefix:n,postfix:i}){if(t>0)return Dt;const s=new RegExp(`${R(e)}.*$`,"g");return({elementState:o,data:r})=>{const{value:l,selection:c}=o,{cleanValue:h,extractedPrefix:p,extractedPostfix:u}=j(l,{prefix:n,postfix:i}),[m,C]=c,k=p+h.replace(s,"")+u;return{elementState:{selection:[Math.min(m,k.length),Math.min(C,k.length)],value:k},data:r.replace(s,"")}}}var Ve=[0,0];function us({decimalSeparator:t,thousandSeparator:e,prefix:n,postfix:i}){const s=os({decimalSeparator:t,thousandSeparator:e,prefix:n,postfix:i});return be("blur",o=>{const r=s({value:o.value,selection:Ve},{value:"",selection:Ve}).value;ge(o,r)},{capture:!0})}function ds({min:t,max:e,decimalSeparator:n}){return be("blur",(i,s)=>{const o=xe(i.value,n),r=Yt(o,t,e);!Number.isNaN(o)&&o!==r&&ge(i,we(ts(r),s))},{capture:!0})}function fs({decimalSeparator:t,prefix:e,postfix:n}){return be("blur",i=>{const{cleanValue:s,extractedPostfix:o,extractedPrefix:r}=j(i.value,{prefix:e,postfix:n}),l=r+s.replace(new RegExp(`^(\\D+)?${R(t)}`),`$10${t}`)+o;ge(i,l)},{capture:!0})}function ye({max:t=Number.MAX_SAFE_INTEGER,min:e=Number.MIN_SAFE_INTEGER,precision:n=0,thousandSeparator:i=qi,decimalSeparator:s=".",decimalPseudoSeparators:o,decimalZeroPadding:r=!1,prefix:l="",postfix:c="",minusSign:h=re}={}){const p=[Gt,tn,en,nn,re].filter(C=>C!==i&&C!==s&&C!==h),u=es({decimalSeparator:s,thousandSeparator:i,decimalPseudoSeparators:o}),m=l.endsWith(s)&&n>0?`${l}${Yi}`:l;return Object.assign(Object.assign({},me),{mask:on({decimalSeparator:s,precision:n,thousandSeparator:i,prefix:m,postfix:c,isNegativeAllowed:e<0,minusSign:h}),preprocessors:[Ki(),ss({decimalSeparator:s,decimalPseudoSeparators:u,pseudoMinuses:p,prefix:m,postfix:c,minusSign:h}),Qi({prefix:m,postfix:c}),Oe({validCharacter:h,pseudoCharacters:p,prefix:m,postfix:c}),Oe({validCharacter:s,pseudoCharacters:u,prefix:m,postfix:c}),cs({decimalSeparator:s,precision:n,prefix:m,postfix:c}),as({decimalSeparator:s,decimalZeroPadding:r,thousandSeparator:i}),ps({precision:n,decimalSeparator:s,prefix:m,postfix:c}),ls({decimalSeparator:s,prefix:m,postfix:c})],postprocessors:[rs({decimalSeparator:s,min:e,max:t,minusSign:h}),Ji(m),Xi(c),hs({decimalSeparator:s,thousandSeparator:i,prefix:m,postfix:c}),ns({decimalSeparator:s,decimalZeroPadding:r,precision:n,prefix:m,postfix:c}),is({prefix:m,postfix:c,decimalSeparator:s,thousandSeparator:i})],plugins:[us({decimalSeparator:s,thousandSeparator:i,prefix:m,postfix:c}),fs({decimalSeparator:s,prefix:m,postfix:c}),ds({min:e,max:t,decimalSeparator:s})],overwriteMode:r?({value:C,selection:[k]})=>k<=C.indexOf(s)?"shift":"replace":"shift"})}var ms=f`:host{font-size:16px;font-weight:400;line-height:24px;letter-spacing:0;text-align:right;width:fit-content;color:var(--color-content-content-secondary)}${O(f`:host{font-size:13px}`)}`,ut=class extends ${constructor(){super(...arguments),this.balance$=b(()=>{if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return mt([this.context.connectedWalletAddress$,this.context.getTokenByType(this.tokenType),this.context.chainId$,this.context.chainId$.pipe(L(t=>t?he(t):[]),U(null))])}).pipe(_t(([t])=>!!t),L(([t,e,n])=>!t||!e||!n?[a`<br>`]:this.applicationContext.tokenController.liveQuery(()=>this.applicationContext.tokenController.getTokenBalance(n,e.address,t)).pipe(_t(Boolean),A(i=>ce(z(BigInt(i.amount),e.decimals),6)),A(i=>this.getBalanceView(i)),ue(()=>[a`<br>`]))))}render(){return a`${E(this.balance$,a`<br>`)}`}getBalanceView(t){return a`<span>${x("widgets.swap-form.input.balance.balance")}: ${t}</span>`}};ut.tagName="inch-swap-balance";ut.styles=ms;d([w({type:String,attribute:!0})],ut.prototype,"tokenType",2);d([S({context:Q})],ut.prototype,"context",2);d([S({context:F})],ut.prototype,"applicationContext",2);ut=d([y(ut.tagName)],ut);var gs=f`:host{font-size:16px;font-weight:400;line-height:24px;letter-spacing:0;text-align:right;color:var(--color-content-content-secondary);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}${O(f`:host{font-size:13px}`)}`,dt=class extends ${constructor(){super(...arguments),this.balance$=b(()=>{if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return mt([this.context.connectedWalletAddress$,this.context.getTokenByType(this.tokenType),this.context.chainId$])}).pipe(_t(([t])=>!!t),L(([t,e,n])=>!t||!e||!n?[a`<br>`]:mt([this.applicationContext.tokenController.liveQuery(()=>this.applicationContext.tokenController.getTokenUSDPrice(n,e.address)),this.context.getTokenRawAmountByType(this.tokenType)]).pipe(A(([i,s])=>{if(!s)return a`<br>`;const o=z(BigInt(s),e.decimals),r=Number(o)*Number(i);return this.getBalanceView(bt(r.toString(),1))}),ue(()=>[a`<br>`]))))}render(){return a`${E(this.balance$,a`<br>`)}`}getBalanceView(t){return a`<span>~$${t}</span>`}};dt.tagName="inch-fiat-balance";dt.styles=gs;d([w({type:String,attribute:!0})],dt.prototype,"tokenType",2);d([S({context:Q})],dt.prototype,"context",2);d([S({context:F})],dt.prototype,"applicationContext",2);dt=d([y(dt.tagName)],dt);var ws=f`.input-container{height:128px;border-radius:16px;background-color:var(--color-background-bg-secondary);transition:box-shadow .2s;padding:16px;box-sizing:border-box;display:grid;grid-template-columns:minmax(40%,auto) minmax(auto,70%);justify-content:space-between}.input-container.disabled{background-color:var(--color-background-bg-primary);border:1px solid var(--color-border-border-tertiary)}.flex-container{display:flex;flex-direction:column;justify-content:space-between;height:100%}.input-title{font-size:16px;font-weight:500;line-height:24px;letter-spacing:0;text-align:left;color:var(--color-content-content-secondary);width:fit-content}.symbol-container{border:none;background-color:transparent;display:flex;align-items:center;gap:8px;cursor:pointer;color:var(--color-content-content-primary);border-radius:16px;padding:8px;margin-left:-8px;transition:background-color .2s;outline:0;user-select:none;width:fit-content;-webkit-tap-highlight-color:transparent}.symbol{font-size:24px;font-weight:600;line-height:32px;letter-spacing:0;text-align:left;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.token-name{font-size:16px;font-weight:400;line-height:24px;letter-spacing:0;text-align:left;color:var(--color-content-content-secondary);font-style:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.token-name:dir(rtl){text-align:right}.amount-input{height:48px;padding:0;color:var(--color-content-content-primary);box-sizing:border-box;font-size:24px;font-weight:600;line-height:32px;letter-spacing:0;text-align:right;border:none;background-color:transparent;outline:0;user-select:none;width:100%}.input-rtl{text-align:left}.amount-input[type=number]::-webkit-inner-spin-button,.amount-input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.amount-input[type=number]{-moz-appearance:textfield}.amount-input:disabled{opacity:1;color:var(--color-content-content-primary)}.balance-amount-fiat{align-items:flex-end}.focus:not(.disabled){box-shadow:0 0 0 1px var(--color-background-bg-positive-hover)}.balance-and-max{display:flex;gap:8px;align-items:center}.loading{will-change:opacity;animation:stub-loader-animation 2s ease-in-out infinite}.input-rtl{text-align:end}@keyframes stub-loader-animation{0%,100%{opacity:1}50%{opacity:.5}}@media (hover:hover){.input-container:not(.disabled):hover{box-shadow:inset 0 0 0 1px var(--color-background-bg-positive-hover)}.symbol-container:hover{background-color:var(--color-background-bg-positive-hover)}}${O(f`.amount-input{height:40px}.amount-input,.symbol{font-size:20px}.input-title,.token-name{font-size:13px}.input-container{height:116px}.symbol-container{padding:4px 8px}`)}.symbol-container:active{transform:scale(.98);background-color:var(--color-background-bg-positive-hover)}.select-token-text{word-wrap:break-word;white-space:nowrap}`,B=class extends ${constructor(){super(...arguments),this.disabled=!1,this.isFocus=!1,this.connectedAddress=null,this.setMaxInProgress=!1,this.token=null,this.token$=b(()=>this.getTokenEventEmitter()).pipe(Zt({bufferSize:1,refCount:!0})),this.chainId$=b(()=>this.getChainEventEmitter()),this.connectedAddress$=b(()=>this.getConnectedWalletAddress()),this.amount$=b(()=>this.getTokenAmountStream()),this.loading$=b(()=>this.getLoadingStream()),this.loaderView$=b(()=>this.loading$.pipe(A(t=>this.tokenType==="source"?a`${this.input}`:t?a`<span class="loader"></span>`:a`${this.input}`),U(a`${this.input}`))),this.input=document.createElement("input"),this.maskedInput=this.buildMask(6),this.tokenView$=this.token$.pipe(A(t=>t?this.tokenView(t):this.selectTokenView()))}connectedCallback(){super.connectedCallback(),this.input.classList.add("amount-input"),this.input.inputMode="decimal",this.input.autocomplete="off",this.input.placeholder=this.tokenType==="source"?"0":"",this.input.onfocus=()=>this.onFocus(),this.input.onblur=()=>this.onBlur(),this.input.oninput=i=>this.onInput(i);const t=this.token$.pipe(_(i=>{i&&(this.maskedInput.destroy(),this.maskedInput=this.buildMask(i.decimals))})),e=this.loading$.pipe(L(i=>this.tokenType==="source"?Wt(void 0):i&&!this.input.classList.contains("loading")?(this.input.classList.add("loading"),Wt(void 0)):!i&&this.input.classList.contains("loading")?Mn(this.input.animate([{},{opacity:1}],{duration:2e3}).finished.then(()=>{this.input.classList.remove("loading")})):Wt(void 0))),n=mt([this.amount$,this.token$]).pipe(A(([i,s])=>!i||!s?"0":z(i,s.decimals)),_t((i,s)=>s===0&&i==="0"?!1:i!==this.input.value),_(i=>this.input.value=ce(i,6)));et(this,[t,n,e,this.token$.pipe(_(i=>this.token=i)),this.connectedAddress$.pipe(_(i=>this.connectedAddress=i))],{requestUpdate:!1}),et(this,[De])}disconnectedCallback(){super.disconnectedCallback(),this.maskedInput.destroy()}render(){const t={disabled:this.disabled,focus:this.isFocus};return this.input.disabled=this.tokenType==="destination",this.updateInputRtl(),a`<div class="input-container ${Y(t)}"><div class="flex-container symbol-title-name"><div class="input-title">${Xe(this.tokenType,[["source",()=>a`${x("widgets.swap-form.input.title.you_pay")}`],["destination",()=>a`${x("widgets.swap-form.input.title.you_receive")}`]])}</div>${E(this.tokenView$)}</div><div class="flex-container balance-amount-fiat"><div class="balance-and-max"><inch-swap-balance tokenType="${tt(this.tokenType)}"></inch-swap-balance>${g(this.connectedAddress&&this.token&&this.tokenType==="source",()=>a`<inch-button @click="${async()=>{var e;this.setMaxInProgress=!0,await((e=this.context)==null?void 0:e.setMaxAmount()),this.setMaxInProgress=!1}}" type="secondary" size="xs" loader="${tt(this.setMaxInProgress?"":void 0)}">MAX</inch-button>`)}</div>${this.input}<inch-fiat-balance tokenType="${tt(this.tokenType)}"></inch-fiat-balance></div></div>`}selectTokenView(){return a`<inch-button disabledSlotPointerEvent type="secondary" size="l" @click="${t=>I(this,"openTokenSelector",this.tokenType,t)}"><span class="select-token-text">Select token</span><inch-icon icon="chevronDown16"></inch-icon></inch-button><br>`}onFocus(){this.isFocus=!0,I(this,"focusTokenInput",this.tokenType)}onBlur(){this.isFocus=!1,I(this,"blurTokenInput",this.tokenType)}tokenView(t){const{name:e,symbol:n,address:i}=t;return a`<button @click="${s=>I(this,"openTokenSelector",this.tokenType,s)}" class="symbol-container"><inch-token-icon symbol="${n}" address="${i}" chainId="${E(this.chainId$)}"></inch-token-icon><span class="symbol">${n}</span><inch-icon icon="chevronDown16"></inch-icon></button><div class="token-name">${e}</div>`}updateInputRtl(){Bt()&&!this.input.classList.contains("input-rtl")&&this.input.classList.add("input-rtl"),!Bt()&&this.input.classList.contains("input-rtl")&&this.input.classList.remove("input-rtl")}getTokenEventEmitter(){if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return this.context.getTokenByType(this.tokenType)}getTokenAmountStream(){if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return this.context.getTokenAmountByType(this.tokenType)}getLoadingStream(){if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return this.context.loading$}getChainEventEmitter(){if(!this.context)throw new Error("");return this.context.chainId$}getConnectedWalletAddress(){if(!this.context)throw new Error("");return this.context.connectedWalletAddress$}onInput(t){var o;if(!this.tokenType)return;const e=t.target,n=(e==null?void 0:e.value)??"",i=this.token;if(!i)return;const s=ie(n.replaceAll(" ",""),i.decimals);(o=this.context)==null||o.setTokenAmountByType(this.tokenType,s)}buildMask(t){return new ve(this.input,ye({precision:t,max:9*10**15,min:0}))}};B.tagName="inch-swap-form-input";B.styles=ws;d([w({type:Boolean,attribute:!0,reflect:!0})],B.prototype,"disabled",2);d([w({type:String,attribute:!0,reflect:!0})],B.prototype,"tokenType",2);d([P()],B.prototype,"isFocus",2);d([P()],B.prototype,"connectedAddress",2);d([P()],B.prototype,"setMaxInProgress",2);d([S({context:Q})],B.prototype,"context",2);B=d([y(B.tagName)],B);var vs=f`:host{height:4px;position:relative;outline:0;user-select:none;display:flex;align-items:center;justify-content:center;-webkit-tap-highlight-color:transparent}.switcher{position:absolute;border-radius:50%;border:none;background-color:var(--color-background-bg-primary);color:var(--color-content-content-primary);box-shadow:0 4px 12px 0 rgba(0,0,0,.12),0 1px 4px 0 rgba(0,0,0,.12);width:32px;height:32px;display:flex;justify-content:center;align-items:center;top:-13px;cursor:pointer;will-change:transform}.switcher:disabled{cursor:not-allowed;pointer-events:none;color:var(--color-content-content-disabled);box-shadow:0 4px 12px 0 rgba(0,0,0,.12),0 1px 4px 0 rgba(0,0,0,.12)}@media (hover:hover){.switcher:not(:disabled):hover{color:var(--color-content-content-secondary)}}`,St=class extends ${constructor(){super(...arguments),this.iconRef=Ce(),this.buttonRef=Ce(),this.mobileMedia=Pt(),this.isUp=!1,this.isDisabled$=b(()=>{if(!this.context)throw new Error("");return mt([this.context.getTokenByType("source"),this.context.getTokenByType("destination")])}).pipe(A(([t,e])=>!t||!e))}firstUpdated(){if(this.buttonRef.value&&!this.mobileMedia.matches){const t={duration:200,easing:"cubic-bezier(.1, .3, .6, 1)"};et(this,[Ut(this.buttonRef.value,"mouseenter").pipe(L(async()=>{!this.iconRef.value||this.isUp||(this.isUp=!0,await this.iconRef.value.animate([{transform:"rotate(0deg)"},{transform:"rotate(180deg)"}],t).finished,T(this.iconRef.value,{transform:"rotate(180deg)"}))})),Ut(this.buttonRef.value,"mouseleave").pipe(L(async()=>{!this.iconRef.value||!this.isUp||(this.isUp=!1,await this.iconRef.value.animate([{transform:"rotate(180deg)"},{transform:"rotate(360deg)"}],t).finished,T(this.iconRef.value,{transform:""}))}))])}}render(){return a`<button ${Se(this.buttonRef)} @click="${()=>this.onClick()}" ?disabled="${E(this.isDisabled$,!1)}" class="switcher"><inch-icon ${Se(this.iconRef)} class="switcher-icon" icon="arrowDown24"></inch-icon></button>`}async onClick(){var e;if(!this.iconRef.value||!this.isUp&&!this.mobileMedia.matches)return;(e=this.context)==null||e.switchPair();const t={duration:200,easing:"cubic-bezier(.1, .3, .6, 1)"};this.mobileMedia.matches||(await this.iconRef.value.animate([{transform:"rotate(180deg)"},{transform:"rotate(360deg)"}],t).finished,T(this.iconRef.value,{transform:""}),this.isUp=!1)}};St.tagName="inch-token-pair-switch";St.styles=vs;d([S({context:Q})],St.prototype,"context",2);St=d([y(St.tagName)],St);var bs=f`:host{height:57px}${O(f`:host{height:44px}`)}.smart-hover{position:relative;overflow:hidden}.off-hover,.on-hover{position:absolute;transition:transform .2s}.on-hover{transform:translateY(-200%)}.rainbow{--button-text-color-ext:#ffffff;--button-text-color-ext-hover:#ffffff;position:relative}.rainbow:after,.rainbow:before{content:'';position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0;background:${On()};background-size:1000%;animation:bg-rainbow 300s cubic-bezier(.4,0,1,1) infinite;z-index:-1}@keyframes bg-rainbow{0%{border-radius:24px;background-position:0 0}50%{border-radius:24px;background-size:800%;background-position:400% 0}100%{border-radius:24px;background-position:0 0}}@media (hover:hover){.smart-hover:hover .on-hover{transform:translateY(0)}.smart-hover:hover .off-hover{transform:translateY(200%)}}@media (hover:none){.smart-hover .on-hover{transform:translateY(0)}.smart-hover .off-hover{transform:translateY(200%)}}`,xs=[1,9,13,14],D=class extends ${constructor(){super(...arguments),this.isRainbowTheme=!1,this.buttonState=Te.get("fusion_swap_button_state",Ln)??0,this.chainId=null,this.srcToken=null,this.mobileMedia=J(this),this.connectedWalletAddress$=b(()=>this.getConnectedWalletAddress()),this.sourceToken$=b(()=>this.getSourceToken()),this.destinationToken$=b(()=>this.getDestinationToken()),this.chainId$=b(()=>this.getChainId()),this.sourceTokenAmount$=b(()=>this.getSourceTokenAmount()),this.rate$=b(()=>this.getRate()),this.block$=this.chainId$.pipe(L(t=>t?he(t):[])),this.updateView$=new Rt,this.exceedingMaximumAmount$=mt([this.connectedWalletAddress$,this.sourceToken$,this.sourceTokenAmount$.pipe(U(0n)),vn(this.chainId$,this.block$).pipe(U(null))]).pipe(L(([t,e,n])=>!t||!e||n===0n||!this.context?Wt(!1):this.context.getMaxAmount().then(i=>i===0n?!0:!n||n>i)),Zt({bufferSize:1,refCount:!0})),this.calculateStatus$=mt([this.connectedWalletAddress$,this.sourceToken$,this.destinationToken$,this.exceedingMaximumAmount$,this.sourceTokenAmount$.pipe(U(0n)),this.chainId$,this.rate$.pipe(U(null)),this.block$.pipe(U(null)),this.updateView$.pipe(U(null))]).pipe(A(t=>{const[e,n,i,s,o,r,l]=t;return this.chainId=r,this.srcToken=n,yn(r)?e===null?3:n===null?4:i===null?5:!o||o===0n?6:s?7:l===null?8:le(n.address)?12:0:2}),jt(),Ue(0),Ge(this.chainId$,this.connectedWalletAddress$,this.sourceToken$),L(async([t,e,n,i])=>{if(t!==0)return t;if(!e||!n||!i)throw new Error("");this.buttonState=9;const s=$n(e),o=await Cn(e,i.address,n,s),r=await Nt(this.sourceTokenAmount$);return r&&o<r?Sn(e)?await kn(e,i.address,n,s)?t:11:10:t}),_(t=>{this.buttonState=t,Te.set("fusion_swap_button_state",this.buttonState)}))}connectedCallback(){super.connectedCallback(),et(this,[Vn().pipe(A(({brandColor:t})=>t),jt(),_(t=>this.isRainbowTheme=t===Rn.rainbow)),this.sourceToken$.pipe(_(t=>this.srcToken=t)),this.calculateStatus$]),this.updateView$.next()}render(){const t=this.mobileMedia.matches?"xl":"xxl";return a`<inch-button class="smart-hover" @click="${e=>this.onClickSwapButton(e)}" type="${this.getButtonType()}" size="${t}" loader="${tt(this.getLoaderState())}" fullSize>${g(this.buttonState===2,()=>a`<span class="off-hover">Chain ${this.chainId} not supported</span> <span class="on-hover">Change chain</span><br>`)} ${g(this.buttonState===0,()=>a`<span>${x("widgets.swap-form.swap-button.confirm-swap")}</span>`)} ${g(this.buttonState===1,()=>a`<span>${x("widgets.swap-form.swap-button.confirm-swap")}</span>`)} ${g(this.buttonState===9,()=>a`<span>${x("widgets.swap-form.swap-button.check-allowance")}</span>`)} ${g(this.buttonState===12,()=>a`<span>${x("widgets.swap-form.swap-button.native-token-not-supported")}</span>`)} ${g(this.buttonState===10,()=>a`<span>${x("widgets.swap-form.swap-button.approve-and-swap")}</span>`)} ${g(this.buttonState===11,()=>a`<span>${x("widgets.swap-form.swap-button.permit-and-swap")}</span>`)} ${g(this.buttonState===3,()=>a`<span>${x("widgets.swap-form.swap-button.connect-wallet")}</span>`)} ${g(this.buttonState===4,()=>a`<span>${x("widgets.swap-form.swap-button.select-source-token")}</span>`)} ${g(this.buttonState===5,()=>a`<span>${x("widgets.swap-form.swap-button.select-destination-token")}</span>`)} ${g(this.buttonState===6,()=>a`<span>${x("widgets.swap-form.swap-button.enter-amount-to-swap")}</span>`)} ${g(this.buttonState===8,()=>a`<span>${x("widgets.swap-form.swap-button.no-liquidity-for-swap")}</span>`)} ${g(this.buttonState===7,()=>{var e,n;return a`<span class="off-hover">${x("widgets.swap-form.swap-button.insufficient-balance",{symbol:(e=this.srcToken)==null?void 0:e.symbol})}</span> <span class="on-hover">${x("widgets.swap-form.swap-button.set-max",{symbol:(n=this.srcToken)==null?void 0:n.symbol})}</span><br>`})} ${g(this.buttonState===13,()=>a`<span class="off-hover">${x("widgets.swap-form.swap-button.wait-wallet-response")}</span> <span class="on-hover">${x("widgets.swap-form.swap-button.permit-swap-in-wallet")}</span><br>`)} ${g(this.buttonState===14,()=>a`<span class="off-hover">${x("widgets.swap-form.swap-button.wait-wallet-response")}</span> <span class="on-hover">${x("widgets.swap-form.swap-button.allow-swap-in-wallet")}</span><br>`)}</inch-button>`}async onClickSwapButton(t){if(!this.context)throw new Error("");const e=this.buttonState;try{if(this.buttonState===2)return I(this,"changeChain",null);if(this.buttonState===3)return I(this,"connectWallet",null);if(this.buttonState===4)return I(this,"openTokenSelector","source",t);if(this.buttonState===5)return I(this,"openTokenSelector","destination",t);if(this.buttonState===7)return await this.context.setMaxAmount();if(this.buttonState===10&&(this.buttonState=14,await this.context.getApprove(),this.buttonState=0),this.buttonState===11&&(this.buttonState=13,await this.context.getPermit(),this.buttonState=0),this.buttonState===12&&await this.applicationContext.notificationsController.warning(a`${x("widgets.swap-form.swap-button.native-token-not-supported")}`),this.buttonState===0){this.buttonState=1;const n=await this.context.getSnapshot();n&&I(this,"confirmSwap",n,t),this.buttonState=0,this.updateView$.next()}}catch{this.buttonState=e}}getButtonType(){return this.buttonState===0||this.buttonState===10||this.buttonState===11?"primary":"secondary"}getLoaderState(){if(xs.includes(this.buttonState))return!0}async onSwap(){}getConnectedWalletAddress(){if(!this.context)throw new Error("");return this.context.connectedWalletAddress$}getChainId(){if(!this.context)throw new Error("");return this.context.chainId$}getSourceToken(){if(!this.context)throw new Error("");return this.context.getTokenByType("source")}getDestinationToken(){if(!this.context)throw new Error("");return this.context.getTokenByType("destination")}getSourceTokenAmount(){if(!this.context)throw new Error("");return this.context.getTokenRawAmountByType("source")}getRate(){if(!this.context)throw new Error("");return this.context.rate$}};D.tagName="inch-swap-button";D.styles=bs;d([S({context:Q})],D.prototype,"context",2);d([S({context:F})],D.prototype,"applicationContext",2);d([P()],D.prototype,"isRainbowTheme",2);d([P()],D.prototype,"buttonState",2);d([P()],D.prototype,"chainId",2);d([P()],D.prototype,"srcToken",2);d([pe()],D.prototype,"onClickSwapButton",1);D=d([y(D.tagName)],D);var ys=f`:host{display:flex;flex-direction:column}`,$s=f`.slippage-title{display:flex;padding:8px;gap:8px;color:var(--color-content-content-primary);align-items:center;margin-bottom:8px;cursor:pointer;font-size:16px}.back-icon{transform:rotate(90deg)}${O(f`.slippage-title{font-size:13px}`)}`,kt=class extends ${constructor(){super(...arguments),this.mobileMedia=J(this),this.segmentsCustom={label:"Custom",value:"custom",template:()=>a`${this.customSlippageInput}`},this.segments=[{label:"Auto",value:"auto"},{label:"0.1%",value:.1},{label:"0.5%",value:.5},{label:"1%",value:1},this.segmentsCustom],this.postfix="%",this.customSlippageInput=document.createElement("input")}connectedCallback(){var t;super.connectedCallback(),this.buildMask(),(t=this.settings)==null||t.startChangingValue(),this.customSlippageInput.placeholder="Custom %",this.customSlippageInput.inputMode="decimal",this.customSlippageInput.autocomplete="off",T(this.customSlippageInput,{backgroundColor:"transparent",border:"none",outline:"none",padding:"0",color:"var(--color-content-content-primary)",width:"80px",fontSize:"16px",textAlign:"center"}),et(this,[Ut(this.customSlippageInput,"input").pipe(_(()=>{var n;this.customSlippageInput.value.length===1&&(this.customSlippageInput.value="");const e=parseFloat(this.customSlippageInput.value.replace(this.postfix,""));(n=this.settings)==null||n.setValue([e,"custom"])}))],{requestUpdate:!1})}render(){return T(this.customSlippageInput,{fontSize:this.mobileMedia.matches?"13px":"16px"}),a`<div @click="${()=>this.onBack()}" class="slippage-title"><inch-icon class="back-icon" icon="chevronDown16"></inch-icon><span>${x("widgets.swap-form.fusion-info.slippage-tolerance")}</span></div><inch-segmented-control .items="${this.segments}" .select="${this.getStartSection()}" @change="${t=>this.onChange(t)}"></inch-segmented-control>`}buildMask(){return new ve(this.customSlippageInput,ye({max:99,min:1,precision:2,postfix:this.postfix}))}onBack(){var e,n,i;const t=((e=this.settings)==null?void 0:e.value)??null;t&&t[1]==="custom"&&(t[0]===null||isNaN(t[0]))&&((n=this.settings)==null||n.resetValue()),(i=this.settings)==null||i.endChangingValue(),I(this,"back",null)}onChange({detail:t}){var n,i,s;const e=t.value;if(e==="auto"){(n=this.settings)==null||n.cleanValue();return}if(e==="custom"){const o=parseFloat(this.customSlippageInput.value.replace(this.postfix,""));(i=this.settings)==null||i.setValue([o,"custom"]);return}(s=this.settings)==null||s.setValue([t.value,"preset"])}getStartSection(){if(!this.settings||this.settings.value===null)return this.segments[0];const[t,e]=this.settings.value;if(e==="custom")return isNaN(parseFloat(t))?this.segments[0]:(this.customSlippageInput.value=`${t}%`,this.segmentsCustom);if(e==="preset"){const n=this.segments.find(i=>i.value===t);return n||this.segments[0]}throw new Error("Invalid slippage type")}};kt.tagName="inch-fusion-swap-info-slippage";kt.styles=$s;d([w({type:Object})],kt.prototype,"settings",2);kt=d([y(kt.tagName)],kt);var Cs=f`.slippage-title{display:flex;padding:8px;gap:8px;color:var(--color-content-content-primary);align-items:center;margin-bottom:8px;cursor:pointer;font-size:16px}.back-icon{transform:rotate(90deg)}${O(f`.slippage-title{font-size:13px}`)}`,It=class extends ${constructor(){super(...arguments),this.mobileMedia=J(this),this.segmentsCustom={label:"Custom",value:"custom",template:()=>a`${this.customAuctionTimeInput}`},this.segments=[{label:"Auto",value:"auto"},{label:"3m",value:60*3},{label:"5m",value:60*5},{label:"10m",value:60*10},{label:"30m",value:60*30},this.mobileMedia.matches?null:{label:"1H",value:60*60},this.mobileMedia.matches?null:{label:"2H",value:60*60*2},this.segmentsCustom].filter(Boolean),this.postfix="s",this.customAuctionTimeInput=document.createElement("input")}connectedCallback(){var t;super.connectedCallback(),this.buildMask(),(t=this.settings)==null||t.startChangingValue(),this.customAuctionTimeInput.placeholder="Custom s",this.customAuctionTimeInput.inputMode="decimal",this.customAuctionTimeInput.autocomplete="off",T(this.customAuctionTimeInput,{backgroundColor:"transparent",border:"none",outline:"none",padding:"0",color:"var(--color-content-content-primary)",width:"80px",fontSize:"16px",textAlign:"center"}),et(this,[Ut(this.customAuctionTimeInput,"input").pipe(_(()=>{var n;this.customAuctionTimeInput.value.length===1&&(this.customAuctionTimeInput.value="");const e=this.getValue();(n=this.settings)==null||n.setValue([e,"custom"])}))],{requestUpdate:!1})}render(){return T(this.customAuctionTimeInput,{fontSize:this.mobileMedia.matches?"13px":"16px"}),a`<div @click="${()=>this.onBack()}" class="slippage-title"><inch-icon class="back-icon" icon="chevronDown16"></inch-icon><span>Auction time</span></div><inch-segmented-control .items="${this.segments}" .select="${this.getStartSection()}" @change="${t=>this.onChange(t)}"></inch-segmented-control>`}buildMask(){return new ve(this.customAuctionTimeInput,ye({max:60*60*30,min:60*3,postfix:this.postfix}))}onBack(){var e,n,i;const t=((e=this.settings)==null?void 0:e.value)??null;t&&t[1]==="custom"&&(t[0]===null||isNaN(t[0]))&&((n=this.settings)==null||n.resetValue()),(i=this.settings)==null||i.endChangingValue(),I(this,"back",null)}onChange({detail:t}){var n,i,s;const e=t.value;if(e==="auto"){(n=this.settings)==null||n.cleanValue();return}if(e==="custom"){const o=this.getValue();(i=this.settings)==null||i.setValue([o,"custom"]);return}(s=this.settings)==null||s.setValue([t.value,"preset"])}getStartSection(){if(!this.settings||this.settings.value===null)return this.segments[0];const[t,e]=this.settings.value;if(e==="custom")return isNaN(parseFloat(t))?this.segments[0]:(this.customAuctionTimeInput.value=`${t}s`,this.segmentsCustom);if(e==="preset"){const n=this.segments.find(i=>i.value===t);return n||this.segments[0]}throw new Error("Invalid auction time type")}getValue(){const t=this.customAuctionTimeInput.value.replaceAll(" ","").replace(this.postfix,"");return parseInt(t,10)}};It.tagName="inch-fusion-swap-info-auction-time";It.styles=Cs;d([w({type:Object})],It.prototype,"settings",2);It=d([y(It.tagName)],It);var Ss=f`:host{--font-size:16px}.container{height:56px;padding:16px;box-sizing:border-box;transition:height .2s,background-color .2s;display:grid;grid-template-columns:1fr auto;align-items:flex-start;justify-content:space-between;border-radius:16px;color:var(--color-content-content-primary);cursor:pointer}.open{height:236px;grid-template-rows:min-content 1fr;grid-row-gap:16px;cursor:auto}.icon{transition:transform .2s;will-change:transform}.open-icon{transform:rotate(180deg)}.fusion-info{display:flex;align-items:center;gap:4px}.fusion-icon{display:flex;align-items:center;gap:4px;color:var(--primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px;transition:opacity .2s,transform .2s;will-change:opacity}.fusion-icon-open{opacity:0;transform:translate3d(20px,0,0)}.fusion-icon-open:dir(rtl){transform:translate3d(-20px,0,0)}.rate-container{width:100%;display:flex;align-content:flex-start}.rate-view{font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.rate-view:dir(rtl){direction:ltr}.rate-loader{background-color:var(--color-background-bg-secondary);height:24px;width:50%;border-radius:8px;will-change:filter;transition:background-color .2s;animation:stub-loader-animation 3s ease-in-out infinite}@keyframes stub-loader-animation{0%,100%{filter:opacity(1)}50%{filter:opacity(.5)}}.dst-token-rate-usd-price{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px;margin-left:4px}.content-container{display:flex;grid-row-start:2;grid-row-end:3;height:100%;grid-column-start:1;grid-column-end:3;flex-direction:column;visibility:hidden;transform:translate3d(0,-15px,0);transition:transform .2s,opacity .2s}.open .content-container{visibility:visible;transform:translate3d(0,0,0)}.content-row{height:40px;padding:8px 0;box-sizing:border-box;display:flex;align-items:center;justify-content:space-between}.row-slippage{color:var(--primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:500;line-height:24px;cursor:pointer;transition:color .2s}.row-title{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.row-content{display:flex;align-items:center;gap:4px;color:var(--primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px;transition:opacity .2s,transform .2s;will-change:opacity}.min-receive{color:var(--color-content-content-primary)}@media (hover:hover){.container:not(.open):hover{background-color:var(--color-background-bg-secondary)}.container:not(.open):hover .rate-loader{background-color:var(--color-background-bg-positive-hover)}.row-slippage:hover{color:var(--primary-hover)}}${O(f`:host{--font-size:13px}.container{padding:16px 8px}.open{grid-row-gap:0;height:180px}.content-row{height:30px}`)}`,ft=class extends ${constructor(){super(...arguments),this.isOpen=!1,this.rate$=b(()=>this.getContext().rate$),this.minReceive$=b(()=>this.getContext().minReceive$),this.chainId$=b(()=>this.getContext().chainId$),this.destinationToken$=b(()=>this.getContext().getTokenByType("destination")),this.slippage$=b(()=>this.getContext().slippage$).pipe(A(t=>a`${t.value===null?"":a`<span>${t.value}% ·</span>`} <span>${g(t.type==="auto",()=>"Auto")} ${g(t.type==="custom",()=>"Custom")} ${g(t.type==="preset",()=>"Manual")}</span>`)),this.auctionTime$=b(()=>this.getContext().auctionTime$).pipe(A(t=>a`${t.value===null?"":a`<span>${He(t.value)} ·</span>`} <span>${g(t.type==="auto",()=>"Auto")} ${g(t.type==="custom",()=>"Custom")} ${g(t.type==="preset",()=>"Manual")}</span>`)),this.rateView$=this.rate$.pipe(Ue(0),jt(ks),L(async t=>{if(t===null)return this.getLoadRateView();const{chainId:e,rate:n,revertedRate:i,sourceToken:s,destinationToken:o}=t,r=await this.applicationContext.tokenController.getPriorityToken(e,[s.address,o.address]),l=Ht(r,s)?o:s,h=Ht(r,s)?i:n,p=bt(z(h,l.decimals),2),u=await this.applicationContext.tokenController.getTokenUSDPrice(e,l.address),m=ie(u,l.decimals),C=bt(z(m,l.decimals),2);return a`<span class="rate-view">1 ${Ye(l)} = ${p} ${r.symbol} <span class="dst-token-rate-usd-price">~$${C}</span></span>`}),U(this.getLoadRateView()),Zt({bufferSize:1,refCount:!0})),this.minReceiveView$=this.minReceive$.pipe(Ge(this.destinationToken$,this.chainId$),L(async([t,e,n])=>{if(!e||!n)return a``;const i=await this.applicationContext.tokenController.getTokenUSDPrice(n,e.address),s=ie(i,e.decimals),o=En.mul(t,s,e.decimals,e.decimals),r=ke(z(o,e.decimals),2);return a`<span>~$${r}</span> <span class="min-receive">${ke(z(t,e.decimals),6)} ${e.symbol}</span>`}))}connectedCallback(){super.connectedCallback(),I(this,"changeFusionInfoOpenState",this.isOpen)}disconnectedCallback(){super.disconnectedCallback(),I(this,"changeFusionInfoOpenState",!1)}render(){const t={container:!0,open:this.isOpen},e={icon:!0,"open-icon":this.isOpen},n={"fusion-icon":!0,"fusion-icon-open":this.isOpen};return a`<div class="${Y(t)}" @click="${()=>{this.isOpen||(this.isOpen=!0,I(this,"changeFusionInfoOpenState",this.isOpen))}}"><div class="rate-container">${E(this.rateView$)}</div><div class="fusion-info"><div class="${Y(n)}"><inch-icon icon="fusion16"></inch-icon><span>Free</span></div><inch-button @click="${i=>this.onChangeOpen(i)}" size="l" type="tertiary"><inch-icon class="${Y(e)}" icon="chevronDown16"></inch-icon></inch-button></div><div class="content-container"><div class="content-row"><span class="row-title">${x("widgets.swap-form.fusion-info.slippage-tolerance")}</span><div @click="${()=>I(this,"openSlippageSettings",null)}" class="row-content row-slippage">${E(this.slippage$)}</div></div><div class="content-row"><span class="row-title">${x("widgets.swap-form.fusion-info.auction-time")}</span><div @click="${()=>I(this,"openAuctionTimeSettings",null)}" class="row-content row-slippage">${E(this.auctionTime$)}</div></div><div class="content-row"><span class="row-title">${x("widgets.swap-form.fusion-info.min-receive")}</span><div class="row-content">${E(this.minReceiveView$)}</div></div><div class="content-row"><span class="row-title">${x("widgets.swap-form.fusion-info.net-fee")}</span><div class="row-content"><inch-icon icon="fusion16"></inch-icon><span>Free</span></div></div></div></div>`}getLoadRateView(){return a`<div class="rate-loader"></div>`}onChangeOpen(t){t.preventDefault(),t.stopPropagation(),this.isOpen=!this.isOpen,I(this,"changeFusionInfoOpenState",this.isOpen)}getContext(){if(!this.context)throw new Error("");return this.context}};ft.tagName="inch-fusion-swap-info-main";ft.styles=Ss;d([w({type:Boolean})],ft.prototype,"isOpen",2);d([S({context:Q})],ft.prototype,"context",2);d([S({context:F})],ft.prototype,"applicationContext",2);ft=d([y(ft.tagName)],ft);function ks(t,e){return t===null||e===null?!1:Tn(t,e)}var Et=class extends ${constructor(){super(...arguments),this.isOpenFusionInfo=!1,this.scene=new Je("main",{main:{lazyRender:!0,minHeight:178},slippage:{minHeight:79.5},auctionTime:{minHeight:79.5}},ki())}render(){return this.scene.render({main:()=>a`<inch-fusion-swap-info-main .isOpen="${this.isOpenFusionInfo}" @openSlippageSettings="${()=>this.scene.nextTo("slippage")}" @openAuctionTimeSettings="${()=>this.scene.nextTo("auctionTime")}"></inch-fusion-swap-info-main>`,slippage:()=>{var t;return a`<inch-fusion-swap-info-slippage .settings="${(t=this.context)==null?void 0:t.getSettingsController("slippage")}" @back="${()=>{this.isOpenFusionInfo=!0,this.scene.back()}}"></inch-fusion-swap-info-slippage>`},auctionTime:()=>{var t;return a`<inch-fusion-swap-info-auction-time .settings="${(t=this.context)==null?void 0:t.getSettingsController("auctionTime")}" @back="${()=>{this.isOpenFusionInfo=!0,this.scene.back()}}"></inch-fusion-swap-info-auction-time>`}})}};Et.tagName="inch-fusion-swap-info";Et.styles=[ys,Je.styles()];d([S({context:Q})],Et.prototype,"context",2);Et=d([y(Et.tagName)],Et);var K=class extends ${constructor(){super(...arguments),this.fusionView$=mt([b(()=>this.getWalletController().data.activeAddress$),b(()=>this.swapContext.getTokenByType("source")),b(()=>this.swapContext.getTokenByType("destination"))]).pipe(A(([t,e,n])=>!t||!e||!n),U(K.lastFusionRenderIsEmptyState),jt(),A(t=>(K.lastFusionRenderIsEmptyState=t,t?a``:a`<inch-fusion-swap-info></inch-fusion-swap-info>`)))}render(){if(this.swapContext)return a`<div class="swap-form-container"><inch-card-header headerText="${x("widgets.swap-form.header.swap")}" headerTextPosition="left"><slot name="header" slot="right-container"></slot></inch-card-header><div class="input-container"><inch-swap-form-input tokenType="source"></inch-swap-form-input><inch-token-pair-switch></inch-token-pair-switch><inch-swap-form-input disabled="disabled" tokenType="destination"></inch-swap-form-input></div>${E(this.fusionView$)}<inch-swap-button></inch-swap-button></div>`}getWalletController(){if(!this.applicationContext.connectWalletController)throw new Error("");return this.applicationContext.connectWalletController}};K.tagName="inch-swap-form";K.styles=Ai;K.lastFusionRenderIsEmptyState=!0;d([S({context:F})],K.prototype,"applicationContext",2);d([S({context:Q,subscribe:!0})],K.prototype,"swapContext",2);K=d([y(K.tagName)],K);var Is=f`:host{--font-size:16px}.confirm-swap-view{display:flex;flex-direction:column;gap:8px}.token-view-container{background-color:var(--color-background-bg-secondary);border-radius:16px;padding:16px}.token-view{display:flex;flex-direction:column;gap:8px}.token-view-row{display:flex;justify-content:space-between;align-items:center}.token-view-top{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.primary-text{color:var(--color-content-content-primary);font-size:24px;font-style:normal;font-weight:600;line-height:32px}.symbol-view{display:flex;align-items:center;gap:8px}.separator{position:relative;color:var(--color-content-content-primary)}.separator-arrow-container{border-radius:50%;background-color:var(--color-background-bg-primary);width:32px;height:32px;margin-left:auto;margin-right:auto;position:relative;display:flex;justify-content:center;align-items:center;z-index:2}.separator-arrow-container-loader:before{content:"";position:absolute;width:100%;height:100%;border:1px solid transparent;border-radius:50%;border-bottom-color:var(--primary);border-top-color:var(--primary);animation:spin 2s linear infinite}.detail-info{padding:8px 0}.detail-info-row{padding:8px 16px;display:flex;justify-content:space-between}.detail-info-row-title{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.detail-info-raw-value{color:var(--color-content-content-primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:500;line-height:24px;transition:color .2s;display:flex;gap:8px;align-items:center}.detail-info-raw-settings-value{color:var(--primary)}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.separator-view{position:absolute;background-color:var(--color-background-bg-primary);height:2px;width:100%;border-radius:2px;top:50%;z-index:1}${O(f`:host{--font-size:13px}.primary-text{font-size:20px}.detail-info-row{padding:4px 8px}.token-view{gap:4px}.separator-arrow-container{width:28px;height:28px}.token-view-container{padding:8px 16px}`)}`,X=class extends ${constructor(){super(...arguments),this.state=null,this.swapInProgress=!1,this.fiatAmountMap=new Map,this.mobileMedia=J(this)}get needWrap(){return le(this.swapSnapshot.sourceToken.address)}render(){const t=this.mobileMedia.matches?"xl":"xxl";return a`<div class="confirm-swap-view"><inch-card-header backButton headerTextPosition="center" headerText="Confirm swap" headerTextPosition="left"></inch-card-header>${this.getTokenViewContainer()} ${this.getDetailInfo()}<inch-button loader="${tt(this.swapInProgress?"":void 0)}" @click="${()=>this.onSwap()}" fullSize size="${t}" type="${this.swapInProgress?"secondary":"primary"}">${g(this.swapInProgress,()=>a`<span>Confirm swap in wallet</span>`,()=>a`<span>Swap</span>`)}</inch-button></div>`}async onSwap(){var t;if(!this.swapInProgress){try{this.swapInProgress=!0,await((t=this.swapContext)==null?void 0:t.fusionSwap(this.swapSnapshot)),I(this,"backCard",null)}catch(e){const n=Es(e);await this.applicationContext.notificationsController.error(a`${x(n)}`),console.error(e)}this.swapInProgress=!1}}getTokenViewContainer(){return a`<div class="token-view-container">${this.getTokenView(this.swapSnapshot.sourceToken,this.swapSnapshot.sourceTokenAmount,"source")} ${this.getSeparatorView(this.needWrap?"wrap":"swap")} ${this.getTokenWrapView()} ${this.getTokenView(this.swapSnapshot.destinationToken,this.swapSnapshot.destinationTokenAmount,"destination")}</div>`}getDetailInfo(){return a`<div class="detail-info">${this.getDetailInfoRow("Price",a`${te(this.getRateView())}`)} ${this.getDetailInfoRow("Slippage tolerance",this.getSlippageView())} ${this.getDetailInfoRow("Auction time",this.getAuctionTimeView())} ${this.getDetailInfoRow("Minimum receive",this.getMinReceive())} ${this.getDetailInfoRow("Network Fee",a`<div class="detail-info-raw-value detail-info-raw-settings-value"><inch-icon icon="fusion16"></inch-icon><span>Free</span></div>`)}</div>`}async getRateView(){const{chainId:t,rate:e,revertedRate:n,sourceToken:i,destinationToken:s}=this.swapSnapshot.rate,o=await this.applicationContext.tokenController.getPriorityToken(t,[i.address,s.address]),r=Ht(o,i)?s:i,c=Ht(o,i)?n:e,h=bt(z(c,r.decimals),2);return a`<div class="detail-info-raw-value"><span class="rate-view">1 ${Ye(r)} = ${h} ${o.symbol}</span></div>`}getSlippageView(){const t=this.swapSnapshot.slippage;return a`<div class="detail-info-raw-value detail-info-raw-settings-value">${t.value===null?"":a`<span>${t.value}% ·</span>`} <span>${g(t.type==="auto",()=>"Auto")} ${g(t.type==="custom",()=>"Custom")} ${g(t.type==="preset",()=>"Manual")}</span></div>`}getAuctionTimeView(){const t=this.swapSnapshot.auctionTime;return a`<div class="detail-info-raw-value detail-info-raw-settings-value">${t.value===null?"":a`<span>${He(t.value)} ·</span>`} <span>${g(t.type==="auto",()=>"Auto")} ${g(t.type==="custom",()=>"Custom")} ${g(t.type==="preset",()=>"Manual")}</span></div>`}getMinReceive(){const t=z(this.swapSnapshot.minReceive,this.swapSnapshot.destinationToken.decimals);return a`<div class="detail-info-raw-value">${bt(t,6)} ${this.swapSnapshot.destinationToken.symbol}</div>`}getDetailInfoRow(t,e){return a`<div class="detail-info-row"><span class="detail-info-row-title">${t}</span> <span>${e}</span></div>`}getTokenView(t,e,n){const i=z(e,t.decimals);return a`<div class="token-view"><div class="token-view-row token-view-top"><span>${Xe(n,[["source",()=>a`You pay`],["wrap",()=>a`You wrap`],["destination",()=>a`You receive`]])} </span><span>${E(this.getFiatAmountStream(t,e))}</span></div><div class="token-view-row"><div class="symbol-view"><inch-token-icon chainId="${this.swapSnapshot.chainId}" symbol="${t.symbol}" address="${t.address}"></inch-token-icon><span class="primary-text">${t.symbol}</span></div><span class="primary-text">${bt(i,6)}</span></div></div>`}getTokenWrapView(){return this.needWrap?a`${this.getTokenView(qe(this.swapSnapshot.chainId),this.swapSnapshot.sourceTokenAmount,"wrap")} ${this.getSeparatorView("swap")}`:a``}getSeparatorView(t){return a`<div class="separator"><div class="separator-view"></div><div class="separator-arrow-container ${this.state===t&&this.needWrap?"separator-arrow-container-loader":""}"><inch-icon icon="arrowDown24"></inch-icon></div></div>`}getFiatAmountStream(t,e){if(this.fiatAmountMap.has(t.address))return this.fiatAmountMap.get(t.address);const n=he(this.swapSnapshot.chainId).pipe(L(async()=>{const i=await this.applicationContext.tokenController.getTokenUSDPrice(this.swapSnapshot.chainId,t.address),s=z(e,t.decimals),o=Number(s)*Number(i);return`~$${bt(o.toString(),2)}`}),Zt({bufferSize:1,refCount:!0}));return this.fiatAmountMap.set(t.address,n),n}};X.tagName="inch-confirm-swap";X.styles=Is;d([w({type:Object})],X.prototype,"swapSnapshot",2);d([S({context:F})],X.prototype,"applicationContext",2);d([S({context:Q,subscribe:!0}),w({type:Object,attribute:!1})],X.prototype,"swapContext",2);d([P()],X.prototype,"state",2);d([P()],X.prototype,"swapInProgress",2);X=d([y(X.tagName)],X);function Es(t){return t instanceof In?"widgets.swap-form.swap-button.wallet-rejected":"widgets.swap-form.swap-button.swap-error-message"}var Ts=Object.defineProperty,As=Object.getOwnPropertyDescriptor,$e=(t,e,n,i)=>{for(var s=i>1?void 0:i?As(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&Ts(e,n,s),s};let Tt=class extends ${constructor(){super(...arguments),this.mobileMedia=J(this)}async connectedCallback(){await this.preloadForm(Pt().matches),super.connectedCallback(),this.swapContext=await this.applicationContext.makeSwapContext(),this.requestUpdate(),this.preloadForm(!this.mobileMedia.matches).catch(console.error)}disconnectedCallback(){super.disconnectedCallback(),this.swapContext.destroy()}render(){if(this.swapContext)return this.mobileMedia.matches?a`<inch-swap-form-mobile></inch-swap-form-mobile>`:a`<inch-swap-form-desktop></inch-swap-form-desktop>`}async preloadForm(t){t?await q(()=>import("./swap-form-mobile.element-CRZEa7GX.js"),__vite__mapDeps([23,1,8,9,3,2,4,5,6,7,10,11,12,13,17,15,14,16,18,24])):await q(()=>import("./swap-form-desktop.element-CnUROHx0.js"),__vite__mapDeps([25,1,8,9,3,2,4,5,6,7,10,11,12,13,17,15,14,16,18,24]))}};Tt.tagName="inch-swap-form-container";$e([hn({context:Q})],Tt.prototype,"swapContext",2);$e([S({context:F})],Tt.prototype,"applicationContext",2);Tt=$e([y(Tt.tagName)],Tt);var _s=Object.defineProperty,Ps=Object.getOwnPropertyDescriptor,an=(t,e,n,i)=>{for(var s=i>1?void 0:i?Ps(e,n):e,o=t.length-1,r;o>=0;o--)(r=t[o])&&(s=(i?r(e,n,s):r(s))||s);return i&&s&&_s(e,n,s),s};let Lt=class extends ${render(){return a`<inch-header></inch-header><div id="outlet" class="content"><inch-swap-form-container></inch-swap-form-container></div><inch-footer></inch-footer>`}};Lt.styles=[Dn,zn];an([S({context:F})],Lt.prototype,"applicationContext",2);Lt=an([y("app-root")],Lt);const Gs=Object.freeze(Object.defineProperty({__proto__:null,get AppElement(){return Lt}},Symbol.toStringTag,{value:"Module"}));export{Je as S,Ci as a,Gs as b,Ys as i,ki as s};
//# sourceMappingURL=app.element-B77M36Br.js.map
