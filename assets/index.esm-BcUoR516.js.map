{"version":3,"file":"index.esm-BcUoR516.js","sources":["../../../libs/core/decorators/index.esm.js"],"sourcesContent":["// libs/core/src/lib/decorators/cache-active-promise.ts\nfunction CacheActivePromise(keyExtractor) {\n  const cacheStorage = /* @__PURE__ */ new WeakMap();\n  const getCache = (ctx) => {\n    let cache = cacheStorage.get(ctx);\n    if (!cache) {\n      cache = /* @__PURE__ */ new Map();\n      cacheStorage.set(ctx, cache);\n    }\n    return cache;\n  };\n  return function(_, fieldName, propertyDescriptor) {\n    const method = propertyDescriptor.value;\n    propertyDescriptor.value = function(...args) {\n      const cache = getCache(this);\n      const key = keyExtractor ? keyExtractor(...[this, ...args]) : JSON.stringify(args, stringifyReplacer);\n      if (cache.has(key)) {\n        return cache.get(key);\n      }\n      const result = method.apply(this, args).finally(() => cache.delete(key));\n      cache.set(key, result);\n      return result;\n    };\n    return propertyDescriptor;\n  };\n}\nfunction stringifyReplacer(_, value) {\n  if (typeof value === \"bigint\") {\n    return value.toString();\n  }\n  return value;\n}\nexport {\n  CacheActivePromise\n};\n//# sourceMappingURL=index.esm.js.map\n"],"names":["CacheActivePromise","keyExtractor","cacheStorage","getCache","ctx","cache","_","fieldName","propertyDescriptor","method","args","key","stringifyReplacer","result","value"],"mappings":"AACA,SAASA,EAAmBC,EAAc,CACxC,MAAMC,EAA+B,IAAI,QACnCC,EAAYC,GAAQ,CACxB,IAAIC,EAAQH,EAAa,IAAIE,CAAG,EAChC,OAAKC,IACHA,EAAwB,IAAI,IAC5BH,EAAa,IAAIE,EAAKC,CAAK,GAEtBA,CACX,EACE,OAAO,SAASC,EAAGC,EAAWC,EAAoB,CAChD,MAAMC,EAASD,EAAmB,MAClC,OAAAA,EAAmB,MAAQ,YAAYE,EAAM,CAC3C,MAAML,EAAQF,EAAS,IAAI,EACrBQ,EAAMV,EAAeA,EAAiB,KAAM,GAAGS,CAAK,EAAI,KAAK,UAAUA,EAAME,CAAiB,EACpG,GAAIP,EAAM,IAAIM,CAAG,EACf,OAAON,EAAM,IAAIM,CAAG,EAEtB,MAAME,EAASJ,EAAO,MAAM,KAAMC,CAAI,EAAE,QAAQ,IAAML,EAAM,OAAOM,CAAG,CAAC,EACvE,OAAAN,EAAM,IAAIM,EAAKE,CAAM,EACdA,CACb,EACWL,CACX,CACA,CACA,SAASI,EAAkBN,EAAGQ,EAAO,CACnC,OAAI,OAAOA,GAAU,SACZA,EAAM,WAERA,CACT"}