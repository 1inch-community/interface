(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Ib="modulepreload",Tb=function(e){return"/interface/"+e},kf={},me=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(n.map(l=>{if(l=Tb(l),l in kf)return;kf[l]=!0;const h=l.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":Ib,h||(m.as="script",m.crossOrigin=""),m.href=l,s&&m.setAttribute("nonce",s),document.head.appendChild(m),h)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}return i.then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};const rc=globalThis,_h=rc.ShadowRoot&&(rc.ShadyCSS===void 0||rc.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Eh=Symbol(),Cf=new WeakMap;let gm=class{constructor(t,n,r){if(this._$cssResult$=!0,r!==Eh)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}get styleSheet(){let t=this.o;const n=this.t;if(_h&&t===void 0){const r=n!==void 0&&n.length===1;r&&(t=Cf.get(n)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&Cf.set(n,t))}return t}toString(){return this.cssText}};const Xe=e=>new gm(typeof e=="string"?e:e+"",void 0,Eh),be=(e,...t)=>{const n=e.length===1?e[0]:t.reduce((r,i,o)=>r+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[o+1],e[0]);return new gm(n,e,Eh)},Bb=(e,t)=>{if(_h)e.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of t){const r=document.createElement("style"),i=rc.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,e.appendChild(r)}},Pf=_h?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let n="";for(const r of t.cssRules)n+=r.cssText;return Xe(n)})(e):e;const{is:Ob,defineProperty:Rb,getOwnPropertyDescriptor:Mb,getOwnPropertyNames:Db,getOwnPropertySymbols:Nb,getPrototypeOf:Fb}=Object,qr=globalThis,If=qr.trustedTypes,Lb=If?If.emptyScript:"",Du=qr.reactiveElementPolyfillSupport,bs=(e,t)=>e,ac={toAttribute(e,t){switch(t){case Boolean:e=e?Lb:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},xc=(e,t)=>!Ob(e,t),Tf={attribute:!0,type:String,converter:ac,reflect:!1,hasChanged:xc};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),qr.litPropertyMetadata??(qr.litPropertyMetadata=new WeakMap);let lo=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,n=Tf){if(n.state&&(n.attribute=!1),this._$Ei(),this.elementProperties.set(t,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(t,r,n);i!==void 0&&Rb(this.prototype,t,i)}}static getPropertyDescriptor(t,n,r){const{get:i,set:o}=Mb(this.prototype,t)??{get(){return this[n]},set(s){this[n]=s}};return{get(){return i==null?void 0:i.call(this)},set(s){const l=i==null?void 0:i.call(this);o.call(this,s),this.requestUpdate(t,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??Tf}static _$Ei(){if(this.hasOwnProperty(bs("elementProperties")))return;const t=Fb(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(bs("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(bs("properties"))){const n=this.properties,r=[...Db(n),...Nb(n)];for(const i of r)this.createProperty(i,n[i])}const t=this[Symbol.metadata];if(t!==null){const n=litPropertyMetadata.get(t);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const i of r)n.unshift(Pf(i))}else t!==void 0&&n.push(Pf(t));return n}static _$Eu(t,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(n=>n(this))}addController(t){var n;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((n=t.hostConnected)==null||n.call(t))}removeController(t){var n;(n=this._$EO)==null||n.delete(t)}_$E_(){const t=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Bb(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(t,n,r){this._$AK(t,r)}_$EC(t,n){var o;const r=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,r);if(i!==void 0&&r.reflect===!0){const s=(((o=r.converter)==null?void 0:o.toAttribute)!==void 0?r.converter:ac).toAttribute(n,r.type);this._$Em=t,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(t,n){var o;const r=this.constructor,i=r._$Eh.get(t);if(i!==void 0&&this._$Em!==i){const s=r.getPropertyOptions(i),l=typeof s.converter=="function"?{fromAttribute:s.converter}:((o=s.converter)==null?void 0:o.fromAttribute)!==void 0?s.converter:ac;this._$Em=i,this[i]=l.fromAttribute(n,s.type),this._$Em=null}}requestUpdate(t,n,r){if(t!==void 0){if(r??(r=this.constructor.getPropertyOptions(t)),!(r.hasChanged??xc)(this[t],n))return;this.P(t,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,n,r){this._$AL.has(t)||this._$AL.set(t,n),r.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[o,s]of this._$Ep)this[o]=s;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[o,s]of i)s.wrapped!==!0||this._$AL.has(o)||this[o]===void 0||this.P(o,this[o],s)}let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(i=>{var o;return(o=i.hostUpdate)==null?void 0:o.call(i)}),this.update(n)):this._$EU()}catch(i){throw t=!1,this._$EU(),i}t&&this._$AE(n)}willUpdate(t){}_$AE(t){var n;(n=this._$EO)==null||n.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(n=>this._$EC(n,this[n]))),this._$EU()}updated(t){}firstUpdated(t){}};lo.elementStyles=[],lo.shadowRootOptions={mode:"open"},lo[bs("elementProperties")]=new Map,lo[bs("finalized")]=new Map,Du==null||Du({ReactiveElement:lo}),(qr.reactiveElementVersions??(qr.reactiveElementVersions=[])).push("2.0.4");const ws=globalThis,cc=ws.trustedTypes,Bf=cc?cc.createPolicy("lit-html",{createHTML:e=>e}):void 0,Sh="$lit$",ur=`lit$${Math.random().toFixed(9).slice(2)}$`,Ah="?"+ur,jb=`<${Ah}>`,Mi=document,ks=()=>Mi.createComment(""),Cs=e=>e===null||typeof e!="object"&&typeof e!="function",bm=Array.isArray,wm=e=>bm(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Nu=`[ 	
\f\r]`,ss=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Of=/-->/g,Rf=/>/g,gi=RegExp(`>|${Nu}(?:([^\\s"'>=/]+)(${Nu}*=${Nu}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Mf=/'/g,Df=/"/g,vm=/^(?:script|style|textarea|title)$/i,xm=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),G=xm(1),QP=xm(2),Xn=Symbol.for("lit-noChange"),bt=Symbol.for("lit-nothing"),Nf=new WeakMap,_i=Mi.createTreeWalker(Mi,129);function _m(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return Bf!==void 0?Bf.createHTML(t):t}const Em=(e,t)=>{const n=e.length-1,r=[];let i,o=t===2?"<svg>":"",s=ss;for(let l=0;l<n;l++){const h=e[l];let p,m,g=-1,v=0;for(;v<h.length&&(s.lastIndex=v,m=s.exec(h),m!==null);)v=s.lastIndex,s===ss?m[1]==="!--"?s=Of:m[1]!==void 0?s=Rf:m[2]!==void 0?(vm.test(m[2])&&(i=RegExp("</"+m[2],"g")),s=gi):m[3]!==void 0&&(s=gi):s===gi?m[0]===">"?(s=i??ss,g=-1):m[1]===void 0?g=-2:(g=s.lastIndex-m[2].length,p=m[1],s=m[3]===void 0?gi:m[3]==='"'?Df:Mf):s===Df||s===Mf?s=gi:s===Of||s===Rf?s=ss:(s=gi,i=void 0);const _=s===gi&&e[l+1].startsWith("/>")?" ":"";o+=s===ss?h+jb:g>=0?(r.push(p),h.slice(0,g)+Sh+h.slice(g)+ur+_):h+ur+(g===-2?l:_)}return[_m(e,o+(e[n]||"<?>")+(t===2?"</svg>":"")),r]};class Ps{constructor({strings:t,_$litType$:n},r){let i;this.parts=[];let o=0,s=0;const l=t.length-1,h=this.parts,[p,m]=Em(t,n);if(this.el=Ps.createElement(p,r),_i.currentNode=this.el.content,n===2){const g=this.el.content.firstChild;g.replaceWith(...g.childNodes)}for(;(i=_i.nextNode())!==null&&h.length<l;){if(i.nodeType===1){if(i.hasAttributes())for(const g of i.getAttributeNames())if(g.endsWith(Sh)){const v=m[s++],_=i.getAttribute(g).split(ur),E=/([.?@])?(.*)/.exec(v);h.push({type:1,index:o,name:E[2],strings:_,ctor:E[1]==="."?Am:E[1]==="?"?$m:E[1]==="@"?km:Qs}),i.removeAttribute(g)}else g.startsWith(ur)&&(h.push({type:6,index:o}),i.removeAttribute(g));if(vm.test(i.tagName)){const g=i.textContent.split(ur),v=g.length-1;if(v>0){i.textContent=cc?cc.emptyScript:"";for(let _=0;_<v;_++)i.append(g[_],ks()),_i.nextNode(),h.push({type:2,index:++o});i.append(g[v],ks())}}}else if(i.nodeType===8)if(i.data===Ah)h.push({type:2,index:o});else{let g=-1;for(;(g=i.data.indexOf(ur,g+1))!==-1;)h.push({type:7,index:o}),g+=ur.length-1}o++}}static createElement(t,n){const r=Mi.createElement("template");return r.innerHTML=t,r}}function Di(e,t,n=e,r){var s,l;if(t===Xn)return t;let i=r!==void 0?(s=n._$Co)==null?void 0:s[r]:n._$Cl;const o=Cs(t)?void 0:t._$litDirective$;return(i==null?void 0:i.constructor)!==o&&((l=i==null?void 0:i._$AO)==null||l.call(i,!1),o===void 0?i=void 0:(i=new o(e),i._$AT(e,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=i:n._$Cl=i),i!==void 0&&(t=Di(e,i._$AS(e,t.values),i,r)),t}class Sm{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:n},parts:r}=this._$AD,i=((t==null?void 0:t.creationScope)??Mi).importNode(n,!0);_i.currentNode=i;let o=_i.nextNode(),s=0,l=0,h=r[0];for(;h!==void 0;){if(s===h.index){let p;h.type===2?p=new jo(o,o.nextSibling,this,t):h.type===1?p=new h.ctor(o,h.name,h.strings,this,t):h.type===6&&(p=new Cm(o,this,t)),this._$AV.push(p),h=r[++l]}s!==(h==null?void 0:h.index)&&(o=_i.nextNode(),s++)}return _i.currentNode=Mi,i}p(t){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}}class jo{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,n,r,i){this.type=2,this._$AH=bt,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=Di(this,t,n),Cs(t)?t===bt||t==null||t===""?(this._$AH!==bt&&this._$AR(),this._$AH=bt):t!==this._$AH&&t!==Xn&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):wm(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==bt&&Cs(this._$AH)?this._$AA.nextSibling.data=t:this.T(Mi.createTextNode(t)),this._$AH=t}$(t){var o;const{values:n,_$litType$:r}=t,i=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Ps.createElement(_m(r.h,r.h[0]),this.options)),r);if(((o=this._$AH)==null?void 0:o._$AD)===i)this._$AH.p(n);else{const s=new Sm(i,this),l=s.u(this.options);s.p(n),this.T(l),this._$AH=s}}_$AC(t){let n=Nf.get(t.strings);return n===void 0&&Nf.set(t.strings,n=new Ps(t)),n}k(t){bm(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const o of t)i===n.length?n.push(r=new jo(this.S(ks()),this.S(ks()),this,this.options)):r=n[i],r._$AI(o),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(t=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var n;this._$AM===void 0&&(this._$Cv=t,(n=this._$AP)==null||n.call(this,t))}}class Qs{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,n,r,i,o){this.type=1,this._$AH=bt,this._$AN=void 0,this.element=t,this.name=n,this._$AM=i,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=bt}_$AI(t,n=this,r,i){const o=this.strings;let s=!1;if(o===void 0)t=Di(this,t,n,0),s=!Cs(t)||t!==this._$AH&&t!==Xn,s&&(this._$AH=t);else{const l=t;let h,p;for(t=o[0],h=0;h<o.length-1;h++)p=Di(this,l[r+h],n,h),p===Xn&&(p=this._$AH[h]),s||(s=!Cs(p)||p!==this._$AH[h]),p===bt?t=bt:t!==bt&&(t+=(p??"")+o[h+1]),this._$AH[h]=p}s&&!i&&this.j(t)}j(t){t===bt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Am extends Qs{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===bt?void 0:t}}class $m extends Qs{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==bt)}}class km extends Qs{constructor(t,n,r,i,o){super(t,n,r,i,o),this.type=5}_$AI(t,n=this){if((t=Di(this,t,n,0)??bt)===Xn)return;const r=this._$AH,i=t===bt&&r!==bt||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==bt&&(r===bt||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,t):this._$AH.handleEvent(t)}}class Cm{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Di(this,t)}}const zb={P:Sh,A:ur,C:Ah,M:1,L:Em,R:Sm,D:wm,V:Di,I:jo,H:Qs,N:$m,U:km,B:Am,F:Cm},Fu=ws.litHtmlPolyfillSupport;Fu==null||Fu(Ps,jo),(ws.litHtmlVersions??(ws.litHtmlVersions=[])).push("3.1.3");const Ao=(e,t,n)=>{const r=(n==null?void 0:n.renderBefore)??t;let i=r._$litPart$;if(i===void 0){const o=(n==null?void 0:n.renderBefore)??null;r._$litPart$=i=new jo(t.insertBefore(ks(),o),o,void 0,n??{})}return i._$AI(e),i};let Ue=class extends lo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const t=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=t.firstChild),t}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Ao(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Xn}};var ym;Ue._$litElement$=!0,Ue.finalized=!0,(ym=globalThis.litElementHydrateSupport)==null||ym.call(globalThis,{LitElement:Ue});const Lu=globalThis.litElementPolyfillSupport;Lu==null||Lu({LitElement:Ue});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.0.5");const Ge=e=>(t,n)=>{n!==void 0?n.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)};const Ub={attribute:!0,type:String,converter:ac,reflect:!1,hasChanged:xc},Vb=(e=Ub,t,n)=>{const{kind:r,metadata:i}=n;let o=globalThis.litPropertyMetadata.get(i);if(o===void 0&&globalThis.litPropertyMetadata.set(i,o=new Map),o.set(n.name,e),r==="accessor"){const{name:s}=n;return{set(l){const h=t.get.call(this);t.set.call(this,l),this.requestUpdate(s,h,e)},init(l){return l!==void 0&&this.P(s,void 0,e),l}}}if(r==="setter"){const{name:s}=n;return function(l){const h=this[s];t.call(this,l),this.requestUpdate(s,h,e)}}throw Error("Unsupported decorator location: "+r)};function _e(e){return(t,n)=>typeof n=="object"?Vb(e,t,n):((r,i,o)=>{const s=i.hasOwnProperty(o);return i.constructor.createProperty(o,s?{...r,wrapped:!0}:r),s?Object.getOwnPropertyDescriptor(i,o):void 0})(e,t,n)}function _t(e){return _e({...e,state:!0,attribute:!1})}const{I:qb}=zb,Hb=e=>e.strings===void 0,Ff=()=>document.createComment(""),as=(e,t,n)=>{var o;const r=e._$AA.parentNode,i=t===void 0?e._$AB:t._$AA;if(n===void 0){const s=r.insertBefore(Ff(),i),l=r.insertBefore(Ff(),i);n=new qb(s,l,e,e.options)}else{const s=n._$AB.nextSibling,l=n._$AM,h=l!==e;if(h){let p;(o=n._$AQ)==null||o.call(n,e),n._$AM=e,n._$AP!==void 0&&(p=e._$AU)!==l._$AU&&n._$AP(p)}if(s!==i||h){let p=n._$AA;for(;p!==s;){const m=p.nextSibling;r.insertBefore(p,i),p=m}}}return n},bi=(e,t,n=e)=>(e._$AI(t,n),e),Wb={},Gb=(e,t=Wb)=>e._$AH=t,Kb=e=>e._$AH,ju=e=>{var r;(r=e._$AP)==null||r.call(e,!1,!0);let t=e._$AA;const n=e._$AB.nextSibling;for(;t!==n;){const i=t.nextSibling;t.remove(),t=i}};const ea={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},tr=e=>(...t)=>({_$litDirective$:e,values:t});let ta=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,r){this._$Ct=t,this._$AM=n,this._$Ci=r}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}};const vs=(e,t)=>{var r;const n=e._$AN;if(n===void 0)return!1;for(const i of n)(r=i._$AO)==null||r.call(i,t,!1),vs(i,t);return!0},uc=e=>{let t,n;do{if((t=e._$AM)===void 0)break;n=t._$AN,n.delete(e),e=t}while((n==null?void 0:n.size)===0)},Pm=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(n===void 0)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),Xb(t)}};function Yb(e){this._$AN!==void 0?(uc(this),this._$AM=e,Pm(this)):this._$AM=e}function Zb(e,t=!1,n=0){const r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(t)if(Array.isArray(r))for(let o=n;o<r.length;o++)vs(r[o],!1),uc(r[o]);else r!=null&&(vs(r,!1),uc(r));else vs(this,e)}const Xb=e=>{e.type==ea.CHILD&&(e._$AP??(e._$AP=Zb),e._$AQ??(e._$AQ=Yb))};class zo extends ta{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,n,r){super._$AT(t,n,r),Pm(this),this.isConnected=t._$AU}_$AO(t,n=!0){var r,i;t!==this.isConnected&&(this.isConnected=t,t?(r=this.reconnected)==null||r.call(this):(i=this.disconnected)==null||i.call(this)),n&&(vs(this,t),uc(this))}setValue(t){if(Hb(this._$Ct))this._$Ct._$AI(t,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=t,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}var xl=function(e,t){return xl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},xl(e,t)};function sn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");xl(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function na(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function Jb(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(m){try{p(r.next(m))}catch(g){s(g)}}function h(m){try{p(r.throw(m))}catch(g){s(g)}}function p(m){m.done?o(m.value):i(m.value).then(l,h)}p((r=r.apply(e,t||[])).next())})}function Im(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(p){return function(m){return h([p,m])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(m){p=[6,m],i=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function $o(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Fn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function mo(e){return this instanceof mo?(this.v=e,this):new mo(e)}function Qb(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(E){return Promise.resolve(E).then(_,g)}}function l(_,E){r[_]&&(i[_]=function(S){return new Promise(function(P,I){o.push([_,S,P,I])>1||h(_,S)})},E&&(i[_]=E(i[_])))}function h(_,E){try{p(r[_](E))}catch(S){v(o[0][3],S)}}function p(_){_.value instanceof mo?Promise.resolve(_.value.v).then(m,g):v(o[0][2],_)}function m(_){h("next",_)}function g(_){h("throw",_)}function v(_,E){_(E),o.shift(),o.length&&h(o[0][0],o[0][1])}}function ew(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof $o=="function"?$o(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(l,h){s=e[o](s),i(l,h,s.done,s.value)})}}function i(o,s,l,h){Promise.resolve(h).then(function(p){o({value:p,done:l})},s)}}function Qe(e){return typeof e=="function"}function $h(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zu=$h(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function lc(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ii=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=$o(s),h=l.next();!h.done;h=l.next()){var p=h.value;p.remove(this)}}catch(S){t={error:S}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else s.remove(this);var m=this.initialTeardown;if(Qe(m))try{m()}catch(S){o=S instanceof zu?S.errors:[S]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var v=$o(g),_=v.next();!_.done;_=v.next()){var E=_.value;try{Lf(E)}catch(S){o=o??[],S instanceof zu?o=Fn(Fn([],vn(o)),vn(S.errors)):o.push(S)}}}catch(S){r={error:S}}finally{try{_&&!_.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}}if(o)throw new zu(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Lf(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&lc(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&lc(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Tm=ii.EMPTY;function Bm(e){return e instanceof ii||e&&"closed"in e&&Qe(e.remove)&&Qe(e.add)&&Qe(e.unsubscribe)}function Lf(e){Qe(e)?e():e.unsubscribe()}var Om={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Rm={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Fn([e,t],vn(n)))},clearTimeout:function(e){var t=Rm.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Mm(e){Rm.setTimeout(function(){throw e})}function hc(){}function ic(e){e()}var kh=function(e){sn(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Bm(n)&&n.add(r)):r.destination=iw,r}return t.create=function(n,r,i){return new ko(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ii),tw=Function.prototype.bind;function Uu(e,t){return tw.call(e,t)}var nw=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Ya(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Ya(r)}else Ya(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Ya(n)}},e}(),ko=function(e){sn(t,e);function t(n,r,i){var o=e.call(this)||this,s;if(Qe(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var l;o&&Om.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&Uu(n.next,l),error:n.error&&Uu(n.error,l),complete:n.complete&&Uu(n.complete,l)}):s=n}return o.destination=new nw(s),o}return t}(kh);function Ya(e){Mm(e)}function rw(e){throw e}var iw={closed:!0,next:hc,error:rw,complete:hc},Ch=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Vi(e){return e}function ow(e){return e.length===0?Vi:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var xt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=aw(t)?t:new ko(t,n,r);return ic(function(){var s=i,l=s.operator,h=s.source;o.add(l?l.call(o,h):h?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=jf(n),new n(function(i,o){var s=new ko({next:function(l){try{t(l)}catch(h){o(h),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Ch]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ow(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=jf(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function jf(e){var t;return(t=e??Om.Promise)!==null&&t!==void 0?t:Promise}function sw(e){return e&&Qe(e.next)&&Qe(e.error)&&Qe(e.complete)}function aw(e){return e&&e instanceof kh||sw(e)&&Bm(e)}function cw(e){return Qe(e==null?void 0:e.lift)}function qt(e){return function(t){if(cw(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Rt(e,t,n,r,i){return new uw(e,t,n,r,i)}var uw=function(e){sn(t,e);function t(n,r,i,o,s,l){var h=e.call(this,n)||this;return h.onFinalize=s,h.shouldUnsubscribe=l,h._next=r?function(p){try{r(p)}catch(m){n.error(m)}}:e.prototype._next,h._error=o?function(p){try{o(p)}catch(m){n.error(m)}finally{this.unsubscribe()}}:e.prototype._error,h._complete=i?function(){try{i()}catch(p){n.error(p)}finally{this.unsubscribe()}}:e.prototype._complete,h}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(kh),dc={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,r=dc.delegate;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);var i=t(function(o){n=void 0,e(o)});return new ii(function(){return n==null?void 0:n(i)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return requestAnimationFrame.apply(void 0,Fn([],vn(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=dc.delegate;return((n==null?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,Fn([],vn(e)))},delegate:void 0},lw=$h(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),tn=function(e){sn(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new zf(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new lw},t.prototype.next=function(n){var r=this;ic(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=$o(r.currentObservers),l=s.next();!l.done;l=s.next()){var h=l.value;h.next(n)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;ic(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;ic(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,l=i.observers;return o||s?Tm:(this.currentObservers=null,l.push(n),new ii(function(){r.currentObservers=null,lc(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new xt;return n.source=this,n},t.create=function(n,r){return new zf(n,r)},t}(xt),zf=function(e){sn(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Tm},t}(tn),Co=function(e){sn(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(tn),Ph={now:function(){return(Ph.delegate||Date).now()},delegate:void 0},Dm=function(e){sn(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=Ph);var o=e.call(this)||this;return o._bufferSize=n,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,r),o}return t.prototype.next=function(n){var r=this,i=r.isStopped,o=r._buffer,s=r._infiniteTimeWindow,l=r._timestampProvider,h=r._windowTime;i||(o.push(n),!s&&o.push(l.now()+h)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,o=i._infiniteTimeWindow,s=i._buffer,l=s.slice(),h=0;h<l.length&&!n.closed;h+=o?1:2)n.next(l[h]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,o=n._buffer,s=n._infiniteTimeWindow,l=(s?1:2)*r;if(r<1/0&&l<o.length&&o.splice(0,o.length-l),!s){for(var h=i.now(),p=0,m=1;m<o.length&&o[m]<=h;m+=2)p=m;p&&o.splice(0,p+1)}},t}(tn),hw=function(e){sn(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(ii),_l={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Fn([e,t],vn(n)))},clearInterval:function(e){var t=_l.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Ih=function(e){sn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),_l.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&_l.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,lc(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(hw),dw=1,Vu,El={};function Uf(e){return e in El?(delete El[e],!0):!1}var Nm={setImmediate:function(e){var t=dw++;return El[t]=!0,Vu||(Vu=Promise.resolve()),Vu.then(function(){return Uf(t)&&e()}),t},clearImmediate:function(e){Uf(e)}},fw=Nm.setImmediate,pw=Nm.clearImmediate,Sl={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fw.apply(void 0,Fn([],vn(e)))},clearImmediate:function(e){var t=Sl.delegate;return((t==null?void 0:t.clearImmediate)||pw)(e)},delegate:void 0},mw=function(e){sn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=Sl.setImmediate(n.flush.bind(n,void 0))))},t.prototype.recycleAsyncId=function(n,r,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var s=n.actions;r!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==r&&(Sl.clearImmediate(r),n._scheduled===r&&(n._scheduled=void 0))},t}(Ih),Vf=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=Ph.now,e}(),Th=function(e){sn(t,e);function t(n,r){r===void 0&&(r=Vf.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Vf),yw=function(e){sn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i=this.actions,o;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===r&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===r&&i.shift();)n.unsubscribe();throw o}},t}(Th),Bh=new yw(mw),Oh=new Th(Ih),gw=Oh,bw=function(e){sn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=dc.requestAnimationFrame(function(){return n.flush(void 0)})))},t.prototype.recycleAsyncId=function(n,r,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var s=n.actions;r!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==r&&(dc.cancelAnimationFrame(r),n._scheduled=void 0)},t}(Ih),ww=function(e){sn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i=this.actions,o;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===r&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===r&&i.shift();)n.unsubscribe();throw o}},t}(Th),vw=new ww(bw),Fm=new xt(function(e){return e.complete()});function Lm(e){return e&&Qe(e.schedule)}function Rh(e){return e[e.length-1]}function jm(e){return Qe(Rh(e))?e.pop():void 0}function ra(e){return Lm(Rh(e))?e.pop():void 0}function xw(e,t){return typeof Rh(e)=="number"?e.pop():t}var Mh=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function zm(e){return Qe(e==null?void 0:e.then)}function Um(e){return Qe(e[Ch])}function Vm(e){return Symbol.asyncIterator&&Qe(e==null?void 0:e[Symbol.asyncIterator])}function qm(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function _w(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hm=_w();function Wm(e){return Qe(e==null?void 0:e[Hm])}function Gm(e){return Qb(this,arguments,function(){var n,r,i,o;return Im(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,mo(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,mo(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,mo(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Km(e){return Qe(e==null?void 0:e.getReader)}function an(e){if(e instanceof xt)return e;if(e!=null){if(Um(e))return Ew(e);if(Mh(e))return Sw(e);if(zm(e))return Aw(e);if(Vm(e))return Ym(e);if(Wm(e))return $w(e);if(Km(e))return kw(e)}throw qm(e)}function Ew(e){return new xt(function(t){var n=e[Ch]();if(Qe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Sw(e){return new xt(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Aw(e){return new xt(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Mm)})}function $w(e){return new xt(function(t){var n,r;try{for(var i=$o(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Ym(e){return new xt(function(t){Cw(e,t).catch(function(n){return t.error(n)})})}function kw(e){return Ym(Gm(e))}function Cw(e,t){var n,r,i,o;return Jb(this,void 0,void 0,function(){var s,l;return Im(this,function(h){switch(h.label){case 0:h.trys.push([0,5,6,11]),n=ew(e),h.label=1;case 1:return[4,n.next()];case 2:if(r=h.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];h.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=h.sent(),i={error:l},[3,11];case 6:return h.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:h.sent(),h.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Hr(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function _c(e,t){return t===void 0&&(t=0),qt(function(n,r){n.subscribe(Rt(r,function(i){return Hr(r,e,function(){return r.next(i)},t)},function(){return Hr(r,e,function(){return r.complete()},t)},function(i){return Hr(r,e,function(){return r.error(i)},t)}))})}function Ec(e,t){return t===void 0&&(t=0),qt(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Pw(e,t){return an(e).pipe(Ec(t),_c(t))}function Iw(e,t){return an(e).pipe(Ec(t),_c(t))}function Tw(e,t){return new xt(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Bw(e,t){return new xt(function(n){var r;return Hr(n,t,function(){r=e[Hm](),Hr(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(l){n.error(l);return}s?n.complete():n.next(o)},0,!0)}),function(){return Qe(r==null?void 0:r.return)&&r.return()}})}function Zm(e,t){if(!e)throw new Error("Iterable cannot be null");return new xt(function(n){Hr(n,t,function(){var r=e[Symbol.asyncIterator]();Hr(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ow(e,t){return Zm(Gm(e),t)}function Rw(e,t){if(e!=null){if(Um(e))return Pw(e,t);if(Mh(e))return Tw(e,t);if(zm(e))return Iw(e,t);if(Vm(e))return Zm(e,t);if(Wm(e))return Bw(e,t);if(Km(e))return Ow(e,t)}throw qm(e)}function ti(e,t){return t?Rw(e,t):an(e)}function Yt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ra(e);return ti(e,n)}function qf(e,t){var n=Qe(e)?e:function(){return e},r=function(i){return i.error(n())};return new xt(r)}var Mw=$h(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function dn(e,t){return new Promise(function(n,r){var i=new ko({next:function(o){n(o),i.unsubscribe()},error:r,complete:function(){r(new Mw)}});e.subscribe(i)})}function Dw(e){return e instanceof Date&&!isNaN(e)}function Pe(e,t){return qt(function(n,r){var i=0;n.subscribe(Rt(r,function(o){r.next(e.call(t,o,i++))}))})}var Nw=Array.isArray;function Fw(e,t){return Nw(t)?e.apply(void 0,Fn([],vn(t))):e(t)}function Xm(e){return Pe(function(t){return Fw(e,t)})}var Lw=Array.isArray,jw=Object.getPrototypeOf,zw=Object.prototype,Uw=Object.keys;function Vw(e){if(e.length===1){var t=e[0];if(Lw(t))return{args:t,keys:null};if(qw(t)){var n=Uw(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function qw(e){return e&&typeof e=="object"&&jw(e)===zw}function Hw(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function Xt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ra(e),r=jm(e),i=Vw(e),o=i.args,s=i.keys;if(o.length===0)return ti([],n);var l=new xt(Ww(o,n,s?function(h){return Hw(s,h)}:Vi));return r?l.pipe(Xm(r)):l}function Ww(e,t,n){return n===void 0&&(n=Vi),function(r){Hf(t,function(){for(var i=e.length,o=new Array(i),s=i,l=i,h=function(m){Hf(t,function(){var g=ti(e[m],t),v=!1;g.subscribe(Rt(r,function(_){o[m]=_,v||(v=!0,l--),l||r.next(n(o.slice()))},function(){--s||r.complete()}))},r)},p=0;p<i;p++)h(p)},r)}}function Hf(e,t,n){e?Hr(n,e,t):t()}function Gw(e,t,n,r,i,o,s,l){var h=[],p=0,m=0,g=!1,v=function(){g&&!h.length&&!p&&t.complete()},_=function(S){return p<r?E(S):h.push(S)},E=function(S){p++;var P=!1;an(n(S,m++)).subscribe(Rt(t,function(I){t.next(I)},function(){P=!0},void 0,function(){if(P)try{p--;for(var I=function(){var O=h.shift();s||E(O)};h.length&&p<r;)I();v()}catch(O){t.error(O)}}))};return e.subscribe(Rt(t,_,function(){g=!0,v()})),function(){}}function Dh(e,t,n){return n===void 0&&(n=1/0),Qe(t)?Dh(function(r,i){return Pe(function(o,s){return t(r,o,i,s)})(an(e(r,i)))},n):(typeof t=="number"&&(n=t),qt(function(r,i){return Gw(r,i,e,n)}))}function Jm(e){return e===void 0&&(e=1/0),Dh(Vi,e)}function Kw(){return Jm(1)}function Wf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Kw()(ti(e,ra(e)))}function qe(e){return new xt(function(t){an(e()).subscribe(t)})}var Yw=["addListener","removeListener"],Zw=["addEventListener","removeEventListener"],Xw=["on","off"];function rt(e,t,n,r){if(Qe(n)&&(r=n,n=void 0),r)return rt(e,t,n).pipe(Xm(r));var i=vn(ev(e)?Zw.map(function(l){return function(h){return e[l](t,h,n)}}):Jw(e)?Yw.map(Gf(e,t)):Qw(e)?Xw.map(Gf(e,t)):[],2),o=i[0],s=i[1];if(!o&&Mh(e))return Dh(function(l){return rt(l,t,n)})(an(e));if(!o)throw new TypeError("Invalid event target");return new xt(function(l){var h=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return l.next(1<p.length?p:p[0])};return o(h),function(){return s(h)}})}function Gf(e,t){return function(n){return function(r){return e[n](t,r)}}}function Jw(e){return Qe(e.addListener)&&Qe(e.removeListener)}function Qw(e){return Qe(e.on)&&Qe(e.off)}function ev(e){return Qe(e.addEventListener)&&Qe(e.removeEventListener)}function Is(e,t,n){e===void 0&&(e=0),n===void 0&&(n=gw);var r=-1;return t!=null&&(Lm(t)?n=t:r=t),new xt(function(i){var o=Dw(e)?+e-n.now():e;o<0&&(o=0);var s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function tv(e,t){return t===void 0&&(t=Oh),Is(e,e,t)}function gr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ra(e),r=xw(e,1/0),i=e;return i.length?i.length===1?an(i[0]):Jm(r)(ti(i,n)):Fm}function Ut(e,t){return qt(function(n,r){var i=0;n.subscribe(Rt(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function Nh(e){return qt(function(t,n){var r=null,i=!1,o;r=t.subscribe(Rt(n,void 0,void 0,function(s){o=an(e(s,Nh(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Uo(e,t){return t===void 0&&(t=Oh),qt(function(n,r){var i=null,o=null,s=null,l=function(){if(i){i.unsubscribe(),i=null;var p=o;o=null,r.next(p)}};function h(){var p=s+e,m=t.now();if(m<p){i=this.schedule(void 0,p-m),r.add(i);return}l()}n.subscribe(Rt(r,function(p){o=p,s=t.now(),i||(i=t.schedule(h,e),r.add(i))},function(){l(),r.complete()},void 0,function(){o=i=null}))})}function Qm(e){return qt(function(t,n){var r=!1;t.subscribe(Rt(n,function(i){r=!0,n.next(i)},function(){r||n.next(e),n.complete()}))})}function nv(e){return e<=0?function(){return Fm}:qt(function(t,n){var r=0;t.subscribe(Rt(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function zt(e,t){return t===void 0&&(t=Vi),e=e??rv,qt(function(n,r){var i,o=!0;n.subscribe(Rt(r,function(s){var l=t(s);(o||!e(i,l))&&(o=!1,i=l,r.next(s))}))})}function rv(e,t){return e===t}function iv(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new tn}:t,r=e.resetOnError,i=r===void 0?!0:r,o=e.resetOnComplete,s=o===void 0?!0:o,l=e.resetOnRefCountZero,h=l===void 0?!0:l;return function(p){var m,g,v,_=0,E=!1,S=!1,P=function(){g==null||g.unsubscribe(),g=void 0},I=function(){P(),m=v=void 0,E=S=!1},O=function(){var L=m;I(),L==null||L.unsubscribe()};return qt(function(L,U){_++,!S&&!E&&P();var K=v=v??n();U.add(function(){_--,_===0&&!S&&!E&&(g=qu(O,h))}),K.subscribe(U),!m&&_>0&&(m=new ko({next:function(X){return K.next(X)},error:function(X){S=!0,P(),g=qu(I,i,X),K.error(X)},complete:function(){E=!0,P(),g=qu(I,s),K.complete()}}),an(L).subscribe(m))})(p)}}function qu(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new ko({next:function(){i.unsubscribe(),e()}});return an(t.apply(void 0,Fn([],vn(n)))).subscribe(i)}}function ft(e,t,n){var r,i,o,s,l=!1;return e&&typeof e=="object"?(r=e.bufferSize,s=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,o=e.refCount,l=o===void 0?!1:o,n=e.scheduler):s=e??1/0,iv({connector:function(){return new Dm(s,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function e0(e){return Ut(function(t,n){return e<=n})}function Ot(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ra(e);return qt(function(r,i){(n?Wf(e,r,n):Wf(e,r)).subscribe(i)})}function He(e,t){return qt(function(n,r){var i=null,o=0,s=!1,l=function(){return s&&!i&&r.complete()};n.subscribe(Rt(r,function(h){i==null||i.unsubscribe();var p=0,m=o++;an(e(h,m)).subscribe(i=Rt(r,function(g){return r.next(t?t(h,g,m,p++):g)},function(){i=null,l()}))},function(){s=!0,l()}))})}function Sc(e){return qt(function(t,n){an(e).subscribe(Rt(n,function(){return n.complete()},hc)),!n.closed&&t.subscribe(n)})}function We(e,t,n){var r=Qe(e)||t||n?{next:e,error:t,complete:n}:e;return r?qt(function(i,o){var s;(s=r.subscribe)===null||s===void 0||s.call(r);var l=!0;i.subscribe(Rt(o,function(h){var p;(p=r.next)===null||p===void 0||p.call(r,h),o.next(h)},function(){var h;l=!1,(h=r.complete)===null||h===void 0||h.call(r),o.complete()},function(h){var p;l=!1,(p=r.error)===null||p===void 0||p.call(r,h),o.error(h)},function(){var h,p;l&&((h=r.unsubscribe)===null||h===void 0||h.call(r)),(p=r.finalize)===null||p===void 0||p.call(r)}))}):Vi}function Fh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=jm(e);return qt(function(r,i){for(var o=e.length,s=new Array(o),l=e.map(function(){return!1}),h=!1,p=function(g){an(e[g]).subscribe(Rt(i,function(v){s[g]=v,!h&&!l[g]&&(l[g]=!0,(h=l.every(Vi))&&(l=null))},hc))},m=0;m<o;m++)p(m);r.subscribe(Rt(i,function(g){if(h){var v=Fn([g],vn(s));i.next(n?n.apply(void 0,Fn([],vn(v))):v)}}))})}var ov=class extends zo{render(e,t){return this.subscription?this.lastValue??t??"":(this.subscription=e.pipe(_c(Bh)).subscribe(n=>{this.lastValue=n,this.setValue(n)}),t??"")}disconnected(){var e;(e=this.subscription)==null||e.unsubscribe()}},dt=tr(ov),sv=class extends zo{constructor(){super(...arguments),this.isDisconnected=!1,this.handler=e=>{this.isDisconnected||this.setValue(e)}}render(e,t){return e.then(this.handler),t??""}disconnected(){this.isDisconnected=!0}},Al=tr(sv),av=class extends ta{constructor(e){super(e),this.elementKeySet=new Set,this.view=document.createElement("div"),this.lock=!1,this.view.style.display="flex",this.view.style.gap="8px"}render(e,t,n,r){if(this.lock)return G`${this.view}`;if(!this.view.children.length)return this.addedElementsWithoutAnimation(e,t,r),G`${this.view}`;const i=new Set,o=new Map,s=new Map;let l=0;for(const m of e){const g=t(m,l);i.add(g),o.set(g,m),s.set(g,l),l++}const h=new Set,p=new Set;return this.elementKeySet.forEach(m=>{i.has(m)||h.add(m)}),i.forEach(m=>{this.elementKeySet.has(m)||p.add(m)}),this.lock=!0,Promise.all([this.deleteElements(h,n.deleteElement),this.addedElements(p,o,s,n.addedElement,r)]).then(()=>{this.elementKeySet=i,this.lock=!1}),G`${this.view}`}async deleteElements(e,t){const n=[],r=async i=>{const o=this.view.querySelector(`#${i}`);o&&(await t(o),o.remove())};for(const i of e)n.push(r(i));await Promise.all(n)}async addedElements(e,t,n,r,i){const o=[],s=async l=>{const h=t.get(l),p=document.createElement("div");p.id=l.toString();const m=i(h);Ao(m,p);const g=await r(p),v=this.view.children[n.get(l)??0];v?this.view.insertBefore(p,v):this.view.appendChild(p),await g(p)};for(const l of e)o.push(s(l));await Promise.all(o)}addedElementsWithoutAnimation(e,t,n){let r=0;for(const i of e){const o=t(i,r),s=document.createElement("div");s.id=o.toString();const l=n(i);Ao(l,s),this.view.appendChild(s),this.elementKeySet.add(o),r++}}},nI=tr(av);function Re(e,t){for(const n in t)e.style[n]=t[n]??""}function t0(e,t){const n=document.createElement(e);if(t&&typeof t=="function")try{t(n)}catch(r){console.error("call side effect error",r)}return document.head.appendChild(n),n}function Hu(e){t0("style",t=>$l(t,e))}function $l(e,t){e.textContent=t.cssText}function n0(e,t,n){return new CustomEvent(e,{bubbles:!0,composed:!0,detail:{value:t,event:n}})}function pt(e,t,n,r){e.dispatchEvent(n0(t,n,r))}function r0(e){const t=document.head.querySelector("#theme-color");if(!t){t0("meta",n=>{n.id="theme-color",n.name="theme-color",n.content=e});return}t.content=e}function i0(e=40){try{navigator.vibrate(e)}catch{}}var cv={requestUpdate:!0},uv=class{constructor(e,t,n){this.host=e,this.observers=t,e.addController(this),this.config={...cv,...n},this.subscribe()}hostDisconnected(){var e;(e=this.subscription)==null||e.unsubscribe()}subscribe(){const e=Xt(Array.isArray(this.observers)?this.observers:[this.observers]),t=[];this.config.debounceTimeMs&&t.push(Uo(this.config.debounceTimeMs)),this.subscription=e.pipe(...t).subscribe(()=>{this.config.requestUpdate&&this.host.requestUpdate()})}};function Qt(e,t,n){return new uv(e,t,n)}var o0="screen and (max-width: 610px)",Wu;function Er(){return Wu||(Wu=matchMedia(o0)),Wu}function Ht(e){return be`
      @media ${Xe(o0)} {
          ${Xe(e)}
      }
  `}var s0=qe(()=>rt(Er(),"change")).pipe(ft({bufferSize:0,refCount:!0}));function Ac(e){Qt(e,[s0])}function a0(){return s0}function nr(e){return Ac(e),Er()}function Ts(){const e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")&&!e.includes("crios")}function kl(){var e;return((e=window==null?void 0:window.navigator)==null?void 0:e.standalone)??!1}function lv(e){return Ts()&&kl()?Xe(e):Xe("")}var Gu=new WeakMap;function Ei(e){if(Gu.has(e))return Gu.get(e);const t=new xt(n=>{const r=new ResizeObserver(i=>n.next(i[0]));return r.observe(e),()=>{r.unobserve(e)}});return Gu.set(e,t),t}var Cl=(e=>(e.en="en",e.ar="ar",e))(Cl||{}),hv=["ar"];function c0(e){return hv.includes(e)}var fc=new Map,Lh=new Co(null),dv="en",Kf,Bs="en",Yf=0,Zf=0,u0=!1,l0=Lh.pipe(Pe(()=>Bs));async function fv(e){for(const t in e){const n=Reflect.get(e,t),r=fc.get(t)??[];r.push(n),fc.set(t,r)}await jh(Bs)}async function pv(e){await jh(e)}async function mv(){const e=localStorage.getItem("1inch_locale")??"en";u0=!0,await jh(e)}function yv(e,t){return Lh.pipe(Pe(n=>{if(!n)return"";const r=n[e]??"";return t&&r.includes("{{")&&r.includes("}}")?gv(r,t):r}))}function gv(e,t){let n=e;for(const r in t){const i=t[r],o=`{{${r}}}`;n=n.replaceAll(o,`${i}`)}return n}async function jh(e){if(!u0)return;const t=document.querySelector("html");t.dir=c0(e)?"rtl":"ltr";const n=fc.get(dv)??[],r=fc.get(e)??[],i=o=>o.reduce((s,l)=>({...s,...l}),{});if(n.length!==Yf){const o=await Promise.all(n.map(s=>s()));Kf=i(o),Yf=n.length}if(Bs!==e||r.length!==Zf){const o=await Promise.all(r.map(l=>l())),s=i(o);Lh.next({...Kf,...s}),Zf=r.length}Bs=e}function Po(){return c0(Bs)}Reflect.set(window,"changeLocale",pv);var bv=class extends zo{render(e,t){return this.subscription&&this.lastPath===e?this.lastValue??"":(this.disconnected(),this.subscription=yv(e,t).pipe(_c(Bh)).subscribe(n=>{this.setValue(n),this.lastValue=n,this.lastPath=e}),"")}disconnected(){var e;(e=this.subscription)==null||e.unsubscribe()}},it=tr(bv);const wv=be`:host{--height:100vh;overflow-y:auto;overflow-x:hidden!important;height:var(--height);display:flex;flex-direction:column;justify-content:space-between;background-color:var(--color-background-bg-body);overscroll-behavior:none;touch-action:pan-y;transition:height .2s}@supports (height:100dvh){:host{--height:100dvh}}${Ht(be`:host::-webkit-scrollbar{display:none}`)}${lv(be`:host{height:calc(var(--height) - 10px)}`)}.content{display:flex;width:100%;justify-content:center;margin-bottom:auto}`,vv=be`.header-container{width:100%;box-sizing:border-box;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:0 auto}.mobile-header{height:56px;padding:8px;max-width:100vw}.right-content{display:flex;align-items:center;gap:8px}`;var xv=Object.defineProperty,_v=Object.getOwnPropertyDescriptor,ia=(e,t,n,r)=>{for(var i=r>1?void 0:r?_v(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&xv(t,n,i),i};const h0="important",Ev=" !"+h0,zh=tr(class extends ta{constructor(e){var t;if(super(e),e.type!==ea.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r==null?t:t+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(e,[t]){const{style:n}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const r of this.ft)t[r]==null&&(this.ft.delete(r),r.includes("-")?n.removeProperty(r):n[r]=null);for(const r in t){const i=t[r];if(i!=null){this.ft.add(r);const o=typeof i=="string"&&i.endsWith(Ev);r.includes("-")||o?n.setProperty(r,o?i.slice(0,-11):i,o?h0:""):n[r]=i}}return Xn}});const Sv=Symbol();let $c=class{get taskComplete(){return this.t||(this.i===1?this.t=new Promise((t,n)=>{this.o=t,this.h=n}):this.i===3?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(t,n,r){var o;this.p=0,this.i=0,(this._=t).addController(this);const i=typeof n=="object"?n:{task:n,args:r};this.v=i.task,this.j=i.args,this.m=i.argsEqual??Av,this.k=i.onComplete,this.A=i.onError,this.autoRun=i.autoRun??!0,"initialValue"in i&&(this.u=i.initialValue,this.i=2,this.O=(o=this.T)==null?void 0:o.call(this))}hostUpdate(){this.autoRun===!0&&this.S()}hostUpdated(){this.autoRun==="afterUpdate"&&this.S()}T(){if(this.j===void 0)return;const t=this.j();if(!Array.isArray(t))throw Error("The args function must return an array");return t}async S(){const t=this.T(),n=this.O;this.O=t,t===n||t===void 0||n!==void 0&&this.m(n,t)||await this.run(t)}async run(t){var s,l,h,p,m;let n,r;t??(t=this.T()),this.O=t,this.i===1?(s=this.q)==null||s.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,this.autoRun==="afterUpdate"?queueMicrotask(()=>this._.requestUpdate()):this._.requestUpdate();const i=++this.p;this.q=new AbortController;let o=!1;try{n=await this.v(t,{signal:this.q.signal})}catch(g){o=!0,r=g}if(this.p===i){if(n===Sv)this.i=0;else{if(o===!1){try{(l=this.k)==null||l.call(this,n)}catch{}this.i=2,(h=this.o)==null||h.call(this,n)}else{try{(p=this.A)==null||p.call(this,r)}catch{}this.i=3,(m=this.h)==null||m.call(this,r)}this.u=n,this.l=r}this._.requestUpdate()}}abort(t){var n;this.i===1&&((n=this.q)==null||n.abort(t))}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(t){var n,r,i,o;switch(this.i){case 0:return(n=t.initial)==null?void 0:n.call(t);case 1:return(r=t.pending)==null?void 0:r.call(t);case 2:return(i=t.complete)==null?void 0:i.call(t,this.value);case 3:return(o=t.error)==null?void 0:o.call(t,this.error);default:throw Error("Unexpected status: "+this.i)}}};const Av=(e,t)=>e===t||e.length===t.length&&e.every((n,r)=>!xc(n,t[r]));var $v={circle16:{width:"16px",height:"16px",loader:()=>me(()=>import("./circle_16.svg-ZXVELFJT-BcWLBvNb.js"),[]).then(e=>e.circle16Svg)},cross8:{width:"8px",height:"8px",loader:()=>me(()=>import("./cross_8.svg-UQSEH4S4-DrN_OrJh.js"),[]).then(e=>e.cross8Svg)},startDefault16:{width:"16px",height:"16px",loader:()=>me(()=>import("./start-default_16.svg-CD2J7L7X-Dy_DEW4T.js"),[]).then(e=>e.startDefault16Svg)},connect16:{width:"16px",height:"16px",loader:()=>me(()=>import("./connect_16.svg-NSXNVWXM-BvSzlSx9.js"),[]).then(e=>e.connect16Svg)},cornerDownRight16:{width:"16px",height:"16px",loader:()=>me(()=>import("./corner-down-right_16.svg-YYSNWS3X-DKKxIe1W.js"),[]).then(e=>e.cornerDownRight16Svg)},chevronDown16:{width:"16px",height:"16px",loader:()=>me(()=>import("./chevron-down_16.svg-BND54YF5-D8eGnCI9.js"),[]).then(e=>e.chevronDown16Svg)},arrowDown16:{width:"16px",height:"16px",loader:()=>me(()=>import("./arrow-down_16.svg-IK237GS3-DiMjKwwh.js"),[]).then(e=>e.arrowDown16Svg)},fusion16:{width:"16px",height:"16px",loader:()=>me(()=>import("./fusion_16-NGHTDRJX-yaISOSRf.js"),[]).then(e=>e.fusion16Svg)},link16:{width:"16px",height:"16px",loader:()=>me(()=>import("./link_16.svg-ILSOSF3Q-DiTKv-DK.js"),[]).then(e=>e.link16Svg)},plusCircle16:{width:"16px",height:"16px",loader:()=>me(()=>import("./plus-circle_16.svg-LAFJERR4-DBkw6y62.js"),[]).then(e=>e.plusCircle16Svg)},circle24:{width:"24px",height:"24px",loader:()=>me(()=>import("./circle_24.svg-NZRHXSXM-DfYnEmn7.js"),[]).then(e=>e.circle24Svg)},arrowDown24:{width:"24px",height:"24px",loader:()=>me(()=>import("./arrow-down_24.svg-QVWWMIAG-C-1vcxST.js"),[]).then(e=>e.arrowDown24Svg)},arrowLeft24:{width:"24px",height:"24px",loader:()=>me(()=>import("./arrow-left_24.svg-SRUSUV6K-XVYicoMu.js"),[]).then(e=>e.arrowLeft24Svg)},cross24:{width:"24px",height:"24px",loader:()=>me(()=>import("./cross_24.svg-Y6TXDXMZ-Bzo2OWK3.js"),[]).then(e=>e.cross24Svg)},search24:{width:"24px",height:"24px",loader:()=>me(()=>import("./search_24.svg-7BVVC7QD-B2Cp1Tlz.js"),[]).then(e=>e.search24Svg)},edit24:{width:"24px",height:"24px",loader:()=>me(()=>import("./edit_24.svg-LIXQVG7G-CAOqJ-UM.js"),[]).then(e=>e.edit24Svg)},connect24:{width:"24px",height:"24px",loader:()=>me(()=>import("./connect_24.svg-B72L67KC-DtS2WL5i.js"),[]).then(e=>e.connect24Svg)},link24:{width:"24px",height:"24px",loader:()=>me(()=>import("./link_24.svg-ME7P2JZJ-CcY5YUK2.js"),[]).then(e=>e.link24Svg)},alert24:{width:"24px",height:"24px",loader:()=>me(()=>import("./alert_24.svg-ASSJ27DL--XTSCsiq.js"),[]).then(e=>e.alert24Svg)},l2Chain24:{width:"24px",height:"24px",loader:()=>me(()=>import("./l2-chain_24.svg-BVBNWDAX-BkrMjsh8.js"),[]).then(e=>e.l2Chain24Svg)},l2ChainRTL24:{width:"24px",height:"24px",loader:()=>me(()=>import("./l2-chain-rtl_24.svg-7UVTOITU-DwUDYssJ.js"),[]).then(e=>e.l2Chain24Svg)},authRefresh36:{width:"36px",height:"36px",loader:()=>me(()=>import("./auth-refresh_36.svg-TLQZRG73-Bg7PlsvN.js"),[]).then(e=>e.authRefresh36Svg)},logoFull:{width:"102px",height:"40px",loader:()=>me(()=>import("./logo-full.svg-GX4A5T7B-CHPDHNZ7.js"),[]).then(e=>e.logoFullSvg)},unicornRun:{width:"38px",height:"24px",loader:()=>me(()=>import("./unicorn_run.svg-FIWXVX57-CZhpm6z5.js"),[]).then(e=>e.unicornRunSvg)},fire48:{width:"48px",height:"48px",loader:()=>me(()=>import("./fire_48.png-H24EZB6E-BCzuLVq5.js"),[]).then(e=>e.fire48Png)},emptySearch:{width:"160px",height:"160px",loader:()=>me(()=>import("./empty_search.svg-HTH3MFNW-BQX5QTrU.js"),[]).then(e=>e.emptySearch)},eth24:{width:"24px",height:"24px",loader:()=>me(()=>import("./eth_24.svg-QSL6GA7V-DD4Z2KfJ.js"),[]).then(e=>e.eth24Svg)},bnb24:{width:"24px",height:"24px",loader:()=>me(()=>import("./bnb_24.svg-GK3J7TR7-CJAVVVi_.js"),[]).then(e=>e.bnb24Svg)},op24:{width:"24px",height:"24px",loader:()=>me(()=>import("./op_24.svg-C7QI3DAY-A2XtdHvz.js"),[]).then(e=>e.op24Svg)},matic24:{width:"24px",height:"24px",loader:()=>me(()=>import("./matic_24.svg-MR2PZC5O-NeQ80tO1.js"),[]).then(e=>e.matic24Svg)},arbitrum24:{width:"24px",height:"24px",loader:()=>me(()=>import("./arbitrum_24.svg-EOHJT7SH-CU6S4tEi.js"),[]).then(e=>e.arbitrum24Svg)},gnosis24:{width:"24px",height:"24px",loader:()=>me(()=>import("./gnosis_24.svg-OA645ZO3-DjWwC2ir.js"),[]).then(e=>e.gnosis24Svg)},avalanche24:{width:"24px",height:"24px",loader:()=>me(()=>import("./avalanche_24.svg-RACIZF5H-Cfn6SDwS.js"),[]).then(e=>e.avalanche24Svg)},fantom24:{width:"24px",height:"24px",loader:()=>me(()=>import("./fantom_24.svg-HII4JJB6-C2QAGk5O.js"),[]).then(e=>e.fantom24Svg)},aurora24:{width:"24px",height:"24px",loader:()=>me(()=>import("./aurora_24.svg-W4HBGYPD-BvfjhCjI.js"),[]).then(e=>e.aurora24Svg)},klaytn24:{width:"24px",height:"24px",loader:()=>me(()=>import("./klaytn_24.svg-3HGJORYN-DcqLN8FC.js"),[]).then(e=>e.klaytn24Svg)},zkSyncEra24:{width:"24px",height:"24px",loader:()=>me(()=>import("./zksyncera_24.svg-6GCDLJI2-Bkx8jt8h.js"),[]).then(e=>e.zkSyncEra24Svg)},base24:{width:"24px",height:"24px",loader:()=>me(()=>import("./base_24.svg-TRYUGEDS-WypBx5zV.js"),[]).then(e=>e.base24Svg)}},Kn=class extends Ue{constructor(){super(...arguments),this.iconLoadTask=new $c(this,([e])=>this.loadImage(e),()=>[this.icon])}render(){var t,n;const e={width:this.width??((t=this.iconRecord)==null?void 0:t.width),height:this.height??((n=this.iconRecord)==null?void 0:n.height)};return this.iconLoadTask.render({pending:()=>G`<div style="${zh(e)}"></div>`,complete:r=>typeof r=="function"?r({...e,props:this.props}):r})}async loadImage(e){if(!e)throw new Error("icon is required field for inch-icon element");if(this.iconRecord=$v[e],!this.iconRecord)throw new Error(`icon name ${e} not exist`);return await this.iconRecord.loader()}};Kn.tagName="inch-icon";Kn.styles=be`:host{display:flex;width:fit-content;height:fit-content}`;ia([_e({type:String,attribute:"icon"})],Kn.prototype,"icon",2);ia([_e({type:String,attribute:!0})],Kn.prototype,"width",2);ia([_e({type:String,attribute:!0})],Kn.prototype,"height",2);ia([_e({type:Object})],Kn.prototype,"props",2);Kn=ia([Ge(Kn.tagName)],Kn);const kv=Object.freeze(Object.defineProperty({__proto__:null,get IconElement(){return Kn}},Symbol.toStringTag,{value:"Module"}));const fn=tr(class extends ta{constructor(e){var t;if(super(e),e.type!==ea.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var r,i;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(const o in t)t[o]&&!((r=this.nt)!=null&&r.has(o))&&this.st.add(o);return this.render(t)}const n=e.element.classList;for(const o of this.st)o in t||(n.remove(o),this.st.delete(o));for(const o in t){const s=!!t[o];s===this.st.has(o)||(i=this.nt)!=null&&i.has(o)||(s?(n.add(o),this.st.add(o)):(n.remove(o),this.st.delete(o)))}return Xn}});var Cv=Object.defineProperty,Pv=Object.getOwnPropertyDescriptor,oi=(e,t,n,r)=>{for(var i=r>1?void 0:r?Pv(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&Cv(t,n,i),i},Iv=be`:host{display:block}button{cursor:pointer;font-family:Inter,sans-serif;font-style:normal;font-weight:600;display:flex;align-items:center;justify-content:center;gap:8px;border:1px solid var(--button-border-color,none);background-color:var(--button-background-color);color:var(--button-text-color-ext,var(--button-text-color,var(--color-core-white)));box-sizing:border-box;transition:background-color .2s,box-shadow .2s,color .2s,transform .1s;outline:0;user-select:none;-webkit-tap-highlight-color:transparent;will-change:background-color,color,box-shadow,transform}button.full-size{width:100%}@media (hover:hover){button:enabled:hover{background-color:var(--button-background-color-hover);color:var(--button-text-color-ext-hover,var(--button-text-color-hover,var(--button-text-color)))}}button:enabled:active,button:enabled:focus-visible{transform:scale(.98);box-shadow:0 0 0 2px var(--button-box-shadow-color-active)}.active-box-shadow-inset:enabled:active,.active-box-shadow-inset:enabled:focus-visible{box-shadow:inset 0 0 0 2px var(--button-box-shadow-color-active)}button:disabled{cursor:not-allowed}`,Tv=be`button{border-radius:var(--border-radius)}.xs{padding:0 2px;--border-radius:4px;font-size:12px}.m{padding:6px 12px;--border-radius:8px;font-size:14px}.l{padding:8px 16px;--border-radius:12px;font-size:14px}.xl{padding:12px 24px;--border-radius:16px;font-size:16px}.xxl{padding:16px 24px;--border-radius:16px;font-size:20px}.m.only-icon{padding:0}.l.only-icon{padding:6px}.xl.only-icon{padding:12px}.xxl.only-icon{padding:18px}`,Bv=be`.primary{--button-background-color:var(--primary);--button-background-color-hover:var(--primary-hover);--button-box-shadow-color-active:var(--secondary);--button-text-color:var(--color-core-white);--loader-color:var(--primary-hover)}.primary-critical{--button-background-color:var(--color-core-red-critical);--button-background-color-hover:var(--color-core-red-critical-hover);--button-box-shadow-color-active:var(--color-background-bg-critical);--button-text-color:var(--color-core-white)}.primary-warning{--button-background-color:var(--color-core-orange-warning);--button-background-color-hover:var(--color-core-orange-warning-hover);--button-box-shadow-color-active:var(--color-background-bg-warning);--button-text-color:var(--color-core-white)}.primary-gray{--button-background-color:var(--color-background-bg-primary);--button-background-color-hover:var(--color-background-bg-secondary);--button-box-shadow-color-active:var(--color-background-bg-secondary);--button-text-color:var(--color-content-content-primary)}.secondary{--button-background-color:var(--secondary);--button-background-color-hover:var(--secondary-hover);--button-box-shadow-color-active:var(--secondary-hover);--button-text-color:var(--primary);--button-text-color-hover:var(--primary-hover)}.secondary-critical{--button-background-color:var(--color-background-bg-critical);--button-background-color-hover:var(--color-background-bg-critical-hover);--button-box-shadow-color-active:var(--color-background-bg-critical-hover);--button-text-color:var(--color-core-red-critical-hover)}.secondary-warning{--button-background-color:var(--color-background-bg-warning);--button-background-color-hover:var(--color-background-bg-warning-hover);--button-box-shadow-color-active:var(--color-background-bg-warning-hover);--button-text-color:var(--color-core-orange-warning)}.secondary-gray{--button-background-color:transparent;--button-border-color:var(--color-border-border-tertiary);--button-background-color-hover:var(--color-background-bg-secondary);--button-box-shadow-color-active:var(--secondary);--button-text-color:var(--color-content-content-primary);--button-text-color-hover:var(--color-content-content-secondary);--button-background-color-disabled:transparent;--button-border-color-disabled:var(--color-background-bg-disabled)}.tertiary{--button-background-color:transparent;--button-background-color-hover:var(--secondary);--button-text-color:var(--primary)}.tertiary-gray{--button-background-color:transparent;--button-background-color-hover:var(--color-background-bg-secondary);--button-text-color:var(--color-content-content-primary);--button-text-color-hover:var(--color-content-content-secondary)}button:disabled{background-color:var(--button-background-color-disabled,var(--color-background-bg-disabled));color:var(--color-content-content-disabled);border:1px solid var(--button-border-color-disabled,none)}`,Ov=be`button.loader{position:relative;--loader-border-size:2px}button.loader:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;border-radius:var(--border-radius);border:var(--loader-border-size) solid var(--loader-color,var(--button-box-shadow-color-active));animation:loader 3s linear infinite}@keyframes loader{0%{clip-path:polygon(0 0,100% 0,100% 5%,0 5%)}10%{clip-path:polygon(50% 0,100% 0,100% 50%,50% 5%)}20%{clip-path:polygon(95% 0,100% 0,100% 100%,95% 100%)}40%{clip-path:polygon(50% 50%,100% 50%,100% 100%,50% 100%)}50%{clip-path:polygon(0 95%,100% 95%,100% 100%,0 100%)}70%{clip-path:polygon(0 50%,50% 50%,50% 100%,0 100%)}80%{clip-path:polygon(0 0,5% 0,5% 100%,0 100%)}90%{clip-path:polygon(0 0,50% 0,50% 50%,0 50%)}100%{clip-path:polygon(0 0,100% 0,100% 5%,0 5%)}}`,wn=class extends Ue{constructor(){super(...arguments),this.size="xl",this.type="primary",this.fullSize=!1,this.disabled=!1,this.loader=!1,this.disabledSlotPointerEvent=!1,this.isIconButton=!1}render(){const e={[this.size]:!0,[this.type]:!0,"only-icon":this.isIconButton,"full-size":this.fullSize,loader:this.loader,"active-box-shadow-inset":this.type.includes("secondary")&&!this.type.includes("gray")};return G`<button class="${fn(e)}" @click="${()=>i0()}" ?disabled="${this.disabled}"><slot style="${this.disabledSlotPointerEvent?"pointer-events: none;":""}" @slotchange="${this.handleSlotChange}"></slot></button>`}handleSlotChange(e){const t=e.target;if(!t)return;const n=t.assignedNodes({flatten:!0}).filter(r=>r.nodeName!=="#text");this.isIconButton=n.length===1&&n[0].nodeName.toLowerCase()==="inch-icon",this.requestUpdate()}};wn.tagName="inch-button";wn.styles=[Iv,Tv,Bv,Ov];oi([_e({type:String,attribute:!0})],wn.prototype,"size",2);oi([_e({type:String,attribute:!0})],wn.prototype,"type",2);oi([_e({type:Boolean,attribute:!0})],wn.prototype,"fullSize",2);oi([_e({type:Boolean,attribute:!0})],wn.prototype,"disabled",2);oi([_e({type:Boolean,attribute:!0})],wn.prototype,"loader",2);oi([_e({type:Boolean,attribute:!0})],wn.prototype,"disabledSlotPointerEvent",2);oi([_t()],wn.prototype,"isIconButton",2);wn=oi([Ge(wn.tagName)],wn);var Rv=Object.defineProperty,Mv=Object.getOwnPropertyDescriptor,si=(e,t,n,r)=>{for(var i=r>1?void 0:r?Mv(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&Rv(t,n,i),i},Dv=be`:host{background-color:var(--color-background-bg-primary);border-radius:24px;width:fit-content;height:fit-content;display:block}:host(.shadow){box-shadow:0 -3px 4px 0 var(--primary-12),0 6px 12px 0 var(--primary-12)}:host(.mobile){border-bottom-left-radius:0;border-bottom-right-radius:0;width:100vw;height:fit-content;box-shadow:none}.card-content{padding:8px;display:flex;width:100%;height:100%;box-sizing:border-box;flex-direction:column;gap:8px}`,$i=class extends Ue{constructor(){super(...arguments),this.forMobileView=!1,this.showShadow=!1}render(){return G`<slot name="header"></slot><div class="card-content"><slot></slot></div>`}firstUpdated(){this.forMobileView&&!this.classList.contains("mobile")&&this.classList.add("mobile"),this.showShadow&&!this.classList.contains("shadow")&&this.classList.add("shadow")}};$i.tagName="inch-card";$i.styles=Dv;si([_e({type:Boolean})],$i.prototype,"forMobileView",2);si([_e({type:Boolean})],$i.prototype,"showShadow",2);$i=si([Ge($i.tagName)],$i);var Nv=be`:host{display:flex;height:60px;width:100%;padding:16px 16px 0;box-sizing:border-box;border-top-left-radius:32px;border-top-right-radius:32px}:host(.not-native-mode){height:44px;padding:0}.card-header-container{display:grid;grid-template-columns:1fr 1fr 1fr;width:100%;height:100%}.position-container{height:100%;width:100%;display:flex;align-items:center;color:var(--color-content-content-primary);gap:8px;word-wrap:break-word;white-space:nowrap}.center-container{justify-content:center}.left-container{justify-content:flex-start}.right-container{justify-content:flex-end}.card-header-title{font-size:20px;font-weight:600;line-height:28px;letter-spacing:0;text-align:center}.card-header-title__left:not(.card-header-title__and-back){margin-left:8px}.card-header-title__left:not(.card-header-title__and-back):dir(rtl){margin-right:8px}${Ht(be`.card-header-title{font-size:16px}:host{padding:8px 8px 0}`)}`,hr=class extends Ue{constructor(){super(),this.headerTextPosition="center",this.backButton=!1,this.closeButton=!1,this.slotDirty={},this.slot="header"}render(){return G`<div class="card-header-container"><div class="position-container left-container"><slot @slotchange="${()=>this.onSlotChange("left")}" name="left-container"></slot>${this.getBackButton("left")} ${this.getHeader("left")}</div><div class="position-container center-container"><slot @slotchange="${()=>this.onSlotChange("center")}" name="center-container"></slot>${this.getHeader("center")}</div><div class="position-container right-container"><slot @slotchange="${()=>this.onSlotChange("right")}" name="right-container"></slot>${this.getCloseButton("right")}</div></div>`}firstUpdated(){var e;((e=this.parentElement)==null?void 0:e.localName)!=="inch-card"&&this.classList.add("not-native-mode")}getHeader(e){const t=this.slotDirty[e]??!1,n={"card-header-title":!0,[`card-header-title__${e}`]:!0,"card-header-title__and-back":this.backButton};return this.headerTextPosition===e&&!t?G`<span class="${fn(n)}">${this.headerText}</span>`:""}getBackButton(e){const t=this.slotDirty[e]??!1;return this.backButton&&!t?G`<inch-button @click="${n=>pt(this,"backCard",null,n)}" size="l" type="tertiary-gray"><inch-icon icon="arrowLeft24"></inch-icon></inch-button>`:""}getCloseButton(e){const t=this.slotDirty[e]??!1;return this.closeButton&&!t?G`<inch-button @click="${n=>pt(this,"closeCard",null,n)}" size="l" type="tertiary-gray"><inch-icon icon="cross24"></inch-icon></inch-button>`:""}onSlotChange(e){this.slotDirty={...this.slotDirty,[e]:!0},this.requestUpdate()}};hr.tahName="inch-card-header";hr.styles=Nv;si([_e({type:String,attribute:!0})],hr.prototype,"headerText",2);si([_e({type:String,attribute:!0})],hr.prototype,"headerTextPosition",2);si([_e({type:Boolean,attribute:!0})],hr.prototype,"backButton",2);si([_e({type:Boolean,attribute:!0})],hr.prototype,"closeButton",2);hr=si([Ge(hr.tahName)],hr);function*Uh(e,t){if(e!==void 0){let n=0;for(const r of e)yield t(r,n++)}}const dr=e=>e??bt;function Pl(e,t={}){const{width:n,head:r=6,tail:i=4}=t;return n!==void 0&&(n>1410||940>n&&n>800)?e:`${e.slice(0,r)}...${e.slice(e.length-i)}`}function Si(e,t){const r=Fv(e,t).split("."),i=r[0].replace(/\B(?=(\d{3})+(?!\d))/g," ");return r.length>1?`${i}.${r[1]}`:i}function Fv(e,t){const n=e.indexOf(".");if(n===-1||e.length-n-1<=t)return e;if(t>0){const i=n+t+1;return e.substring(0,i)}return e.substring(0,n)}function Ur(e,t,n=t){if(e.length===1)return e;const r=e.indexOf(".");if(r===-1||e.slice(0,r).length>1)return Si(e,n);let i=0;for(let o=r+1;o<e.length;o++)if(e[o]==="0")i++;else return Si(e,i+t);return Si(e,n)}function Xf(e,t,n=t){if(e.length===1)return e;const r=Ur(e,t,n),i=r.replace(/\s+/g,""),[o]=i.split("."),s=o.length;if(s<=6)return r;if(s>6&&s<=9){const p=i.slice(0,s-6),m=i.slice(s-6,s-5);return`${p}.${m}M`}const l=i.slice(0,s-9),h=i.slice(s-9,s-8);return`${l}.${h}B`}function d0(e){const t=Math.floor(e/86400);e%=24*3600;const n=Math.floor(e/3600);e%=3600;const r=Math.floor(e/60);e%=60;const i=[];return t>0&&i.push(`${t}D`),n>0&&i.push(`${n}H`),r>0&&i.push(`${r}m`),(e>0||i.length===0)&&i.push(`${e}s`),i.join(" ")}function je(e,t,n){return e?t(e):n==null?void 0:n(e)}let f0=class extends Event{constructor(t,n,r){super("context-request",{bubbles:!0,composed:!0}),this.context=t,this.callback=n,this.subscribe=r??!1}};function oI(e){return e}let Jf=class{constructor(t,n,r,i){if(this.subscribe=!1,this.provided=!1,this.value=void 0,this.t=(o,s)=>{this.unsubscribe&&(this.unsubscribe!==s&&(this.provided=!1,this.unsubscribe()),this.subscribe||this.unsubscribe()),this.value=o,this.host.requestUpdate(),this.provided&&!this.subscribe||(this.provided=!0,this.callback&&this.callback(o,s)),this.unsubscribe=s},this.host=t,n.context!==void 0){const o=n;this.context=o.context,this.callback=o.callback,this.subscribe=o.subscribe??!1}else this.context=n,this.callback=r,this.subscribe=i??!1;this.host.addController(this)}hostConnected(){this.dispatchRequest()}hostDisconnected(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}dispatchRequest(){this.host.dispatchEvent(new f0(this.context,this.t,this.subscribe))}};class Lv{get value(){return this.o}set value(t){this.setValue(t)}setValue(t,n=!1){const r=n||!Object.is(t,this.o);this.o=t,r&&this.updateObservers()}constructor(t){this.subscriptions=new Map,this.updateObservers=()=>{for(const[n,{disposer:r}]of this.subscriptions)n(this.o,r)},t!==void 0&&(this.value=t)}addCallback(t,n,r){if(!r)return void t(this.value);this.subscriptions.has(t)||this.subscriptions.set(t,{disposer:()=>{this.subscriptions.delete(t)},consumerHost:n});const{disposer:i}=this.subscriptions.get(t);t(this.value,i)}clearCallbacks(){this.subscriptions.clear()}}let jv=class extends Event{constructor(t){super("context-provider",{bubbles:!0,composed:!0}),this.context=t}};class kc extends Lv{constructor(t,n,r){var i,o;super(n.context!==void 0?n.initialValue:r),this.onContextRequest=s=>{const l=s.composedPath()[0];s.context===this.context&&l!==this.host&&(s.stopPropagation(),this.addCallback(s.callback,l,s.subscribe))},this.onProviderRequest=s=>{const l=s.composedPath()[0];if(s.context!==this.context||l===this.host)return;const h=new Set;for(const[p,{consumerHost:m}]of this.subscriptions)h.has(p)||(h.add(p),m.dispatchEvent(new f0(this.context,p,!0)));s.stopPropagation()},this.host=t,n.context!==void 0?this.context=n.context:this.context=n,this.attachListeners(),(o=(i=this.host).addController)==null||o.call(i,this)}attachListeners(){this.host.addEventListener("context-request",this.onContextRequest),this.host.addEventListener("context-provider",this.onProviderRequest)}hostConnected(){this.host.dispatchEvent(new jv(this.context))}}function xn({context:e,subscribe:t}){return(n,r)=>{typeof r=="object"?r.addInitializer(function(){new Jf(this,{context:e,callback:i=>{n.set.call(this,i)},subscribe:t})}):n.constructor.addInitializer(i=>{new Jf(i,{context:e,callback:o=>{i[r]=o},subscribe:t})})}}const zv="1.0.5";let _n=class Il extends Error{constructor(t,n={}){var s;const r=n.cause instanceof Il?n.cause.details:(s=n.cause)!=null&&s.message?n.cause.message:n.details,i=n.cause instanceof Il&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${zv}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=t}};function ai(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const p0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,m0=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,y0=/^\(.+?\).*?$/,Qf=/^tuple(?<array>(\[(\d*)\])*)$/;function Tl(e){let t=e.type;if(Qf.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let i=0;i<n;i++){const o=e.components[i];t+=Tl(o),i<n-1&&(t+=", ")}const r=ai(Qf,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,Tl({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function cs(e){let t="";const n=e.length;for(let r=0;r<n;r++){const i=e[r];t+=Tl(i),r!==n-1&&(t+=", ")}return t}function Uv(e){return e.type==="function"?`function ${e.name}(${cs(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${cs(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${cs(e.inputs)})`:e.type==="error"?`error ${e.name}(${cs(e.inputs)})`:e.type==="constructor"?`constructor(${cs(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?"fallback()":"receive() external payable"}const g0=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Vv(e){return g0.test(e)}function qv(e){return ai(g0,e)}const b0=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Hv(e){return b0.test(e)}function Wv(e){return ai(b0,e)}const w0=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Gv(e){return w0.test(e)}function Kv(e){return ai(w0,e)}const v0=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function x0(e){return v0.test(e)}function Yv(e){return ai(v0,e)}const _0=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Zv(e){return _0.test(e)}function Xv(e){return ai(_0,e)}const Jv=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Qv(e){return Jv.test(e)}const e1=/^receive\(\) external payable$/;function t1(e){return e1.test(e)}const n1=new Set(["indexed"]),Bl=new Set(["calldata","memory","storage"]);class r1 extends _n{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class i1 extends _n{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class o1 extends _n{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class s1 extends _n{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class a1 extends _n{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class c1 extends _n{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class u1 extends _n{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class fs extends _n{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class l1 extends _n{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class h1 extends _n{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class d1 extends _n{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class f1 extends _n{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function p1(e,t){return t?`${t}:${e}`:e}const Ku=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function m1(e,t={}){if(Gv(e)){const n=Kv(e);if(!n)throw new fs({signature:e,type:"function"});const r=Pn(n.parameters),i=[],o=r.length;for(let l=0;l<o;l++)i.push(wi(r[l],{modifiers:Bl,structs:t,type:"function"}));const s=[];if(n.returns){const l=Pn(n.returns),h=l.length;for(let p=0;p<h;p++)s.push(wi(l[p],{modifiers:Bl,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:i,outputs:s}}if(Hv(e)){const n=Wv(e);if(!n)throw new fs({signature:e,type:"event"});const r=Pn(n.parameters),i=[],o=r.length;for(let s=0;s<o;s++)i.push(wi(r[s],{modifiers:n1,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:i}}if(Vv(e)){const n=qv(e);if(!n)throw new fs({signature:e,type:"error"});const r=Pn(n.parameters),i=[],o=r.length;for(let s=0;s<o;s++)i.push(wi(r[s],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:i}}if(Zv(e)){const n=Xv(e);if(!n)throw new fs({signature:e,type:"constructor"});const r=Pn(n.parameters),i=[],o=r.length;for(let s=0;s<o;s++)i.push(wi(r[s],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:i}}if(Qv(e))return{type:"fallback"};if(t1(e))return{type:"receive",stateMutability:"payable"};throw new l1({signature:e})}const y1=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,g1=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,b1=/^u?int$/;function wi(e,t){var g,v;const n=p1(e,t==null?void 0:t.type);if(Ku.has(n))return Ku.get(n);const r=y0.test(e),i=ai(r?g1:y1,e);if(!i)throw new o1({param:e});if(i.name&&v1(i.name))throw new s1({param:e,name:i.name});const o=i.name?{name:i.name}:{},s=i.modifier==="indexed"?{indexed:!0}:{},l=(t==null?void 0:t.structs)??{};let h,p={};if(r){h="tuple";const _=Pn(i.type),E=[],S=_.length;for(let P=0;P<S;P++)E.push(wi(_[P],{structs:l}));p={components:E}}else if(i.type in l)h="tuple",p={components:l[i.type]};else if(b1.test(i.type))h=`${i.type}256`;else if(h=i.type,(t==null?void 0:t.type)!=="struct"&&!E0(h))throw new i1({type:h});if(i.modifier){if(!((v=(g=t==null?void 0:t.modifiers)==null?void 0:g.has)!=null&&v.call(g,i.modifier)))throw new a1({param:e,type:t==null?void 0:t.type,modifier:i.modifier});if(Bl.has(i.modifier)&&!x1(h,!!i.array))throw new c1({param:e,type:t==null?void 0:t.type,modifier:i.modifier})}const m={type:`${h}${i.array??""}`,...o,...s,...p};return Ku.set(n,m),m}function Pn(e,t=[],n="",r=0){const i=e.trim().length;for(let o=0;o<i;o++){const s=e[o],l=e.slice(o+1);switch(s){case",":return r===0?Pn(l,[...t,n.trim()]):Pn(l,t,`${n}${s}`,r);case"(":return Pn(l,t,`${n}${s}`,r+1);case")":return Pn(l,t,`${n}${s}`,r-1);default:return Pn(l,t,`${n}${s}`,r)}}if(n==="")return t;if(r!==0)throw new f1({current:n,depth:r});return t.push(n.trim()),t}function E0(e){return e==="address"||e==="bool"||e==="function"||e==="string"||p0.test(e)||m0.test(e)}const w1=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function v1(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||p0.test(e)||m0.test(e)||w1.test(e)}function x1(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function _1(e){const t={},n=e.length;for(let s=0;s<n;s++){const l=e[s];if(!x0(l))continue;const h=Yv(l);if(!h)throw new fs({signature:l,type:"struct"});const p=h.properties.split(";"),m=[],g=p.length;for(let v=0;v<g;v++){const E=p[v].trim();if(!E)continue;const S=wi(E,{type:"struct"});m.push(S)}if(!m.length)throw new h1({signature:l});t[h.name]=m}const r={},i=Object.entries(t),o=i.length;for(let s=0;s<o;s++){const[l,h]=i[s];r[l]=S0(h,t)}return r}const E1=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function S0(e,t,n=new Set){const r=[],i=e.length;for(let o=0;o<i;o++){const s=e[o];if(y0.test(s.type))r.push(s);else{const h=ai(E1,s.type);if(!(h!=null&&h.type))throw new u1({abiParameter:s});const{array:p,type:m}=h;if(m in t){if(n.has(m))throw new d1({type:m});r.push({...s,type:`tuple${p??""}`,components:S0(t[m]??[],t,new Set([...n,m]))})}else if(E0(m))r.push(s);else throw new r1({type:m})}}return r}function cn(e){const t=_1(e),n=[],r=e.length;for(let i=0;i<r;i++){const o=e[i];x0(o)||n.push(m1(o,t))}return n}function ke(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const i=e[n];return typeof i=="function"?i:o=>t(e,o)}function br(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new N1(e.type);return`${e.name}(${Cc(e.inputs,{includeName:t})})`}function Cc(e,{includeName:t=!1}={}){return e?e.map(n=>S1(n,{includeName:t})).join(t?", ":","):""}function S1(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Cc(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function Jn(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function mt(e){return Jn(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const A1="2.17.0",$1=e=>e,Pc=e=>e,k1=()=>`viem@${A1}`;class Q extends Error{constructor(t,n={}){var o;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:k1()});const r=n.cause instanceof Q?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,i=n.cause instanceof Q&&n.cause.docsPath||n.docsPath;this.message=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${n.docsBaseUrl??"https://viem.sh"}${i}${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=t}walk(t){return A0(this,t)}}function A0(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e?A0(e.cause,t):t?null:e}class C1 extends Q{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class ep extends Q{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class $0 extends Q{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Cc(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Ic extends Q{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class P1 extends Q{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class I1 extends Q{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${mt(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class k0 extends Q{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class C0 extends Q{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class T1 extends Q{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class P0 extends Q{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class tp extends Q{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class pc extends Q{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class B1 extends Q{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class O1 extends Q{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${br(t.abiItem)}\`, and`,`\`${n.type}\` in \`${br(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class I0 extends Q{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class Os extends Q{constructor({abiItem:t,data:n,params:r,size:i}){super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Cc(r,{includeName:!0})})`,`Data:   ${n} (${i} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=i}}class Tc extends Q{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${br(t,{includeName:!0})}".`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class R1 extends Q{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class M1 extends Q{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class D1 extends Q{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class N1 extends Q{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class F1 extends Q{constructor(t){super(`Type "${t}" is not supported for packed encoding.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedPackedAbiType"})}}class L1 extends Q{constructor(t){super(`Filter type "${t}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}class T0 extends Q{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class B0 extends Q{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}class np extends Q{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidBytesLengthError"})}}function Yn(e,{dir:t,size:n=32}={}){return typeof e=="string"?Wr(e,{dir:t,size:n}):j1(e,{dir:t,size:n})}function Wr(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new B0({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function j1(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new B0({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const o=t==="right";r[o?i:n-i-1]=e[o?i:e.length-i-1]}return r}class z1 extends Q{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number "${o}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class U1 extends Q{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidBytesBooleanError"})}}class V1 extends Q{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function Io(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let i=0;i<n.length-1&&n[t==="left"?i:n.length-i-1].toString()==="0";i++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function rr(e,{size:t}){if(mt(e)>t)throw new V1({givenSize:mt(e),maxSize:t})}function ht(e,t={}){const{signed:n}=t;t.size&&rr(e,{size:t.size});const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,o=(1n<<BigInt(i)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Qn(e,t={}){return Number(ht(e,t))}const q1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Se(e,t={}){return typeof e=="number"||typeof e=="bigint"?Ie(e,t):typeof e=="string"?Ni(e,t):typeof e=="boolean"?Vh(e,t):Et(e,t)}function Vh(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(rr(n,{size:t.size}),Yn(n,{size:t.size})):n}function Et(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=q1[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(rr(r,{size:t.size}),Yn(r,{dir:"right",size:t.size})):r}function Ie(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const h=typeof e=="bigint"?"n":"";throw new z1({max:o?`${o}${h}`:void 0,min:`${s}${h}`,signed:n,size:r,value:`${e}${h}`})}const l=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Yn(l,{size:r}):l}const H1=new TextEncoder;function Ni(e,t={}){const n=H1.encode(e);return Et(n,t)}const W1=new TextEncoder;function Bn(e,t={}){return typeof e=="number"||typeof e=="bigint"?K1(e,t):typeof e=="boolean"?G1(e,t):Jn(e)?On(e,t):ki(e,t)}function G1(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(rr(n,{size:t.size}),Yn(n,{size:t.size})):n}const ar={zero:48,nine:57,A:65,F:70,a:97,f:102};function rp(e){if(e>=ar.zero&&e<=ar.nine)return e-ar.zero;if(e>=ar.A&&e<=ar.F)return e-(ar.A-10);if(e>=ar.a&&e<=ar.f)return e-(ar.a-10)}function On(e,t={}){let n=e;t.size&&(rr(n,{size:t.size}),n=Yn(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,o=new Uint8Array(i);for(let s=0,l=0;s<i;s++){const h=rp(r.charCodeAt(l++)),p=rp(r.charCodeAt(l++));if(h===void 0||p===void 0)throw new Q(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);o[s]=h*16+p}return o}function K1(e,t){const n=Ie(e,t);return On(n)}function ki(e,t={}){const n=W1.encode(e);return typeof t.size=="number"?(rr(n,{size:t.size}),Yn(n,{dir:"right",size:t.size})):n}function mc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Y1(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function oa(e,...t){if(!Y1(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Z1(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");mc(e.outputLen),mc(e.blockLen)}function To(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function O0(e,t){oa(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Za=BigInt(2**32-1),ip=BigInt(32);function X1(e,t=!1){return t?{h:Number(e&Za),l:Number(e>>ip&Za)}:{h:Number(e>>ip&Za)|0,l:Number(e&Za)|0}}function J1(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=X1(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]}const Q1=(e,t,n)=>e<<n|t>>>32-n,ex=(e,t,n)=>t<<n|e>>>32-n,tx=(e,t,n)=>t<<n-32|e>>>64-n,nx=(e,t,n)=>e<<n-32|t>>>64-n,Yu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const rx=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Zu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Hn=(e,t)=>e<<32-t|e>>>t,op=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,ix=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function sp(e){for(let t=0;t<e.length;t++)e[t]=ix(e[t])}function ox(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Bc(e){return typeof e=="string"&&(e=ox(e)),oa(e),e}function sx(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];oa(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class qh{clone(){return this._cloneInto()}}function R0(e){const t=r=>e().update(Bc(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function ax(e=32){if(Yu&&typeof Yu.getRandomValues=="function")return Yu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const M0=[],D0=[],N0=[],cx=BigInt(0),us=BigInt(1),ux=BigInt(2),lx=BigInt(7),hx=BigInt(256),dx=BigInt(113);for(let e=0,t=us,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],M0.push(2*(5*r+n)),D0.push((e+1)*(e+2)/2%64);let i=cx;for(let o=0;o<7;o++)t=(t<<us^(t>>lx)*dx)%hx,t&ux&&(i^=us<<(us<<BigInt(o))-us);N0.push(i)}const[fx,px]=J1(N0,!0),ap=(e,t,n)=>n>32?tx(e,t,n):Q1(e,t,n),cp=(e,t,n)=>n>32?nx(e,t,n):ex(e,t,n);function mx(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const l=(s+8)%10,h=(s+2)%10,p=n[h],m=n[h+1],g=ap(p,m,1)^n[l],v=cp(p,m,1)^n[l+1];for(let _=0;_<50;_+=10)e[s+_]^=g,e[s+_+1]^=v}let i=e[2],o=e[3];for(let s=0;s<24;s++){const l=D0[s],h=ap(i,o,l),p=cp(i,o,l),m=M0[s];i=e[m],o=e[m+1],e[m]=h,e[m+1]=p}for(let s=0;s<50;s+=10){for(let l=0;l<10;l++)n[l]=e[s+l];for(let l=0;l<10;l++)e[s+l]^=~n[(l+2)%10]&n[(l+4)%10]}e[0]^=fx[r],e[1]^=px[r]}n.fill(0)}class Hh extends qh{constructor(t,n,r,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,mc(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=rx(this.state)}keccak(){op||sp(this.state32),mx(this.state32,this.rounds),op||sp(this.state32),this.posOut=0,this.pos=0}update(t){To(this);const{blockLen:n,state:r}=this;t=Bc(t);const i=t.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let l=0;l<s;l++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){To(this,!1),oa(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=t.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return mc(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(O0(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new Hh(n,r,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}const yx=(e,t,n)=>R0(()=>new Hh(t,e,n)),gx=yx(1,136,256/8);function Zt(e,t){const n=t||"hex",r=gx(Jn(e,{strict:!1})?Bn(e):e);return n==="bytes"?r:Se(r)}const bx=e=>Zt(Bn(e));function wx(e){return bx(e)}function vx(e){let t=!0,n="",r=0,i="",o=!1;for(let s=0;s<e.length;s++){const l=e[s];if(["(",")",","].includes(l)&&(t=!0),l==="("&&r++,l===")"&&r--,!!t){if(r===0){if(l===" "&&["event","function",""].includes(i))i="";else if(i+=l,l===")"){o=!0;break}continue}if(l===" "){e[s-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}i+=l,n+=l}}if(!o)throw new Q("Unable to normalize signature.");return i}const xx=e=>{const t=typeof e=="string"?e:Uv(e);return vx(t)};function F0(e){return wx(xx(e))}const Wh=F0;class Pt extends Q{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}class Gh extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}set(t,n){return super.set(t,n),this.maxSize&&this.size>this.maxSize&&this.delete(this.keys().next().value),this}}const Xu=new Gh(8192);function Oc(e,t){if(Xu.has(`${e}.${t}`))return Xu.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=Zt(ki(n),"bytes"),i=n.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&i[s]&&(i[s]=i[s].toUpperCase()),(r[s>>1]&15)>=8&&i[s+1]&&(i[s+1]=i[s+1].toUpperCase());const o=`0x${i.join("")}`;return Xu.set(`${e}.${t}`,o),o}function Vr(e,t){if(!vt(e,{strict:!1}))throw new Pt({address:e});return Oc(e,t)}const _x=/^0x[a-fA-F0-9]{40}$/,Ju=new Gh(8192);function vt(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Ju.has(r))return Ju.get(r);const i=_x.test(e)?e.toLowerCase()===e?!0:n?Oc(e)===e:!0:!1;return Ju.set(r,i),i}function wr(e){return typeof e[0]=="string"?Ln(e):Ex(e)}function Ex(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function Ln(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Rs(e,t,n,{strict:r}={}){return Jn(e,{strict:!1})?U0(e,t,n,{strict:r}):z0(e,t,n,{strict:r})}function L0(e,t){if(typeof t=="number"&&t>0&&t>mt(e)-1)throw new T0({offset:t,position:"start",size:mt(e)})}function j0(e,t,n){if(typeof t=="number"&&typeof n=="number"&&mt(e)!==n-t)throw new T0({offset:n,position:"end",size:mt(e)})}function z0(e,t,n,{strict:r}={}){L0(e,t);const i=e.slice(t,n);return r&&j0(i,t,n),i}function U0(e,t,n,{strict:r}={}){L0(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&j0(i,t,n),i}function qi(e,t){if(e.length!==t.length)throw new k0({expectedLength:e.length,givenLength:t.length});const n=Sx({params:e,values:t}),r=Yh(n);return r.length===0?"0x":r}function Sx({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Kh({param:e[r],value:t[r]}));return n}function Kh({param:e,value:t}){const n=Zh(e.type);if(n){const[r,i]=n;return $x(t,{length:r,param:{...e,type:i}})}if(e.type==="tuple")return Tx(t,{param:e});if(e.type==="address")return Ax(t);if(e.type==="bool")return Cx(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int");return Px(t,{signed:r})}if(e.type.startsWith("bytes"))return kx(t,{param:e});if(e.type==="string")return Ix(t);throw new R1(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Yh(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:s,encoded:l}=e[o];s?t+=32:t+=mt(l)}const n=[],r=[];let i=0;for(let o=0;o<e.length;o++){const{dynamic:s,encoded:l}=e[o];s?(n.push(Ie(t+i,{size:32})),r.push(l),i+=mt(l)):n.push(l)}return wr([...n,...r])}function Ax(e){if(!vt(e))throw new Pt({address:e});return{dynamic:!1,encoded:Wr(e.toLowerCase())}}function $x(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new D1(e);if(!r&&e.length!==t)throw new P1({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const o=[];for(let s=0;s<e.length;s++){const l=Kh({param:n,value:e[s]});l.dynamic&&(i=!0),o.push(l)}if(r||i){const s=Yh(o);if(r){const l=Ie(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?wr([l,s]):l}}if(i)return{dynamic:!0,encoded:s}}return{dynamic:!1,encoded:wr(o.map(({encoded:s})=>s))}}function kx(e,{param:t}){const[,n]=t.type.split("bytes"),r=mt(e);if(!n){let i=e;return r%32!==0&&(i=Wr(i,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:wr([Wr(Ie(r,{size:32})),i])}}if(r!==Number.parseInt(n))throw new I1({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:Wr(e,{dir:"right"})}}function Cx(e){if(typeof e!="boolean")throw new Q(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Wr(Vh(e))}}function Px(e,{signed:t}){return{dynamic:!1,encoded:Ie(e,{size:32,signed:t})}}function Ix(e){const t=Ni(e),n=Math.ceil(mt(t)/32),r=[];for(let i=0;i<n;i++)r.push(Wr(Rs(t,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:wr([Wr(Ie(mt(t),{size:32})),...r])}}function Tx(e,{param:t}){let n=!1;const r=[];for(let i=0;i<t.components.length;i++){const o=t.components[i],s=Array.isArray(e)?i:o.name,l=Kh({param:o,value:e[s]});r.push(l),l.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Yh(r):wr(r.map(({encoded:i})=>i))}}function Zh(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Hi=e=>Rs(F0(e),0,4);function sa(e){const{abi:t,args:n=[],name:r}=e,i=Jn(r,{strict:!1}),o=t.filter(l=>i?l.type==="function"?Hi(l)===r:l.type==="event"?Wh(l)===r:!1:"name"in l&&l.name===r);if(o.length===0)return;if(o.length===1)return o[0];let s;for(const l of o){if(!("inputs"in l))continue;if(!n||n.length===0){if(!l.inputs||l.inputs.length===0)return l;continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==n.length)continue;if(n.every((p,m)=>{const g="inputs"in l&&l.inputs[m];return g?Ol(p,g):!1})){if(s&&"inputs"in s&&s.inputs){const p=V0(l.inputs,s.inputs,n);if(p)throw new O1({abiItem:l,type:p[0]},{abiItem:s,type:p[1]})}s=l}}return s||o[0]}function Ol(e,t){const n=typeof e,r=t.type;switch(r){case"address":return vt(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((i,o)=>Ol(Object.values(e)[o],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(i=>Ol(i,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function V0(e,t,n){for(const r in e){const i=e[r],o=t[r];if(i.type==="tuple"&&o.type==="tuple"&&"components"in i&&"components"in o)return V0(i.components,o.components,n[r]);const s=[i.type,o.type];if(s.includes("address")&&s.includes("bytes20")?!0:s.includes("address")&&s.includes("string")?vt(n[r],{strict:!1}):s.includes("address")&&s.includes("bytes")?vt(n[r],{strict:!1}):!1)return s}}const up="/docs/contract/encodeEventTopics";function aa(e){var h;const{abi:t,eventName:n,args:r}=e;let i=t[0];if(n){const p=sa({abi:t,name:n});if(!p)throw new tp(n,{docsPath:up});i=p}if(i.type!=="event")throw new tp(void 0,{docsPath:up});const o=br(i),s=Wh(o);let l=[];if(r&&"inputs"in i){const p=(h=i.inputs)==null?void 0:h.filter(g=>"indexed"in g&&g.indexed),m=Array.isArray(r)?r:Object.values(r).length>0?(p==null?void 0:p.map(g=>r[g.name]))??[]:[];m.length>0&&(l=(p==null?void 0:p.map((g,v)=>Array.isArray(m[v])?m[v].map((_,E)=>lp({param:g,value:m[v][E]})):m[v]?lp({param:g,value:m[v]}):null))??[])}return[s,...l]}function lp({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Zt(Bn(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new L1(e.type);return qi([e],[t])}function Rc(e,{method:t}){var r,i;const n={};return e.transport.type==="fallback"&&((i=(r=e.transport).onResponse)==null||i.call(r,({method:o,response:s,status:l,transport:h})=>{l==="success"&&t===o&&(n[s]=h.request)})),o=>n[o]||e.request}async function q0(e,t){const{address:n,abi:r,args:i,eventName:o,fromBlock:s,strict:l,toBlock:h}=t,p=Rc(e,{method:"eth_newFilter"}),m=o?aa({abi:r,args:i,eventName:o}):void 0,g=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof s=="bigint"?Ie(s):s,toBlock:typeof h=="bigint"?Ie(h):h,topics:m}]});return{abi:r,args:i,eventName:o,id:g,request:p(g),strict:!!l,type:"event"}}function En(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const hp="/docs/contract/encodeFunctionData";function Bx(e){const{abi:t,args:n,functionName:r}=e;let i=t[0];if(r){const o=sa({abi:t,args:n,name:r});if(!o)throw new pc(r,{docsPath:hp});i=o}if(i.type!=="function")throw new pc(void 0,{docsPath:hp});return{abi:[i],functionName:Hi(br(i))}}function Sr(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var l;return e.abi.length===1&&((l=e.functionName)!=null&&l.startsWith("0x"))?e:Bx(e)})(),i=n[0],o=r,s="inputs"in i&&i.inputs?qi(i.inputs,t??[]):void 0;return Ln([o,s??"0x"])}const H0={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Ox={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Rx={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class dp extends Q{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NegativeOffsetError"})}}class W0 extends Q{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PositionOutOfBoundsError"})}}class Mx extends Q{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RecursiveReadLimitExceededError"})}}const Dx={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Mx({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new W0({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new dp({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new dp({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Xh(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Dx);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Nx(e,t={}){typeof t.size<"u"&&rr(e,{size:t.size});const n=Et(e,t);return ht(n,t)}function Fx(e,t={}){let n=e;if(typeof t.size<"u"&&(rr(n,{size:t.size}),n=Io(n)),n.length>1||n[0]>1)throw new U1(n);return!!n[0]}function fr(e,t={}){typeof t.size<"u"&&rr(e,{size:t.size});const n=Et(e,t);return Qn(n,t)}function Lx(e,t={}){let n=e;return typeof t.size<"u"&&(rr(n,{size:t.size}),n=Io(n,{dir:"right"})),new TextDecoder().decode(n)}function ca(e,t){const n=typeof t=="string"?On(t):t,r=Xh(n);if(mt(n)===0&&e.length>0)throw new Ic;if(mt(t)&&mt(t)<32)throw new $0({data:typeof t=="string"?t:Et(t),params:e,size:mt(t)});let i=0;const o=[];for(let s=0;s<e.length;++s){const l=e[s];r.setPosition(i);const[h,p]=yo(r,l,{staticPosition:0});i+=p,o.push(h)}return o}function yo(e,t,{staticPosition:n}){const r=Zh(t.type);if(r){const[i,o]=r;return zx(e,{...t,type:o},{length:i,staticPosition:n})}if(t.type==="tuple")return Hx(e,t,{staticPosition:n});if(t.type==="address")return jx(e);if(t.type==="bool")return Ux(e);if(t.type.startsWith("bytes"))return Vx(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return qx(e,t);if(t.type==="string")return Wx(e,{staticPosition:n});throw new M1(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const fp=32,Rl=32;function jx(e){const t=e.readBytes(32);return[Oc(Et(z0(t,-20))),32]}function zx(e,t,{length:n,staticPosition:r}){if(!n){const s=fr(e.readBytes(Rl)),l=r+s,h=l+fp;e.setPosition(l);const p=fr(e.readBytes(fp)),m=Ms(t);let g=0;const v=[];for(let _=0;_<p;++_){e.setPosition(h+(m?_*32:g));const[E,S]=yo(e,t,{staticPosition:h});g+=S,v.push(E)}return e.setPosition(r+32),[v,32]}if(Ms(t)){const s=fr(e.readBytes(Rl)),l=r+s,h=[];for(let p=0;p<n;++p){e.setPosition(l+p*32);const[m]=yo(e,t,{staticPosition:l});h.push(m)}return e.setPosition(r+32),[h,32]}let i=0;const o=[];for(let s=0;s<n;++s){const[l,h]=yo(e,t,{staticPosition:r+i});i+=h,o.push(l)}return[o,i]}function Ux(e){return[Fx(e.readBytes(32),{size:32}),32]}function Vx(e,t,{staticPosition:n}){const[r,i]=t.type.split("bytes");if(!i){const s=fr(e.readBytes(32));e.setPosition(n+s);const l=fr(e.readBytes(32));if(l===0)return e.setPosition(n+32),["0x",32];const h=e.readBytes(l);return e.setPosition(n+32),[Et(h),32]}return[Et(e.readBytes(Number.parseInt(i),32)),32]}function qx(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),i=e.readBytes(32);return[r>48?Nx(i,{signed:n}):fr(i,{signed:n}),32]}function Hx(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:s})=>!s),i=r?[]:{};let o=0;if(Ms(t)){const s=fr(e.readBytes(Rl)),l=n+s;for(let h=0;h<t.components.length;++h){const p=t.components[h];e.setPosition(l+o);const[m,g]=yo(e,p,{staticPosition:l});o+=g,i[r?h:p==null?void 0:p.name]=m}return e.setPosition(n+32),[i,32]}for(let s=0;s<t.components.length;++s){const l=t.components[s],[h,p]=yo(e,l,{staticPosition:n});i[r?s:l==null?void 0:l.name]=h,o+=p}return[i,o]}function Wx(e,{staticPosition:t}){const n=fr(e.readBytes(32)),r=t+n;e.setPosition(r);const i=fr(e.readBytes(32));if(i===0)return e.setPosition(t+32),["",32];const o=e.readBytes(i,32),s=Lx(Io(o));return e.setPosition(t+32),[s,32]}function Ms(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(Ms);const n=Zh(e.type);return!!(n&&Ms({...e,type:n[1]}))}function Gx(e){const{abi:t,data:n}=e,r=Rs(n,0,4);if(r==="0x")throw new Ic;const o=[...t||[],Ox,Rx].find(s=>s.type==="error"&&r===Hi(br(s)));if(!o)throw new C0(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?ca(o.inputs,Rs(n,4)):void 0,errorName:o.name}}const It=(e,t,n)=>JSON.stringify(e,(r,i)=>typeof i=="bigint"?i.toString():i,n);function G0({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((i,o)=>`${r&&i.name?`${i.name}: `:""}${typeof t[o]=="object"?It(t[o]):t[o]}`).join(", ")})`}const Kx={gwei:9,wei:18},Yx={ether:-9,wei:9};function Vt(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[i,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${i||"0"}${o?`.${o}`:""}`}function Jh(e,t="wei"){return Vt(e,Kx[t])}function nn(e,t="wei"){return Vt(e,Yx[t])}class Zx extends Q{constructor({address:t}){super(`State for account "${t}" is set multiple times.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountStateConflictError"})}}class Xx extends Q{constructor(){super("state and stateDiff are set on the same account."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"StateAssignmentConflictError"})}}function pp(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function Jx(e){return e.reduce((t,{address:n,...r})=>{let i=`${t}    ${n}:
`;return r.nonce&&(i+=`      nonce: ${r.nonce}
`),r.balance&&(i+=`      balance: ${r.balance}
`),r.code&&(i+=`      code: ${r.code}
`),r.state&&(i+=`      state:
`,i+=pp(r.state)),r.stateDiff&&(i+=`      stateDiff:
`,i+=pp(r.stateDiff)),i},`  State Override:
`).slice(0,-1)}function ua(e){const t=Object.entries(e).map(([r,i])=>i===void 0||i===!1?null:[r,i]).filter(Boolean),n=t.reduce((r,[i])=>Math.max(r,i.length),0);return t.map(([r,i])=>`  ${`${r}:`.padEnd(n+1)}  ${i}`).join(`
`)}class Qx extends Q{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class e_ extends Q{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidLegacyVError"})}}class t_ extends Q{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",ua(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class n_ extends Q{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStorageKeySizeError"})}}class r_ extends Q{constructor(t,{account:n,docsPath:r,chain:i,data:o,gas:s,gasPrice:l,maxFeePerGas:h,maxPriorityFeePerGas:p,nonce:m,to:g,value:v}){var E;const _=ua({chain:i&&`${i==null?void 0:i.name} (id: ${i==null?void 0:i.id})`,from:n==null?void 0:n.address,to:g,value:typeof v<"u"&&`${Jh(v)} ${((E=i==null?void 0:i.nativeCurrency)==null?void 0:E.symbol)||"ETH"}`,data:o,gas:s,gasPrice:typeof l<"u"&&`${nn(l)} gwei`,maxFeePerGas:typeof h<"u"&&`${nn(h)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${nn(p)} gwei`,nonce:m});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",_].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=t}}class K0 extends Q{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:i,index:o}){let s="Transaction";r&&o!==void 0&&(s=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(s=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(s=`Transaction at block number "${n}" at index "${o}"`),i&&(s=`Transaction with hash "${i}"`),super(`${s} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class Y0 extends Q{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class mp extends Q{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}class Z0 extends Q{constructor(t,{account:n,docsPath:r,chain:i,data:o,gas:s,gasPrice:l,maxFeePerGas:h,maxPriorityFeePerGas:p,nonce:m,to:g,value:v,stateOverride:_}){var P;const E=n?En(n):void 0;let S=ua({from:E==null?void 0:E.address,to:g,value:typeof v<"u"&&`${Jh(v)} ${((P=i==null?void 0:i.nativeCurrency)==null?void 0:P.symbol)||"ETH"}`,data:o,gas:s,gasPrice:typeof l<"u"&&`${nn(l)} gwei`,maxFeePerGas:typeof h<"u"&&`${nn(h)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${nn(p)} gwei`,nonce:m});_&&(S+=`
${Jx(_)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",S].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=t}}class i_ extends Q{constructor(t,{abi:n,args:r,contractAddress:i,docsPath:o,functionName:s,sender:l}){const h=sa({abi:n,args:r,name:s}),p=h?G0({abiItem:h,args:r,includeFunctionName:!1,includeName:!1}):void 0,m=h?br(h,{includeName:!0}):void 0,g=ua({address:i&&$1(i),function:m,args:p&&p!=="()"&&`${[...Array((s==null?void 0:s.length)??0).keys()].map(()=>" ").join("")}${p}`,sender:l});super(t.shortMessage||`An unknown error occurred while executing the contract function "${s}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Contract Call:",g].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=i,this.functionName=s,this.sender=l}}class Ml extends Q{constructor({abi:t,data:n,functionName:r,message:i}){let o,s,l,h;if(n&&n!=="0x")try{s=Gx({abi:t,data:n});const{abiItem:m,errorName:g,args:v}=s;if(g==="Error")h=v[0];else if(g==="Panic"){const[_]=v;h=H0[_]}else{const _=m?br(m,{includeName:!0}):void 0,E=m&&v?G0({abiItem:m,args:v,includeFunctionName:!1,includeName:!1}):void 0;l=[_?`Error: ${_}`:"",E&&E!=="()"?`       ${[...Array((g==null?void 0:g.length)??0).keys()].map(()=>" ").join("")}${E}`:""]}}catch(m){o=m}else i&&(h=i);let p;o instanceof C0&&(p=o.signature,l=[`Unable to decode signature "${p}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${p}.`]),super(h&&h!=="execution reverted"||p?[`The contract function "${r}" reverted with the following ${p?"signature":"reason"}:`,h||p].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:l}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=s,this.reason=h,this.signature=p}}class o_ extends Q{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class s_ extends Q{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CounterfactualDeploymentFailedError"})}}class Qh extends Q{constructor({data:t,message:n}){super(n||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class xs extends Q{constructor({body:t,cause:n,details:r,headers:i,status:o,url:s}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${Pc(s)}`,t&&`Request body: ${It(t)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=i,this.status=o,this.url=s}}class a_ extends Q{constructor({body:t,details:n,url:r}){super("WebSocket request failed.",{details:n,metaMessages:[`URL: ${Pc(r)}`,`Request body: ${It(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class Mc extends Q{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Pc(r)}`,`Request body: ${It(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code}}class Dl extends Q{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Pc(n)}`,`Request body: ${It(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}const c_=-1;class un extends Q{constructor(t,{code:n,docsPath:r,metaMessages:i,shortMessage:o}){super(o,{cause:t,docsPath:r,metaMessages:i||(t==null?void 0:t.metaMessages)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t.name,this.code=t instanceof Mc?t.code:n??c_}}class Vo extends un{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Ds extends un{constructor(t){super(t,{code:Ds.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(Ds,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ns extends un{constructor(t){super(t,{code:Ns.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(Ns,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Fs extends un{constructor(t){super(t,{code:Fs.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(Fs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Ls extends un{constructor(t){super(t,{code:Ls.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(Ls,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Fi extends un{constructor(t){super(t,{code:Fi.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(Fi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Li extends un{constructor(t){super(t,{code:Li.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(Li,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class js extends un{constructor(t){super(t,{code:js.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(js,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class zs extends un{constructor(t){super(t,{code:zs.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(zs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Bo extends un{constructor(t){super(t,{code:Bo.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(Bo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Us extends un{constructor(t){super(t,{code:Us.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(Us,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Oo extends un{constructor(t){super(t,{code:Oo.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(Oo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Vs extends un{constructor(t){super(t,{code:Vs.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(Vs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Ci extends Vo{constructor(t){super(t,{code:Ci.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(Ci,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class qs extends Vo{constructor(t){super(t,{code:qs.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(qs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Hs extends Vo{constructor(t){super(t,{code:Hs.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(Hs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ws extends Vo{constructor(t){super(t,{code:Ws.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(Ws,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Gs extends Vo{constructor(t){super(t,{code:Gs.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(Gs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ks extends Vo{constructor(t){super(t,{code:Ks.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(Ks,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class u_ extends un{constructor(t){super(t,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}const l_=3;function Ys(e,{abi:t,address:n,args:r,docsPath:i,functionName:o,sender:s}){const{code:l,data:h,message:p,shortMessage:m}=e instanceof Qh?e:e instanceof Q?e.walk(v=>"data"in v)||e.walk():{},g=e instanceof Ic?new o_({functionName:o}):[l_,Fi.code].includes(l)&&(h||p||m)?new Ml({abi:t,data:typeof h=="object"?h.data:h,functionName:o,message:m??p}):e;return new i_(g,{abi:t,args:r,contractAddress:n,docsPath:i,functionName:o,sender:s})}class h_ extends Q{constructor(t,{account:n,docsPath:r,chain:i,data:o,gas:s,gasPrice:l,maxFeePerGas:h,maxPriorityFeePerGas:p,nonce:m,to:g,value:v}){var E;const _=ua({from:n==null?void 0:n.address,to:g,value:typeof v<"u"&&`${Jh(v)} ${((E=i==null?void 0:i.nativeCurrency)==null?void 0:E.symbol)||"ETH"}`,data:o,gas:s,gasPrice:typeof l<"u"&&`${nn(l)} gwei`,maxFeePerGas:typeof h<"u"&&`${nn(h)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${nn(p)} gwei`,nonce:m});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",_].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=t}}class po extends Q{constructor({cause:t,message:n}={}){var i;const r=(i=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(po,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(po,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ji extends Q{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${nn(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(ji,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Nl extends Q{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${nn(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(Nl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Fl extends Q{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(Fl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Ll extends Q{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(Ll,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class jl extends Q{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(jl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class zl extends Q{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(zl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class Ul extends Q{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(Ul,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Vl extends Q{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(Vl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class ql extends Q{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(ql,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Zs extends Q{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${nn(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${nn(r)} gwei`:""}).`].join(`
`),{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(Zs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Dc extends Q{constructor({cause:t}){super(`An error occurred while executing: ${t==null?void 0:t.shortMessage}`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}function ed(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof Q?e.walk(i=>i.code===po.code):e;return r instanceof Q?new po({cause:e,message:r.details}):po.nodeMessage.test(n)?new po({cause:e,message:e.details}):ji.nodeMessage.test(n)?new ji({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Nl.nodeMessage.test(n)?new Nl({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Fl.nodeMessage.test(n)?new Fl({cause:e,nonce:t==null?void 0:t.nonce}):Ll.nodeMessage.test(n)?new Ll({cause:e,nonce:t==null?void 0:t.nonce}):jl.nodeMessage.test(n)?new jl({cause:e,nonce:t==null?void 0:t.nonce}):zl.nodeMessage.test(n)?new zl({cause:e}):Ul.nodeMessage.test(n)?new Ul({cause:e,gas:t==null?void 0:t.gas}):Vl.nodeMessage.test(n)?new Vl({cause:e,gas:t==null?void 0:t.gas}):ql.nodeMessage.test(n)?new ql({cause:e}):Zs.nodeMessage.test(n)?new Zs({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new Dc({cause:e})}function d_(e,{docsPath:t,...n}){const r=(()=>{const i=ed(e,n);return i instanceof Dc?e:i})();return new h_(r,{docsPath:t,...n})}function td(e,{format:t}){if(!t)return{};const n={};function r(o){const s=Object.keys(o);for(const l of s)l in e&&(n[l]=e[l]),o[l]&&typeof o[l]=="object"&&!Array.isArray(o[l])&&r(o[l])}const i=t(e||{});return r(i),n}function Nc(e,t){return({exclude:n,format:r})=>({exclude:n,format:i=>{const o=t(i);if(n)for(const s of n)delete o[s];return{...o,...r(i)}},type:e})}const f_={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3"};function la(e){const t={};return typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>Et(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=Ie(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=Ie(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=Ie(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=Ie(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=Ie(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=Ie(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=f_[e.type]),typeof e.value<"u"&&(t.value=Ie(e.value)),t}const p_=Nc("transactionRequest",la);function yp(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new np({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new np({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function m_(e){const{balance:t,nonce:n,state:r,stateDiff:i,code:o}=e,s={};if(o!==void 0&&(s.code=o),t!==void 0&&(s.balance=Ie(t)),n!==void 0&&(s.nonce=Ie(n)),r!==void 0&&(s.state=yp(r)),i!==void 0){if(s.state)throw new Xx;s.stateDiff=yp(i)}return s}function X0(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!vt(n,{strict:!1}))throw new Pt({address:n});if(t[n])throw new Zx({address:n});t[n]=m_(r)}return t}function ha(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:i,to:o}=e,s=t?En(t):void 0;if(s&&!vt(s.address))throw new Pt({address:s.address});if(o&&!vt(o))throw new Pt({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof i<"u"))throw new Qx;if(r&&r>2n**256n-1n)throw new ji({maxFeePerGas:r});if(i&&r&&i>r)throw new Zs({maxFeePerGas:r,maxPriorityFeePerGas:i})}class y_ extends Q{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class nd extends Q{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class g_ extends Q{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${nn(t)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class J0 extends Q{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const Q0={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844"};function Fc(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Qn(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Qn(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Q0[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}const ey=Nc("transaction",Fc);function rd(e){var n;const t=(n=e.transactions)==null?void 0:n.map(r=>typeof r=="string"?r:Fc(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const ty=Nc("block",rd);async function ni(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:i}={}){var m,g,v;const o=r??"latest",s=i??!1,l=n!==void 0?Ie(n):void 0;let h=null;if(t?h=await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):h=await e.request({method:"eth_getBlockByNumber",params:[l||o,s]},{dedupe:!!l}),!h)throw new J0({blockHash:t,blockNumber:n});return(((v=(g=(m=e.chain)==null?void 0:m.formatters)==null?void 0:g.block)==null?void 0:v.format)||rd)(h)}async function id(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function b_(e,t){return ny(e,t)}async function ny(e,t){var o,s,l;const{block:n,chain:r=e.chain,request:i}=t||{};if(typeof((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee)=="function"){const h=n||await ke(e,ni,"getBlock")({});return r.fees.defaultPriorityFee({block:h,client:e,request:i})}if(typeof((s=r==null?void 0:r.fees)==null?void 0:s.defaultPriorityFee)<"u")return(l=r==null?void 0:r.fees)==null?void 0:l.defaultPriorityFee;try{const h=await e.request({method:"eth_maxPriorityFeePerGas"});return ht(h)}catch{const[h,p]=await Promise.all([n?Promise.resolve(n):ke(e,ni,"getBlock")({}),ke(e,id,"getGasPrice")({})]);if(typeof h.baseFeePerGas!="bigint")throw new nd;const m=p-h.baseFeePerGas;return m<0n?0n:m}}async function w_(e,t){return Hl(e,t)}async function Hl(e,t){var v,_;const{block:n,chain:r=e.chain,request:i,type:o="eip1559"}=t||{},s=await(async()=>{var E,S;return typeof((E=r==null?void 0:r.fees)==null?void 0:E.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:i}):((S=r==null?void 0:r.fees)==null?void 0:S.baseFeeMultiplier)??1.2})();if(s<1)throw new y_;const h=10**(((v=s.toString().split(".")[1])==null?void 0:v.length)??0),p=E=>E*BigInt(Math.ceil(s*h))/BigInt(h),m=n||await ke(e,ni,"getBlock")({});if(typeof((_=r==null?void 0:r.fees)==null?void 0:_.estimateFeesPerGas)=="function"){const E=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:p,request:i,type:o});if(E!==null)return E}if(o==="eip1559"){if(typeof m.baseFeePerGas!="bigint")throw new nd;const E=typeof(i==null?void 0:i.maxPriorityFeePerGas)=="bigint"?i.maxPriorityFeePerGas:await ny(e,{block:m,chain:r,request:i}),S=p(m.baseFeePerGas);return{maxFeePerGas:(i==null?void 0:i.maxFeePerGas)??S+E,maxPriorityFeePerGas:E}}return{gasPrice:(i==null?void 0:i.gasPrice)??p(await ke(e,id,"getGasPrice")({}))}}async function ry(e,{address:t,blockTag:n="latest",blockNumber:r}){const i=await e.request({method:"eth_getTransactionCount",params:[t,r?Ie(r):n]},{dedupe:!!r});return Qn(i)}function od(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>On(o)):e.blobs,i=[];for(const o of r)i.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?i:i.map(o=>Et(o))}function sd(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(s=>On(s)):e.blobs,i=typeof e.commitments[0]=="string"?e.commitments.map(s=>On(s)):e.commitments,o=[];for(let s=0;s<r.length;s++){const l=r[s],h=i[s];o.push(Uint8Array.from(t.computeBlobKzgProof(l,h)))}return n==="bytes"?o:o.map(s=>Et(s))}function v_(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),l=Number(n&o),h=r?4:0,p=r?0:4;e.setUint32(t+h,s,r),e.setUint32(t+p,l,r)}const x_=(e,t,n)=>e&t^~e&n,__=(e,t,n)=>e&t^e&n^t&n;class E_ extends qh{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Zu(this.buffer)}update(t){To(this);const{view:n,buffer:r,blockLen:i}=this;t=Bc(t);const o=t.length;for(let s=0;s<o;){const l=Math.min(i-this.pos,o-s);if(l===i){const h=Zu(t);for(;i<=o-s;s+=i)this.process(h,s);continue}r.set(t.subarray(s,s+l),this.pos),this.pos+=l,s+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){To(this),O0(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let g=s;g<i;g++)n[g]=0;v_(r,i-8,BigInt(this.length*8),o),this.process(r,0);const l=Zu(t),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=h/4,m=this.get();if(p>m.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<p;g++)l.setUint32(4*g,m[g],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:l}=this;return t.length=i,t.pos=l,t.finished=o,t.destroyed=s,i%n&&t.buffer.set(r),t}}const S_=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nr=new Uint32Array(64);class A_ extends E_{constructor(){super(64,32,8,!1),this.A=Dr[0]|0,this.B=Dr[1]|0,this.C=Dr[2]|0,this.D=Dr[3]|0,this.E=Dr[4]|0,this.F=Dr[5]|0,this.G=Dr[6]|0,this.H=Dr[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:s,G:l,H:h}=this;return[t,n,r,i,o,s,l,h]}set(t,n,r,i,o,s,l,h){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=l|0,this.H=h|0}process(t,n){for(let g=0;g<16;g++,n+=4)Nr[g]=t.getUint32(n,!1);for(let g=16;g<64;g++){const v=Nr[g-15],_=Nr[g-2],E=Hn(v,7)^Hn(v,18)^v>>>3,S=Hn(_,17)^Hn(_,19)^_>>>10;Nr[g]=S+Nr[g-7]+E+Nr[g-16]|0}let{A:r,B:i,C:o,D:s,E:l,F:h,G:p,H:m}=this;for(let g=0;g<64;g++){const v=Hn(l,6)^Hn(l,11)^Hn(l,25),_=m+v+x_(l,h,p)+S_[g]+Nr[g]|0,S=(Hn(r,2)^Hn(r,13)^Hn(r,22))+__(r,i,o)|0;m=p,p=h,h=l,l=s+_|0,s=o,o=i,i=r,r=_+S|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,l=l+this.E|0,h=h+this.F|0,p=p+this.G|0,m=m+this.H|0,this.set(r,i,o,s,l,h,p,m)}roundClean(){Nr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const iy=R0(()=>new A_);function oy(e,t){const n=t||"hex",r=iy(Jn(e,{strict:!1})?Bn(e):e);return n==="bytes"?r:Se(r)}function $_(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),i=oy(t,"bytes");return i.set([n],0),r==="bytes"?i:Et(i)}function sy(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),i=[];for(const o of t)i.push($_({commitment:o,to:r,version:n}));return i}const gp=6,ay=32,ad=4096,cy=ay*ad,bp=cy*gp-1-1*ad*gp,uy=1;class k_ extends Q{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlobSizeTooLargeError"})}}class ly extends Q{constructor(){super("Blob data must not be empty."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EmptyBlobError"})}}class C_ extends Q{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidVersionedHashSizeError"})}}class P_ extends Q{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${uy}`,`Received: ${n}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidVersionedHashVersionError"})}}function I_(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?On(e.data):e.data,r=mt(n);if(!r)throw new ly;if(r>bp)throw new k_({maxSize:bp,size:r});const i=[];let o=!0,s=0;for(;o;){const l=Xh(new Uint8Array(cy));let h=0;for(;h<ad;){const p=n.slice(s,s+(ay-1));if(l.pushByte(0),l.pushBytes(p),p.length<31){l.pushByte(128),o=!1;break}h++,s+=31}i.push(l)}return t==="bytes"?i.map(l=>l.bytes):i.map(l=>Et(l.bytes))}function hy(e){const{data:t,kzg:n,to:r}=e,i=e.blobs??I_({data:t,to:r}),o=e.commitments??od({blobs:i,kzg:n,to:r}),s=e.proofs??sd({blobs:i,commitments:o,kzg:n,to:r}),l=[];for(let h=0;h<i.length;h++)l.push({blob:i[h],commitment:o[h],proof:s[h]});return l}function dy(e){if(e.type)return e.type;if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new t_({transaction:e})}async function da(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return Qn(t)}const fy=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function Lc(e,t){const{account:n=e.account,blobs:r,chain:i,gas:o,kzg:s,nonce:l,parameters:h=fy,type:p}=t,m=n?En(n):void 0,g={...t,...m?{from:m==null?void 0:m.address}:{}};let v;async function _(){return v||(v=await ke(e,ni,"getBlock")({blockTag:"latest"}),v)}let E;async function S(){return E||(i?i.id:typeof t.chainId<"u"?t.chainId:(E=await ke(e,da,"getChainId")({}),E))}if((h.includes("blobVersionedHashes")||h.includes("sidecars"))&&r&&s){const P=od({blobs:r,kzg:s});if(h.includes("blobVersionedHashes")){const I=sy({commitments:P,to:"hex"});g.blobVersionedHashes=I}if(h.includes("sidecars")){const I=sd({blobs:r,commitments:P,kzg:s}),O=hy({blobs:r,commitments:P,proofs:I,to:"hex"});g.sidecars=O}}if(h.includes("chainId")&&(g.chainId=await S()),h.includes("nonce")&&typeof l>"u"&&m)if(m.nonceManager){const P=await S();g.nonce=await m.nonceManager.consume({address:m.address,chainId:P,client:e})}else g.nonce=await ke(e,ry,"getTransactionCount")({address:m.address,blockTag:"pending"});if((h.includes("fees")||h.includes("type"))&&typeof p>"u")try{g.type=dy(g)}catch{const P=await _();g.type=typeof(P==null?void 0:P.baseFeePerGas)=="bigint"?"eip1559":"legacy"}if(h.includes("fees"))if(g.type!=="legacy"&&g.type!=="eip2930"){if(typeof g.maxFeePerGas>"u"||typeof g.maxPriorityFeePerGas>"u"){const P=await _(),{maxFeePerGas:I,maxPriorityFeePerGas:O}=await Hl(e,{block:P,chain:i,request:g});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<O)throw new g_({maxPriorityFeePerGas:O});g.maxPriorityFeePerGas=O,g.maxFeePerGas=I}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new nd;const P=await _(),{gasPrice:I}=await Hl(e,{block:P,chain:i,request:g,type:"legacy"});g.gasPrice=I}return h.includes("gas")&&typeof o>"u"&&(g.gas=await ke(e,cd,"estimateGas")({...g,account:m?{address:m.address,type:"json-rpc"}:void 0})),ha(g),delete g.parameters,g}async function cd(e,t){var i,o,s;const n=t.account??e.account,r=n?En(n):void 0;try{const{accessList:l,blobs:h,blobVersionedHashes:p,blockNumber:m,blockTag:g,data:v,gas:_,gasPrice:E,maxFeePerBlobGas:S,maxFeePerGas:P,maxPriorityFeePerGas:I,nonce:O,to:L,value:U,stateOverride:K,...X}=await Lc(e,{...t,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),ne=(m?Ie(m):void 0)||g,de=X0(K);ha(t);const we=(s=(o=(i=e.chain)==null?void 0:i.formatters)==null?void 0:o.transactionRequest)==null?void 0:s.format,Ne=(we||la)({...td(X,{format:we}),from:r==null?void 0:r.address,accessList:l,blobs:h,blobVersionedHashes:p,data:v,gas:_,gasPrice:E,maxFeePerBlobGas:S,maxFeePerGas:P,maxPriorityFeePerGas:I,nonce:O,to:L,value:U}),Me=await e.request({method:"eth_estimateGas",params:de?[Ne,ne??"latest",de]:ne?[Ne,ne]:[Ne]});return BigInt(Me)}catch(l){throw d_(l,{...t,account:r,chain:e.chain})}}async function T_(e,t){const{abi:n,address:r,args:i,functionName:o,...s}=t,l=Sr({abi:n,args:i,functionName:o});try{return await ke(e,cd,"estimateGas")({data:l,to:r,...s})}catch(h){const p=s.account?En(s.account):void 0;throw Ys(h,{abi:n,address:r,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:p==null?void 0:p.address})}}const wp="/docs/contract/decodeEventLog";function ud(e){const{abi:t,data:n,strict:r,topics:i}=e,o=r??!0,[s,...l]=i;if(!s)throw new T1({docsPath:wp});const h=t.find(S=>S.type==="event"&&s===Wh(br(S)));if(!(h&&"name"in h)||h.type!=="event")throw new P0(s,{docsPath:wp});const{name:p,inputs:m}=h,g=m==null?void 0:m.some(S=>!("name"in S&&S.name));let v=g?[]:{};const _=m.filter(S=>"indexed"in S&&S.indexed);for(let S=0;S<_.length;S++){const P=_[S],I=l[S];if(!I)throw new Tc({abiItem:h,param:P});v[g?S:P.name||S]=B_({param:P,value:I})}const E=m.filter(S=>!("indexed"in S&&S.indexed));if(E.length>0){if(n&&n!=="0x")try{const S=ca(E,n);if(S)if(g)v=[...v,...S];else for(let P=0;P<E.length;P++)v[E[P].name]=S[P]}catch(S){if(o)throw S instanceof $0||S instanceof W0?new Os({abiItem:h,data:n,params:E,size:mt(n)}):S}else if(o)throw new Os({abiItem:h,data:"0x",params:E,size:0})}return{eventName:p,args:Object.values(v).length>0?v:void 0}}function B_({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(ca([e],t)||[])[0]}function ld({abi:e,eventName:t,logs:n,strict:r=!0}){return n.map(i=>{var o;try{const s=ud({...i,abi:e,strict:r});return t&&!t.includes(s.eventName)?null:{...s,...i}}catch(s){let l,h;if(s instanceof P0)return null;if(s instanceof Os||s instanceof Tc){if(r)return null;l=s.abiItem.name,h=(o=s.abiItem.inputs)==null?void 0:o.some(p=>!("name"in p&&p.name))}return{...i,args:h?[]:{},eventName:l}}}).filter(Boolean)}function vr(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function hd(e,{address:t,blockHash:n,fromBlock:r,toBlock:i,event:o,events:s,args:l,strict:h}={}){const p=h??!1,m=s??(o?[o]:void 0);let g=[];m&&(g=[m.flatMap(S=>aa({abi:[S],eventName:S.name,args:l}))],o&&(g=g[0]));let v;n?v=await e.request({method:"eth_getLogs",params:[{address:t,topics:g,blockHash:n}]}):v=await e.request({method:"eth_getLogs",params:[{address:t,topics:g,fromBlock:typeof r=="bigint"?Ie(r):r,toBlock:typeof i=="bigint"?Ie(i):i}]});const _=v.map(E=>vr(E));return m?ld({abi:m,logs:_,strict:p}):_}async function py(e,t){const{abi:n,address:r,args:i,blockHash:o,eventName:s,fromBlock:l,toBlock:h,strict:p}=t,m=s?sa({abi:n,name:s}):void 0,g=m?void 0:n.filter(v=>v.type==="event");return ke(e,hd,"getLogs")({address:r,args:i,blockHash:o,event:m,events:g,fromBlock:l,toBlock:h,strict:p})}const Qu="/docs/contract/decodeFunctionResult";function qo(e){const{abi:t,args:n,functionName:r,data:i}=e;let o=t[0];if(r){const l=sa({abi:t,args:n,name:r});if(!l)throw new pc(r,{docsPath:Qu});o=l}if(o.type!=="function")throw new pc(void 0,{docsPath:Qu});if(!o.outputs)throw new B1(o.name,{docsPath:Qu});const s=ca(o.outputs,i);if(s&&s.length>1)return s;if(s&&s.length===1)return s[0]}const Wl=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],my=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],yy=[...my,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],O_=[...my,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],vp=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],xp=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],R_=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}],M_="0x82ad56cb",D_="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",N_="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",F_="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class Gl extends Q{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class L_ extends Q{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id}  ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id}  ${t.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class j_ extends Q{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class gy extends Q{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}class jc extends Q{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidChainIdError"})}}const el="/docs/contract/encodeDeployData";function zc(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const i=t.find(s=>"type"in s&&s.type==="constructor");if(!i)throw new C1({docsPath:el});if(!("inputs"in i))throw new ep({docsPath:el});if(!i.inputs||i.inputs.length===0)throw new ep({docsPath:el});const o=qi(i.inputs,n);return Ln([r,o])}function Ho({blockNumber:e,chain:t,contract:n}){var i;const r=(i=t==null?void 0:t.contracts)==null?void 0:i[n];if(!r)throw new Gl({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new Gl({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function z_(e,{docsPath:t,...n}){const r=(()=>{const i=ed(e,n);return i instanceof Dc?e:i})();return new Z0(r,{docsPath:t,...n})}const tl=new Map;function dd({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:i}){const o=async()=>{const m=h();s();const g=m.map(({args:v})=>v);g.length!==0&&e(g).then(v=>{var _;i&&Array.isArray(v)&&v.sort(i);for(let E=0;E<m.length;E++){const{pendingPromise:S}=m[E];(_=S.resolve)==null||_.call(S,[v[E],v])}}).catch(v=>{var _;for(let E=0;E<m.length;E++){const{pendingPromise:S}=m[E];(_=S.reject)==null||_.call(S,v)}})},s=()=>tl.delete(t),l=()=>h().map(({args:m})=>m),h=()=>tl.get(t)||[],p=m=>tl.set(t,[...h(),m]);return{flush:s,async schedule(m){const g={},v=new Promise((S,P)=>{g.resolve=S,g.reject=P});return(n==null?void 0:n([...l(),m]))&&o(),h().length>0?(p({args:m,pendingPromise:g}),v):(p({args:m,pendingPromise:g}),setTimeout(o,r),v)}}}async function Uc(e,t){var ve,Ne,Me,et;const{account:n=e.account,batch:r=!!((ve=e.batch)!=null&&ve.multicall),blockNumber:i,blockTag:o="latest",accessList:s,blobs:l,code:h,data:p,factory:m,factoryData:g,gas:v,gasPrice:_,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:P,nonce:I,to:O,value:L,stateOverride:U,...K}=t,X=n?En(n):void 0;if(h&&(m||g))throw new Q("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(h&&O)throw new Q("Cannot provide both `code` & `to` as parameters.");const te=h&&p,ne=m&&g&&O&&p,de=te||ne,we=te?q_({code:h,data:p}):ne?H_({data:p,factory:m,factoryData:g,to:O}):p;try{ha(t);const ae=(i?Ie(i):void 0)||o,$e=X0(U),Ve=(et=(Me=(Ne=e.chain)==null?void 0:Ne.formatters)==null?void 0:Me.transactionRequest)==null?void 0:et.format,pe=(Ve||la)({...td(K,{format:Ve}),from:X==null?void 0:X.address,accessList:s,blobs:l,data:we,gas:v,gasPrice:_,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:P,nonce:I,to:de?void 0:O,value:L});if(r&&U_({request:pe})&&!$e)try{return await V_(e,{...pe,blockNumber:i,blockTag:o})}catch(tt){if(!(tt instanceof gy)&&!(tt instanceof Gl))throw tt}const Ee=await e.request({method:"eth_call",params:$e?[pe,ae,$e]:[pe,ae]});return Ee==="0x"?{data:void 0}:{data:Ee}}catch(oe){const ae=W_(oe),{offchainLookup:$e,offchainLookupSignature:Ve}=await me(async()=>{const{offchainLookup:Be,offchainLookupSignature:pe}=await import("./ccip-CN5YH9mg.js");return{offchainLookup:Be,offchainLookupSignature:pe}},[]);if(e.ccipRead!==!1&&(ae==null?void 0:ae.slice(0,10))===Ve&&O)return{data:await $e(e,{data:ae,to:O})};throw de&&(ae==null?void 0:ae.slice(0,10))==="0x101bb98d"?new s_({factory:m}):z_(oe,{...t,account:X,chain:e.chain})}}function U_({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(M_)||!n||Object.values(r).filter(i=>typeof i<"u").length>0)}async function V_(e,t){var S;const{batchSize:n=1024,wait:r=0}=typeof((S=e.batch)==null?void 0:S.multicall)=="object"?e.batch.multicall:{},{blockNumber:i,blockTag:o="latest",data:s,multicallAddress:l,to:h}=t;let p=l;if(!p){if(!e.chain)throw new gy;p=Ho({blockNumber:i,chain:e.chain,contract:"multicall3"})}const g=(i?Ie(i):void 0)||o,{schedule:v}=dd({id:`${e.uid}.${g}`,wait:r,shouldSplitBatch(P){return P.reduce((O,{data:L})=>O+(L.length-2),0)>n*2},fn:async P=>{const I=P.map(U=>({allowFailure:!0,callData:U.data,target:U.to})),O=Sr({abi:Wl,args:[I],functionName:"aggregate3"}),L=await e.request({method:"eth_call",params:[{data:O,to:p},g]});return qo({abi:Wl,args:[I],functionName:"aggregate3",data:L||"0x"})}}),[{returnData:_,success:E}]=await v({data:s,to:h});if(!E)throw new Qh({data:_});return _==="0x"?{data:void 0}:{data:_}}function q_(e){const{code:t,data:n}=e;return zc({abi:cn(["constructor(bytes, bytes)"]),bytecode:D_,args:[t,n]})}function H_(e){const{data:t,factory:n,factoryData:r,to:i}=e;return zc({abi:cn(["constructor(address, bytes, address, bytes)"]),bytecode:N_,args:[i,t,n,r]})}function W_(e){var n;if(!(e instanceof Q))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function xr(e,t){const{abi:n,address:r,args:i,functionName:o,...s}=t,l=Sr({abi:n,args:i,functionName:o});try{const{data:h}=await ke(e,Uc,"call")({...s,data:l,to:r});return qo({abi:n,args:i,functionName:o,data:h||"0x"})}catch(h){throw Ys(h,{abi:n,address:r,args:i,docsPath:"/docs/contract/readContract",functionName:o})}}async function G_(e,t){const{abi:n,address:r,args:i,dataSuffix:o,functionName:s,...l}=t,h=l.account?En(l.account):e.account,p=Sr({abi:n,args:i,functionName:s});try{const{data:m}=await ke(e,Uc,"call")({batch:!1,data:`${p}${o?o.replace("0x",""):""}`,to:r,...l,account:h}),g=qo({abi:n,args:i,functionName:s,data:m||"0x"}),v=n.filter(_=>"name"in _&&_.name===t.functionName);return{result:g,request:{abi:v,address:r,args:i,dataSuffix:o,functionName:s,...l,account:h}}}catch(m){throw Ys(m,{abi:n,address:r,args:i,docsPath:"/docs/contract/simulateContract",functionName:s,sender:h==null?void 0:h.address})}}const nl=new Map,_p=new Map;let K_=0;function ri(e,t,n){const r=++K_,i=()=>nl.get(e)||[],o=()=>{const m=i();nl.set(e,m.filter(g=>g.id!==r))},s=()=>{const m=_p.get(e);i().length===1&&m&&m(),o()},l=i();if(nl.set(e,[...l,{id:r,fns:t}]),l&&l.length>0)return s;const h={};for(const m in t)h[m]=(...g)=>{var _,E;const v=i();if(v.length!==0)for(const S of v)(E=(_=S.fns)[m])==null||E.call(_,...g)};const p=n(h);return typeof p=="function"&&_p.set(e,p),s}async function yc(e){return new Promise(t=>setTimeout(t,e))}function fa(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let i=!0;const o=()=>i=!1;return(async()=>{let l;t&&(l=await e({unpoll:o}));const h=await(n==null?void 0:n(l))??r;await yc(h);const p=async()=>{i&&(await e({unpoll:o}),await yc(r),p())};p()})(),o}const Y_=new Map,Z_=new Map;function X_(e){const t=(i,o)=>({clear:()=>o.delete(i),get:()=>o.get(i),set:s=>o.set(i,s)}),n=t(e,Y_),r=t(e,Z_);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function J_(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=X_(t),i=r.response.get();if(i&&n>0&&new Date().getTime()-i.created.getTime()<n)return i.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const s=await o;return r.response.set({created:new Date,data:s}),s}finally{r.promise.clear()}}const Q_=e=>`blockNumber.${e}`;async function pa(e,{cacheTime:t=e.cacheTime}={}){const n=await J_(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Q_(e.uid),cacheTime:t});return BigInt(n)}async function Vc(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const i=r.map(o=>vr(o));return!("abi"in t)||!t.abi?i:ld({abi:t.abi,logs:i,strict:n})}async function qc(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function eE(e,t){const{abi:n,address:r,args:i,batch:o=!0,eventName:s,fromBlock:l,onError:h,onLogs:p,poll:m,pollingInterval:g=e.pollingInterval,strict:v}=t;return(typeof m<"u"?m:typeof l=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))?(()=>{const P=v??!1,I=It(["watchContractEvent",r,i,o,e.uid,s,g,P,l]);return ri(I,{onLogs:p,onError:h},O=>{let L;l!==void 0&&(L=l-1n);let U,K=!1;const X=fa(async()=>{var te;if(!K){try{U=await ke(e,q0,"createContractEventFilter")({abi:n,address:r,args:i,eventName:s,strict:P,fromBlock:l})}catch{}K=!0;return}try{let ne;if(U)ne=await ke(e,Vc,"getFilterChanges")({filter:U});else{const de=await ke(e,pa,"getBlockNumber")({});L&&L!==de?ne=await ke(e,py,"getContractEvents")({abi:n,address:r,args:i,eventName:s,fromBlock:L+1n,toBlock:de,strict:P}):ne=[],L=de}if(ne.length===0)return;if(o)O.onLogs(ne);else for(const de of ne)O.onLogs([de])}catch(ne){U&&ne instanceof Li&&(K=!1),(te=O.onError)==null||te.call(O,ne)}},{emitOnBegin:!0,interval:g});return async()=>{U&&await ke(e,qc,"uninstallFilter")({filter:U}),X()}})})():(()=>{const P=v??!1,I=It(["watchContractEvent",r,i,o,e.uid,s,g,P]);let O=!0,L=()=>O=!1;return ri(I,{onLogs:p,onError:h},U=>((async()=>{try{const K=(()=>{if(e.transport.type==="fallback"){const ne=e.transport.transports.find(de=>de.config.type==="webSocket");return ne?ne.value:e.transport}return e.transport})(),X=s?aa({abi:n,eventName:s,args:i}):[],{unsubscribe:te}=await K.subscribe({params:["logs",{address:r,topics:X}],onData(ne){var we;if(!O)return;const de=ne.result;try{const{eventName:ve,args:Ne}=ud({abi:n,data:de.data,topics:de.topics,strict:v}),Me=vr(de,{args:Ne,eventName:ve});U.onLogs([Me])}catch(ve){let Ne,Me;if(ve instanceof Os||ve instanceof Tc){if(v)return;Ne=ve.abiItem.name,Me=(we=ve.abiItem.inputs)==null?void 0:we.some(oe=>!("name"in oe&&oe.name))}const et=vr(de,{args:Me?[]:{},eventName:Ne});U.onLogs([et])}},onError(ne){var de;(de=U.onError)==null||de.call(U,ne)}});L=te,O||L()}catch(K){h==null||h(K)}})(),()=>L()))})()}class Hc extends Q{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join(`
`),{docsPath:t,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}function by({chain:e,currentChainId:t}){if(!e)throw new j_;if(t!==e.id)throw new L_({chain:e,currentChainId:t})}function tE(e,{docsPath:t,...n}){const r=(()=>{const i=ed(e,n);return i instanceof Dc?e:i})();return new r_(r,{docsPath:t,...n})}async function fd(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}async function pd(e,t){var I,O,L,U;const{account:n=e.account,chain:r=e.chain,accessList:i,blobs:o,data:s,gas:l,gasPrice:h,maxFeePerBlobGas:p,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:v,to:_,value:E,...S}=t;if(!n)throw new Hc({docsPath:"/docs/actions/wallet/sendTransaction"});const P=En(n);try{ha(t);let K;if(r!==null&&(K=await ke(e,da,"getChainId")({}),by({currentChainId:K,chain:r})),P.type==="local"){const de=await ke(e,Lc,"prepareTransactionRequest")({account:P,accessList:i,blobs:o,chain:r,chainId:K,data:s,gas:l,gasPrice:h,maxFeePerBlobGas:p,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:v,parameters:[...fy,"sidecars"],to:_,value:E,...S}),we=(I=r==null?void 0:r.serializers)==null?void 0:I.transaction,ve=await P.signTransaction(de,{serializer:we});return await ke(e,fd,"sendRawTransaction")({serializedTransaction:ve})}const X=(U=(L=(O=e.chain)==null?void 0:O.formatters)==null?void 0:L.transactionRequest)==null?void 0:U.format,ne=(X||la)({...td(S,{format:X}),accessList:i,blobs:o,chainId:K,data:s,from:P.address,gas:l,gasPrice:h,maxFeePerBlobGas:p,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:v,to:_,value:E});return await e.request({method:"eth_sendTransaction",params:[ne]},{retryCount:0})}catch(K){throw tE(K,{...t,account:P,chain:t.chain||void 0})}}async function nE(e,t){const{abi:n,address:r,args:i,dataSuffix:o,functionName:s,...l}=t,h=Sr({abi:n,args:i,functionName:s});return ke(e,pd,"sendTransaction")({data:`${h}${o?o.replace("0x",""):""}`,to:r,...l})}class rE extends Q{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip712DomainNotFoundError"})}}async function iE(e,t){const{address:n,factory:r,factoryData:i}=t;try{const[o,s,l,h,p,m,g]=await ke(e,xr,"readContract")({abi:oE,address:n,functionName:"eip712Domain",factory:r,factoryData:i});return{domain:{name:s,version:l,chainId:Number(h),verifyingContract:p,salt:m},extensions:g,fields:o}}catch(o){const s=o;throw s.name==="ContractFunctionExecutionError"&&s.cause.name==="ContractFunctionZeroDataError"?new rE({address:n}):s}}const oE=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function sE(e,{chain:t}){const{id:n,name:r,nativeCurrency:i,rpcUrls:o,blockExplorers:s}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:Ie(n),chainName:r,nativeCurrency:i,rpcUrls:o.default.http,blockExplorerUrls:s?Object.values(s).map(({url:l})=>l):void 0}]},{dedupe:!0,retryCount:0})}const Kl=256;let Xa=Kl,Ja;function wy(e=11){if(!Ja||Xa+e>Kl*2){Ja="",Xa=0;for(let t=0;t<Kl;t++)Ja+=(256+Math.random()*256|0).toString(16).substring(1)}return Ja.substring(Xa,Xa+++e)}function vy(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,ccipRead:r,key:i="base",name:o="Base Client",pollingInterval:s=4e3,type:l="base"}=e,h=e.chain,p=e.account?En(e.account):void 0,{config:m,request:g,value:v}=e.transport({chain:h,pollingInterval:s}),_={...m,...v},E={account:p,batch:t,cacheTime:n,ccipRead:r,chain:h,key:i,name:o,pollingInterval:s,request:g,transport:_,type:l,uid:wy()};function S(P){return I=>{const O=I(P);for(const U in E)delete O[U];const L={...P,...O};return Object.assign(L,{extend:S(L)})}}return Object.assign(E,{extend:S(E)})}const Qa=new Gh(8192);function aE(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(Qa.get(n))return Qa.get(n);const r=e().finally(()=>Qa.delete(n));return Qa.set(n,r),r}function Yl(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((i,o)=>{const s=async({count:l=0}={})=>{const h=async({error:p})=>{const m=typeof t=="function"?t({count:l,error:p}):t;m&&await yc(m),s({count:l+1})};try{const p=await e();i(p)}catch(p){if(l<n&&await r({count:l,error:p}))return h({error:p});o(p)}};s()})}function cE(e,t={}){return async(n,r={})=>{const{dedupe:i=!1,retryDelay:o=150,retryCount:s=3,uid:l}={...t,...r},h=i?Zt(Ni(`${l}.${It(n)}`)):void 0;return aE(()=>Yl(async()=>{try{return await e(n)}catch(p){const m=p;switch(m.code){case Ds.code:throw new Ds(m);case Ns.code:throw new Ns(m);case Fs.code:throw new Fs(m);case Ls.code:throw new Ls(m);case Fi.code:throw new Fi(m);case Li.code:throw new Li(m);case js.code:throw new js(m);case zs.code:throw new zs(m);case Bo.code:throw new Bo(m);case Us.code:throw new Us(m);case Oo.code:throw new Oo(m);case Vs.code:throw new Vs(m);case Ci.code:throw new Ci(m);case qs.code:throw new qs(m);case Hs.code:throw new Hs(m);case Ws.code:throw new Ws(m);case Gs.code:throw new Gs(m);case Ks.code:throw new Ks(m);case 5e3:throw new Ci(m);default:throw p instanceof Q?p:new u_(m)}}},{delay:({count:p,error:m})=>{var g;if(m&&m instanceof xs){const v=(g=m==null?void 0:m.headers)==null?void 0:g.get("Retry-After");if(v!=null&&v.match(/\d/))return Number.parseInt(v)*1e3}return~~(1<<p)*o},retryCount:s,shouldRetry:({error:p})=>uE(p)}),{enabled:i,id:h})}}function uE(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===Oo.code||e.code===Fi.code:e instanceof xs&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function ma({key:e,name:t,request:n,retryCount:r=3,retryDelay:i=150,timeout:o,type:s},l){const h=wy();return{config:{key:e,name:t,request:n,retryCount:r,retryDelay:i,timeout:o,type:s},request:cE(n,{retryCount:r,retryDelay:i,uid:h}),value:l}}function lE(e,t={}){const{key:n="custom",name:r="Custom Provider",retryDelay:i}=t;return({retryCount:o})=>ma({key:n,name:r,request:e.request.bind(e),retryCount:t.retryCount??o,retryDelay:i,type:"custom"})}function hE(e,t={}){const{key:n="fallback",name:r="Fallback",rank:i=!1,retryCount:o,retryDelay:s}=t;return({chain:l,pollingInterval:h=4e3,timeout:p,...m})=>{let g=e,v=()=>{};const _=ma({key:n,name:r,async request({method:E,params:S}){const P=async(I=0)=>{const O=g[I]({...m,chain:l,retryCount:0,timeout:p});try{const L=await O.request({method:E,params:S});return v({method:E,params:S,response:L,transport:O,status:"success"}),L}catch(L){if(v({error:L,method:E,params:S,transport:O,status:"error"}),dE(L)||I===g.length-1)throw L;return P(I+1)}};return P()},retryCount:o,retryDelay:s,type:"fallback"},{onResponse:E=>v=E,transports:g.map(E=>E({chain:l,retryCount:0}))});if(i){const E=typeof i=="object"?i:{};fE({chain:l,interval:E.interval??h,onTransports:S=>g=S,sampleCount:E.sampleCount,timeout:E.timeout,transports:g,weights:E.weights})}return _}}function dE(e){return"code"in e&&typeof e.code=="number"&&(e.code===Bo.code||e.code===Ci.code||e.code===5e3)}function fE({chain:e,interval:t=4e3,onTransports:n,sampleCount:r=10,timeout:i=1e3,transports:o,weights:s={}}){const{stability:l=.7,latency:h=.3}=s,p=[],m=async()=>{const g=await Promise.all(o.map(async E=>{const S=E({chain:e,retryCount:0,timeout:i}),P=Date.now();let I,O;try{await S.request({method:"net_listening"}),O=1}catch{O=0}finally{I=Date.now()}return{latency:I-P,success:O}}));p.push(g),p.length>r&&p.shift();const v=Math.max(...p.map(E=>Math.max(...E.map(({latency:S})=>S)))),_=o.map((E,S)=>{const P=p.map(K=>K[S].latency),O=1-P.reduce((K,X)=>K+X,0)/P.length/v,L=p.map(K=>K[S].success),U=L.reduce((K,X)=>K+X,0)/L.length;return U===0?[0,S]:[h*O+l*U,S]}).sort((E,S)=>S[0]-E[0]);n(_.map(([,E])=>o[E])),await yc(t),m()};m()}class md extends Q{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}function xy(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((i,o)=>{(async()=>{let s;try{const l=new AbortController;n>0&&(s=setTimeout(()=>{r?l.abort():o(t)},n)),i(await e({signal:(l==null?void 0:l.signal)||null}))}catch(l){(l==null?void 0:l.name)==="AbortError"&&o(t),o(l)}finally{clearTimeout(s)}})()})}function pE(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Zl=pE();function _y(e,t={}){return{async request(n){var g;const{body:r,onRequest:i=t.onRequest,onResponse:o=t.onResponse,timeout:s=t.timeout??1e4}=n,l={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:h,method:p,signal:m}=l;try{const v=await xy(async({signal:E})=>{const S={...l,body:Array.isArray(r)?It(r.map(O=>({jsonrpc:"2.0",id:O.id??Zl.take(),...O}))):It({jsonrpc:"2.0",id:r.id??Zl.take(),...r}),headers:{...h,"Content-Type":"application/json"},method:p||"POST",signal:m||(s>0?E:null)},P=new Request(e,S);return i&&await i(P),await fetch(e,S)},{errorInstance:new Dl({body:r,url:e}),timeout:s,signal:!0});o&&await o(v);let _;if((g=v.headers.get("Content-Type"))!=null&&g.startsWith("application/json")?_=await v.json():(_=await v.text(),_=JSON.parse(_||"{}")),!v.ok)throw new xs({body:r,details:It(_.error)||v.statusText,headers:v.headers,status:v.status,url:e});return _}catch(v){throw v instanceof xs||v instanceof Dl?v:new xs({body:r,cause:v,url:e})}}}}function mE(e,t={}){const{batch:n,fetchOptions:r,key:i="http",name:o="HTTP JSON-RPC",onFetchRequest:s,onFetchResponse:l,retryDelay:h}=t;return({chain:p,retryCount:m,timeout:g})=>{const{batchSize:v=1e3,wait:_=0}=typeof n=="object"?n:{},E=t.retryCount??m,S=g??t.timeout??1e4,P=e||(p==null?void 0:p.rpcUrls.default.http[0]);if(!P)throw new md;const I=_y(P,{fetchOptions:r,onRequest:s,onResponse:l,timeout:S});return ma({key:i,name:o,async request({method:O,params:L}){const U={method:O,params:L},{schedule:K}=dd({id:P,wait:_,shouldSplitBatch(de){return de.length>v},fn:de=>I.request({body:de}),sort:(de,we)=>de.id-we.id}),X=async de=>n?K(de):[await I.request({body:de})],[{error:te,result:ne}]=await X(U);if(te)throw new Mc({body:U,error:te,url:P});return ne},retryCount:E,retryDelay:h,timeout:S,type:"http"},{fetchOptions:r,url:P})}}function yd(e,t){var r,i,o,s,l,h;if(!(e instanceof Q))return!1;const n=e.walk(p=>p instanceof Ml);return n instanceof Ml?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((i=n.data)==null?void 0:i.errorName)==="ResolverWildcardNotSupported"||((o=n.data)==null?void 0:o.errorName)==="ResolverNotContract"||((s=n.data)==null?void 0:s.errorName)==="ResolverError"||((l=n.data)==null?void 0:l.errorName)==="HttpError"||(h=n.reason)!=null&&h.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===H0[50]):!1}function Ey(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return Jn(t)?t:null}function oc(e){let t=new Uint8Array(32).fill(0);if(!e)return Et(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const i=Ey(n[r]),o=i?Bn(i):Zt(ki(n[r]),"bytes");t=Zt(wr([t,o]),"bytes")}return Et(t)}function yE(e){return`[${e.slice(2)}]`}function gE(e){const t=new Uint8Array(32).fill(0);return e?Ey(e)||Zt(ki(e)):Et(t)}function Wc(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(ki(t).byteLength+2);let r=0;const i=t.split(".");for(let o=0;o<i.length;o++){let s=ki(i[o]);s.byteLength>255&&(s=ki(yE(gE(i[o])))),n[r]=s.length,n.set(s,r+1),r+=s.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function bE(e,{blockNumber:t,blockTag:n,coinType:r,name:i,gatewayUrls:o,strict:s,universalResolverAddress:l}){let h=l;if(!h){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");h=Ho({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const p=Sr({abi:xp,functionName:"addr",...r!=null?{args:[oc(i),BigInt(r)]}:{args:[oc(i)]}}),m={address:h,abi:yy,functionName:"resolve",args:[Se(Wc(i)),p],blockNumber:t,blockTag:n},g=ke(e,xr,"readContract"),v=o?await g({...m,args:[...m.args,o]}):await g(m);if(v[0]==="0x")return null;const _=qo({abi:xp,args:r!=null?[oc(i),BigInt(r)]:void 0,functionName:"addr",data:v[0]});return _==="0x"||Io(_)==="0x00"?null:_}catch(p){if(s)throw p;if(yd(p,"resolve"))return null;throw p}}class wE extends Q{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class ls extends Q{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class gd extends Q{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class vE extends Q{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const xE=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,_E=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,EE=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,SE=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function AE(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Ep(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Sy({uri:e,gatewayUrls:t}){const n=EE.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Ep(t==null?void 0:t.ipfs,"https://ipfs.io"),i=Ep(t==null?void 0:t.arweave,"https://arweave.net"),o=e.match(xE),{protocol:s,subpath:l,target:h,subtarget:p=""}=(o==null?void 0:o.groups)||{},m=s==="ipns:/"||l==="ipns/",g=s==="ipfs:/"||l==="ipfs/"||_E.test(e);if(e.startsWith("http")&&!m&&!g){let _=e;return t!=null&&t.arweave&&(_=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:_,isOnChain:!1,isEncoded:!1}}if((m||g)&&h)return{uri:`${r}/${m?"ipns":"ipfs"}/${h}${p}`,isOnChain:!1,isEncoded:!1};if(s==="ar:/"&&h)return{uri:`${i}/${h}${p||""}`,isOnChain:!1,isEncoded:!1};let v=e.replace(SE,"");if(v.startsWith("<svg")&&(v=`data:image/svg+xml;base64,${btoa(v)}`),v.startsWith("data:")||v.startsWith("{"))return{uri:v,isOnChain:!0,isEncoded:!1};throw new gd({uri:e})}function Ay(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new wE({data:e});return e.image||e.image_url||e.image_data}async function $E({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(i=>i.json());return await bd({gatewayUrls:e,uri:Ay(n)})}catch{throw new gd({uri:t})}}async function bd({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Sy({uri:t,gatewayUrls:e});if(r||await AE(n))return n;throw new gd({uri:t})}function kE(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,i]=t.split("/"),[o,s]=n.split(":"),[l,h]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new ls({reason:"Only EIP-155 supported"});if(!s)throw new ls({reason:"Chain ID not found"});if(!h)throw new ls({reason:"Contract address not found"});if(!i)throw new ls({reason:"Token ID not found"});if(!l)throw new ls({reason:"ERC namespace not found"});return{chainID:Number.parseInt(s),namespace:l.toLowerCase(),contractAddress:h,tokenID:i}}async function CE(e,{nft:t}){if(t.namespace==="erc721")return xr(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return xr(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new vE({namespace:t.namespace})}async function PE(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?IE(e,{gatewayUrls:t,record:n}):bd({uri:n,gatewayUrls:t})}async function IE(e,{gatewayUrls:t,record:n}){const r=kE(n),i=await CE(e,{nft:r}),{uri:o,isOnChain:s,isEncoded:l}=Sy({uri:i,gatewayUrls:t});if(s&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const p=l?atob(o.replace("data:application/json;base64,","")):o,m=JSON.parse(p);return bd({uri:Ay(m),gatewayUrls:t})}let h=r.tokenID;return r.namespace==="erc1155"&&(h=h.replace("0x","").padStart(64,"0")),$E({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,h)})}async function $y(e,{blockNumber:t,blockTag:n,name:r,key:i,gatewayUrls:o,strict:s,universalResolverAddress:l}){let h=l;if(!h){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");h=Ho({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const p={address:h,abi:yy,functionName:"resolve",args:[Se(Wc(r)),Sr({abi:vp,functionName:"text",args:[oc(r),i]})],blockNumber:t,blockTag:n},m=ke(e,xr,"readContract"),g=o?await m({...p,args:[...p.args,o]}):await m(p);if(g[0]==="0x")return null;const v=qo({abi:vp,functionName:"text",data:g[0]});return v===""?null:v}catch(p){if(s)throw p;if(yd(p,"resolve"))return null;throw p}}async function TE(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:i,gatewayUrls:o,strict:s,universalResolverAddress:l}){const h=await ke(e,$y,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:i,universalResolverAddress:l,gatewayUrls:o,strict:s});if(!h)return null;try{return await PE(e,{record:h,gatewayUrls:r})}catch{return null}}async function BE(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:i,strict:o,universalResolverAddress:s}){let l=s;if(!l){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");l=Ho({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const h=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const p={address:l,abi:O_,functionName:"reverse",args:[Se(Wc(h))],blockNumber:n,blockTag:r},m=ke(e,xr,"readContract"),[g,v]=i?await m({...p,args:[...p.args,i]}):await m(p);return t.toLowerCase()!==v.toLowerCase()?null:g}catch(p){if(o)throw p;if(yd(p,"reverse"))return null;throw p}}async function OE(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:i}){let o=i;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Ho({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[s]=await ke(e,xr,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Se(Wc(r))],blockNumber:t,blockTag:n});return s}async function RE(e){const t=Rc(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function ky(e,{address:t,args:n,event:r,events:i,fromBlock:o,strict:s,toBlock:l}={}){const h=i??(r?[r]:void 0),p=Rc(e,{method:"eth_newFilter"});let m=[];h&&(m=[h.flatMap(_=>aa({abi:[_],eventName:_.name,args:n}))],r&&(m=m[0]));const g=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?Ie(o):o,toBlock:typeof l=="bigint"?Ie(l):l,...m.length?{topics:m}:{}}]});return{abi:h,args:n,eventName:r?r.name:void 0,fromBlock:o,id:g,request:p(g),strict:!!s,toBlock:l,type:"event"}}async function Cy(e){const t=Rc(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function ME(e,{address:t,blockNumber:n,blockTag:r="latest"}){const i=n?Ie(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,i||r]});return BigInt(o)}async function DE(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function NE(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const i=n!==void 0?Ie(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[i||r]},{dedupe:!!i}),Qn(o)}async function Xl(e,{address:t,blockNumber:n,blockTag:r="latest"}){const i=n!==void 0?Ie(n):void 0,o=await e.request({method:"eth_getCode",params:[t,i||r]},{dedupe:!!i});if(o!=="0x")return o}function FE(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function LE(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:i}){const o=n?Ie(n):void 0,s=await e.request({method:"eth_feeHistory",params:[Ie(t),o||r,i]},{dedupe:!!o});return FE(s)}async function jE(e,{filter:t}){const n=t.strict??!1,i=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>vr(o));return t.abi?ld({abi:t.abi,logs:i,strict:n}):i}function er(e,t){if(!vt(e,{strict:!1}))throw new Pt({address:e});if(!vt(t,{strict:!1}))throw new Pt({address:t});return e.toLowerCase()===t.toLowerCase()}function jn(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}const zE=/^(.*)\[([0-9]*)\]$/,Py=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Iy=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,rl=new Map;async function UE(e){const{getSocket:t,key:n="socket",reconnect:r=!0,url:i}=e,{attempts:o=5,delay:s=2e3}=typeof r=="object"?r:{};let l=rl.get(`${n}:${i}`);if(l)return l;let h=0;const{schedule:p}=dd({id:`${n}:${i}`,fn:async()=>{const v=new Map,_=new Map;let E,S;async function P(){return t({onError(I){var O,L;E=I;for(const U of v.values())(O=U.onError)==null||O.call(U,E);for(const U of _.values())(L=U.onError)==null||L.call(U,E);v.clear(),_.clear(),r&&h<o&&setTimeout(async()=>{h++,S=await P().catch(console.error)},s)},onOpen(){E=void 0,h=0},onResponse(I){const O=I.method==="eth_subscription",L=O?I.params.subscription:I.id,U=O?_:v,K=U.get(L);K&&K.onResponse(I),O||U.delete(L)}})}return S=await P(),E=void 0,l={close(){S.close(),rl.delete(`${n}:${i}`)},socket:S,request({body:I,onError:O,onResponse:L}){E&&O&&O(E);const U=I.id??Zl.take(),K=X=>{var te;typeof X.id=="number"&&U!==X.id||(I.method==="eth_subscribe"&&typeof X.result=="string"&&_.set(X.result,{onResponse:K,onError:O}),I.method==="eth_unsubscribe"&&_.delete((te=I.params)==null?void 0:te[0]),L(X))};v.set(U,{onResponse:K,onError:O});try{S.request({body:{jsonrpc:"2.0",id:U,...I}})}catch(X){O==null||O(X)}},requestAsync({body:I,timeout:O=1e4}){return xy(()=>new Promise((L,U)=>this.request({body:I,onError:U,onResponse:L})),{errorInstance:new Dl({body:I,url:i}),timeout:O})},requests:v,subscriptions:_,url:i},rl.set(`${n}:${i}`,l),[l]}}),[m,[g]]=await p();return g}async function sc(e,t={}){const{reconnect:n}=t;return UE({async getSocket({onError:r,onOpen:i,onResponse:o}){const s=await me(()=>import("./native-DCTjMhwz.js"),[]).then(g=>g.WebSocket),l=new s(e);function h(){l.removeEventListener("close",h),l.removeEventListener("message",p),l.removeEventListener("error",r),l.removeEventListener("open",i)}function p({data:g}){o(JSON.parse(g))}l.addEventListener("close",h),l.addEventListener("message",p),l.addEventListener("error",r),l.addEventListener("open",i),l.readyState===s.CONNECTING&&await new Promise((g,v)=>{l&&(l.onopen=g,l.onerror=v)});const{close:m}=l;return Object.assign(l,{close(){m.bind(l)(),h()},request({body:g}){if(l.readyState===l.CLOSED||l.readyState===l.CLOSING)throw new a_({body:g,url:l.url,details:"Socket is closed."});return l.send(JSON.stringify(g))}})},reconnect:n,url:e})}async function VE(e){const t=await sc(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function qE(e){const{domain:t={},message:n,primaryType:r}=e,i={EIP712Domain:Dy({domain:t}),...e.types};My({domain:t,message:n,primaryType:r,types:i});const o=["0x1901"];return t&&o.push(HE({domain:t,types:i})),r!=="EIP712Domain"&&o.push(Ty({data:n,primaryType:r,types:i})),Zt(wr(o))}function HE({domain:e,types:t}){return Ty({data:e,primaryType:"EIP712Domain",types:t})}function Ty({data:e,primaryType:t,types:n}){const r=By({data:e,primaryType:t,types:n});return Zt(r)}function By({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],i=[WE({primaryType:t,types:n})];for(const o of n[t]){const[s,l]=Ry({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(s),i.push(l)}return qi(r,i)}function WE({primaryType:e,types:t}){const n=Se(GE({primaryType:e,types:t}));return Zt(n)}function GE({primaryType:e,types:t}){let n="";const r=Oy({primaryType:e,types:t});r.delete(e);const i=[e,...Array.from(r).sort()];for(const o of i)n+=`${o}(${t[o].map(({name:s,type:l})=>`${l} ${s}`).join(",")})`;return n}function Oy({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),i=r==null?void 0:r[0];if(n.has(i)||t[i]===void 0)return n;n.add(i);for(const o of t[i])Oy({primaryType:o.type,types:t},n);return n}function Ry({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},Zt(By({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Zt(r)];if(n==="string")return[{type:"bytes32"},Zt(Se(r))];if(n.lastIndexOf("]")===n.length-1){const i=n.slice(0,n.lastIndexOf("[")),o=r.map(s=>Ry({name:t,type:i,types:e,value:s}));return[{type:"bytes32"},Zt(qi(o.map(([s])=>s),o.map(([,s])=>s)))]}return[{type:n},r]}function KE(e){const{domain:t,message:n,primaryType:r,types:i}=e,o=(h,p)=>{const m={...p};for(const g of h){const{name:v,type:_}=g;_==="address"&&(m[v]=m[v].toLowerCase())}return m},s=i.EIP712Domain?t?o(i.EIP712Domain,t):{}:{},l=(()=>{if(r!=="EIP712Domain")return o(i[r],n)})();return It({domain:s,message:l,primaryType:r,types:i})}function My(e){const{domain:t,message:n,primaryType:r,types:i}=e,o=(s,l)=>{for(const h of s){const{name:p,type:m}=h,g=l[p],v=m.match(Iy);if(v&&(typeof g=="number"||typeof g=="bigint")){const[S,P,I]=v;Ie(g,{signed:P==="int",size:Number.parseInt(I)/8})}if(m==="address"&&typeof g=="string"&&!vt(g))throw new Pt({address:g});const _=m.match(Py);if(_){const[S,P]=_;if(P&&mt(g)!==Number.parseInt(P))throw new I0({expectedSize:Number.parseInt(P),givenSize:mt(g)})}const E=i[m];E&&o(E,g)}};i.EIP712Domain&&t&&o(i.EIP712Domain,t),r!=="EIP712Domain"&&o(i[r],n)}function Dy({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},typeof(e==null?void 0:e.chainId)=="number"&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function YE(e,t){if(e.length!==t.length)throw new k0({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r];n.push(Ny(i,o))}return Ln(n)}function Ny(e,t,n=!1){if(e==="address"){const s=t;if(!vt(s))throw new Pt({address:s});return Yn(s.toLowerCase(),{size:n?32:null})}if(e==="string")return Ni(t);if(e==="bytes")return t;if(e==="bool")return Yn(Vh(t),{size:n?32:1});const r=e.match(Iy);if(r){const[s,l,h="256"]=r,p=Number.parseInt(h)/8;return Ie(t,{size:n?32:p,signed:l==="int"})}const i=e.match(Py);if(i){const[s,l]=i;if(Number.parseInt(l)!==(t.length-2)/2)throw new I0({expectedSize:Number.parseInt(l),givenSize:(t.length-2)/2});return Yn(t,{dir:"right",size:n?32:null})}const o=e.match(zE);if(o&&Array.isArray(t)){const[s,l]=o,h=[];for(let p=0;p<t.length;p++)h.push(Ny(l,t[p],!0));return h.length===0?"0x":Ln(h)}throw new F1(e)}function zi(e,t="hex"){const n=Fy(e),r=Xh(new Uint8Array(n.length));return n.encode(r),t==="hex"?Et(r.bytes):r.bytes}function Fy(e){return Array.isArray(e)?ZE(e.map(t=>Fy(t))):XE(e)}function ZE(e){const t=e.reduce((i,o)=>i+o.length,0),n=Ly(t);return{length:t<=55?1+t:1+n+t,encode(i){t<=55?i.pushByte(192+t):(i.pushByte(247+n),n===1?i.pushUint8(t):n===2?i.pushUint16(t):n===3?i.pushUint24(t):i.pushUint32(t));for(const{encode:o}of e)o(i)}}}function XE(e){const t=typeof e=="string"?On(e):e,n=Ly(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(i){t.length===1&&t[0]<128?i.pushBytes(t):t.length<=55?(i.pushByte(128+t.length),i.pushBytes(t)):(i.pushByte(183+n),n===1?i.pushUint8(t.length):n===2?i.pushUint16(t.length):n===3?i.pushUint24(t.length):i.pushUint32(t.length),i.pushBytes(t))}}}function Ly(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new Q("Length is too large.")}const JE={"0x0":"reverted","0x1":"success"};function jy(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>vr(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Qn(e.transactionIndex):null,status:e.status?JE[e.status]:null,type:e.type?Q0[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const zy=Nc("transactionReceipt",jy),QE=`Ethereum Signed Message:
`;function eS(e){const t=typeof e=="string"?Ni(e):typeof e.raw=="string"?e.raw:Et(e.raw),n=Ni(`${QE}${mt(t)}`);return wr([n,t])}function Uy(e,t){return Zt(eS(e),t)}const Vy="0x6492649264926492649264926492649264926492649264926492649264926492";function tS(e){return U0(e,-32)===Vy}function nS(e){const{address:t,data:n,signature:r}=e;return Ln([qi([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),Vy])}function rS(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new ly;for(const n of t){const r=mt(n),i=Qn(Rs(n,0,1));if(r!==32)throw new C_({hash:n,size:r});if(i!==uy)throw new P_({hash:n,version:i})}}qy(e)}function qy(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:i}=e;if(t<=0)throw new jc({chainId:t});if(i&&!vt(i))throw new Pt({address:i});if(r&&r>2n**256n-1n)throw new ji({maxFeePerGas:r});if(n&&r&&n>r)throw new Zs({maxFeePerGas:r,maxPriorityFeePerGas:n})}function iS(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:i,to:o}=e;if(t<=0)throw new jc({chainId:t});if(o&&!vt(o))throw new Pt({address:o});if(n||i)throw new Q("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>2n**256n-1n)throw new ji({maxFeePerGas:r})}function oS(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:i,to:o,accessList:s}=e;if(o&&!vt(o))throw new Pt({address:o});if(typeof t<"u"&&t<=0)throw new jc({chainId:t});if(n||i)throw new Q("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>2n**256n-1n)throw new ji({maxFeePerGas:r});if(s)throw new Q("`accessList` is not a valid Legacy Transaction attribute.")}function wd(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:i}=e[n];for(let o=0;o<i.length;o++)if(i[o].length-2!==64)throw new n_({storageKey:i[o]});if(!vt(r,{strict:!1}))throw new Pt({address:r});t.push([r,i])}return t}function Hy(e,t){const n=dy(e);return n==="eip1559"?aS(e,t):n==="eip2930"?cS(e,t):n==="eip4844"?sS(e,t):uS(e,t)}function sS(e,t){const{chainId:n,gas:r,nonce:i,to:o,value:s,maxFeePerBlobGas:l,maxFeePerGas:h,maxPriorityFeePerGas:p,accessList:m,data:g}=e;rS(e);let v=e.blobVersionedHashes,_=e.sidecars;if(e.blobs&&(typeof v>"u"||typeof _>"u")){const L=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(X=>Et(X)),U=e.kzg,K=od({blobs:L,kzg:U});if(typeof v>"u"&&(v=sy({commitments:K})),typeof _>"u"){const X=sd({blobs:L,commitments:K,kzg:U});_=hy({blobs:L,commitments:K,proofs:X})}}const E=wd(m),S=[Se(n),i?Se(i):"0x",p?Se(p):"0x",h?Se(h):"0x",r?Se(r):"0x",o??"0x",s?Se(s):"0x",g??"0x",E,l?Se(l):"0x",v??[],...vd(e,t)],P=[],I=[],O=[];if(_)for(let L=0;L<_.length;L++){const{blob:U,commitment:K,proof:X}=_[L];P.push(U),I.push(K),O.push(X)}return Ln(["0x03",zi(_?[S,P,I,O]:S)])}function aS(e,t){const{chainId:n,gas:r,nonce:i,to:o,value:s,maxFeePerGas:l,maxPriorityFeePerGas:h,accessList:p,data:m}=e;qy(e);const g=wd(p),v=[Se(n),i?Se(i):"0x",h?Se(h):"0x",l?Se(l):"0x",r?Se(r):"0x",o??"0x",s?Se(s):"0x",m??"0x",g,...vd(e,t)];return Ln(["0x02",zi(v)])}function cS(e,t){const{chainId:n,gas:r,data:i,nonce:o,to:s,value:l,accessList:h,gasPrice:p}=e;iS(e);const m=wd(h),g=[Se(n),o?Se(o):"0x",p?Se(p):"0x",r?Se(r):"0x",s??"0x",l?Se(l):"0x",i??"0x",m,...vd(e,t)];return Ln(["0x01",zi(g)])}function uS(e,t){const{chainId:n=0,gas:r,data:i,nonce:o,to:s,value:l,gasPrice:h}=e;oS(e);let p=[o?Se(o):"0x",h?Se(h):"0x",r?Se(r):"0x",s??"0x",l?Se(l):"0x",i??"0x"];if(t){const m=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const g=27n+(t.v===27n?0n:1n);if(t.v!==g)throw new e_({v:t.v});return g})();p=[...p,Se(m),t.r,t.s]}else n>0&&(p=[...p,Se(n),"0x","0x"]);return zi(p)}function vd(e,t){const n=t??e,{v:r,yParity:i}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof i>"u")return[];const o=Io(n.r),s=Io(n.s);return[typeof i=="number"?i?Se(1):"0x":r===0n?"0x":r===1n?Se(1):r===27n?"0x":Se(1),o==="0x00"?"0x":o,s==="0x00"?"0x":s]}function Jl(e,t){let[n,r="0"]=e.split(".");const i=n.startsWith("-");if(i&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[o,s,l]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],h=Math.round(+`${s}.${l}`);h>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${h}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${i?"-":""}${n}${r}`)}function lS(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function hS(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?Qn(e.nonce):void 0,storageProof:e.storageProof?lS(e.storageProof):void 0}}async function dS(e,{address:t,blockNumber:n,blockTag:r,storageKeys:i}){const o=r??"latest",s=n!==void 0?Ie(n):void 0,l=await e.request({method:"eth_getProof",params:[t,i,s||o]});return hS(l)}async function fS(e,{address:t,blockNumber:n,blockTag:r="latest",slot:i}){const o=n!==void 0?Ie(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,i,o||r]})}async function xd(e,{blockHash:t,blockNumber:n,blockTag:r,hash:i,index:o}){var m,g,v;const s=r||"latest",l=n!==void 0?Ie(n):void 0;let h=null;if(i?h=await e.request({method:"eth_getTransactionByHash",params:[i]},{dedupe:!0}):t?h=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,Ie(o)]},{dedupe:!0}):(l||s)&&(h=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||s,Ie(o)]},{dedupe:!!l})),!h)throw new K0({blockHash:t,blockNumber:n,blockTag:s,hash:i,index:o});return(((v=(g=(m=e.chain)==null?void 0:m.formatters)==null?void 0:g.transaction)==null?void 0:v.format)||Fc)(h)}async function pS(e,{hash:t,transactionReceipt:n}){const[r,i]=await Promise.all([ke(e,pa,"getBlockNumber")({}),t?ke(e,xd,"getTransaction")({hash:t}):void 0]),o=(n==null?void 0:n.blockNumber)||(i==null?void 0:i.blockNumber);return o?r-o+1n:0n}async function Ql(e,{hash:t}){var i,o,s;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new Y0({hash:t});return(((s=(o=(i=e.chain)==null?void 0:i.formatters)==null?void 0:o.transactionReceipt)==null?void 0:s.format)||jy)(n)}async function mS(e,t){var P;const{allowFailure:n=!0,batchSize:r,blockNumber:i,blockTag:o,multicallAddress:s,stateOverride:l}=t,h=t.contracts,p=r??(typeof((P=e.batch)==null?void 0:P.multicall)=="object"&&e.batch.multicall.batchSize||1024);let m=s;if(!m){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");m=Ho({blockNumber:i,chain:e.chain,contract:"multicall3"})}const g=[[]];let v=0,_=0;for(let I=0;I<h.length;I++){const{abi:O,address:L,args:U,functionName:K}=h[I];try{const X=Sr({abi:O,args:U,functionName:K});_+=(X.length-2)/2,p>0&&_>p&&g[v].length>0&&(v++,_=(X.length-2)/2,g[v]=[]),g[v]=[...g[v],{allowFailure:!0,callData:X,target:L}]}catch(X){const te=Ys(X,{abi:O,address:L,args:U,docsPath:"/docs/contract/multicall",functionName:K});if(!n)throw te;g[v]=[...g[v],{allowFailure:!0,callData:"0x",target:L}]}}const E=await Promise.allSettled(g.map(I=>ke(e,xr,"readContract")({abi:Wl,address:m,args:[I],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:l}))),S=[];for(let I=0;I<E.length;I++){const O=E[I];if(O.status==="rejected"){if(!n)throw O.reason;for(let U=0;U<g[I].length;U++)S.push({status:"failure",error:O.reason,result:void 0});continue}const L=O.value;for(let U=0;U<L.length;U++){const{returnData:K,success:X}=L[U],{callData:te}=g[I][U],{abi:ne,address:de,functionName:we,args:ve}=h[S.length];try{if(te==="0x")throw new Ic;if(!X)throw new Qh({data:K});const Ne=qo({abi:ne,args:ve,data:K,functionName:we});S.push(n?{result:Ne,status:"success"}:Ne)}catch(Ne){const Me=Ys(Ne,{abi:ne,address:de,args:ve,docsPath:"/docs/contract/multicall",functionName:we});if(!n)throw Me;S.push({error:Me,result:void 0,status:"failure"})}}}if(S.length!==h.length)throw new Q("multicall results mismatch");return S}const Wy=BigInt(0),Gc=BigInt(1),yS=BigInt(2);function Ui(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ya(e){if(!Ui(e))throw new Error("Uint8Array expected")}const gS=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ro(e){ya(e);let t="";for(let n=0;n<e.length;n++)t+=gS[e[n]];return t}function Gy(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function _d(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const cr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Sp(e){if(e>=cr._0&&e<=cr._9)return e-cr._0;if(e>=cr._A&&e<=cr._F)return e-(cr._A-10);if(e>=cr._a&&e<=cr._f)return e-(cr._a-10)}function Mo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=Sp(e.charCodeAt(o)),l=Sp(e.charCodeAt(o+1));if(s===void 0||l===void 0){const h=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+o)}r[i]=s*16+l}return r}function Pi(e){return _d(Ro(e))}function Ed(e){return ya(e),_d(Ro(Uint8Array.from(e).reverse()))}function Do(e,t){return Mo(e.toString(16).padStart(t*2,"0"))}function Sd(e,t){return Do(e,t).reverse()}function bS(e){return Mo(Gy(e))}function Cn(e,t,n){let r;if(typeof t=="string")try{r=Mo(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Ui(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Xs(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];ya(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}function Ky(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function wS(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function vS(e){let t;for(t=0;e>Wy;e>>=Gc,t+=1);return t}function xS(e,t){return e>>BigInt(t)&Gc}function _S(e,t,n){return e|(n?Gc:Wy)<<BigInt(t)}const Ad=e=>(yS<<BigInt(e-1))-Gc,il=e=>new Uint8Array(e),Ap=e=>Uint8Array.from(e);function Yy(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=il(e),i=il(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},l=(...g)=>n(i,r,...g),h=(g=il())=>{i=l(Ap([0]),g),r=l(),g.length!==0&&(i=l(Ap([1]),g),r=l())},p=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const v=[];for(;g<t;){r=l();const _=r.slice();v.push(_),g+=r.length}return Xs(...v)};return(g,v)=>{s(),h(g);let _;for(;!(_=v(p()));)h();return s(),_}}const ES={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ui(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ga(e,t,n={}){const r=(i,o,s)=>{const l=ES[o];if(typeof l!="function")throw new Error(`Invalid validator "${o}", expected function`);const h=e[i];if(!(s&&h===void 0)&&!l(h,e))throw new Error(`Invalid param ${String(i)}=${h} (${typeof h}), expected ${o}`)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const SS=Object.freeze(Object.defineProperty({__proto__:null,abytes:ya,bitGet:xS,bitLen:vS,bitMask:Ad,bitSet:_S,bytesToHex:Ro,bytesToNumberBE:Pi,bytesToNumberLE:Ed,concatBytes:Xs,createHmacDrbg:Yy,ensureBytes:Cn,equalBytes:Ky,hexToBytes:Mo,hexToNumber:_d,isBytes:Ui,numberToBytesBE:Do,numberToBytesLE:Sd,numberToHexUnpadded:Gy,numberToVarBytesBE:bS,utf8ToBytes:wS,validateObject:ga},Symbol.toStringTag,{value:"Module"}));function AS(e,t){const n=Jn(e)?Bn(e):e,r=Jn(t)?Bn(t):t;return Ky(n,r)}const Ct=BigInt(0),wt=BigInt(1),vi=BigInt(2),$S=BigInt(3),eh=BigInt(4),$p=BigInt(5),kp=BigInt(8);BigInt(9);BigInt(16);function en(e,t){const n=e%t;return n>=Ct?n:t+n}function kS(e,t,n){if(n<=Ct||t<Ct)throw new Error("Expected power/modulo > 0");if(n===wt)return Ct;let r=wt;for(;t>Ct;)t&wt&&(r=r*e%n),e=e*e%n,t>>=wt;return r}function gn(e,t,n){let r=e;for(;t-- >Ct;)r*=r,r%=n;return r}function th(e,t){if(e===Ct||t<=Ct)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=en(e,t),r=t,i=Ct,o=wt;for(;n!==Ct;){const l=r/n,h=r%n,p=i-o*l;r=n,n=h,i=o,o=p}if(r!==wt)throw new Error("invert: does not exist");return en(i,t)}function CS(e){const t=(e-wt)/vi;let n,r,i;for(n=e-wt,r=0;n%vi===Ct;n/=vi,r++);for(i=vi;i<e&&kS(i,t,e)!==e-wt;i++);if(r===1){const s=(e+wt)/eh;return function(h,p){const m=h.pow(p,s);if(!h.eql(h.sqr(m),p))throw new Error("Cannot find square root");return m}}const o=(n+wt)/vi;return function(l,h){if(l.pow(h,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let p=r,m=l.pow(l.mul(l.ONE,i),n),g=l.pow(h,o),v=l.pow(h,n);for(;!l.eql(v,l.ONE);){if(l.eql(v,l.ZERO))return l.ZERO;let _=1;for(let S=l.sqr(v);_<p&&!l.eql(S,l.ONE);_++)S=l.sqr(S);const E=l.pow(m,wt<<BigInt(p-_-1));m=l.sqr(E),g=l.mul(g,E),v=l.mul(v,m),p=_}return g}}function PS(e){if(e%eh===$S){const t=(e+wt)/eh;return function(r,i){const o=r.pow(i,t);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%kp===$p){const t=(e-$p)/kp;return function(r,i){const o=r.mul(i,vi),s=r.pow(o,t),l=r.mul(i,s),h=r.mul(r.mul(l,vi),s),p=r.mul(l,r.sub(h,r.ONE));if(!r.eql(r.sqr(p),i))throw new Error("Cannot find square root");return p}}return CS(e)}const IS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function TS(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=IS.reduce((r,i)=>(r[i]="function",r),t);return ga(e,n)}function BS(e,t,n){if(n<Ct)throw new Error("Expected power > 0");if(n===Ct)return e.ONE;if(n===wt)return t;let r=e.ONE,i=t;for(;n>Ct;)n&wt&&(r=e.mul(r,i)),i=e.sqr(i),n>>=wt;return r}function OS(e,t){const n=new Array(t.length),r=t.reduce((o,s,l)=>e.is0(s)?o:(n[l]=o,e.mul(o,s)),e.ONE),i=e.inv(r);return t.reduceRight((o,s,l)=>e.is0(s)?o:(n[l]=e.mul(o,n[l]),e.mul(o,s)),i),n}function Zy(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function RS(e,t,n=!1,r={}){if(e<=Ct)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Zy(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=PS(e),l=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Ad(i),ZERO:Ct,ONE:wt,create:h=>en(h,e),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return Ct<=h&&h<e},is0:h=>h===Ct,isOdd:h=>(h&wt)===wt,neg:h=>en(-h,e),eql:(h,p)=>h===p,sqr:h=>en(h*h,e),add:(h,p)=>en(h+p,e),sub:(h,p)=>en(h-p,e),mul:(h,p)=>en(h*p,e),pow:(h,p)=>BS(l,h,p),div:(h,p)=>en(h*th(p,e),e),sqrN:h=>h*h,addN:(h,p)=>h+p,subN:(h,p)=>h-p,mulN:(h,p)=>h*p,inv:h=>th(h,e),sqrt:r.sqrt||(h=>s(l,h)),invertBatch:h=>OS(l,h),cmov:(h,p,m)=>m?p:h,toBytes:h=>n?Sd(h,o):Do(h,o),fromBytes:h=>{if(h.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${h.length}`);return n?Ed(h):Pi(h)}});return Object.freeze(l)}function Xy(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Jy(e){const t=Xy(e);return t+Math.ceil(t/2)}function MS(e,t,n=!1){const r=e.length,i=Xy(t),o=Jy(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=n?Pi(e):Ed(e),l=en(s,t-wt)+wt;return n?Sd(l,i):Do(l,i)}const DS=BigInt(0),ol=BigInt(1);function NS(e,t){const n=(i,o)=>{const s=o.negate();return i?s:o},r=i=>{const o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:n,unsafeLadder(i,o){let s=e.ZERO,l=i;for(;o>DS;)o&ol&&(s=s.add(l)),l=l.double(),o>>=ol;return s},precomputeWindow(i,o){const{windows:s,windowSize:l}=r(o),h=[];let p=i,m=p;for(let g=0;g<s;g++){m=p,h.push(m);for(let v=1;v<l;v++)m=m.add(p),h.push(m);p=m.double()}return h},wNAF(i,o,s){const{windows:l,windowSize:h}=r(i);let p=e.ZERO,m=e.BASE;const g=BigInt(2**i-1),v=2**i,_=BigInt(i);for(let E=0;E<l;E++){const S=E*h;let P=Number(s&g);s>>=_,P>h&&(P-=v,s+=ol);const I=S,O=S+Math.abs(P)-1,L=E%2!==0,U=P<0;P===0?m=m.add(n(L,o[I])):p=p.add(n(U,o[O]))}return{p,f:m}},wNAFCached(i,o,s,l){const h=i._WINDOW_SIZE||1;let p=o.get(i);return p||(p=this.precomputeWindow(i,h),h!==1&&o.set(i,l(p))),this.wNAF(h,p,s)}}}function Qy(e){return TS(e.Fp),ga(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Zy(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function FS(e){const t=Qy(e);ga(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:LS,hexToBytes:jS}=SS,Ai={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Ai;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:LS(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ai,n=typeof e=="string"?jS(e):e;ya(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=Ai._parseInt(n.subarray(2)),{d:s,l}=Ai._parseInt(o);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=p=>Number.parseInt(p[0],16)&8?"00"+p:p,n=p=>{const m=p.toString(16);return m.length&1?`0${m}`:m},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,l=n(o),h=n(s);return`30${n(s+o+4)}02${h}${i}02${l}${r}`}},lr=BigInt(0),bn=BigInt(1);BigInt(2);const Cp=BigInt(3);BigInt(4);function zS(e){const t=FS(e),{Fp:n}=t,r=t.toBytes||((E,S,P)=>{const I=S.toAffine();return Xs(Uint8Array.from([4]),n.toBytes(I.x),n.toBytes(I.y))}),i=t.fromBytes||(E=>{const S=E.subarray(1),P=n.fromBytes(S.subarray(0,n.BYTES)),I=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:P,y:I}});function o(E){const{a:S,b:P}=t,I=n.sqr(E),O=n.mul(I,E);return n.add(n.add(O,n.mul(E,S)),P)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(E){return typeof E=="bigint"&&lr<E&&E<t.n}function l(E){if(!s(E))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(E){const{allowedPrivateKeyLengths:S,nByteLength:P,wrapPrivateKey:I,n:O}=t;if(S&&typeof E!="bigint"){if(Ui(E)&&(E=Ro(E)),typeof E!="string"||!S.includes(E.length))throw new Error("Invalid key");E=E.padStart(P*2,"0")}let L;try{L=typeof E=="bigint"?E:Pi(Cn("private key",E,P))}catch{throw new Error(`private key must be ${P} bytes, hex or bigint, not ${typeof E}`)}return I&&(L=en(L,O)),l(L),L}const p=new Map;function m(E){if(!(E instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(S,P,I){if(this.px=S,this.py=P,this.pz=I,S==null||!n.isValid(S))throw new Error("x required");if(P==null||!n.isValid(P))throw new Error("y required");if(I==null||!n.isValid(I))throw new Error("z required")}static fromAffine(S){const{x:P,y:I}=S||{};if(!S||!n.isValid(P)||!n.isValid(I))throw new Error("invalid affine point");if(S instanceof g)throw new Error("projective point not allowed");const O=L=>n.eql(L,n.ZERO);return O(P)&&O(I)?g.ZERO:new g(P,I,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){const P=n.invertBatch(S.map(I=>I.pz));return S.map((I,O)=>I.toAffine(P[O])).map(g.fromAffine)}static fromHex(S){const P=g.fromAffine(i(Cn("pointHex",S)));return P.assertValidity(),P}static fromPrivateKey(S){return g.BASE.multiply(h(S))}_setWindowSize(S){this._WINDOW_SIZE=S,p.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:S,y:P}=this.toAffine();if(!n.isValid(S)||!n.isValid(P))throw new Error("bad point: x or y not FE");const I=n.sqr(P),O=o(S);if(!n.eql(I,O))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:S}=this.toAffine();if(n.isOdd)return!n.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){m(S);const{px:P,py:I,pz:O}=this,{px:L,py:U,pz:K}=S,X=n.eql(n.mul(P,K),n.mul(L,O)),te=n.eql(n.mul(I,K),n.mul(U,O));return X&&te}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:P}=t,I=n.mul(P,Cp),{px:O,py:L,pz:U}=this;let K=n.ZERO,X=n.ZERO,te=n.ZERO,ne=n.mul(O,O),de=n.mul(L,L),we=n.mul(U,U),ve=n.mul(O,L);return ve=n.add(ve,ve),te=n.mul(O,U),te=n.add(te,te),K=n.mul(S,te),X=n.mul(I,we),X=n.add(K,X),K=n.sub(de,X),X=n.add(de,X),X=n.mul(K,X),K=n.mul(ve,K),te=n.mul(I,te),we=n.mul(S,we),ve=n.sub(ne,we),ve=n.mul(S,ve),ve=n.add(ve,te),te=n.add(ne,ne),ne=n.add(te,ne),ne=n.add(ne,we),ne=n.mul(ne,ve),X=n.add(X,ne),we=n.mul(L,U),we=n.add(we,we),ne=n.mul(we,ve),K=n.sub(K,ne),te=n.mul(we,de),te=n.add(te,te),te=n.add(te,te),new g(K,X,te)}add(S){m(S);const{px:P,py:I,pz:O}=this,{px:L,py:U,pz:K}=S;let X=n.ZERO,te=n.ZERO,ne=n.ZERO;const de=t.a,we=n.mul(t.b,Cp);let ve=n.mul(P,L),Ne=n.mul(I,U),Me=n.mul(O,K),et=n.add(P,I),oe=n.add(L,U);et=n.mul(et,oe),oe=n.add(ve,Ne),et=n.sub(et,oe),oe=n.add(P,O);let ae=n.add(L,K);return oe=n.mul(oe,ae),ae=n.add(ve,Me),oe=n.sub(oe,ae),ae=n.add(I,O),X=n.add(U,K),ae=n.mul(ae,X),X=n.add(Ne,Me),ae=n.sub(ae,X),ne=n.mul(de,oe),X=n.mul(we,Me),ne=n.add(X,ne),X=n.sub(Ne,ne),ne=n.add(Ne,ne),te=n.mul(X,ne),Ne=n.add(ve,ve),Ne=n.add(Ne,ve),Me=n.mul(de,Me),oe=n.mul(we,oe),Ne=n.add(Ne,Me),Me=n.sub(ve,Me),Me=n.mul(de,Me),oe=n.add(oe,Me),ve=n.mul(Ne,oe),te=n.add(te,ve),ve=n.mul(ae,oe),X=n.mul(et,X),X=n.sub(X,ve),ve=n.mul(et,Ne),ne=n.mul(ae,ne),ne=n.add(ne,ve),new g(X,te,ne)}subtract(S){return this.add(S.negate())}is0(){return this.equals(g.ZERO)}wNAF(S){return _.wNAFCached(this,p,S,P=>{const I=n.invertBatch(P.map(O=>O.pz));return P.map((O,L)=>O.toAffine(I[L])).map(g.fromAffine)})}multiplyUnsafe(S){const P=g.ZERO;if(S===lr)return P;if(l(S),S===bn)return this;const{endo:I}=t;if(!I)return _.unsafeLadder(this,S);let{k1neg:O,k1:L,k2neg:U,k2:K}=I.splitScalar(S),X=P,te=P,ne=this;for(;L>lr||K>lr;)L&bn&&(X=X.add(ne)),K&bn&&(te=te.add(ne)),ne=ne.double(),L>>=bn,K>>=bn;return O&&(X=X.negate()),U&&(te=te.negate()),te=new g(n.mul(te.px,I.beta),te.py,te.pz),X.add(te)}multiply(S){l(S);let P=S,I,O;const{endo:L}=t;if(L){const{k1neg:U,k1:K,k2neg:X,k2:te}=L.splitScalar(P);let{p:ne,f:de}=this.wNAF(K),{p:we,f:ve}=this.wNAF(te);ne=_.constTimeNegate(U,ne),we=_.constTimeNegate(X,we),we=new g(n.mul(we.px,L.beta),we.py,we.pz),I=ne.add(we),O=de.add(ve)}else{const{p:U,f:K}=this.wNAF(P);I=U,O=K}return g.normalizeZ([I,O])[0]}multiplyAndAddUnsafe(S,P,I){const O=g.BASE,L=(K,X)=>X===lr||X===bn||!K.equals(O)?K.multiplyUnsafe(X):K.multiply(X),U=L(this,P).add(L(S,I));return U.is0()?void 0:U}toAffine(S){const{px:P,py:I,pz:O}=this,L=this.is0();S==null&&(S=L?n.ONE:n.inv(O));const U=n.mul(P,S),K=n.mul(I,S),X=n.mul(O,S);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(X,n.ONE))throw new Error("invZ was invalid");return{x:U,y:K}}isTorsionFree(){const{h:S,isTorsionFree:P}=t;if(S===bn)return!0;if(P)return P(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:S,clearCofactor:P}=t;return S===bn?this:P?P(g,this):this.multiplyUnsafe(t.h)}toRawBytes(S=!0){return this.assertValidity(),r(g,this,S)}toHex(S=!0){return Ro(this.toRawBytes(S))}}g.BASE=new g(t.Gx,t.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const v=t.nBitLength,_=NS(g,t.endo?Math.ceil(v/2):v);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:h,weierstrassEquation:o,isWithinCurveOrder:s}}function US(e){const t=Qy(e);return ga(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function VS(e){const t=US(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(oe){return lr<oe&&oe<n.ORDER}function l(oe){return en(oe,r)}function h(oe){return th(oe,r)}const{ProjectivePoint:p,normPrivateKeyToScalar:m,weierstrassEquation:g,isWithinCurveOrder:v}=zS({...t,toBytes(oe,ae,$e){const Ve=ae.toAffine(),Be=n.toBytes(Ve.x),pe=Xs;return $e?pe(Uint8Array.from([ae.hasEvenY()?2:3]),Be):pe(Uint8Array.from([4]),Be,n.toBytes(Ve.y))},fromBytes(oe){const ae=oe.length,$e=oe[0],Ve=oe.subarray(1);if(ae===i&&($e===2||$e===3)){const Be=Pi(Ve);if(!s(Be))throw new Error("Point is not on curve");const pe=g(Be);let Ee;try{Ee=n.sqrt(pe)}catch(ct){const Tt=ct instanceof Error?": "+ct.message:"";throw new Error("Point is not on curve"+Tt)}const tt=(Ee&bn)===bn;return($e&1)===1!==tt&&(Ee=n.neg(Ee)),{x:Be,y:Ee}}else if(ae===o&&$e===4){const Be=n.fromBytes(Ve.subarray(0,n.BYTES)),pe=n.fromBytes(Ve.subarray(n.BYTES,2*n.BYTES));return{x:Be,y:pe}}else throw new Error(`Point of length ${ae} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),_=oe=>Ro(Do(oe,t.nByteLength));function E(oe){const ae=r>>bn;return oe>ae}function S(oe){return E(oe)?l(-oe):oe}const P=(oe,ae,$e)=>Pi(oe.slice(ae,$e));class I{constructor(ae,$e,Ve){this.r=ae,this.s=$e,this.recovery=Ve,this.assertValidity()}static fromCompact(ae){const $e=t.nByteLength;return ae=Cn("compactSignature",ae,$e*2),new I(P(ae,0,$e),P(ae,$e,2*$e))}static fromDER(ae){const{r:$e,s:Ve}=Ai.toSig(Cn("DER",ae));return new I($e,Ve)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ae){return new I(this.r,this.s,ae)}recoverPublicKey(ae){const{r:$e,s:Ve,recovery:Be}=this,pe=te(Cn("msgHash",ae));if(Be==null||![0,1,2,3].includes(Be))throw new Error("recovery id invalid");const Ee=Be===2||Be===3?$e+t.n:$e;if(Ee>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const tt=Be&1?"03":"02",Mt=p.fromHex(tt+_(Ee)),ct=h(Ee),Tt=l(-pe*ct),Dt=l(Ve*ct),Je=p.BASE.multiplyAndAddUnsafe(Mt,Tt,Dt);if(!Je)throw new Error("point at infinify");return Je.assertValidity(),Je}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Mo(this.toDERHex())}toDERHex(){return Ai.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Mo(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}const O={isValidPrivateKey(oe){try{return m(oe),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const oe=Jy(t.n);return MS(t.randomBytes(oe),t.n)},precompute(oe=8,ae=p.BASE){return ae._setWindowSize(oe),ae.multiply(BigInt(3)),ae}};function L(oe,ae=!0){return p.fromPrivateKey(oe).toRawBytes(ae)}function U(oe){const ae=Ui(oe),$e=typeof oe=="string",Ve=(ae||$e)&&oe.length;return ae?Ve===i||Ve===o:$e?Ve===2*i||Ve===2*o:oe instanceof p}function K(oe,ae,$e=!0){if(U(oe))throw new Error("first arg must be private key");if(!U(ae))throw new Error("second arg must be public key");return p.fromHex(ae).multiply(m(oe)).toRawBytes($e)}const X=t.bits2int||function(oe){const ae=Pi(oe),$e=oe.length*8-t.nBitLength;return $e>0?ae>>BigInt($e):ae},te=t.bits2int_modN||function(oe){return l(X(oe))},ne=Ad(t.nBitLength);function de(oe){if(typeof oe!="bigint")throw new Error("bigint expected");if(!(lr<=oe&&oe<ne))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Do(oe,t.nByteLength)}function we(oe,ae,$e=ve){if(["recovered","canonical"].some(Gt=>Gt in $e))throw new Error("sign() legacy options not supported");const{hash:Ve,randomBytes:Be}=t;let{lowS:pe,prehash:Ee,extraEntropy:tt}=$e;pe==null&&(pe=!0),oe=Cn("msgHash",oe),Ee&&(oe=Cn("prehashed msgHash",Ve(oe)));const Mt=te(oe),ct=m(ae),Tt=[de(ct),de(Mt)];if(tt!=null&&tt!==!1){const Gt=tt===!0?Be(n.BYTES):tt;Tt.push(Cn("extraEntropy",Gt))}const Dt=Xs(...Tt),Je=Mt;function Wt(Gt){const ye=X(Gt);if(!v(ye))return;const An=h(ye),ot=p.BASE.multiply(ye).toAffine(),Ae=l(ot.x);if(Ae===lr)return;const Nt=l(An*l(Je+Ae*ct));if(Nt===lr)return;let Pr=(ot.x===Ae?0:2)|Number(ot.y&bn),St=Nt;return pe&&E(Nt)&&(St=S(Nt),Pr^=1),new I(Ae,St,Pr)}return{seed:Dt,k2sig:Wt}}const ve={lowS:t.lowS,prehash:!1},Ne={lowS:t.lowS,prehash:!1};function Me(oe,ae,$e=ve){const{seed:Ve,k2sig:Be}=we(oe,ae,$e),pe=t;return Yy(pe.hash.outputLen,pe.nByteLength,pe.hmac)(Ve,Be)}p.BASE._setWindowSize(8);function et(oe,ae,$e,Ve=Ne){var ot;const Be=oe;if(ae=Cn("msgHash",ae),$e=Cn("publicKey",$e),"strict"in Ve)throw new Error("options.strict was renamed to lowS");const{lowS:pe,prehash:Ee}=Ve;let tt,Mt;try{if(typeof Be=="string"||Ui(Be))try{tt=I.fromDER(Be)}catch(Ae){if(!(Ae instanceof Ai.Err))throw Ae;tt=I.fromCompact(Be)}else if(typeof Be=="object"&&typeof Be.r=="bigint"&&typeof Be.s=="bigint"){const{r:Ae,s:Nt}=Be;tt=new I(Ae,Nt)}else throw new Error("PARSE");Mt=p.fromHex($e)}catch(Ae){if(Ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(pe&&tt.hasHighS())return!1;Ee&&(ae=t.hash(ae));const{r:ct,s:Tt}=tt,Dt=te(ae),Je=h(Tt),Wt=l(Dt*Je),Gt=l(ct*Je),ye=(ot=p.BASE.multiplyAndAddUnsafe(Mt,Wt,Gt))==null?void 0:ot.toAffine();return ye?l(ye.x)===ct:!1}return{CURVE:t,getPublicKey:L,getSharedSecret:K,sign:Me,verify:et,ProjectivePoint:p,Signature:I,utils:O}}class eg extends qh{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Z1(t);const r=Bc(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return To(this),this.iHash.update(t),this}digestInto(t){To(this),oa(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:l}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=l,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const tg=(e,t,n)=>new eg(e,t).update(n).digest();tg.create=(e,t)=>new eg(e,t);function qS(e){return{hash:e,hmac:(t,...n)=>tg(e,t,sx(...n)),randomBytes:ax}}function HS(e,t){const n=r=>VS({...e,...qS(r)});return Object.freeze({...n(t),create:n})}const ng=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Pp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),WS=BigInt(1),nh=BigInt(2),Ip=(e,t)=>(e+t/nh)/t;function GS(e){const t=ng,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),l=BigInt(44),h=BigInt(88),p=e*e*e%t,m=p*p*e%t,g=gn(m,n,t)*m%t,v=gn(g,n,t)*m%t,_=gn(v,nh,t)*p%t,E=gn(_,i,t)*_%t,S=gn(E,o,t)*E%t,P=gn(S,l,t)*S%t,I=gn(P,h,t)*P%t,O=gn(I,l,t)*S%t,L=gn(O,n,t)*m%t,U=gn(L,s,t)*E%t,K=gn(U,r,t)*p%t,X=gn(K,nh,t);if(!rh.eql(rh.sqr(X),e))throw new Error("Cannot find square root");return X}const rh=RS(ng,void 0,void 0,{sqrt:GS}),$d=HS({a:BigInt(0),b:BigInt(7),Fp:rh,n:Pp,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Pp,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-WS*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),l=Ip(o*e,t),h=Ip(-r*e,t);let p=en(e-l*n-h*i,t),m=en(-l*r-h*o,t);const g=p>s,v=m>s;if(g&&(p=t-p),v&&(m=t-m),p>s||m>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:g,k1:p,k2neg:v,k2:m}}}},iy);BigInt(0);$d.ProjectivePoint;function KS({r:e,s:t,v:n,yParity:r}){const i=(()=>{if(r===0||r===1)return r;if(n&&(n===27n||n===28n||n>=35n))return n%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})();return`0x${new $d.Signature(ht(e),ht(t)).toCompactHex()}${i===0?"1b":"1c"}`}async function kd(e,t){const{address:n,factory:r,factoryData:i,hash:o,signature:s,...l}=t,h=Jn(s)?s:typeof s=="object"&&"r"in s&&"s"in s?KS(s):Et(s),p=await(async()=>!r&&!i||tS(h)||await ke(e,Xl,"getCode")({address:n})?h:nS({address:r,data:i,signature:h}))();try{const{data:m}=await ke(e,Uc,"call")({data:zc({abi:R_,args:[n,o,p],bytecode:F_}),...l});return AS(m??"0x0","0x1")}catch(m){if(m instanceof Z0)return!1;throw m}}async function YS(e,{address:t,message:n,factory:r,factoryData:i,signature:o,...s}){const l=Uy(n);return kd(e,{address:t,factory:r,factoryData:i,hash:l,signature:o,...s})}async function ZS(e,t){const{address:n,factory:r,factoryData:i,signature:o,message:s,primaryType:l,types:h,domain:p,...m}=t,g=qE({message:s,primaryType:l,types:h,domain:p});return kd(e,{address:n,factory:r,factoryData:i,hash:g,signature:o,...m})}function rg(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:i,poll:o,pollingInterval:s=e.pollingInterval}){const l=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket");let h;return l?(()=>{const g=It(["watchBlockNumber",e.uid,t,n,s]);return ri(g,{onBlockNumber:r,onError:i},v=>fa(async()=>{var _;try{const E=await ke(e,pa,"getBlockNumber")({cacheTime:0});if(h){if(E===h)return;if(E-h>1&&n)for(let S=h+1n;S<E;S++)v.onBlockNumber(S,h),h=S}(!h||E>h)&&(v.onBlockNumber(E,h),h=E)}catch(E){(_=v.onError)==null||_.call(v,E)}},{emitOnBegin:t,interval:s}))})():(()=>{const g=It(["watchBlockNumber",e.uid,t,n]);return ri(g,{onBlockNumber:r,onError:i},v=>{let _=!0,E=()=>_=!1;return(async()=>{try{const S=(()=>{if(e.transport.type==="fallback"){const I=e.transport.transports.find(O=>O.config.type==="webSocket");return I?I.value:e.transport}return e.transport})(),{unsubscribe:P}=await S.subscribe({params:["newHeads"],onData(I){var L;if(!_)return;const O=ht((L=I.result)==null?void 0:L.number);v.onBlockNumber(O,h),h=O},onError(I){var O;(O=v.onError)==null||O.call(v,I)}});E=P,_||E()}catch(S){i==null||i(S)}})(),()=>E()})})()}async function XS(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:i=e.pollingInterval,retryCount:o=6,retryDelay:s=({count:h})=>~~(1<<h)*200,timeout:l}){const h=It(["waitForTransactionReceipt",e.uid,n]);let p=0,m,g,v,_=!1;return new Promise((E,S)=>{l&&setTimeout(()=>S(new mp({hash:n})),l);const P=ri(h,{onReplaced:r,resolve:E,reject:S},I=>{const O=ke(e,rg,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:i,async onBlockNumber(L){const U=X=>{O(),X(),P()};let K=L;if(!_){p>o&&U(()=>I.reject(new mp({hash:n})));try{if(v){if(t>1&&(!v.blockNumber||K-v.blockNumber+1n<t))return;U(()=>I.resolve(v));return}if(m||(_=!0,await Yl(async()=>{m=await ke(e,xd,"getTransaction")({hash:n}),m.blockNumber&&(K=m.blockNumber)},{delay:s,retryCount:o}),_=!1),v=await ke(e,Ql,"getTransactionReceipt")({hash:n}),t>1&&(!v.blockNumber||K-v.blockNumber+1n<t))return;U(()=>I.resolve(v))}catch(X){if(X instanceof K0||X instanceof Y0){if(!m){_=!1;return}try{g=m,_=!0;const te=await Yl(()=>ke(e,ni,"getBlock")({blockNumber:K,includeTransactions:!0}),{delay:s,retryCount:o,shouldRetry:({error:we})=>we instanceof J0});_=!1;const ne=te.transactions.find(({from:we,nonce:ve})=>we===g.from&&ve===g.nonce);if(!ne||(v=await ke(e,Ql,"getTransactionReceipt")({hash:ne.hash}),t>1&&(!v.blockNumber||K-v.blockNumber+1n<t)))return;let de="replaced";ne.to===g.to&&ne.value===g.value?de="repriced":ne.from===ne.to&&ne.value===0n&&(de="cancelled"),U(()=>{var we;(we=I.onReplaced)==null||we.call(I,{reason:de,replacedTransaction:g,transaction:ne,transactionReceipt:v}),I.resolve(v)})}catch(te){U(()=>I.reject(te))}}else U(()=>I.reject(X))}finally{p++}}}})})})}function JS(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:i,onError:o,includeTransactions:s,poll:l,pollingInterval:h=e.pollingInterval}){const p=typeof l<"u"?l:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),m=s??!1;let g;return p?(()=>{const E=It(["watchBlocks",e.uid,t,n,r,m,h]);return ri(E,{onBlock:i,onError:o},S=>fa(async()=>{var P;try{const I=await ke(e,ni,"getBlock")({blockTag:t,includeTransactions:m});if(I.number&&(g!=null&&g.number)){if(I.number===g.number)return;if(I.number-g.number>1&&n)for(let O=(g==null?void 0:g.number)+1n;O<I.number;O++){const L=await ke(e,ni,"getBlock")({blockNumber:O,includeTransactions:m});S.onBlock(L,g),g=L}}(!(g!=null&&g.number)||t==="pending"&&!(I!=null&&I.number)||I.number&&I.number>g.number)&&(S.onBlock(I,g),g=I)}catch(I){(P=S.onError)==null||P.call(S,I)}},{emitOnBegin:r,interval:h}))})():(()=>{let E=!0,S=()=>E=!1;return(async()=>{try{const P=(()=>{if(e.transport.type==="fallback"){const O=e.transport.transports.find(L=>L.config.type==="webSocket");return O?O.value:e.transport}return e.transport})(),{unsubscribe:I}=await P.subscribe({params:["newHeads"],onData(O){var K,X,te;if(!E)return;const U=(((te=(X=(K=e.chain)==null?void 0:K.formatters)==null?void 0:X.block)==null?void 0:te.format)||rd)(O.result);i(U,g),g=U},onError(O){o==null||o(O)}});S=I,E||S()}catch(P){o==null||o(P)}})(),()=>S()})()}function QS(e,{address:t,args:n,batch:r=!0,event:i,events:o,fromBlock:s,onError:l,onLogs:h,poll:p,pollingInterval:m=e.pollingInterval,strict:g}){const v=typeof p<"u"?p:typeof s=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),_=g??!1;return v?(()=>{const P=It(["watchEvent",t,n,r,e.uid,i,m,s]);return ri(P,{onLogs:h,onError:l},I=>{let O;s!==void 0&&(O=s-1n);let L,U=!1;const K=fa(async()=>{var X;if(!U){try{L=await ke(e,ky,"createEventFilter")({address:t,args:n,event:i,events:o,strict:_,fromBlock:s})}catch{}U=!0;return}try{let te;if(L)te=await ke(e,Vc,"getFilterChanges")({filter:L});else{const ne=await ke(e,pa,"getBlockNumber")({});O&&O!==ne?te=await ke(e,hd,"getLogs")({address:t,args:n,event:i,events:o,fromBlock:O+1n,toBlock:ne}):te=[],O=ne}if(te.length===0)return;if(r)I.onLogs(te);else for(const ne of te)I.onLogs([ne])}catch(te){L&&te instanceof Li&&(U=!1),(X=I.onError)==null||X.call(I,te)}},{emitOnBegin:!0,interval:m});return async()=>{L&&await ke(e,qc,"uninstallFilter")({filter:L}),K()}})})():(()=>{let P=!0,I=()=>P=!1;return(async()=>{try{const O=(()=>{if(e.transport.type==="fallback"){const X=e.transport.transports.find(te=>te.config.type==="webSocket");return X?X.value:e.transport}return e.transport})(),L=o??(i?[i]:void 0);let U=[];L&&(U=[L.flatMap(te=>aa({abi:[te],eventName:te.name,args:n}))],i&&(U=U[0]));const{unsubscribe:K}=await O.subscribe({params:["logs",{address:t,topics:U}],onData(X){var ne;if(!P)return;const te=X.result;try{const{eventName:de,args:we}=ud({abi:L??[],data:te.data,topics:te.topics,strict:_}),ve=vr(te,{args:we,eventName:de});h([ve])}catch(de){let we,ve;if(de instanceof Os||de instanceof Tc){if(g)return;we=de.abiItem.name,ve=(ne=de.abiItem.inputs)==null?void 0:ne.some(Me=>!("name"in Me&&Me.name))}const Ne=vr(te,{args:ve?[]:{},eventName:we});h([Ne])}},onError(X){l==null||l(X)}});I=K,P||I()}catch(O){l==null||l(O)}})(),()=>I()})()}function e6(e,{batch:t=!0,onError:n,onTransactions:r,poll:i,pollingInterval:o=e.pollingInterval}){return(typeof i<"u"?i:e.transport.type!=="webSocket")?(()=>{const p=It(["watchPendingTransactions",e.uid,t,o]);return ri(p,{onTransactions:r,onError:n},m=>{let g;const v=fa(async()=>{var _;try{if(!g)try{g=await ke(e,Cy,"createPendingTransactionFilter")({});return}catch(S){throw v(),S}const E=await ke(e,Vc,"getFilterChanges")({filter:g});if(E.length===0)return;if(t)m.onTransactions(E);else for(const S of E)m.onTransactions([S])}catch(E){(_=m.onError)==null||_.call(m,E)}},{emitOnBegin:!0,interval:o});return async()=>{g&&await ke(e,qc,"uninstallFilter")({filter:g}),v()}})})():(()=>{let p=!0,m=()=>p=!1;return(async()=>{try{const{unsubscribe:g}=await e.transport.subscribe({params:["newPendingTransactions"],onData(v){if(!p)return;const _=v.result;r([_])},onError(v){n==null||n(v)}});m=g,p||m()}catch(g){n==null||n(g)}})(),()=>m()})()}function t6(e){var g,v,_;const{scheme:t,statement:n,...r}=((g=e.match(n6))==null?void 0:g.groups)??{},{chainId:i,expirationTime:o,issuedAt:s,notBefore:l,requestId:h,...p}=((v=e.match(r6))==null?void 0:v.groups)??{},m=(_=e.split("Resources:")[1])==null?void 0:_.split(`
- `).slice(1);return{...r,...p,...i?{chainId:Number(i)}:{},...o?{expirationTime:new Date(o)}:{},...s?{issuedAt:new Date(s)}:{},...l?{notBefore:new Date(l)}:{},...h?{requestId:h}:{},...m?{resources:m}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const n6=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,r6=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function i6(e){const{address:t,domain:n,message:r,nonce:i,scheme:o,time:s=new Date}=e;if(n&&r.domain!==n||i&&r.nonce!==i||o&&r.scheme!==o||r.expirationTime&&s>=r.expirationTime||r.notBefore&&s<r.notBefore)return!1;try{if(!r.address||t&&!er(r.address,t))return!1}catch{return!1}return!0}async function o6(e,t){const{address:n,domain:r,message:i,nonce:o,scheme:s,signature:l,time:h=new Date,...p}=t,m=t6(i);if(!m.address||!i6({address:n,domain:r,message:m,nonce:o,scheme:s,time:h}))return!1;const v=Uy(i);return kd(e,{address:m.address,hash:v,signature:l,...p})}function s6(e){return{call:t=>Uc(e,t),createBlockFilter:()=>RE(e),createContractEventFilter:t=>q0(e,t),createEventFilter:t=>ky(e,t),createPendingTransactionFilter:()=>Cy(e),estimateContractGas:t=>T_(e,t),estimateGas:t=>cd(e,t),getBalance:t=>ME(e,t),getBlobBaseFee:()=>DE(e),getBlock:t=>ni(e,t),getBlockNumber:t=>pa(e,t),getBlockTransactionCount:t=>NE(e,t),getBytecode:t=>Xl(e,t),getChainId:()=>da(e),getCode:t=>Xl(e,t),getContractEvents:t=>py(e,t),getEip712Domain:t=>iE(e,t),getEnsAddress:t=>bE(e,t),getEnsAvatar:t=>TE(e,t),getEnsName:t=>BE(e,t),getEnsResolver:t=>OE(e,t),getEnsText:t=>$y(e,t),getFeeHistory:t=>LE(e,t),estimateFeesPerGas:t=>w_(e,t),getFilterChanges:t=>Vc(e,t),getFilterLogs:t=>jE(e,t),getGasPrice:()=>id(e),getLogs:t=>hd(e,t),getProof:t=>dS(e,t),estimateMaxPriorityFeePerGas:t=>b_(e,t),getStorageAt:t=>fS(e,t),getTransaction:t=>xd(e,t),getTransactionConfirmations:t=>pS(e,t),getTransactionCount:t=>ry(e,t),getTransactionReceipt:t=>Ql(e,t),multicall:t=>mS(e,t),prepareTransactionRequest:t=>Lc(e,t),readContract:t=>xr(e,t),sendRawTransaction:t=>fd(e,t),simulateContract:t=>G_(e,t),verifyMessage:t=>YS(e,t),verifySiweMessage:t=>o6(e,t),verifyTypedData:t=>ZS(e,t),uninstallFilter:t=>qc(e,t),waitForTransactionReceipt:t=>XS(e,t),watchBlocks:t=>JS(e,t),watchBlockNumber:t=>rg(e,t),watchContractEvent:t=>eE(e,t),watchEvent:t=>QS(e,t),watchPendingTransactions:t=>e6(e,t)}}function a6(e){const{key:t="public",name:n="Public Client"}=e;return vy({...e,key:t,name:n,type:"publicClient"}).extend(s6)}function c6(e,t){const{abi:n,args:r,bytecode:i,...o}=t,s=zc({abi:n,args:r,bytecode:i});return pd(e,{...o,data:s})}async function u6(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Oc(r))}async function l6(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function h6(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Vr(n))}async function d6(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function f6(e,{account:t=e.account,message:n}){if(!t)throw new Hc({docsPath:"/docs/actions/wallet/signMessage"});const r=En(t);if(r.type==="local")return r.signMessage({message:n});const i=typeof n=="string"?Ni(n):n.raw instanceof Uint8Array?Se(n.raw):n.raw;return e.request({method:"personal_sign",params:[i,r.address]},{retryCount:0})}async function p6(e,t){var p,m,g,v;const{account:n=e.account,chain:r=e.chain,...i}=t;if(!n)throw new Hc({docsPath:"/docs/actions/wallet/signTransaction"});const o=En(n);ha({account:o,...t});const s=await ke(e,da,"getChainId")({});r!==null&&by({currentChainId:s,chain:r});const l=(r==null?void 0:r.formatters)||((p=e.chain)==null?void 0:p.formatters),h=((m=l==null?void 0:l.transactionRequest)==null?void 0:m.format)||la;return o.type==="local"?o.signTransaction({...i,chainId:s},{serializer:(v=(g=e.chain)==null?void 0:g.serializers)==null?void 0:v.transaction}):await e.request({method:"eth_signTransaction",params:[{...h(i),chainId:Ie(s),from:o.address}]},{retryCount:0})}async function m6(e,t){const{account:n=e.account,domain:r,message:i,primaryType:o}=t;if(!n)throw new Hc({docsPath:"/docs/actions/wallet/signTypedData"});const s=En(n),l={EIP712Domain:Dy({domain:r}),...t.types};if(My({domain:r,message:i,primaryType:o,types:l}),s.type==="local")return s.signTypedData({domain:r,message:i,primaryType:o,types:l});const h=KE({domain:r,message:i,primaryType:o,types:l});return e.request({method:"eth_signTypedData_v4",params:[s.address,h]},{retryCount:0})}async function y6(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:Ie(t)}]},{retryCount:0})}async function g6(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function b6(e){return{addChain:t=>sE(e,t),deployContract:t=>c6(e,t),getAddresses:()=>u6(e),getChainId:()=>da(e),getPermissions:()=>l6(e),prepareTransactionRequest:t=>Lc(e,t),requestAddresses:()=>h6(e),requestPermissions:t=>d6(e,t),sendRawTransaction:t=>fd(e,t),sendTransaction:t=>pd(e,t),signMessage:t=>f6(e,t),signTransaction:t=>p6(e,t),signTypedData:t=>m6(e,t),switchChain:t=>y6(e,t),watchAsset:t=>g6(e,t),writeContract:t=>nE(e,t)}}function w6(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return vy({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(b6)}function v6(e,t={}){const{key:n="webSocket",name:r="WebSocket JSON-RPC",reconnect:i,retryDelay:o}=t;return({chain:s,retryCount:l,timeout:h})=>{var v;const p=t.retryCount??l,m=h??t.timeout??1e4,g=e||((v=s==null?void 0:s.rpcUrls.default.webSocket)==null?void 0:v[0]);if(!g)throw new md;return ma({key:n,name:r,async request({method:_,params:E}){const S={method:_,params:E},P=await sc(g,{reconnect:i}),{error:I,result:O}=await P.requestAsync({body:S,timeout:m});if(I)throw new Mc({body:S,error:I,url:g});return O},retryCount:p,retryDelay:o,timeout:m,type:"webSocket"},{getSocket(){return VE(g)},getRpcClient(){return sc(g)},async subscribe({params:_,onData:E,onError:S}){const P=await sc(g),{result:I}=await new Promise((O,L)=>P.request({body:{method:"eth_subscribe",params:_},onResponse(U){if(U.error){L(U.error),S==null||S(U.error);return}if(typeof U.id=="number"){O(U);return}U.method==="eth_subscription"&&E(U.params)}}));return{subscriptionId:I,async unsubscribe(){return new Promise(O=>P.request({body:{method:"eth_unsubscribe",params:[I]},onResponse:O}))}}}})}}const Wn="0x0000000000000000000000000000000000000000",x6=2n**16n-1n,No=2n**48n-1n,_6=2n**160n-1n,E6=2n**256n-1n;function S6(e){const{r:t,s:n}=$d.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[i,o]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof i<"u"?{r:Ie(t,{size:32}),s:Ie(n,{size:32}),v:i,yParity:o}:{r:Ie(t,{size:32}),s:Ie(n,{size:32}),yParity:o}}var A6=Object.create,ig=Object.defineProperty,$6=Object.getOwnPropertyDescriptor,Cd=Object.getOwnPropertyNames,k6=Object.getPrototypeOf,C6=Object.prototype.hasOwnProperty,Wo=(e,t)=>function(){return e&&(t=(0,e[Cd(e)[0]])(e=0)),t},uI=(e,t)=>function(){return t||(0,e[Cd(e)[0]])((t={exports:{}}).exports,t),t.exports},P6=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Cd(t))!C6.call(e,i)&&i!==n&&ig(e,i,{get:()=>t[i],enumerable:!(r=$6(t,i))||r.enumerable});return e},lI=(e,t,n)=>(n=e!=null?A6(k6(e)):{},P6(ig(n,"default",{value:e,enumerable:!0}),e)),Wi=Wo({"<define:__environment__>"(){}}),Gi=Wo({"node_modules/.pnpm/esbuild-plugin-polyfill-node@0.3.0_esbuild@0.23.0/node_modules/esbuild-plugin-polyfill-node/polyfills/__dirname.js"(){}});function I6(){if(ih)return ho;ih=!0,ho.byteLength=l,ho.toByteArray=p,ho.fromByteArray=v;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(_){var E=_.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=_.indexOf("=");S===-1&&(S=E);var P=S===E?0:4-S%4;return[S,P]}function l(_){var E=s(_),S=E[0],P=E[1];return(S+P)*3/4-P}function h(_,E,S){return(E+S)*3/4-S}function p(_){var E,S=s(_),P=S[0],I=S[1],O=new n(h(_,P,I)),L=0,U=I>0?P-4:P,K;for(K=0;K<U;K+=4)E=t[_.charCodeAt(K)]<<18|t[_.charCodeAt(K+1)]<<12|t[_.charCodeAt(K+2)]<<6|t[_.charCodeAt(K+3)],O[L++]=E>>16&255,O[L++]=E>>8&255,O[L++]=E&255;return I===2&&(E=t[_.charCodeAt(K)]<<2|t[_.charCodeAt(K+1)]>>4,O[L++]=E&255),I===1&&(E=t[_.charCodeAt(K)]<<10|t[_.charCodeAt(K+1)]<<4|t[_.charCodeAt(K+2)]>>2,O[L++]=E>>8&255,O[L++]=E&255),O}function m(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function g(_,E,S){for(var P,I=[],O=E;O<S;O+=3)P=(_[O]<<16&16711680)+(_[O+1]<<8&65280)+(_[O+2]&255),I.push(m(P));return I.join("")}function v(_){for(var E,S=_.length,P=S%3,I=[],O=16383,L=0,U=S-P;L<U;L+=O)I.push(g(_,L,L+O>U?U:L+O));return P===1?(E=_[S-1],I.push(e[E>>2]+e[E<<4&63]+"==")):P===2&&(E=(_[S-2]<<8)+_[S-1],I.push(e[E>>10]+e[E>>4&63]+e[E<<2&63]+"=")),I.join("")}return ho}function T6(){return oh||(oh=!0,ps.read=function(e,t,n,r,i){var o,s,l=i*8-r-1,h=(1<<l)-1,p=h>>1,m=-7,g=n?i-1:0,v=n?-1:1,_=e[t+g];for(g+=v,o=_&(1<<-m)-1,_>>=-m,m+=l;m>0;o=o*256+e[t+g],g+=v,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=r;m>0;s=s*256+e[t+g],g+=v,m-=8);if(o===0)o=1-p;else{if(o===h)return s?NaN:(_?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-p}return(_?-1:1)*s*Math.pow(2,o-r)},ps.write=function(e,t,n,r,i,o){var s,l,h,p=o*8-i-1,m=(1<<p)-1,g=m>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=r?0:o-1,E=r?1:-1,S=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,s=m):(s=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+g>=1?t+=v/h:t+=v*Math.pow(2,1-g),t*h>=2&&(s++,h/=2),s+g>=m?(l=0,s=m):s+g>=1?(l=(t*h-1)*Math.pow(2,i),s=s+g):(l=t*Math.pow(2,g-1)*Math.pow(2,i),s=0));i>=8;e[n+_]=l&255,_+=E,l/=256,i-=8);for(s=s<<i|l,p+=i;p>0;e[n+_]=s&255,_+=E,s/=256,p-=8);e[n+_-E]|=S*128}),ps}function B6(){if(sh)return jr;sh=!0;const e=I6(),t=T6(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;jr.Buffer=s,jr.SlowBuffer=I,jr.INSPECT_MAX_BYTES=50;const r=2147483647;jr.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const f=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(f,a),f.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(f){if(f>r)throw new RangeError('The value "'+f+'" is invalid for option "size"');const a=new Uint8Array(f);return Object.setPrototypeOf(a,s.prototype),a}function s(f,a,u){if(typeof f=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(f)}return l(f,a,u)}s.poolSize=8192;function l(f,a,u){if(typeof f=="string")return g(f,a);if(ArrayBuffer.isView(f))return _(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(st(f,ArrayBuffer)||f&&st(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(st(f,SharedArrayBuffer)||f&&st(f.buffer,SharedArrayBuffer)))return E(f,a,u);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=f.valueOf&&f.valueOf();if(b!=null&&b!==f)return s.from(b,a,u);const A=S(f);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return s.from(f[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}s.from=function(f,a,u){return l(f,a,u)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function h(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function p(f,a,u){return h(f),f<=0?o(f):a!==void 0?typeof u=="string"?o(f).fill(a,u):o(f).fill(a):o(f)}s.alloc=function(f,a,u){return p(f,a,u)};function m(f){return h(f),o(f<0?0:P(f)|0)}s.allocUnsafe=function(f){return m(f)},s.allocUnsafeSlow=function(f){return m(f)};function g(f,a){if((typeof a!="string"||a==="")&&(a="utf8"),!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const u=O(f,a)|0;let b=o(u);const A=b.write(f,a);return A!==u&&(b=b.slice(0,A)),b}function v(f){const a=f.length<0?0:P(f.length)|0,u=o(a);for(let b=0;b<a;b+=1)u[b]=f[b]&255;return u}function _(f){if(st(f,Uint8Array)){const a=new Uint8Array(f);return E(a.buffer,a.byteOffset,a.byteLength)}return v(f)}function E(f,a,u){if(a<0||f.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');let b;return a===void 0&&u===void 0?b=new Uint8Array(f):u===void 0?b=new Uint8Array(f,a):b=new Uint8Array(f,a,u),Object.setPrototypeOf(b,s.prototype),b}function S(f){if(s.isBuffer(f)){const a=P(f.length)|0,u=o(a);return u.length===0||f.copy(u,0,0,a),u}if(f.length!==void 0)return typeof f.length!="number"||At(f.length)?o(0):v(f);if(f.type==="Buffer"&&Array.isArray(f.data))return v(f.data)}function P(f){if(f>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return f|0}function I(f){return+f!=f&&(f=0),s.alloc(+f)}s.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==s.prototype},s.compare=function(a,u){if(st(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),st(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),!s.isBuffer(a)||!s.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;let b=a.length,A=u.length;for(let k=0,T=Math.min(b,A);k<T;++k)if(a[k]!==u[k]){b=a[k],A=u[k];break}return b<A?-1:A<b?1:0},s.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return s.alloc(0);let b;if(u===void 0)for(u=0,b=0;b<a.length;++b)u+=a[b].length;const A=s.allocUnsafe(u);let k=0;for(b=0;b<a.length;++b){let T=a[b];if(st(T,Uint8Array))k+T.length>A.length?(s.isBuffer(T)||(T=s.from(T)),T.copy(A,k)):Uint8Array.prototype.set.call(A,T,k);else if(s.isBuffer(T))T.copy(A,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=T.length}return A};function O(f,a){if(s.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||st(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const u=f.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&u===0)return 0;let A=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return St(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return ui(f).length;default:if(A)return b?-1:St(f).length;a=(""+a).toLowerCase(),A=!0}}s.byteLength=O;function L(f,a,u){let b=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,a>>>=0,u<=a))return"";for(f||(f="utf8");;)switch(f){case"hex":return Ve(this,a,u);case"utf8":case"utf-8":return Me(this,a,u);case"ascii":return ae(this,a,u);case"latin1":case"binary":return $e(this,a,u);case"base64":return Ne(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,a,u);default:if(b)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),b=!0}}s.prototype._isBuffer=!0;function U(f,a,u){const b=f[a];f[a]=f[u],f[u]=b}s.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<a;u+=2)U(this,u,u+1);return this},s.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<a;u+=4)U(this,u,u+3),U(this,u+1,u+2);return this},s.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<a;u+=8)U(this,u,u+7),U(this,u+1,u+6),U(this,u+2,u+5),U(this,u+3,u+4);return this},s.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?Me(this,0,a):L.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(a){if(!s.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:s.compare(this,a)===0},s.prototype.inspect=function(){let a="";const u=jr.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(a,u,b,A,k){if(st(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(u===void 0&&(u=0),b===void 0&&(b=a?a.length:0),A===void 0&&(A=0),k===void 0&&(k=this.length),u<0||b>a.length||A<0||k>this.length)throw new RangeError("out of range index");if(A>=k&&u>=b)return 0;if(A>=k)return-1;if(u>=b)return 1;if(u>>>=0,b>>>=0,A>>>=0,k>>>=0,this===a)return 0;let T=k-A,se=b-u;const Ce=Math.min(T,se),xe=this.slice(A,k),re=a.slice(u,b);for(let ge=0;ge<Ce;++ge)if(xe[ge]!==re[ge]){T=xe[ge],se=re[ge];break}return T<se?-1:se<T?1:0};function K(f,a,u,b,A){if(f.length===0)return-1;if(typeof u=="string"?(b=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,At(u)&&(u=A?0:f.length-1),u<0&&(u=f.length+u),u>=f.length){if(A)return-1;u=f.length-1}else if(u<0)if(A)u=0;else return-1;if(typeof a=="string"&&(a=s.from(a,b)),s.isBuffer(a))return a.length===0?-1:X(f,a,u,b,A);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(f,a,u):Uint8Array.prototype.lastIndexOf.call(f,a,u):X(f,[a],u,b,A);throw new TypeError("val must be string, number or Buffer")}function X(f,a,u,b,A){let k=1,T=f.length,se=a.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(f.length<2||a.length<2)return-1;k=2,T/=2,se/=2,u/=2}function Ce(re,ge){return k===1?re[ge]:re.readUInt16BE(ge*k)}let xe;if(A){let re=-1;for(xe=u;xe<T;xe++)if(Ce(f,xe)===Ce(a,re===-1?0:xe-re)){if(re===-1&&(re=xe),xe-re+1===se)return re*k}else re!==-1&&(xe-=xe-re),re=-1}else for(u+se>T&&(u=T-se),xe=u;xe>=0;xe--){let re=!0;for(let ge=0;ge<se;ge++)if(Ce(f,xe+ge)!==Ce(a,ge)){re=!1;break}if(re)return xe}return-1}s.prototype.includes=function(a,u,b){return this.indexOf(a,u,b)!==-1},s.prototype.indexOf=function(a,u,b){return K(this,a,u,b,!0)},s.prototype.lastIndexOf=function(a,u,b){return K(this,a,u,b,!1)};function te(f,a,u,b){u=Number(u)||0;const A=f.length-u;b?(b=Number(b),b>A&&(b=A)):b=A;const k=a.length;b>k/2&&(b=k/2);let T;for(T=0;T<b;++T){const se=parseInt(a.substr(T*2,2),16);if(At(se))return T;f[u+T]=se}return T}function ne(f,a,u,b){return $n(St(a,f.length-u),f,u,b)}function de(f,a,u,b){return $n(Yo(a),f,u,b)}function we(f,a,u,b){return $n(ui(a),f,u,b)}function ve(f,a,u,b){return $n(Zo(a,f.length-u),f,u,b)}s.prototype.write=function(a,u,b,A){if(u===void 0)A="utf8",b=this.length,u=0;else if(b===void 0&&typeof u=="string")A=u,b=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(b)?(b=b>>>0,A===void 0&&(A="utf8")):(A=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-u;if((b===void 0||b>k)&&(b=k),a.length>0&&(b<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let T=!1;for(;;)switch(A){case"hex":return te(this,a,u,b);case"utf8":case"utf-8":return ne(this,a,u,b);case"ascii":case"latin1":case"binary":return de(this,a,u,b);case"base64":return we(this,a,u,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,a,u,b);default:if(T)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),T=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ne(f,a,u){return a===0&&u===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(a,u))}function Me(f,a,u){u=Math.min(f.length,u);const b=[];let A=a;for(;A<u;){const k=f[A];let T=null,se=k>239?4:k>223?3:k>191?2:1;if(A+se<=u){let Ce,xe,re,ge;switch(se){case 1:k<128&&(T=k);break;case 2:Ce=f[A+1],(Ce&192)===128&&(ge=(k&31)<<6|Ce&63,ge>127&&(T=ge));break;case 3:Ce=f[A+1],xe=f[A+2],(Ce&192)===128&&(xe&192)===128&&(ge=(k&15)<<12|(Ce&63)<<6|xe&63,ge>2047&&(ge<55296||ge>57343)&&(T=ge));break;case 4:Ce=f[A+1],xe=f[A+2],re=f[A+3],(Ce&192)===128&&(xe&192)===128&&(re&192)===128&&(ge=(k&15)<<18|(Ce&63)<<12|(xe&63)<<6|re&63,ge>65535&&ge<1114112&&(T=ge))}}T===null?(T=65533,se=1):T>65535&&(T-=65536,b.push(T>>>10&1023|55296),T=56320|T&1023),b.push(T),A+=se}return oe(b)}const et=4096;function oe(f){const a=f.length;if(a<=et)return String.fromCharCode.apply(String,f);let u="",b=0;for(;b<a;)u+=String.fromCharCode.apply(String,f.slice(b,b+=et));return u}function ae(f,a,u){let b="";u=Math.min(f.length,u);for(let A=a;A<u;++A)b+=String.fromCharCode(f[A]&127);return b}function $e(f,a,u){let b="";u=Math.min(f.length,u);for(let A=a;A<u;++A)b+=String.fromCharCode(f[A]);return b}function Ve(f,a,u){const b=f.length;(!a||a<0)&&(a=0),(!u||u<0||u>b)&&(u=b);let A="";for(let k=a;k<u;++k)A+=Xi[f[k]];return A}function Be(f,a,u){const b=f.slice(a,u);let A="";for(let k=0;k<b.length-1;k+=2)A+=String.fromCharCode(b[k]+b[k+1]*256);return A}s.prototype.slice=function(a,u){const b=this.length;a=~~a,u=u===void 0?b:~~u,a<0?(a+=b,a<0&&(a=0)):a>b&&(a=b),u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),u<a&&(u=a);const A=this.subarray(a,u);return Object.setPrototypeOf(A,s.prototype),A};function pe(f,a,u){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+a>u)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=this[a],k=1,T=0;for(;++T<u&&(k*=256);)A+=this[a+T]*k;return A},s.prototype.readUintBE=s.prototype.readUIntBE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=this[a+--u],k=1;for(;u>0&&(k*=256);)A+=this[a+--u]*k;return A},s.prototype.readUint8=s.prototype.readUInt8=function(a,u){return a=a>>>0,u||pe(a,1,this.length),this[a]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(a,u){return a=a>>>0,u||pe(a,2,this.length),this[a]|this[a+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(a,u){return a=a>>>0,u||pe(a,2,this.length),this[a]<<8|this[a+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},s.prototype.readBigUInt64LE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,k=this[++a]+this[++a]*2**8+this[++a]*2**16+b*2**24;return BigInt(A)+(BigInt(k)<<BigInt(32))}),s.prototype.readBigUInt64BE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=u*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],k=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+b;return(BigInt(A)<<BigInt(32))+BigInt(k)}),s.prototype.readIntLE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=this[a],k=1,T=0;for(;++T<u&&(k*=256);)A+=this[a+T]*k;return k*=128,A>=k&&(A-=Math.pow(2,8*u)),A},s.prototype.readIntBE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=u,k=1,T=this[a+--A];for(;A>0&&(k*=256);)T+=this[a+--A]*k;return k*=128,T>=k&&(T-=Math.pow(2,8*u)),T},s.prototype.readInt8=function(a,u){return a=a>>>0,u||pe(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},s.prototype.readInt16LE=function(a,u){a=a>>>0,u||pe(a,2,this.length);const b=this[a]|this[a+1]<<8;return b&32768?b|4294901760:b},s.prototype.readInt16BE=function(a,u){a=a>>>0,u||pe(a,2,this.length);const b=this[a+1]|this[a]<<8;return b&32768?b|4294901760:b},s.prototype.readInt32LE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},s.prototype.readInt32BE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},s.prototype.readBigInt64LE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(b<<24);return(BigInt(A)<<BigInt(32))+BigInt(u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),s.prototype.readBigInt64BE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=(u<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(A)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+b)}),s.prototype.readFloatLE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),t.read(this,a,!0,23,4)},s.prototype.readFloatBE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),t.read(this,a,!1,23,4)},s.prototype.readDoubleLE=function(a,u){return a=a>>>0,u||pe(a,8,this.length),t.read(this,a,!0,52,8)},s.prototype.readDoubleBE=function(a,u){return a=a>>>0,u||pe(a,8,this.length),t.read(this,a,!1,52,8)};function Ee(f,a,u,b,A,k){if(!s.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>A||a<k)throw new RangeError('"value" argument is out of bounds');if(u+b>f.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(a,u,b,A){if(a=+a,u=u>>>0,b=b>>>0,!A){const se=Math.pow(2,8*b)-1;Ee(this,a,u,b,se,0)}let k=1,T=0;for(this[u]=a&255;++T<b&&(k*=256);)this[u+T]=a/k&255;return u+b},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(a,u,b,A){if(a=+a,u=u>>>0,b=b>>>0,!A){const se=Math.pow(2,8*b)-1;Ee(this,a,u,b,se,0)}let k=b-1,T=1;for(this[u+k]=a&255;--k>=0&&(T*=256);)this[u+k]=a/T&255;return u+b},s.prototype.writeUint8=s.prototype.writeUInt8=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,1,255,0),this[u]=a&255,u+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,65535,0),this[u]=a&255,this[u+1]=a>>>8,u+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=a&255,u+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=a&255,u+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4};function tt(f,a,u,b,A){An(a,b,A,f,u,7);let k=Number(a&BigInt(4294967295));f[u++]=k,k=k>>8,f[u++]=k,k=k>>8,f[u++]=k,k=k>>8,f[u++]=k;let T=Number(a>>BigInt(32)&BigInt(4294967295));return f[u++]=T,T=T>>8,f[u++]=T,T=T>>8,f[u++]=T,T=T>>8,f[u++]=T,u}function Mt(f,a,u,b,A){An(a,b,A,f,u,7);let k=Number(a&BigInt(4294967295));f[u+7]=k,k=k>>8,f[u+6]=k,k=k>>8,f[u+5]=k,k=k>>8,f[u+4]=k;let T=Number(a>>BigInt(32)&BigInt(4294967295));return f[u+3]=T,T=T>>8,f[u+2]=T,T=T>>8,f[u+1]=T,T=T>>8,f[u]=T,u+8}s.prototype.writeBigUInt64LE=lt(function(a,u=0){return tt(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=lt(function(a,u=0){return Mt(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(a,u,b,A){if(a=+a,u=u>>>0,!A){const Ce=Math.pow(2,8*b-1);Ee(this,a,u,b,Ce-1,-Ce)}let k=0,T=1,se=0;for(this[u]=a&255;++k<b&&(T*=256);)a<0&&se===0&&this[u+k-1]!==0&&(se=1),this[u+k]=(a/T>>0)-se&255;return u+b},s.prototype.writeIntBE=function(a,u,b,A){if(a=+a,u=u>>>0,!A){const Ce=Math.pow(2,8*b-1);Ee(this,a,u,b,Ce-1,-Ce)}let k=b-1,T=1,se=0;for(this[u+k]=a&255;--k>=0&&(T*=256);)a<0&&se===0&&this[u+k+1]!==0&&(se=1),this[u+k]=(a/T>>0)-se&255;return u+b},s.prototype.writeInt8=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=a&255,u+1},s.prototype.writeInt16LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,32767,-32768),this[u]=a&255,this[u+1]=a>>>8,u+2},s.prototype.writeInt16BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=a&255,u+2},s.prototype.writeInt32LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,2147483647,-2147483648),this[u]=a&255,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},s.prototype.writeInt32BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4},s.prototype.writeBigInt64LE=lt(function(a,u=0){return tt(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=lt(function(a,u=0){return Mt(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ct(f,a,u,b,A,k){if(u+b>f.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Tt(f,a,u,b,A){return a=+a,u=u>>>0,A||ct(f,a,u,4),t.write(f,a,u,b,23,4),u+4}s.prototype.writeFloatLE=function(a,u,b){return Tt(this,a,u,!0,b)},s.prototype.writeFloatBE=function(a,u,b){return Tt(this,a,u,!1,b)};function Dt(f,a,u,b,A){return a=+a,u=u>>>0,A||ct(f,a,u,8),t.write(f,a,u,b,52,8),u+8}s.prototype.writeDoubleLE=function(a,u,b){return Dt(this,a,u,!0,b)},s.prototype.writeDoubleBE=function(a,u,b){return Dt(this,a,u,!1,b)},s.prototype.copy=function(a,u,b,A){if(!s.isBuffer(a))throw new TypeError("argument should be a Buffer");if(b||(b=0),!A&&A!==0&&(A=this.length),u>=a.length&&(u=a.length),u||(u=0),A>0&&A<b&&(A=b),A===b||a.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),a.length-u<A-b&&(A=a.length-u+b);const k=A-b;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,b,A):Uint8Array.prototype.set.call(a,this.subarray(b,A),u),k},s.prototype.fill=function(a,u,b,A){if(typeof a=="string"){if(typeof u=="string"?(A=u,u=0,b=this.length):typeof b=="string"&&(A=b,b=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!s.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(a.length===1){const T=a.charCodeAt(0);(A==="utf8"&&T<128||A==="latin1")&&(a=T)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(u<0||this.length<u||this.length<b)throw new RangeError("Out of range index");if(b<=u)return this;u=u>>>0,b=b===void 0?this.length:b>>>0,a||(a=0);let k;if(typeof a=="number")for(k=u;k<b;++k)this[k]=a;else{const T=s.isBuffer(a)?a:s.from(a,A),se=T.length;if(se===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(k=0;k<b-u;++k)this[k+u]=T[k%se]}return this};const Je={};function Wt(f,a,u){Je[f]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Wt("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Wt("ERR_INVALID_ARG_TYPE",function(f,a){return`The "${f}" argument must be of type number. Received type ${typeof a}`},TypeError),Wt("ERR_OUT_OF_RANGE",function(f,a,u){let b=`The value of "${f}" is out of range.`,A=u;return Number.isInteger(u)&&Math.abs(u)>2**32?A=Gt(String(u)):typeof u=="bigint"&&(A=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(A=Gt(A)),A+="n"),b+=` It must be ${a}. Received ${A}`,b},RangeError);function Gt(f){let a="",u=f.length;const b=f[0]==="-"?1:0;for(;u>=b+4;u-=3)a=`_${f.slice(u-3,u)}${a}`;return`${f.slice(0,u)}${a}`}function ye(f,a,u){ot(a,"offset"),(f[a]===void 0||f[a+u]===void 0)&&Ae(a,f.length-(u+1))}function An(f,a,u,b,A,k){if(f>u||f<a){const T=typeof a=="bigint"?"n":"";let se;throw a===0||a===BigInt(0)?se=`>= 0${T} and < 2${T} ** ${(k+1)*8}${T}`:se=`>= -(2${T} ** ${(k+1)*8-1}${T}) and < 2 ** ${(k+1)*8-1}${T}`,new Je.ERR_OUT_OF_RANGE("value",se,f)}ye(b,A,k)}function ot(f,a){if(typeof f!="number")throw new Je.ERR_INVALID_ARG_TYPE(a,"number",f)}function Ae(f,a,u){throw Math.floor(f)!==f?(ot(f,u),new Je.ERR_OUT_OF_RANGE("offset","an integer",f)):a<0?new Je.ERR_BUFFER_OUT_OF_BOUNDS:new Je.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${a}`,f)}const Nt=/[^+/0-9A-Za-z-_]/g;function Pr(f){if(f=f.split("=")[0],f=f.trim().replace(Nt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function St(f,a){a=a||1/0;let u;const b=f.length;let A=null;const k=[];for(let T=0;T<b;++T){if(u=f.charCodeAt(T),u>55295&&u<57344){if(!A){if(u>56319){(a-=3)>-1&&k.push(239,191,189);continue}else if(T+1===b){(a-=3)>-1&&k.push(239,191,189);continue}A=u;continue}if(u<56320){(a-=3)>-1&&k.push(239,191,189),A=u;continue}u=(A-55296<<10|u-56320)+65536}else A&&(a-=3)>-1&&k.push(239,191,189);if(A=null,u<128){if((a-=1)<0)break;k.push(u)}else if(u<2048){if((a-=2)<0)break;k.push(u>>6|192,u&63|128)}else if(u<65536){if((a-=3)<0)break;k.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((a-=4)<0)break;k.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return k}function Yo(f){const a=[];for(let u=0;u<f.length;++u)a.push(f.charCodeAt(u)&255);return a}function Zo(f,a){let u,b,A;const k=[];for(let T=0;T<f.length&&!((a-=2)<0);++T)u=f.charCodeAt(T),b=u>>8,A=u%256,k.push(A),k.push(b);return k}function ui(f){return e.toByteArray(Pr(f))}function $n(f,a,u,b){let A;for(A=0;A<b&&!(A+u>=a.length||A>=f.length);++A)a[A+u]=f[A];return A}function st(f,a){return f instanceof a||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===a.name}function At(f){return f!==f}const Xi=function(){const f="0123456789abcdef",a=new Array(256);for(let u=0;u<16;++u){const b=u*16;for(let A=0;A<16;++A)a[b+A]=f[u]+f[A]}return a}();function lt(f){return typeof BigInt>"u"?Ji:f}function Ji(){throw new Error("BigInt not supported")}return jr}var ho,ih,ps,oh,jr,sh,Fr,O6=Wo({"node_modules/.pnpm/@jspm+core@2.0.1/node_modules/@jspm/core/nodelibs/browser/buffer.js"(){Wi(),Gi(),Ki(),Yi(),ho={},ih=!1,ps={},oh=!1,jr={},sh=!1,Fr=B6(),Fr.Buffer,Fr.SlowBuffer,Fr.INSPECT_MAX_BYTES,Fr.kMaxLength,Fr.Buffer,Fr.INSPECT_MAX_BYTES,Fr.kMaxLength}}),Ki=Wo({"node_modules/.pnpm/esbuild-plugin-polyfill-node@0.3.0_esbuild@0.23.0/node_modules/esbuild-plugin-polyfill-node/polyfills/buffer.js"(){O6()}}),so,sl,R6=Wo({"node_modules/.pnpm/@jspm+core@2.0.1/node_modules/@jspm/core/nodelibs/browser/process.js"(){Wi(),Gi(),Ki(),Yi(),so={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},so.now===void 0&&(sl=Date.now(),so.timing&&so.timing.navigationStart&&(sl=so.timing.navigationStart),so.now=()=>Date.now()-sl)}}),Yi=Wo({"node_modules/.pnpm/esbuild-plugin-polyfill-node@0.3.0_esbuild@0.23.0/node_modules/esbuild-plugin-polyfill-node/polyfills/process.js"(){R6()}}),M6=class{constructor(e){this.config=e,this.storage=D6()}get prefix(){return this.config.storagePrefix??""}get separator(){return this.config.storageSeparator??":"}set(e,t){if(this.storage)try{const n=this.key(e),r=typeof t!="string"?JSON.stringify(t):t;this.storage.setItem(n,r)}catch(n){console.warn(n)}}get(e,t){if(!this.storage)return null;try{const n=this.key(e),r=this.storage.getItem(n);return r===null?null:t(r)}catch(n){return console.warn(n),null}}remove(e){if(this.storage)try{const t=this.key(e);this.storage.removeItem(t)}catch(t){console.warn(t)}}update(e,t){const n=this.get(e,Gn),r=t(n);return this.set(e,r),r}updateEntity(e,t,n){const i={...this.get(e,Gn)??{},[t]:n};this.set(e,i)}key(e){return[this.prefix,e].join(this.separator)}};function D6(){return Tp(window.localStorage)?window.localStorage:Tp(window.sessionStorage)?window.sessionStorage:null}function Tp(e){if(window!=null&&window.localStorage)try{e.setItem("@__test__@","1");const t=window.localStorage.getItem("@__test__@");e.removeItem("@__test__@");const n=e.getItem("@__test__@");return t==="1"&&n===null}catch{return!1}return!1}function Gn(e){return JSON.parse(e)}var nt=new M6({storagePrefix:"one-inch",storageSeparator:":"});Wi();Gi();Ki();Yi();Wi();Gi();Ki();Yi();var Kc=class{constructor(e,t=!1){this.ttlMs=e,this.autoClean=t,this.cache=new Map,this.enabledAutoClean()}set(e,t){this.cache.set(e,{value:t,timestamp:Date.now()})}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.ttlMs?(this.cache.delete(e),null):t.value:null}has(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.ttlMs?(this.cache.delete(e),!1):!0:!1}delete(e){return this.cache.delete(e)}clear(){this.cache.clear(),this.autoCleanTimer&&clearInterval(this.autoCleanTimer)}size(){return 0}enabledAutoClean(){this.autoClean&&(this.autoCleanTimer=setInterval(()=>{for(const e of[...this.cache.keys()])this.get(e)},this.ttlMs))}};Wi();Gi();Ki();Yi();var og=class{constructor(e){this.bufferSize=e,this.cache=new Map,this.indexes=new Map,this.lastIndex=0}set(e,t){if(this.has(e))return;if(this.cache.size>=this.bufferSize){const r=Math.min(...this.indexes.keys()),i=this.indexes.get(r);this.indexes.delete(r),this.cache.delete(i);return}const n=this.lastIndex++;this.indexes.set(n,e),this.cache.set(e,t)}get(e){return this.cache.get(e)??null}has(e){return this.cache.has(e)}delete(e){return this.cache.delete(e)}clear(){this.cache.clear(),this.indexes.clear(),this.lastIndex=0}size(){return this.cache.size}};Wi();Gi();Ki();Yi();var Pd=class{constructor(e,t){this.storageKey=e,this.ttlDays=t,this.cache=new Map;const n=nt.get(this.storageKeyAndVersion,Gn);this.cache=new Map(n)}get storageKeyAndVersion(){return[this.storageKey,"v2"].join(":")}set(e,t){this.cache.set(e,{value:t,timestamp:Date.now()}),this.updatePersistence()}get(e){var t;return this.checkCacheData(e),((t=this.cache.get(e))==null?void 0:t.value)??null}has(e){return this.checkCacheData(e),this.cache.has(e)}delete(e){const t=this.cache.delete(e);return this.updatePersistence(),t}clear(){this.cache.clear(),this.updatePersistence()}size(){let e=!1;return this.cache.forEach((t,n)=>{this.checkCacheData(n,!0)&&!e&&(e=!0)}),e&&this.updatePersistence(),this.cache.size}checkCacheData(e,t){const n=this.cache.get(e);if(!n)return!1;let r=!1;return Date.now()-n.timestamp>this.ttlDays*864e5&&(this.cache.delete(e),r=!0,(t??!1)||this.updatePersistence()),r}updatePersistence(){nt.set(this.storageKeyAndVersion,Array.from(this.cache.entries()))}};Wi();Gi();Ki();Yi();var N6=1,hs;async function ao(e){if(hs)return Reflect.get(hs,"cache");const t=await me(()=>import("./import-wrapper-7PBGHSLX-Dafzz2ty.js"),[]).then(n=>n.Dexie);return hs=new t("one-inch-long-time-async-cache_"+e),hs.version(N6).stores({cache:["key","value","timestamp"].join(", ")}),Reflect.get(hs,"cache")}var F6=class{constructor(e,t){this.storageKey=e,this.ttlDays=t}async set(e,t){await(await ao(this.storageKey)).put({key:e.toLowerCase(),value:t,timestamp:Date.now()}),this.cleanOldRecords().catch(console.error)}async get(e){const t=e.toLowerCase(),r=await(await ao(this.storageKey)).filter(i=>Date.now()-i.timestamp<this.ttlDays*864e5&&i.key===t).first();return this.cleanOldRecords().catch(console.error),(r==null?void 0:r.value)??null}async has(e){return await this.get(e)!==null}async delete(e){try{return await(await ao(this.storageKey)).delete(e),this.cleanOldRecords().catch(console.error),!0}catch{return!1}}async clear(){(await ao(this.storageKey)).clear()}async size(){return await this.cleanOldRecords().catch(console.error),(await ao(this.storageKey)).count()}async cleanOldRecords(){await(await ao(this.storageKey)).where("timestamp").below(Date.now()-this.ttlDays*864e5).delete()}},R=(e=>(e[e.eth=1]="eth",e[e.bnb=56]="bnb",e[e.matic=137]="matic",e[e.op=10]="op",e[e.arbitrum=42161]="arbitrum",e[e.gnosis=100]="gnosis",e[e.avalanche=43114]="avalanche",e[e.fantom=250]="fantom",e[e.aurora=1313161554]="aurora",e[e.klaytn=8217]="klaytn",e[e.zkSyncEra=324]="zkSyncEra",e))(R||{}),L6={oneInchDevPortalHost:"https://jellyfish-app-8xwqz.ondigitalocean.app/",walletConnectProjectId:"2dd59e55b1b7bbfb98ddf9266f813b3b",baseHref:"",infuraApiKey:"",appVersion:"1.0.0-dev.30"};function Yc(e){return L6[e]}const j6={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},z6={block:ty({format(e){var n;return{transactions:(n=e.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const i=Fc(r);return i.typeHex==="0x7e"&&(i.isSystemTx=r.isSystemTx,i.mint=r.mint?ht(r.mint):void 0,i.sourceHash=r.sourceHash,i.type="deposit"),i}),stateRoot:e.stateRoot}}}),transaction:ey({format(e){const t={};return e.type==="0x7e"&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?ht(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:zy({format(e){return{l1GasPrice:e.l1GasPrice?ht(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?ht(e.l1GasUsed):null,l1Fee:e.l1Fee?ht(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null}}})};function U6(e,t){return H6(e)?q6(e):Hy(e,t)}const V6={transaction:U6};function q6(e){W6(e);const{sourceHash:t,data:n,from:r,gas:i,isSystemTx:o,mint:s,to:l,value:h}=e,p=[t,r,l??"0x",s?Se(s):"0x",h?Se(h):"0x",i?Se(i):"0x",o?"0x1":"0x",n??"0x"];return Ln(["0x7e",zi(p)])}function H6(e){return e.type==="deposit"||typeof e.sourceHash<"u"}function W6(e){const{from:t,to:n}=e;if(t&&!vt(t))throw new Pt({address:t});if(n&&!vt(n))throw new Pt({address:n})}const Bp={contracts:j6,formatters:z6,serializers:V6},G6=jn({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),K6=jn({id:1313161554,name:"Aurora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://mainnet.aurora.dev"]}},blockExplorers:{default:{name:"Aurorascan",url:"https://aurorascan.dev",apiUrl:"https://aurorascan.dev/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:62907816}}}),Y6=jn({id:43114,name:"Avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://snowtrace.io",apiUrl:"https://api.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),Z6=jn({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://rpc.ankr.com/bsc"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),X6=jn({id:250,name:"Fantom",nativeCurrency:{decimals:18,name:"Fantom",symbol:"FTM"},rpcUrls:{default:{http:["https://rpc.ankr.com/fantom"]}},blockExplorers:{default:{name:"FTMScan",url:"https://ftmscan.com",apiUrl:"https://api.ftmscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:33001987}}}),J6=jn({id:100,name:"Gnosis",nativeCurrency:{decimals:18,name:"Gnosis",symbol:"xDAI"},rpcUrls:{default:{http:["https://rpc.gnosischain.com"],webSocket:["wss://rpc.gnosischain.com/wss"]}},blockExplorers:{default:{name:"Gnosisscan",url:"https://gnosisscan.io",apiUrl:"https://api.gnosisscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:21022491}}}),Q6=jn({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}}),Id=50000n,Op=x6*32n,sg={block:ty({format(e){var n;const t=(n=e.transactions)==null?void 0:n.map(r=>{var o;if(typeof r=="string")return r;const i=(o=sg.transaction)==null?void 0:o.format(r);return i.typeHex==="0x71"?i.type="eip712":i.typeHex==="0xff"&&(i.type="priority"),i});return{l1BatchNumber:e.l1BatchNumber?ht(e.l1BatchNumber):null,l1BatchTimestamp:e.l1BatchTimestamp?ht(e.l1BatchTimestamp):null,transactions:t}}}),transaction:ey({format(e){const t={};return e.type==="0x71"?t.type="eip712":e.type==="0xff"&&(t.type="priority"),{...t,l1BatchNumber:e.l1BatchNumber?ht(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?ht(e.l1BatchTxIndex):null}}}),transactionReceipt:zy({format(e){return{l1BatchNumber:e.l1BatchNumber?ht(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?ht(e.l1BatchTxIndex):null,logs:e.logs.map(t=>({...vr(t),l1BatchNumber:t.l1BatchNumber?ht(t.l1BatchNumber):null,transactionLogIndex:Qn(t.transactionLogIndex),logType:t.logType})),l2ToL1Logs:e.l2ToL1Logs.map(t=>({blockNumber:ht(t.blockHash),blockHash:t.blockHash,l1BatchNumber:ht(t.l1BatchNumber),transactionIndex:ht(t.transactionIndex),shardId:ht(t.shardId),isService:t.isService,sender:t.sender,key:t.key,value:t.value,transactionHash:t.transactionHash,logIndex:ht(t.logIndex)}))}}}),transactionRequest:p_({exclude:["customSignature","factoryDeps","gasPerPubdata","paymaster","paymasterInput"],format(e){return e.gasPerPubdata||e.paymaster&&e.paymasterInput||e.factoryDeps||e.customSignature?{eip712Meta:{...e.gasPerPubdata?{gasPerPubdata:Se(e.gasPerPubdata)}:{gasPerPubdata:Se(Id)},...e.paymaster&&e.paymasterInput?{paymasterParams:{paymaster:e.paymaster,paymasterInput:Array.from(On(e.paymasterInput))}}:{},...e.factoryDeps?{factoryDeps:e.factoryDeps.map(t=>Array.from(On(t)))}:{},...e.customSignature?{customSignature:Array.from(On(e.customSignature))}:{}},type:"0x71"}:{}}})};class eA extends Q{constructor(){super(["Transaction is not an EIP712 transaction.","","Transaction must:",'  - include `type: "eip712"`',"  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`"].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidEip712TransactionError"})}}function ag(e){return!!(e.type==="eip712"||"customSignature"in e&&e.customSignature||"paymaster"in e&&e.paymaster||"paymasterInput"in e&&e.paymasterInput||"gasPerPubdata"in e&&typeof e.gasPerPubdata=="bigint"||"factoryDeps"in e&&e.factoryDeps)}function cg(e){const{chainId:t,to:n,from:r,paymaster:i,paymasterInput:o}=e;if(!ag(e))throw new eA;if(!t||t<=0)throw new jc({chainId:t});if(n&&!vt(n))throw new Pt({address:n});if(r&&!vt(r))throw new Pt({address:r});if(i&&!vt(i))throw new Pt({address:i});if(i&&!o)throw new Q("`paymasterInput` must be provided when `paymaster` is defined");if(!i&&o)throw new Q("`paymaster` must be provided when `paymasterInput` is defined")}function tA(e,t){return ag(e)?rA(e):Hy(e,t)}const nA={transaction:tA};function rA(e){const{chainId:t,gas:n,nonce:r,to:i,from:o,value:s,maxFeePerGas:l,maxPriorityFeePerGas:h,customSignature:p,factoryDeps:m,paymaster:g,paymasterInput:v,gasPerPubdata:_,data:E}=e;cg(e);const S=[r?Se(r):"0x",h?Se(h):"0x",l?Se(l):"0x",n?Se(n):"0x",i??"0x",s?Se(s):"0x",E??"0x0",Se(t),Se(""),Se(""),Se(t),o??"0x",Se(_||Id),m??[],p??"0x",g&&v?[g,v]:[]];return Ln(["0x71",zi(S)])}class iA extends Q{constructor({givenLength:t,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytecodeLengthExceedsMaxSizeError"})}}class oA extends Q{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytecodeLengthInWordsMustBeOddError"})}}class sA extends Q{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytecodeLengthMustBeDivisibleBy32Error"})}}function aA(e){const t=Bn(e);if(t.length%32!==0)throw new sA({givenLength:t.length});if(t.length>Op)throw new iA({givenLength:t.length,maxBytecodeSize:Op});const n=oy(t),r=Bn(n),i=t.length/32;if(i%2===0)throw new oA({givenLengthInWords:i});const o=Bn(i),s=Yn(o,{size:2}),l=new Uint8Array([1,0]);return r.set(l,0),r.set(s,2),r}const cA=e=>{cg(e);const t=uA(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};function uA(e){const{gas:t,nonce:n,to:r,from:i,value:o,maxFeePerGas:s,maxPriorityFeePerGas:l,factoryDeps:h,paymaster:p,paymasterInput:m,gasPerPubdata:g,data:v}=e;return{txType:113n,from:BigInt(i),to:r?BigInt(r):0n,gasLimit:t??0n,gasPerPubdataByteLimit:g??Id,maxFeePerGas:s??0n,maxPriorityFeePerGas:l??0n,paymaster:p?BigInt(p):0n,nonce:n?BigInt(n):0n,value:o??0n,data:v||"0x0",factoryDeps:(h==null?void 0:h.map(_=>Se(aA(_))))??[],paymasterInput:m||"0x"}}const lA={formatters:sg,serializers:nA,custom:{getEip712Domain:cA}},hA=jn({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://cloudflare-eth.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),ds=1,dA=jn({...Bp,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...Bp.contracts,disputeGameFactory:{[ds]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[ds]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[ds]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[ds]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:ds}),fA=jn({id:137,name:"Polygon",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),pA=jn({...lA,id:324,name:"zkSync Era",network:"zksync-era",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://mainnet.era.zksync.io"],webSocket:["wss://mainnet.era.zksync.io/ws"]}},blockExplorers:{default:{name:"Etherscan",url:"https://era.zksync.network/",apiUrl:"https://api-era.zksync.network/api"},native:{name:"zkSync Explorer",url:"https://explorer.zksync.io/"}},contracts:{multicall3:{address:"0xF9cda624FBC7e059355ce98a31693d299FACd963"}}});var al=new Map;function mA({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:i}){const o=async()=>{const m=h();s();const g=m.map(({args:v})=>v);g.length!==0&&e(g).then(v=>{var _;i&&Array.isArray(v)&&v.sort(i);for(let E=0;E<m.length;E++){const{pendingPromise:S}=m[E];(_=S.resolve)==null||_.call(S,[v[E],v])}}).catch(v=>{var _;for(let E=0;E<m.length;E++){const{pendingPromise:S}=m[E];(_=S.reject)==null||_.call(S,v)}})},s=()=>al.delete(t),l=()=>h().map(({args:m})=>m),h=()=>al.get(t)||[],p=m=>al.set(t,[...h(),m]);return{flush:s,async schedule(m){const g={},v=new Promise((S,P)=>{g.resolve=S,g.reject=P});return(n==null?void 0:n([...l(),m]))&&o(),h().length>0?(p({args:m,pendingPromise:g}),v):(p({args:m,pendingPromise:g}),setTimeout(o,r),v)}}}function yA(e,t={}){const{batch:n,fetchOptions:r,key:i="http",name:o="HTTP JSON-RPC",onFetchRequest:s,onFetchResponse:l,retryDelay:h}=t;return({chain:p,retryCount:m,timeout:g})=>{const{batchSize:v=1e3,wait:_=0}=typeof n=="object"?n:{},E=t.retryCount??m,S=g??t.timeout??1e4,P=e||(p==null?void 0:p.rpcUrls.default.http[0]);if(!P)throw new md;const I=_y(P,{fetchOptions:r,onRequest:s,onResponse:l,timeout:S});return ma({key:i,name:o,async request({method:O,params:L}){if(Rp[O])return Rp[O]();const U={method:O,params:L},{schedule:K}=mA({id:P,wait:_,shouldSplitBatch(de){return de.length>v},fn:de=>I.request({body:de}),sort:(de,we)=>de.id-we.id}),X=async de=>n?K(de):[await I.request({body:de})],[{error:te,result:ne}]=await X(U);if(te)throw new Mc({body:U,error:te,url:P});return ne},retryCount:E,retryDelay:h,timeout:S,type:"http"},{fetchOptions:r,url:P})}}var Rp={net_listening:()=>!0},ah={wait:50,batchSize:50};function gA(e){const t=vA[e],n=xA[e],r=[...n.map(o=>v6(o,{reconnect:{attempts:5,delay:5e3}})),...t.map(o=>mE(o,{batch:ah}))],i=bA(e);return i&&r.push(yA(i,{batch:ah,key:"infura"})),hE(r,{retryCount:10,retryDelay:3e4,rank:{interval:6e4*5,sampleCount:t.length+n.length,timeout:500,weights:{latency:.4,stability:.7}}})}function bA(e){const t=Yc("infuraApiKey"),n=wA[e];return!t||n===""?null:`${n}${t}`}var wA={[R.eth]:"https://mainnet.infura.io/v3/",[R.bnb]:"",[R.matic]:"https://polygon-mainnet.infura.io/v3/",[R.op]:"https://optimism-mainnet.infura.io/v3/",[R.arbitrum]:"https://arbitrum-mainnet.infura.io/v3/",[R.gnosis]:"",[R.avalanche]:"https://avalanche-mainnet.infura.io/v3/",[R.fantom]:"",[R.aurora]:"",[R.klaytn]:"",[R.zkSyncEra]:""},vA={[R.eth]:["https://ethereum-rpc.publicnode.com","https://ethereum.publicnode.com","https://rpc.mevblocker.io","https://eth.merkle.io","https://1rpc.io/eth","https://rpc.flashbots.net","https://eth-pokt.nodies.app","https://eth.meowrpc.com","https://eth.drpc.org","https://eth.llamarpc.com","https://eth-mainnet.public.blastapi.io","https://rpc.ankr.com/eth","https://cloudflare-eth.com","https://eth-mainnet.gateway.pokt.network/v1/5f3453978e354ab992c4da79","https://nodes.mewapi.io/rpc/eth","https://endpoints.omniatech.io/v1/eth/mainnet/public","https://ethereum-mainnet-rpc.allthatnode.com","https://ethereum-mainnet-archive.allthatnode.com","https://ethereum-mainnet-rpc-germany.allthatnode.com","https://ethereum-mainnet-archive-germany.allthatnode.com"],[R.bnb]:["https://bsc.publicnode.com","https://bsc-rpc.publicnode.com","https://endpoints.omniatech.io/v1/bsc/mainnet/public","https://bsc-pokt.nodies.app","https://bsc.meowrpc.com","https://bsc.drpc.org","https://1rpc.io/bnb"],[R.matic]:["https://polygon-bor-rpc.publicnode.com","https://polygon-rpc.com","https://polygon-pokt.nodies.app","https://polygon-heimdall-rpc.publicnode.com:443","https://endpoints.omniatech.io/v1/matic/mainnet/public","https://polygon-bor.publicnode.com","https://polygon.drpc.org","https://polygon.meowrpc.com","https://polygon.llamarpc.com"],[R.op]:["https://optimism-rpc.publicnode.com","https://optimism.llamarpc.com","https://optimism.publicnode.com","https://op-pokt.nodies.app","https://optimism.meowrpc.com","https://optimism.drpc.org","https://endpoints.omniatech.io/v1/op/mainnet/public"],[R.arbitrum]:["https://arbitrum-one.publicnode.com","https://arb-pokt.nodies.app","https://arbitrum.meowrpc.com","https://arbitrum.drpc.org","https://endpoints.omniatech.io/v1/arbitrum/one/public"],[R.gnosis]:["https://gnosis.publicnode.com","https://gnosis-rpc.publicnode.com","https://rpc.gnosischain.com","https://gnosis.drpc.org"],[R.avalanche]:["https://avalanche-c-chain.publicnode.com","https://1rpc.io/avax/c","https://endpoints.omniatech.io/v1/avax/mainnet/public","https://avax.meowrpc.com","https://avalanche.drpc.org"],[R.fantom]:["https://fantom.publicnode.com","https://fantom-pokt.nodies.app","https://1rpc.io/ftm","https://fantom.drpc.org"],[R.aurora]:["https://mainnet.aurora.dev","https://endpoints.omniatech.io/v1/aurora/mainnet/public","https://1rpc.io/aurora","https://aurora.drpc.org"],[R.klaytn]:["https://klaytn.drpc.org","https://rpc.ankr.com/klaytn","https://klaytn.blockpi.network/v1/rpc/public"],[R.zkSyncEra]:["https://mainnet.era.zksync.io","https://zksync-era.blockpi.network/v1/rpc/public","https://zksync.meowrpc.com","https://zksync.drpc.org"]},xA={[R.eth]:["wss://ethereum-rpc.publicnode.com","wss://ethereum.publicnode.com","wss://eth.drpc.org"],[R.bnb]:["wss://bsc.publicnode.com","wss://bsc-rpc.publicnode.com"],[R.matic]:["wss://polygon.drpc.org","wss://polygon-bor-rpc.publicnode.com","wss://polygon-bor.publicnode.com","wss://polygon-heimdall-rpc.publicnode.com:443/websocket"],[R.op]:["wss://optimism.publicnode.com"],[R.arbitrum]:["wss://arbitrum-one.publicnode.com"],[R.gnosis]:["wss://rpc.gnosischain.com/wss","wss://gnosis-rpc.publicnode.com","wss://gnosis.publicnode.com"],[R.avalanche]:["wss://avalanche-c-chain.publicnode.com"],[R.fantom]:["wss://gnosis.publicnode.com"],[R.aurora]:["wss://mainnet.aurora.dev"],[R.klaytn]:["wss://public-en-cypress.klaytn.net/ws"],[R.zkSyncEra]:["wss://mainnet.era.zksync.io/ws"]},_A={[R.eth]:hA,[R.bnb]:Z6,[R.matic]:fA,[R.op]:dA,[R.arbitrum]:G6,[R.gnosis]:J6,[R.avalanche]:Y6,[R.fantom]:X6,[R.aurora]:K6,[R.klaytn]:Q6,[R.zkSyncEra]:pA};function Fo(e){return _A[e]}var cl={[R.eth]:null,[R.bnb]:null,[R.matic]:null,[R.op]:null,[R.arbitrum]:null,[R.gnosis]:null,[R.avalanche]:null,[R.fantom]:null,[R.aurora]:null,[R.klaytn]:null,[R.zkSyncEra]:null};function EA(e){const t=Fo(e),n=gA(e);return a6({batch:{multicall:ah},chain:t,transport:n})}function pn(e){return cl[e]||(cl[e]=EA(e)),cl[e]}var SA={[R.eth]:!1,[R.bnb]:!1,[R.matic]:!1,[R.op]:!0,[R.arbitrum]:!0,[R.gnosis]:!1,[R.avalanche]:!1,[R.fantom]:!1,[R.aurora]:!1,[R.klaytn]:!1,[R.zkSyncEra]:!0};function ch(e){return SA[e]}var ug={[R.eth]:11e3,[R.bnb]:3e3,[R.matic]:3e3,[R.op]:3e3,[R.arbitrum]:3e3,[R.gnosis]:5e3,[R.avalanche]:3e3,[R.fantom]:3e3,[R.aurora]:3e3,[R.klaytn]:3e3,[R.zkSyncEra]:3e3},ul={[R.eth]:null,[R.bnb]:null,[R.matic]:null,[R.op]:null,[R.arbitrum]:null,[R.gnosis]:null,[R.avalanche]:null,[R.fantom]:null,[R.aurora]:null,[R.klaytn]:null,[R.zkSyncEra]:null},lg=Date.now();document.addEventListener("mousemove",()=>lg=Date.now());function AA(e){let t,n=!1;const r=()=>Date.now()-lg>60*1e3;return new xt(i=>{const o=s=>{i.next(s);const l=r();l&&!n?(n=!0,t==null||t.unsubscribe(),t=$A(e).subscribe(o),console.log("slow block loader")):!l&&n&&(n=!1,t==null||t.unsubscribe(),t=Mp(e).subscribe(o),console.log("regular block loader"))};return t=Mp(e).subscribe(o),()=>{t==null||t.unsubscribe()}})}function Mp(e){return new xt(t=>pn(e).watchBlocks({onBlock:r=>t.next(r)})).pipe(ft({bufferSize:1,refCount:!0}))}function $A(e){const t=pn(e);return tv(30*1e3).pipe(He(()=>t.getBlock()))}function kA(){const e=document.hasFocus(),t=document.visibilityState==="visible";return e&&t}function CA(){let e=!0;return gr(rt(window,"focus"),rt(window,"blur"),rt(document,"visibilitychange")).pipe(Ot(null),Pe(()=>e?(e=!1,!0):kA()),zt())}function ba(e){return ul[e]===null&&(ul[e]=CA().pipe(He(t=>t?AA(e):Yt()),Uo(ug[e]/2),ft({bufferSize:1,refCount:!0}))),ul[e]}var Td="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee";function _r(e){return er(Td,e)}var Zc=class{constructor(){this.timeCacheStorage={}}set(e,t,n){let r=this.timeCacheStorage[e];r||(r=new Kc(ug[e]),this.timeCacheStorage[e]=r),r.set(t,n)}get(e,t){const n=this.timeCacheStorage[e];return n?n.get(t):null}},PA=cn(["function balanceOf(address _owner) public view returns (uint256 balance)"]),Dp=new Zc;async function IA(e,t,n){const r=[t,n].join(":"),i=Dp.get(e,r);if(i!==null)return i;const o=pn(e);if(_r(n))return await o.getBalance({address:t});const s=await o.readContract({abi:PA,functionName:"balanceOf",args:[t],address:n});return Dp.set(e,r,s),s}async function TA(e,t,n){const r={};return await Promise.all(n.map(i=>IA(e,t,i).then(o=>r[i]=o.toString()))),r}var BA=cn(["function allowance(address owner, address spender) public view returns (uint256)"]),Np=new Zc;async function OA(e,t,n,r){const i=[e,t,n,r].join(":"),o=Np.get(e,i);if(o!==null)return o;const s=pn(e);if(_r(t))return E6;const l=await s.readContract({abi:BA,functionName:"allowance",args:[n,r],address:t});return Np.set(e,i,l),l}var RA="function permit(address owner, address spender, uint value, uint deadline, uint8 v, bytes32 r, bytes32 s) external",MA="function permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s) external",hg=()=>cn([RA,MA]),DA=()=>cn(["function nonces(address owner) external view returns (uint)","function nonce(address owner) external view returns (uint)","function getNonce(address owner) external view returns (uint)","function _nonces(address owner) external view returns (uint)"]),NA=cn(["function DOMAIN_SEPARATOR() external view returns (bytes32)"]);cn(["function version() view returns (string)"]);cn(["function name() view returns (string)"]);var FA=()=>Hi(hg()[0]),LA=()=>Hi(hg()[0]),jA=()=>Hi(NA[0]),zA=()=>DA().map(e=>Hi(e)),Fp=new og(5);async function UA(e,t){const n=[e,t].join(":"),r=Fp.get(n);if(r)return r;const o=await pn(e).getBytecode({address:t});if(!o)throw new Error(`Contract not found: ${t}`);return Fp.set(n,o),o}function VA(e){return e.includes(jA().replace("0x","").toLowerCase())}function qA(e){return zA().some(t=>e.includes(t.replace("0x","").toLowerCase()))}function HA(e){const t=FA().replace("0x","").toLowerCase();return e.includes(t)||WA(e)}function WA(e){const t=LA().replace("0x","").toLowerCase();return e.includes(t)}async function GA(e,t){try{const r=(await UA(e,t)).toLowerCase();let i=!0;return i&&(i=HA(r)),i&&(i=VA(r)),i&&(i=qA(r)),i}catch{return!1}}function dg(e){return R[e]!==void 0}function fg(e){if(!dg(e))throw new Error(`chain ${e} not supported`)}function ms(e){return fg(e),e===R.zkSyncEra?"0x6fd4383cb451173d5f9304f041c7bcbf27d561ff":"0x111111125421ca6dc452d289314280a0f8842a65"}function pg(e){return fg(e),e===R.zkSyncEra?"0x0000000000225e31D15943971F47aD3022F714Fa":"0x000000000022D473030F116dDEE9F6B43aC78BA3"}var mg=new F6("permit2",29),KA={[R.eth]:!1,[R.bnb]:!1,[R.matic]:!1,[R.op]:!1,[R.arbitrum]:!1,[R.gnosis]:!1,[R.avalanche]:!1,[R.fantom]:!1,[R.aurora]:!1,[R.klaytn]:!1,[R.zkSyncEra]:!0},yg=()=>me(()=>import("./permit2_abi-TSO4Q6OK-5IYTefWS.js"),[]).then(e=>e.default);function Bd(e){return KA[e]??!1}async function YA(e,t,n,r){if(!Bd(e))throw new Error(`chain ${e} not supported Permit2`);const{nonce:i}=await ZA(e,t,n,r),o={details:{token:t,amount:_6,expiration:Number(No),nonce:i},spender:r,sigDeadline:Number(No)};return{domain:{chainId:e,name:"Permit2",verifyingContract:pg(e)},account:n,primaryType:"PermitSingle",types:s$,message:o}}async function ZA(e,t,n,r){if(!Bd(e))throw new Error(`chain ${e} not supported Permit2`);const o=await pn(e).readContract({address:pg(e),abi:await yg(),functionName:"allowance",args:[t,n,r]}),[s,l,h]=o;return{amount:s,expiration:l,nonce:h}}async function XA(e,t,n,r,i,o){const s=[e,t,n,r].join(":");await mg.set(s,{permitSingle:o,signature:i})}async function uh(e,t,n,r){const i=[e,t,n,r].join(":");return await mg.get(i)}async function JA(e,t,n,r){return await uh(e,t,n,r)!==null}async function QA(e,t,n,r){const i=S6(n),o=Sr({abi:await yg(),functionName:"permit",args:[t,r,`${i.r}${gg(e$(i.s,i.v===27n?0:1))}`]}),s=t$(o),l=r.details.token,h=r.spender;return r$(n$(s),l,t,h)}function e$(e,t){const n=Bn(e);return t===1&&(n[0]|=128),Se(n)}function t$(e){const t="0x";return t+e.substring(t.length+8)}function gg(e){const t=e.toString();return t.startsWith("0x")?t.substring(2):t}function n$(e){if(e.length!==706)throw new Error("");const[t,n,r,i,o,s,l,h]=ca([{name:"owner",type:"address"},{name:"token",type:"address"},{name:"amount",type:"uint160"},{name:"expiration",type:"uint48"},{name:"nonce",type:"uint48"},{name:"spender",type:"address"},{name:"sigDeadline",type:"uint256"},{name:"signature",type:"bytes"}],e);return`0x${[r.toString(16).padStart(40,"0"),i.toString()===No.toString()?"00000000":(BigInt(i)+1n).toString(16).padStart(8,"0"),o.toString(16).padStart(8,"0"),l.toString()===No.toString()?"00000000":(l+1n).toString(16).padStart(8,"0"),BigInt(h).toString(16).padStart(128,"0")].join("")}`}function r$(e,t,n,r){if(e.length!==194)throw new Error("");const i={amount:BigInt(e.slice(0,42)),expiration:+("0x"+e.slice(42,50)),nonce:+("0x"+e.slice(50,58)),sigDeadline:BigInt("0x"+e.slice(58,66)),r:"0x"+e.slice(66,130),vs:"0x"+e.slice(130,194)};return qi([{name:"owner",type:"address"},{name:"token",type:"address"},{name:"amount",type:"uint160"},{name:"expiration",type:"uint48"},{name:"nonce",type:"uint48"},{name:"spender",type:"address"},{name:"sigDeadline",type:"uint256"},{name:"signature",type:"bytes"}],[n,t,i.amount,i.expiration===0?Number(No):i.expiration-1,i.nonce,r,i.sigDeadline===0n?No:i.sigDeadline-1n,i.r+gg(i.vs)])}var i$=[{name:"token",type:"address"},{name:"amount",type:"uint160"},{name:"expiration",type:"uint48"},{name:"nonce",type:"uint48"}],o$=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],s$={PermitSingle:[{name:"details",type:"PermitDetails"},{name:"spender",type:"address"},{name:"sigDeadline",type:"uint256"}],PermitDetails:i$,EIP712Domain:o$},bg={[R.eth]:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",[R.bnb]:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",[R.matic]:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270",[R.op]:"0x4200000000000000000000000000000000000006",[R.arbitrum]:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",[R.gnosis]:"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",[R.avalanche]:"0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7",[R.fantom]:"0x21be370d5312f44cb42ce377bc9b8a0cef1a4c83",[R.aurora]:"0xc9bdeed33cd01541e1eed10f90519d2c06fe3feb",[R.klaytn]:"0xe4f05a66ec68b54a58b17c22107b02e0232cc817",[R.zkSyncEra]:"0x5aea5775959fbc2557cc8789bc1bf90a239d9a91"},a$=cn(["function deposit() public payable"]);function c$(e){return bg[e]}function Js(e){const t=Fo(e);return{chainId:e,symbol:`W${t.nativeCurrency.symbol}`,name:`W${t.nativeCurrency.symbol}`,decimals:t.nativeCurrency.decimals,address:bg[e],isInternalWrapToken:!0}}function wg(e){return e.isInternalWrapToken?e.symbol.slice(1):e.symbol}async function u$(e,t){const n=pn(e),r=c$(e);return await n.estimateContractGas({abi:a$,address:r,value:t,functionName:"deposit"})}var Rn=class{constructor(){throw new Error("BigMath does not support instance creation. Use static methods: div, mul, add, sub, avr, pow, min, max.")}static from(e,t){return BigInt(e*10**t)}static div(e,t,n,r,i=r){if(t===0n)throw new Error("Division by zero.");if(e===0n)return 0n;const o=BigInt(10)**BigInt(Math.max(n,r));e=e*(o/BigInt(10)**BigInt(n)),t=t*(o/BigInt(10)**BigInt(r));const s=BigInt(10)**BigInt(i);return e=e*s,e/t}static mul(e,t,n,r,i=r){if(e===0n||t===0n)return 0n;const o=e*t,l=10n**BigInt(n+r),h=10n**BigInt(i);return o*h/l}static add(e,t,n,r,i=r){const o=Math.max(n,r,i);e=e*BigInt(10)**BigInt(o-n),t=t*BigInt(10)**BigInt(o-r);const s=e+t;return i<o?s/BigInt(10)**BigInt(o-i):s}static sub(e,t,n,r,i=r){const o=Math.max(n,r,i);e=e*BigInt(10)**BigInt(o-n),t=t*BigInt(10)**BigInt(o-r);const s=e-t;return i<o?s/BigInt(10)**BigInt(o-i):s}static avr(e,t,n=t){if(e.length===0)return 0n;const r=BigInt(10)**BigInt(n);return e.map(s=>s*r/BigInt(10)**BigInt(t)).reduce((s,l)=>s+l,BigInt(0))/BigInt(e.length)}static pow(e,t,n,r=n){if(t<0)throw new Error("Negative exponents are not supported.");if(t===0)return BigInt(10)**BigInt(r);const i=BigInt(10)**BigInt(n);let s=(e*i)**BigInt(t);const l=BigInt(10)**BigInt(t*n);if(s=s/l,r!==n){const h=BigInt(10)**BigInt(r-n);s=s*h}return s}static min(...e){let t=e[0];for(const n of e)n<t&&(t=n);return t}static max(...e){let t=e[0];for(const n of e)n>t&&(t=n);return t}static calculatePercentage(e,t){if(t<0||t>100)throw new Error("Percentage must be a number between 0 and 100");const n=t/100;return e*BigInt(n*1e32)/BigInt(1e32)}};function Sn(e){const t=new WeakMap,n=r=>{let i=t.get(r);return i||(i=new Map,t.set(r,i)),i};return function(r,i,o){const s=o.value;return o.value=function(...l){const h=n(this),p=e?e(this,...l):JSON.stringify(l,l$);if(h.has(p))return h.get(p);const m=s.apply(this,l).finally(()=>h.delete(p));return h.set(p,m),m},o}}function l$(e,t){return typeof t=="bigint"?t.toString():t}var Lp={},h$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Lp<"u"?Lp:typeof self<"u"?self:{};function d$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var vg={exports:{}};(function(e,t){var n={};(function(r,i){e.exports=i()})(h$,function(){var r=function(c,d){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(y[x]=w[x])})(c,d)},i=function(){return(i=Object.assign||function(c){for(var d,y=1,w=arguments.length;y<w;y++)for(var x in d=arguments[y])Object.prototype.hasOwnProperty.call(d,x)&&(c[x]=d[x]);return c}).apply(this,arguments)};function o(c,d,y){for(var w,x=0,$=d.length;x<$;x++)!w&&x in d||((w=w||Array.prototype.slice.call(d,0,x))[x]=d[x]);return c.concat(w||Array.prototype.slice.call(d))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:n,l=Object.keys,h=Array.isArray;function p(c,d){return typeof d!="object"||l(d).forEach(function(y){c[y]=d[y]}),c}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var m=Object.getPrototypeOf,g={}.hasOwnProperty;function v(c,d){return g.call(c,d)}function _(c,d){typeof d=="function"&&(d=d(m(c))),(typeof Reflect>"u"?l:Reflect.ownKeys)(d).forEach(function(y){S(c,y,d[y])})}var E=Object.defineProperty;function S(c,d,y,w){E(c,d,p(y&&v(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},w))}function P(c){return{from:function(d){return c.prototype=Object.create(d.prototype),S(c.prototype,"constructor",c),{extend:_.bind(null,c.prototype)}}}}var I=Object.getOwnPropertyDescriptor,O=[].slice;function L(c,d,y){return O.call(c,d,y)}function U(c,d){return d(c)}function K(c){if(!c)throw new Error("Assertion Failed")}function X(c){s.setImmediate?setImmediate(c):setTimeout(c,0)}function te(c,d){if(typeof d=="string"&&v(c,d))return c[d];if(!d)return c;if(typeof d!="string"){for(var y=[],w=0,x=d.length;w<x;++w){var $=te(c,d[w]);y.push($)}return y}var C=d.indexOf(".");if(C!==-1){var B=c[d.substr(0,C)];return B==null?void 0:te(B,d.substr(C+1))}}function ne(c,d,y){if(c&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(c)))if(typeof d!="string"&&"length"in d){K(typeof y!="string"&&"length"in y);for(var w=0,x=d.length;w<x;++w)ne(c,d[w],y[w])}else{var $,C,B=d.indexOf(".");B!==-1?($=d.substr(0,B),(C=d.substr(B+1))===""?y===void 0?h(c)&&!isNaN(parseInt($))?c.splice($,1):delete c[$]:c[$]=y:ne(B=!(B=c[$])||!v(c,$)?c[$]={}:B,C,y)):y===void 0?h(c)&&!isNaN(parseInt(d))?c.splice(d,1):delete c[d]:c[d]=y}}function de(c){var d,y={};for(d in c)v(c,d)&&(y[d]=c[d]);return y}var we=[].concat;function ve(c){return we.apply([],c)}var or="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ve([8,16,32,64].map(function(c){return["Int","Uint","Float"].map(function(d){return d+c+"Array"})}))).filter(function(c){return s[c]}),Ne=new Set(or.map(function(c){return s[c]})),Me=null;function et(c){return Me=new WeakMap,c=function d(y){if(!y||typeof y!="object")return y;var w=Me.get(y);if(w)return w;if(h(y)){w=[],Me.set(y,w);for(var x=0,$=y.length;x<$;++x)w.push(d(y[x]))}else if(Ne.has(y.constructor))w=y;else{var C,B=m(y);for(C in w=B===Object.prototype?{}:Object.create(B),Me.set(y,w),y)v(y,C)&&(w[C]=d(y[C]))}return w}(c),Me=null,c}var oe={}.toString;function ae(c){return oe.call(c).slice(8,-1)}var $e=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ve=typeof $e=="symbol"?function(c){var d;return c!=null&&(d=c[$e])&&d.apply(c)}:function(){return null};function Be(c,d){return d=c.indexOf(d),0<=d&&c.splice(d,1),0<=d}var pe={};function Ee(c){var d,y,w,x;if(arguments.length===1){if(h(c))return c.slice();if(this===pe&&typeof c=="string")return[c];if(x=Ve(c)){for(y=[];!(w=x.next()).done;)y.push(w.value);return y}if(c==null)return[c];if(typeof(d=c.length)!="number")return[c];for(y=new Array(d);d--;)y[d]=c[d];return y}for(d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];return y}var tt=typeof Symbol<"u"?function(c){return c[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},f=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],yn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(f),Mt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ct(c,d){this.name=c,this.message=d}function Tt(c,d){return c+". Errors: "+Object.keys(d).map(function(y){return d[y].toString()}).filter(function(y,w,x){return x.indexOf(y)===w}).join(`
`)}function Dt(c,d,y,w){this.failures=d,this.failedKeys=w,this.successCount=y,this.message=Tt(c,d)}function Je(c,d){this.name="BulkError",this.failures=Object.keys(d).map(function(y){return d[y]}),this.failuresByPos=d,this.message=Tt(c,this.failures)}P(ct).from(Error).extend({toString:function(){return this.name+": "+this.message}}),P(Dt).from(ct),P(Je).from(ct);var Wt=yn.reduce(function(c,d){return c[d]=d+"Error",c},{}),Gt=ct,ye=yn.reduce(function(c,d){var y=d+"Error";function w(x,$){this.name=y,x?typeof x=="string"?(this.message="".concat(x).concat($?`
 `+$:""),this.inner=$||null):typeof x=="object"&&(this.message="".concat(x.name," ").concat(x.message),this.inner=x):(this.message=Mt[d]||y,this.inner=null)}return P(w).from(Gt),c[d]=w,c},{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var An=f.reduce(function(c,d){return c[d+"Error"]=ye[d],c},{}),ot=yn.reduce(function(c,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(c[d+"Error"]=ye[d]),c},{});function Ae(){}function Nt(c){return c}function Pr(c,d){return c==null||c===Nt?d:function(y){return d(c(y))}}function St(c,d){return function(){c.apply(this,arguments),d.apply(this,arguments)}}function Yo(c,d){return c===Ae?d:function(){var y=c.apply(this,arguments);y!==void 0&&(arguments[0]=y);var w=this.onsuccess,x=this.onerror;this.onsuccess=null,this.onerror=null;var $=d.apply(this,arguments);return w&&(this.onsuccess=this.onsuccess?St(w,this.onsuccess):w),x&&(this.onerror=this.onerror?St(x,this.onerror):x),$!==void 0?$:y}}function Zo(c,d){return c===Ae?d:function(){c.apply(this,arguments);var y=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?St(y,this.onsuccess):y),w&&(this.onerror=this.onerror?St(w,this.onerror):w)}}function ui(c,d){return c===Ae?d:function(y){var w=c.apply(this,arguments);p(y,w);var x=this.onsuccess,$=this.onerror;return this.onsuccess=null,this.onerror=null,y=d.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?St(x,this.onsuccess):x),$&&(this.onerror=this.onerror?St($,this.onerror):$),w===void 0?y===void 0?void 0:y:p(w,y)}}function $n(c,d){return c===Ae?d:function(){return d.apply(this,arguments)!==!1&&c.apply(this,arguments)}}function st(c,d){return c===Ae?d:function(){var y=c.apply(this,arguments);if(y&&typeof y.then=="function"){for(var w=this,x=arguments.length,$=new Array(x);x--;)$[x]=arguments[x];return y.then(function(){return d.apply(w,$)})}return d.apply(this,arguments)}}ot.ModifyError=Dt,ot.DexieError=ct,ot.BulkError=Je;var At=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Xi(c){At=c}var lt={},Ji=100,or=typeof Promise>"u"?[]:function(){var c=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[c,m(c),c];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,m(d),c]}(),f=or[0],yn=or[1],or=or[2],yn=yn&&yn.then,a=f&&f.constructor,u=!!or,b=function(c,d){ge.push([c,d]),k&&(queueMicrotask(sb),k=!1)},A=!0,k=!0,T=[],se=[],Ce=Nt,xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ae,pgp:!1,env:{},finalize:Ae},re=xe,ge=[],li=0,Aa=[];function fe(c){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=re;if(typeof c!="function"){if(c!==lt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&iu(this,this._value))}this._state=null,this._value=null,++d.ref,function y(w,x){try{x(function($){if(w._state===null){if($===w)throw new TypeError("A promise cannot be resolved with itself.");var C=w._lib&&Qi();$&&typeof $.then=="function"?y(w,function(B,F){$ instanceof fe?$._then(B,F):$.then(B,F)}):(w._state=!0,w._value=$,Xd(w)),C&&eo()}},iu.bind(null,w))}catch($){iu(w,$)}}(this,c)}var ru={get:function(){var c=re,d=Pa;function y(w,x){var $=this,C=!c.global&&(c!==re||d!==Pa),B=C&&!Tr(),F=new fe(function(D,V){ou($,new Zd(Qd(w,c,C,B),Qd(x,c,C,B),D,V,c))});return this._consoleTask&&(F._consoleTask=this._consoleTask),F}return y.prototype=lt,y},set:function(c){S(this,"then",c&&c.prototype===lt?ru:{get:function(){return c},set:ru.set})}};function Zd(c,d,y,w,x){this.onFulfilled=typeof c=="function"?c:null,this.onRejected=typeof d=="function"?d:null,this.resolve=y,this.reject=w,this.psd=x}function iu(c,d){var y,w;se.push(d),c._state===null&&(y=c._lib&&Qi(),d=Ce(d),c._state=!1,c._value=d,w=c,T.some(function(x){return x._value===w._value})||T.push(w),Xd(c),y&&eo())}function Xd(c){var d=c._listeners;c._listeners=[];for(var y=0,w=d.length;y<w;++y)ou(c,d[y]);var x=c._PSD;--x.ref||x.finalize(),li===0&&(++li,b(function(){--li==0&&su()},[]))}function ou(c,d){if(c._state!==null){var y=c._state?d.onFulfilled:d.onRejected;if(y===null)return(c._state?d.resolve:d.reject)(c._value);++d.psd.ref,++li,b(ob,[y,c,d])}else c._listeners.push(d)}function ob(c,d,y){try{var w,x=d._value;!d._state&&se.length&&(se=[]),w=At&&d._consoleTask?d._consoleTask.run(function(){return c(x)}):c(x),d._state||se.indexOf(x)!==-1||function($){for(var C=T.length;C;)if(T[--C]._value===$._value)return T.splice(C,1)}(d),y.resolve(w)}catch($){y.reject($)}finally{--li==0&&su(),--y.psd.ref||y.psd.finalize()}}function sb(){hi(xe,function(){Qi()&&eo()})}function Qi(){var c=A;return k=A=!1,c}function eo(){var c,d,y;do for(;0<ge.length;)for(c=ge,ge=[],y=c.length,d=0;d<y;++d){var w=c[d];w[0].apply(null,w[1])}while(0<ge.length);k=A=!0}function su(){var c=T;T=[],c.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)});for(var d=Aa.slice(0),y=d.length;y;)d[--y]()}function $a(c){return new fe(lt,!1,c)}function ut(c,d){var y=re;return function(){var w=Qi(),x=re;try{return Br(y,!0),c.apply(this,arguments)}catch($){d&&d($)}finally{Br(x,!1),w&&eo()}}}_(fe.prototype,{then:ru,_then:function(c,d){ou(this,new Zd(null,null,c,d,re))},catch:function(c){if(arguments.length===1)return this.then(null,c);var d=c,y=arguments[1];return typeof d=="function"?this.then(null,function(w){return(w instanceof d?y:$a)(w)}):this.then(null,function(w){return(w&&w.name===d?y:$a)(w)})},finally:function(c){return this.then(function(d){return fe.resolve(c()).then(function(){return d})},function(d){return fe.resolve(c()).then(function(){return $a(d)})})},timeout:function(c,d){var y=this;return c<1/0?new fe(function(w,x){var $=setTimeout(function(){return x(new ye.Timeout(d))},c);y.then(w,x).finally(clearTimeout.bind(null,$))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),xe.env=Jd(),_(fe,{all:function(){var c=Ee.apply(null,arguments).map(Ia);return new fe(function(d,y){c.length===0&&d([]);var w=c.length;c.forEach(function(x,$){return fe.resolve(x).then(function(C){c[$]=C,--w||d(c)},y)})})},resolve:function(c){return c instanceof fe?c:c&&typeof c.then=="function"?new fe(function(d,y){c.then(d,y)}):new fe(lt,!0,c)},reject:$a,race:function(){var c=Ee.apply(null,arguments).map(Ia);return new fe(function(d,y){c.map(function(w){return fe.resolve(w).then(d,y)})})},PSD:{get:function(){return re},set:function(c){return re=c}},totalEchoes:{get:function(){return Pa}},newPSD:Ir,usePSD:hi,scheduler:{get:function(){return b},set:function(c){b=c}},rejectionMapper:{get:function(){return Ce},set:function(c){Ce=c}},follow:function(c,d){return new fe(function(y,w){return Ir(function(x,$){var C=re;C.unhandleds=[],C.onunhandled=$,C.finalize=St(function(){var B,F=this;B=function(){F.unhandleds.length===0?x():$(F.unhandleds[0])},Aa.push(function D(){B(),Aa.splice(Aa.indexOf(D),1)}),++li,b(function(){--li==0&&su()},[])},C.finalize),c()},d,y,w)})}}),a&&(a.allSettled&&S(fe,"allSettled",function(){var c=Ee.apply(null,arguments).map(Ia);return new fe(function(d){c.length===0&&d([]);var y=c.length,w=new Array(y);c.forEach(function(x,$){return fe.resolve(x).then(function(C){return w[$]={status:"fulfilled",value:C}},function(C){return w[$]={status:"rejected",reason:C}}).then(function(){return--y||d(w)})})})}),a.any&&typeof AggregateError<"u"&&S(fe,"any",function(){var c=Ee.apply(null,arguments).map(Ia);return new fe(function(d,y){c.length===0&&y(new AggregateError([]));var w=c.length,x=new Array(w);c.forEach(function($,C){return fe.resolve($).then(function(B){return d(B)},function(B){x[C]=B,--w||y(new AggregateError(x))})})})}));var $t={awaits:0,echoes:0,id:0},ab=0,ka=[],Ca=0,Pa=0,cb=0;function Ir(c,d,y,w){var x=re,$=Object.create(x);return $.parent=x,$.ref=0,$.global=!1,$.id=++cb,xe.env,$.env=u?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject}:{},d&&p($,d),++x.ref,$.finalize=function(){--this.parent.ref||this.parent.finalize()},w=hi($,c,y,w),$.ref===0&&$.finalize(),w}function to(){return $t.id||($t.id=++ab),++$t.awaits,$t.echoes+=Ji,$t.id}function Tr(){return!!$t.awaits&&(--$t.awaits==0&&($t.id=0),$t.echoes=$t.awaits*Ji,!0)}function Ia(c){return $t.echoes&&c&&c.constructor===a?(to(),c.then(function(d){return Tr(),d},function(d){return Tr(),yt(d)})):c}function ub(){var c=ka[ka.length-1];ka.pop(),Br(c,!1)}function Br(c,d){var y,w=re;(d?!$t.echoes||Ca++&&c===re:!Ca||--Ca&&c===re)||queueMicrotask(d?(function(x){++Pa,$t.echoes&&--$t.echoes!=0||($t.echoes=$t.awaits=$t.id=0),ka.push(re),Br(x,!0)}).bind(null,c):ub),c!==re&&(re=c,w===xe&&(xe.env=Jd()),u&&(y=xe.env.Promise,d=c.env,(w.global||c.global)&&(Object.defineProperty(s,"Promise",d.PromiseProp),y.all=d.all,y.race=d.race,y.resolve=d.resolve,y.reject=d.reject,d.allSettled&&(y.allSettled=d.allSettled),d.any&&(y.any=d.any))))}function Jd(){var c=s.Promise;return u?{Promise:c,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:c.all,race:c.race,allSettled:c.allSettled,any:c.any,resolve:c.resolve,reject:c.reject}:{}}function hi(c,d,y,w,x){var $=re;try{return Br(c,!0),d(y,w,x)}finally{Br($,!1)}}function Qd(c,d,y,w){return typeof c!="function"?c:function(){var x=re;y&&to(),Br(d,!0);try{return c.apply(this,arguments)}finally{Br(x,!1),w&&queueMicrotask(Tr)}}}function au(c){Promise===a&&$t.echoes===0?Ca===0?c():enqueueNativeMicroTask(c):setTimeout(c,0)}(""+yn).indexOf("[native code]")===-1&&(to=Tr=Ae);var yt=fe.reject,di="",ir="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ef="String expected.",no=[],Ta="__dbnames",cu="readonly",uu="readwrite";function fi(c,d){return c?d?function(){return c.apply(this,arguments)&&d.apply(this,arguments)}:c:d}var tf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ba(c){return typeof c!="string"||/\./.test(c)?function(d){return d}:function(d){return d[c]===void 0&&c in d&&delete(d=et(d))[c],d}}function nf(){throw ye.Type()}function Ye(c,d){try{var y=rf(c),w=rf(d);if(y!==w)return y==="Array"?1:w==="Array"?-1:y==="binary"?1:w==="binary"?-1:y==="string"?1:w==="string"?-1:y==="Date"?1:w!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return d<c?1:c<d?-1:0;case"binary":return function(x,$){for(var C=x.length,B=$.length,F=C<B?C:B,D=0;D<F;++D)if(x[D]!==$[D])return x[D]<$[D]?-1:1;return C===B?0:C<B?-1:1}(of(c),of(d));case"Array":return function(x,$){for(var C=x.length,B=$.length,F=C<B?C:B,D=0;D<F;++D){var V=Ye(x[D],$[D]);if(V!==0)return V}return C===B?0:C<B?-1:1}(c,d)}}catch{}return NaN}function rf(c){var d=typeof c;return d!="object"?d:ArrayBuffer.isView(c)?"binary":(c=ae(c),c==="ArrayBuffer"?"binary":c)}function of(c){return c instanceof Uint8Array?c:ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c)}var sf=(at.prototype._trans=function(c,d,y){var w=this._tx||re.trans,x=this.name,$=At&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(c==="readonly"?"read":"write"," ").concat(this.name));function C(D,V,M){if(!M.schema[x])throw new ye.NotFound("Table "+x+" not part of transaction");return d(M.idbtrans,M)}var B=Qi();try{var F=w&&w.db._novip===this.db._novip?w===re.trans?w._promise(c,C,y):Ir(function(){return w._promise(c,C,y)},{trans:w,transless:re.transless||re}):function D(V,M,q,N){if(V.idbdb&&(V._state.openComplete||re.letThrough||V._vip)){var z=V._createTransaction(M,q,V._dbSchema);try{z.create(),V._state.PR1398_maxLoop=3}catch(H){return H.name===Wt.InvalidState&&V.isOpen()&&0<--V._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),V.close({disableAutoOpen:!1}),V.open().then(function(){return D(V,M,q,N)})):yt(H)}return z._promise(M,function(H,j){return Ir(function(){return re.trans=z,N(H,j,z)})}).then(function(H){if(M==="readwrite")try{z.idbtrans.commit()}catch{}return M==="readonly"?H:z._completion.then(function(){return H})})}if(V._state.openComplete)return yt(new ye.DatabaseClosed(V._state.dbOpenError));if(!V._state.isBeingOpened){if(!V._state.autoOpen)return yt(new ye.DatabaseClosed);V.open().catch(Ae)}return V._state.dbReadyPromise.then(function(){return D(V,M,q,N)})}(this.db,c,[this.name],C);return $&&(F._consoleTask=$,F=F.catch(function(D){return console.trace(D),yt(D)})),F}finally{B&&eo()}},at.prototype.get=function(c,d){var y=this;return c&&c.constructor===Object?this.where(c).first(d):c==null?yt(new ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return y.core.get({trans:w,key:c}).then(function(x){return y.hook.reading.fire(x)})}).then(d)},at.prototype.where=function(c){if(typeof c=="string")return new this.db.WhereClause(this,c);if(h(c))return new this.db.WhereClause(this,"[".concat(c.join("+"),"]"));var d=l(c);if(d.length===1)return this.where(d[0]).equals(c[d[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(F){if(F.compound&&d.every(function(V){return 0<=F.keyPath.indexOf(V)})){for(var D=0;D<d.length;++D)if(d.indexOf(F.keyPath[D])===-1)return!1;return!0}return!1}).sort(function(F,D){return F.keyPath.length-D.keyPath.length})[0];if(y&&this.db._maxKey!==di){var C=y.keyPath.slice(0,d.length);return this.where(C).equals(C.map(function(D){return c[D]}))}!y&&At&&console.warn("The query ".concat(JSON.stringify(c)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var w=this.schema.idxByName,x=this.db._deps.indexedDB;function $(F,D){return x.cmp(F,D)===0}var B=d.reduce(function(q,D){var V=q[0],M=q[1],q=w[D],N=c[D];return[V||q,V||!q?fi(M,q&&q.multi?function(z){return z=te(z,D),h(z)&&z.some(function(H){return $(N,H)})}:function(z){return $(N,te(z,D))}):M]},[null,null]),C=B[0],B=B[1];return C?this.where(C.name).equals(c[C.keyPath]).filter(B):y?this.filter(B):this.where(d).equals("")},at.prototype.filter=function(c){return this.toCollection().and(c)},at.prototype.count=function(c){return this.toCollection().count(c)},at.prototype.offset=function(c){return this.toCollection().offset(c)},at.prototype.limit=function(c){return this.toCollection().limit(c)},at.prototype.each=function(c){return this.toCollection().each(c)},at.prototype.toArray=function(c){return this.toCollection().toArray(c)},at.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},at.prototype.orderBy=function(c){return new this.db.Collection(new this.db.WhereClause(this,h(c)?"[".concat(c.join("+"),"]"):c))},at.prototype.reverse=function(){return this.toCollection().reverse()},at.prototype.mapToClass=function(c){var d,y=this.db,w=this.name;function x(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=c).prototype instanceof nf&&(function(F,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function V(){this.constructor=F}r(F,D),F.prototype=D===null?Object.create(D):(V.prototype=D.prototype,new V)}(x,d=c),Object.defineProperty(x.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),x.prototype.table=function(){return w},c=x);for(var $=new Set,C=c.prototype;C;C=m(C))Object.getOwnPropertyNames(C).forEach(function(F){return $.add(F)});function B(F){if(!F)return F;var D,V=Object.create(c.prototype);for(D in F)if(!$.has(D))try{V[D]=F[D]}catch{}return V}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),c},at.prototype.defineClass=function(){return this.mapToClass(function(c){p(this,c)})},at.prototype.add=function(c,d){var y=this,w=this.schema.primKey,x=w.auto,$=w.keyPath,C=c;return $&&x&&(C=Ba($)(c)),this._trans("readwrite",function(B){return y.core.mutate({trans:B,type:"add",keys:d!=null?[d]:null,values:[C]})}).then(function(B){return B.numFailures?fe.reject(B.failures[0]):B.lastResult}).then(function(B){if($)try{ne(c,$,B)}catch{}return B})},at.prototype.update=function(c,d){return typeof c!="object"||h(c)?this.where(":id").equals(c).modify(d):(c=te(c,this.schema.primKey.keyPath),c===void 0?yt(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(d))},at.prototype.put=function(c,d){var y=this,w=this.schema.primKey,x=w.auto,$=w.keyPath,C=c;return $&&x&&(C=Ba($)(c)),this._trans("readwrite",function(B){return y.core.mutate({trans:B,type:"put",values:[C],keys:d!=null?[d]:null})}).then(function(B){return B.numFailures?fe.reject(B.failures[0]):B.lastResult}).then(function(B){if($)try{ne(c,$,B)}catch{}return B})},at.prototype.delete=function(c){var d=this;return this._trans("readwrite",function(y){return d.core.mutate({trans:y,type:"delete",keys:[c]})}).then(function(y){return y.numFailures?fe.reject(y.failures[0]):void 0})},at.prototype.clear=function(){var c=this;return this._trans("readwrite",function(d){return c.core.mutate({trans:d,type:"deleteRange",range:tf})}).then(function(d){return d.numFailures?fe.reject(d.failures[0]):void 0})},at.prototype.bulkGet=function(c){var d=this;return this._trans("readonly",function(y){return d.core.getMany({keys:c,trans:y}).then(function(w){return w.map(function(x){return d.hook.reading.fire(x)})})})},at.prototype.bulkAdd=function(c,d,y){var w=this,x=Array.isArray(d)?d:void 0,$=(y=y||(x?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(C){var D=w.schema.primKey,B=D.auto,D=D.keyPath;if(D&&x)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(x&&x.length!==c.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var F=c.length,D=D&&B?c.map(Ba(D)):c;return w.core.mutate({trans:C,type:"add",keys:x,values:D,wantResults:$}).then(function(z){var M=z.numFailures,q=z.results,N=z.lastResult,z=z.failures;if(M===0)return $?q:N;throw new Je("".concat(w.name,".bulkAdd(): ").concat(M," of ").concat(F," operations failed"),z)})})},at.prototype.bulkPut=function(c,d,y){var w=this,x=Array.isArray(d)?d:void 0,$=(y=y||(x?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(C){var D=w.schema.primKey,B=D.auto,D=D.keyPath;if(D&&x)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(x&&x.length!==c.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var F=c.length,D=D&&B?c.map(Ba(D)):c;return w.core.mutate({trans:C,type:"put",keys:x,values:D,wantResults:$}).then(function(z){var M=z.numFailures,q=z.results,N=z.lastResult,z=z.failures;if(M===0)return $?q:N;throw new Je("".concat(w.name,".bulkPut(): ").concat(M," of ").concat(F," operations failed"),z)})})},at.prototype.bulkUpdate=function(c){var d=this,y=this.core,w=c.map(function(C){return C.key}),x=c.map(function(C){return C.changes}),$=[];return this._trans("readwrite",function(C){return y.getMany({trans:C,keys:w,cache:"clone"}).then(function(B){var F=[],D=[];c.forEach(function(M,q){var N=M.key,z=M.changes,H=B[q];if(H){for(var j=0,W=Object.keys(z);j<W.length;j++){var Y=W[j],Z=z[Y];if(Y===d.schema.primKey.keyPath){if(Ye(Z,N)!==0)throw new ye.Constraint("Cannot update primary key in bulkUpdate()")}else ne(H,Y,Z)}$.push(q),F.push(N),D.push(H)}});var V=F.length;return y.mutate({trans:C,type:"put",keys:F,values:D,updates:{keys:w,changeSpecs:x}}).then(function(M){var q=M.numFailures,N=M.failures;if(q===0)return V;for(var z=0,H=Object.keys(N);z<H.length;z++){var j,W=H[z],Y=$[Number(W)];Y!=null&&(j=N[W],delete N[W],N[Y]=j)}throw new Je("".concat(d.name,".bulkUpdate(): ").concat(q," of ").concat(V," operations failed"),N)})})})},at.prototype.bulkDelete=function(c){var d=this,y=c.length;return this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"delete",keys:c})}).then(function(C){var x=C.numFailures,$=C.lastResult,C=C.failures;if(x===0)return $;throw new Je("".concat(d.name,".bulkDelete(): ").concat(x," of ").concat(y," operations failed"),C)})},at);function at(){}function Xo(c){function d(C,B){if(B){for(var F=arguments.length,D=new Array(F-1);--F;)D[F-1]=arguments[F];return y[C].subscribe.apply(null,D),c}if(typeof C=="string")return y[C]}var y={};d.addEventType=$;for(var w=1,x=arguments.length;w<x;++w)$(arguments[w]);return d;function $(C,B,F){if(typeof C!="object"){var D;B=B||$n;var V={subscribers:[],fire:F=F||Ae,subscribe:function(M){V.subscribers.indexOf(M)===-1&&(V.subscribers.push(M),V.fire=B(V.fire,M))},unsubscribe:function(M){V.subscribers=V.subscribers.filter(function(q){return q!==M}),V.fire=V.subscribers.reduce(B,F)}};return y[C]=d[C]=V}l(D=C).forEach(function(M){var q=D[M];if(h(q))$(M,D[M][0],D[M][1]);else{if(q!=="asap")throw new ye.InvalidArgument("Invalid event config");var N=$(M,Nt,function(){for(var z=arguments.length,H=new Array(z);z--;)H[z]=arguments[z];N.subscribers.forEach(function(j){X(function(){j.apply(null,H)})})})}})}}function Jo(c,d){return P(d).from({prototype:c}),d}function ro(c,d){return!(c.filter||c.algorithm||c.or)&&(d?c.justLimit:!c.replayFilter)}function lu(c,d){c.filter=fi(c.filter,d)}function hu(c,d,y){var w=c.replayFilter;c.replayFilter=w?function(){return fi(w(),d())}:d,c.justLimit=y&&!w}function Oa(c,d){if(c.isPrimKey)return d.primaryKey;var y=d.getIndexByKeyPath(c.index);if(!y)throw new ye.Schema("KeyPath "+c.index+" on object store "+d.name+" is not indexed");return y}function af(c,d,y){var w=Oa(c,d.schema);return d.openCursor({trans:y,values:!c.keysOnly,reverse:c.dir==="prev",unique:!!c.unique,query:{index:w,range:c.range}})}function Ra(c,d,y,w){var x=c.replayFilter?fi(c.filter,c.replayFilter()):c.filter;if(c.or){var $={},C=function(B,F,D){var V,M;x&&!x(F,D,function(q){return F.stop(q)},function(q){return F.fail(q)})||((M=""+(V=F.primaryKey))=="[object ArrayBuffer]"&&(M=""+new Uint8Array(V)),v($,M)||($[M]=!0,d(B,F,D)))};return Promise.all([c.or._iterate(C,y),cf(af(c,w,y),c.algorithm,C,!c.keysOnly&&c.valueMapper)])}return cf(af(c,w,y),fi(c.algorithm,x),d,!c.keysOnly&&c.valueMapper)}function cf(c,d,y,w){var x=ut(w?function($,C,B){return y(w($),C,B)}:y);return c.then(function($){if($)return $.start(function(){var C=function(){return $.continue()};d&&!d($,function(B){return C=B},function(B){$.stop(B),C=Ae},function(B){$.fail(B),C=Ae})||x($.value,$,function(B){return C=B}),C()})})}var or=Symbol(),Qo=(uf.prototype.execute=function(c){if(this.add!==void 0){var d=this.add;if(h(d))return o(o([],h(c)?c:[],!0),d).sort();if(typeof d=="number")return(Number(c)||0)+d;if(typeof d=="bigint")try{return BigInt(c)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(this.remove!==void 0){var y=this.remove;if(h(y))return h(c)?c.filter(function(w){return!y.includes(w)}).sort():[];if(typeof y=="number")return Number(c)-y;if(typeof y=="bigint")try{return BigInt(c)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}return d=(d=this.replacePrefix)===null||d===void 0?void 0:d[0],d&&typeof c=="string"&&c.startsWith(d)?this.replacePrefix[1]+c.substring(d.length):c},uf);function uf(c){Object.assign(this,c)}var lb=(Ke.prototype._read=function(c,d){var y=this._ctx;return y.error?y.table._trans(null,yt.bind(null,y.error)):y.table._trans("readonly",c).then(d)},Ke.prototype._write=function(c){var d=this._ctx;return d.error?d.table._trans(null,yt.bind(null,d.error)):d.table._trans("readwrite",c,"locked")},Ke.prototype._addAlgorithm=function(c){var d=this._ctx;d.algorithm=fi(d.algorithm,c)},Ke.prototype._iterate=function(c,d){return Ra(this._ctx,c,d,this._ctx.table.core)},Ke.prototype.clone=function(c){var d=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return c&&p(y,c),d._ctx=y,d},Ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ke.prototype.each=function(c){var d=this._ctx;return this._read(function(y){return Ra(d,c,y,d.table.core)})},Ke.prototype.count=function(c){var d=this;return this._read(function(y){var w=d._ctx,x=w.table.core;if(ro(w,!0))return x.count({trans:y,query:{index:Oa(w,x.schema),range:w.range}}).then(function(C){return Math.min(C,w.limit)});var $=0;return Ra(w,function(){return++$,!1},y,x).then(function(){return $})}).then(c)},Ke.prototype.sortBy=function(c,d){var y=c.split(".").reverse(),w=y[0],x=y.length-1;function $(F,D){return D?$(F[y[D]],D-1):F[w]}var C=this._ctx.dir==="next"?1:-1;function B(F,D){return F=$(F,x),D=$(D,x),F<D?-C:D<F?C:0}return this.toArray(function(F){return F.sort(B)}).then(d)},Ke.prototype.toArray=function(c){var d=this;return this._read(function(y){var w=d._ctx;if(w.dir==="next"&&ro(w,!0)&&0<w.limit){var x=w.valueMapper,$=Oa(w,w.table.core.schema);return w.table.core.query({trans:y,limit:w.limit,values:!0,query:{index:$,range:w.range}}).then(function(B){return B=B.result,x?B.map(x):B})}var C=[];return Ra(w,function(B){return C.push(B)},y,w.table.core).then(function(){return C})},c)},Ke.prototype.offset=function(c){var d=this._ctx;return c<=0||(d.offset+=c,ro(d)?hu(d,function(){var y=c;return function(w,x){return y===0||(y===1?--y:x(function(){w.advance(y),y=0}),!1)}}):hu(d,function(){var y=c;return function(){return--y<0}})),this},Ke.prototype.limit=function(c){return this._ctx.limit=Math.min(this._ctx.limit,c),hu(this._ctx,function(){var d=c;return function(y,w,x){return--d<=0&&w(x),0<=d}},!0),this},Ke.prototype.until=function(c,d){return lu(this._ctx,function(y,w,x){return!c(y.value)||(w(x),d)}),this},Ke.prototype.first=function(c){return this.limit(1).toArray(function(d){return d[0]}).then(c)},Ke.prototype.last=function(c){return this.reverse().first(c)},Ke.prototype.filter=function(c){var d;return lu(this._ctx,function(y){return c(y.value)}),(d=this._ctx).isMatch=fi(d.isMatch,c),this},Ke.prototype.and=function(c){return this.filter(c)},Ke.prototype.or=function(c){return new this.db.WhereClause(this._ctx.table,c,this)},Ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ke.prototype.desc=function(){return this.reverse()},Ke.prototype.eachKey=function(c){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,w){c(w.key,w)})},Ke.prototype.eachUniqueKey=function(c){return this._ctx.unique="unique",this.eachKey(c)},Ke.prototype.eachPrimaryKey=function(c){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,w){c(w.primaryKey,w)})},Ke.prototype.keys=function(c){var d=this._ctx;d.keysOnly=!d.isMatch;var y=[];return this.each(function(w,x){y.push(x.key)}).then(function(){return y}).then(c)},Ke.prototype.primaryKeys=function(c){var d=this._ctx;if(d.dir==="next"&&ro(d,!0)&&0<d.limit)return this._read(function(w){var x=Oa(d,d.table.core.schema);return d.table.core.query({trans:w,values:!1,limit:d.limit,query:{index:x,range:d.range}})}).then(function(w){return w.result}).then(c);d.keysOnly=!d.isMatch;var y=[];return this.each(function(w,x){y.push(x.primaryKey)}).then(function(){return y}).then(c)},Ke.prototype.uniqueKeys=function(c){return this._ctx.unique="unique",this.keys(c)},Ke.prototype.firstKey=function(c){return this.limit(1).keys(function(d){return d[0]}).then(c)},Ke.prototype.lastKey=function(c){return this.reverse().firstKey(c)},Ke.prototype.distinct=function(){var c=this._ctx,c=c.index&&c.table.schema.idxByName[c.index];if(!c||!c.multi)return this;var d={};return lu(this._ctx,function(x){var w=x.primaryKey.toString(),x=v(d,w);return d[w]=!0,!x}),this},Ke.prototype.modify=function(c){var d=this,y=this._ctx;return this._write(function(w){var x,$,C;C=typeof c=="function"?c:(x=l(c),$=x.length,function(j){for(var W=!1,Y=0;Y<$;++Y){var Z=x[Y],J=c[Z],ee=te(j,Z);J instanceof Qo?(ne(j,Z,J.execute(ee)),W=!0):ee!==J&&(ne(j,Z,J),W=!0)}return W});function B(j,Z){var Y=Z.failures,Z=Z.numFailures;z+=j-Z;for(var J=0,ee=l(Y);J<ee.length;J++){var le=ee[J];N.push(Y[le])}}var F=y.table.core,D=F.schema.primaryKey,V=D.outbound,M=D.extractKey,q=d.db._options.modifyChunkSize||200,N=[],z=0,H=[];return d.clone().primaryKeys().then(function(j){function W(Z){var J=Math.min(q,j.length-Z);return F.getMany({trans:w,keys:j.slice(Z,Z+J),cache:"immutable"}).then(function(ee){for(var le=[],ie=[],ue=V?[]:null,he=[],ce=0;ce<J;++ce){var Te=ee[ce],Oe={value:et(Te),primKey:j[Z+ce]};C.call(Oe,Oe.value,Oe)!==!1&&(Oe.value==null?he.push(j[Z+ce]):V||Ye(M(Te),M(Oe.value))===0?(ie.push(Oe.value),V&&ue.push(j[Z+ce])):(he.push(j[Z+ce]),le.push(Oe.value)))}return Promise.resolve(0<le.length&&F.mutate({trans:w,type:"add",values:le}).then(function(ze){for(var Fe in ze.failures)he.splice(parseInt(Fe),1);B(le.length,ze)})).then(function(){return(0<ie.length||Y&&typeof c=="object")&&F.mutate({trans:w,type:"put",keys:ue,values:ie,criteria:Y,changeSpec:typeof c!="function"&&c,isAdditionalChunk:0<Z}).then(function(ze){return B(ie.length,ze)})}).then(function(){return(0<he.length||Y&&c===du)&&F.mutate({trans:w,type:"delete",keys:he,criteria:Y,isAdditionalChunk:0<Z}).then(function(ze){return B(he.length,ze)})}).then(function(){return j.length>Z+J&&W(Z+q)})})}var Y=ro(y)&&y.limit===1/0&&(typeof c!="function"||c===du)&&{index:y.index,range:y.range};return W(0).then(function(){if(0<N.length)throw new Dt("Error modifying one or more objects",N,z,H);return j.length})})})},Ke.prototype.delete=function(){var c=this._ctx,d=c.range;return ro(c)&&(c.isPrimKey||d.type===3)?this._write(function(y){var w=c.table.core.schema.primaryKey,x=d;return c.table.core.count({trans:y,query:{index:w,range:x}}).then(function($){return c.table.core.mutate({trans:y,type:"deleteRange",range:x}).then(function(C){var B=C.failures;if(C.lastResult,C.results,C=C.numFailures,C)throw new Dt("Could not delete some values",Object.keys(B).map(function(F){return B[F]}),$-C);return $-C})})}):this.modify(du)},Ke);function Ke(){}var du=function(c,d){return d.value=null};function hb(c,d){return c<d?-1:c===d?0:1}function db(c,d){return d<c?-1:c===d?0:1}function ln(c,d,y){return c=c instanceof hf?new c.Collection(c):c,c._ctx.error=new(y||TypeError)(d),c}function io(c){return new c.Collection(c,function(){return lf("")}).limit(0)}function Ma(c,d,y,w){var x,$,C,B,F,D,V,M=y.length;if(!y.every(function(z){return typeof z=="string"}))return ln(c,ef);function q(z){x=z==="next"?function(j){return j.toUpperCase()}:function(j){return j.toLowerCase()},$=z==="next"?function(j){return j.toLowerCase()}:function(j){return j.toUpperCase()},C=z==="next"?hb:db;var H=y.map(function(j){return{lower:$(j),upper:x(j)}}).sort(function(j,W){return C(j.lower,W.lower)});B=H.map(function(j){return j.upper}),F=H.map(function(j){return j.lower}),V=(D=z)==="next"?"":w}q("next"),c=new c.Collection(c,function(){return Or(B[0],F[M-1]+w)}),c._ondirectionchange=function(z){q(z)};var N=0;return c._addAlgorithm(function(z,H,j){var W=z.key;if(typeof W!="string")return!1;var Y=$(W);if(d(Y,F,N))return!0;for(var Z=null,J=N;J<M;++J){var ee=function(le,ie,ue,he,ce,Te){for(var Oe=Math.min(le.length,he.length),ze=-1,Fe=0;Fe<Oe;++Fe){var kn=ie[Fe];if(kn!==he[Fe])return ce(le[Fe],ue[Fe])<0?le.substr(0,Fe)+ue[Fe]+ue.substr(Fe+1):ce(le[Fe],he[Fe])<0?le.substr(0,Fe)+he[Fe]+ue.substr(Fe+1):0<=ze?le.substr(0,ze)+ie[ze]+ue.substr(ze+1):null;ce(le[Fe],kn)<0&&(ze=Fe)}return Oe<he.length&&Te==="next"?le+ue.substr(le.length):Oe<le.length&&Te==="prev"?le.substr(0,ue.length):ze<0?null:le.substr(0,ze)+he[ze]+ue.substr(ze+1)}(W,Y,B[J],F[J],C,D);ee===null&&Z===null?N=J+1:(Z===null||0<C(Z,ee))&&(Z=ee)}return H(Z!==null?function(){z.continue(Z+V)}:j),!1}),c}function Or(c,d,y,w){return{type:2,lower:c,upper:d,lowerOpen:y,upperOpen:w}}function lf(c){return{type:1,lower:c,upper:c}}var hf=(Object.defineProperty(kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),kt.prototype.between=function(c,d,y,w){y=y!==!1,w=w===!0;try{return 0<this._cmp(c,d)||this._cmp(c,d)===0&&(y||w)&&(!y||!w)?io(this):new this.Collection(this,function(){return Or(c,d,!y,!w)})}catch{return ln(this,ir)}},kt.prototype.equals=function(c){return c==null?ln(this,ir):new this.Collection(this,function(){return lf(c)})},kt.prototype.above=function(c){return c==null?ln(this,ir):new this.Collection(this,function(){return Or(c,void 0,!0)})},kt.prototype.aboveOrEqual=function(c){return c==null?ln(this,ir):new this.Collection(this,function(){return Or(c,void 0,!1)})},kt.prototype.below=function(c){return c==null?ln(this,ir):new this.Collection(this,function(){return Or(void 0,c,!1,!0)})},kt.prototype.belowOrEqual=function(c){return c==null?ln(this,ir):new this.Collection(this,function(){return Or(void 0,c)})},kt.prototype.startsWith=function(c){return typeof c!="string"?ln(this,ef):this.between(c,c+di,!0,!0)},kt.prototype.startsWithIgnoreCase=function(c){return c===""?this.startsWith(c):Ma(this,function(d,y){return d.indexOf(y[0])===0},[c],di)},kt.prototype.equalsIgnoreCase=function(c){return Ma(this,function(d,y){return d===y[0]},[c],"")},kt.prototype.anyOfIgnoreCase=function(){var c=Ee.apply(pe,arguments);return c.length===0?io(this):Ma(this,function(d,y){return y.indexOf(d)!==-1},c,"")},kt.prototype.startsWithAnyOfIgnoreCase=function(){var c=Ee.apply(pe,arguments);return c.length===0?io(this):Ma(this,function(d,y){return y.some(function(w){return d.indexOf(w)===0})},c,di)},kt.prototype.anyOf=function(){var c=this,d=Ee.apply(pe,arguments),y=this._cmp;try{d.sort(y)}catch{return ln(this,ir)}if(d.length===0)return io(this);var w=new this.Collection(this,function(){return Or(d[0],d[d.length-1])});w._ondirectionchange=function($){y=$==="next"?c._ascending:c._descending,d.sort(y)};var x=0;return w._addAlgorithm(function($,C,B){for(var F=$.key;0<y(F,d[x]);)if(++x===d.length)return C(B),!1;return y(F,d[x])===0||(C(function(){$.continue(d[x])}),!1)}),w},kt.prototype.notEqual=function(c){return this.inAnyRange([[-1/0,c],[c,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},kt.prototype.noneOf=function(){var c=Ee.apply(pe,arguments);if(c.length===0)return new this.Collection(this);try{c.sort(this._ascending)}catch{return ln(this,ir)}var d=c.reduce(function(y,w){return y?y.concat([[y[y.length-1][1],w]]):[[-1/0,w]]},null);return d.push([c[c.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},kt.prototype.inAnyRange=function(W,d){var y=this,w=this._cmp,x=this._ascending,$=this._descending,C=this._min,B=this._max;if(W.length===0)return io(this);if(!W.every(function(Y){return Y[0]!==void 0&&Y[1]!==void 0&&x(Y[0],Y[1])<=0}))return ln(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var F=!d||d.includeLowers!==!1,D=d&&d.includeUppers===!0,V,M=x;function q(Y,Z){return M(Y[0],Z[0])}try{(V=W.reduce(function(Y,Z){for(var J=0,ee=Y.length;J<ee;++J){var le=Y[J];if(w(Z[0],le[1])<0&&0<w(Z[1],le[0])){le[0]=C(le[0],Z[0]),le[1]=B(le[1],Z[1]);break}}return J===ee&&Y.push(Z),Y},[])).sort(q)}catch{return ln(this,ir)}var N=0,z=D?function(Y){return 0<x(Y,V[N][1])}:function(Y){return 0<=x(Y,V[N][1])},H=F?function(Y){return 0<$(Y,V[N][0])}:function(Y){return 0<=$(Y,V[N][0])},j=z,W=new this.Collection(this,function(){return Or(V[0][0],V[V.length-1][1],!F,!D)});return W._ondirectionchange=function(Y){M=Y==="next"?(j=z,x):(j=H,$),V.sort(q)},W._addAlgorithm(function(Y,Z,J){for(var ee,le=Y.key;j(le);)if(++N===V.length)return Z(J),!1;return!z(ee=le)&&!H(ee)||(y._cmp(le,V[N][1])===0||y._cmp(le,V[N][0])===0||Z(function(){M===x?Y.continue(V[N][0]):Y.continue(V[N][1])}),!1)}),W},kt.prototype.startsWithAnyOf=function(){var c=Ee.apply(pe,arguments);return c.every(function(d){return typeof d=="string"})?c.length===0?io(this):this.inAnyRange(c.map(function(d){return[d,d+di]})):ln(this,"startsWithAnyOf() only works with strings")},kt);function kt(){}function Vn(c){return ut(function(d){return es(d),c(d.target.error),!1})}function es(c){c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault()}var ts="storagemutated",fu="x-storagemutated-1",Rr=Xo(null,ts),fb=(qn.prototype._lock=function(){return K(!re.global),++this._reculock,this._reculock!==1||re.global||(re.lockOwnerFor=this),this},qn.prototype._unlock=function(){if(K(!re.global),--this._reculock==0)for(re.global||(re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var c=this._blockedFuncs.shift();try{hi(c[1],c[0])}catch{}}return this},qn.prototype._locked=function(){return this._reculock&&re.lockOwnerFor!==this},qn.prototype.create=function(c){var d=this;if(!this.mode)return this;var y=this.db.idbdb,w=this.db._state.dbOpenError;if(K(!this.idbtrans),!c&&!y)switch(w&&w.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(w);case"MissingAPIError":throw new ye.MissingAPI(w.message,w);default:throw new ye.OpenFailed(w)}if(!this.active)throw new ye.TransactionInactive;return K(this._completion._state===null),(c=this.idbtrans=c||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(x){es(x),d._reject(c.error)}),c.onabort=ut(function(x){es(x),d.active&&d._reject(new ye.Abort(c.error)),d.active=!1,d.on("abort").fire(x)}),c.oncomplete=ut(function(){d.active=!1,d._resolve(),"mutatedParts"in c&&Rr.storagemutated.fire(c.mutatedParts)}),this},qn.prototype._promise=function(c,d,y){var w=this;if(c==="readwrite"&&this.mode!=="readwrite")return yt(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return yt(new ye.TransactionInactive);if(this._locked())return new fe(function($,C){w._blockedFuncs.push([function(){w._promise(c,d,y).then($,C)},re])});if(y)return Ir(function(){var $=new fe(function(C,B){w._lock();var F=d(C,B,w);F&&F.then&&F.then(C,B)});return $.finally(function(){return w._unlock()}),$._lib=!0,$});var x=new fe(function($,C){var B=d($,C,w);B&&B.then&&B.then($,C)});return x._lib=!0,x},qn.prototype._root=function(){return this.parent?this.parent._root():this},qn.prototype.waitFor=function(c){var d,y=this._root(),w=fe.resolve(c);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return w}):(y._waitingFor=w,y._waitingQueue=[],d=y.idbtrans.objectStore(y.storeNames[0]),function $(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(d.get(-1/0).onsuccess=$)}());var x=y._waitingFor;return new fe(function($,C){w.then(function(B){return y._waitingQueue.push(ut($.bind(null,B)))},function(B){return y._waitingQueue.push(ut(C.bind(null,B)))}).finally(function(){y._waitingFor===x&&(y._waitingFor=null)})})},qn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))},qn.prototype.table=function(c){var d=this._memoizedTables||(this._memoizedTables={});if(v(d,c))return d[c];var y=this.schema[c];if(!y)throw new ye.NotFound("Table "+c+" not part of transaction");return y=new this.db.Table(c,y,this),y.core=this.db.core.table(c),d[c]=y},qn);function qn(){}function pu(c,d,y,w,x,$,C){return{name:c,keyPath:d,unique:y,multi:w,auto:x,compound:$,src:(y&&!C?"&":"")+(w?"*":"")+(x?"++":"")+df(d)}}function df(c){return typeof c=="string"?c:c?"["+[].join.call(c,"+")+"]":""}function mu(c,d,y){return{name:c,primKey:d,indexes:y,mappedClass:null,idxByName:(w=function(x){return[x.name,x]},y.reduce(function(x,$,C){return C=w($,C),C&&(x[C[0]]=C[1]),x},{}))};var w}var ns=function(c){try{return c.only([[]]),ns=function(){return[[]]},[[]]}catch{return ns=function(){return di},di}};function yu(c){return c==null?function(){}:typeof c=="string"?(d=c).split(".").length===1?function(y){return y[d]}:function(y){return te(y,d)}:function(y){return te(y,c)};var d}function ff(c){return[].slice.call(c)}var pb=0;function rs(c){return c==null?":id":typeof c=="string"?c:"[".concat(c.join("+"),"]")}function mb(c,d,F){function w(j){if(j.type===3)return null;if(j.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=j.lower,z=j.upper,H=j.lowerOpen,j=j.upperOpen;return N===void 0?z===void 0?null:d.upperBound(z,!!j):z===void 0?d.lowerBound(N,!!H):d.bound(N,z,!!H,!!j)}function x(q){var N,z=q.name;return{name:z,schema:q,mutate:function(H){var j=H.trans,W=H.type,Y=H.keys,Z=H.values,J=H.range;return new Promise(function(ee,le){ee=ut(ee);var ie=j.objectStore(z),ue=ie.keyPath==null,he=W==="put"||W==="add";if(!he&&W!=="delete"&&W!=="deleteRange")throw new Error("Invalid operation type: "+W);var ce,Te=(Y||Z||{length:1}).length;if(Y&&Z&&Y.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(Te===0)return ee({numFailures:0,failures:{},results:[],lastResult:void 0});function Oe(Kt){++kn,es(Kt)}var ze=[],Fe=[],kn=0;if(W==="deleteRange"){if(J.type===4)return ee({numFailures:kn,failures:Fe,results:[],lastResult:void 0});J.type===3?ze.push(ce=ie.clear()):ze.push(ce=ie.delete(w(J)))}else{var ue=he?ue?[Z,Y]:[Z,null]:[Y,null],Le=ue[0],Lt=ue[1];if(he)for(var jt=0;jt<Te;++jt)ze.push(ce=Lt&&Lt[jt]!==void 0?ie[W](Le[jt],Lt[jt]):ie[W](Le[jt])),ce.onerror=Oe;else for(jt=0;jt<Te;++jt)ze.push(ce=ie[W](Le[jt])),ce.onerror=Oe}function Ka(Kt){Kt=Kt.target.result,ze.forEach(function(yi,Mu){return yi.error!=null&&(Fe[Mu]=yi.error)}),ee({numFailures:kn,failures:Fe,results:W==="delete"?Y:ze.map(function(yi){return yi.result}),lastResult:Kt})}ce.onerror=function(Kt){Oe(Kt),Ka(Kt)},ce.onsuccess=Ka})},getMany:function(H){var j=H.trans,W=H.keys;return new Promise(function(Y,Z){Y=ut(Y);for(var J,ee=j.objectStore(z),le=W.length,ie=new Array(le),ue=0,he=0,ce=function(ze){ze=ze.target,ie[ze._pos]=ze.result,++he===ue&&Y(ie)},Te=Vn(Z),Oe=0;Oe<le;++Oe)W[Oe]!=null&&((J=ee.get(W[Oe]))._pos=Oe,J.onsuccess=ce,J.onerror=Te,++ue);ue===0&&Y(ie)})},get:function(H){var j=H.trans,W=H.key;return new Promise(function(Y,Z){Y=ut(Y);var J=j.objectStore(z).get(W);J.onsuccess=function(ee){return Y(ee.target.result)},J.onerror=Vn(Z)})},query:(N=D,function(H){return new Promise(function(j,W){j=ut(j);var Y,Z,J,ue=H.trans,ee=H.values,le=H.limit,ce=H.query,ie=le===1/0?void 0:le,he=ce.index,ce=ce.range,ue=ue.objectStore(z),he=he.isPrimaryKey?ue:ue.index(he.name),ce=w(ce);if(le===0)return j({result:[]});N?((ie=ee?he.getAll(ce,ie):he.getAllKeys(ce,ie)).onsuccess=function(Te){return j({result:Te.target.result})},ie.onerror=Vn(W)):(Y=0,Z=!ee&&"openKeyCursor"in he?he.openKeyCursor(ce):he.openCursor(ce),J=[],Z.onsuccess=function(Te){var Oe=Z.result;return Oe?(J.push(ee?Oe.value:Oe.primaryKey),++Y===le?j({result:J}):void Oe.continue()):j({result:J})},Z.onerror=Vn(W))})}),openCursor:function(H){var j=H.trans,W=H.values,Y=H.query,Z=H.reverse,J=H.unique;return new Promise(function(ee,le){ee=ut(ee);var he=Y.index,ie=Y.range,ue=j.objectStore(z),ue=he.isPrimaryKey?ue:ue.index(he.name),he=Z?J?"prevunique":"prev":J?"nextunique":"next",ce=!W&&"openKeyCursor"in ue?ue.openKeyCursor(w(ie),he):ue.openCursor(w(ie),he);ce.onerror=Vn(le),ce.onsuccess=ut(function(Te){var Oe,ze,Fe,kn,Le=ce.result;Le?(Le.___id=++pb,Le.done=!1,Oe=Le.continue.bind(Le),ze=(ze=Le.continuePrimaryKey)&&ze.bind(Le),Fe=Le.advance.bind(Le),kn=function(){throw new Error("Cursor not stopped")},Le.trans=j,Le.stop=Le.continue=Le.continuePrimaryKey=Le.advance=function(){throw new Error("Cursor not started")},Le.fail=ut(le),Le.next=function(){var Lt=this,jt=1;return this.start(function(){return jt--?Lt.continue():Lt.stop()}).then(function(){return Lt})},Le.start=function(Lt){function jt(){if(ce.result)try{Lt()}catch(Kt){Le.fail(Kt)}else Le.done=!0,Le.start=function(){throw new Error("Cursor behind last entry")},Le.stop()}var Ka=new Promise(function(Kt,yi){Kt=ut(Kt),ce.onerror=Vn(yi),Le.fail=yi,Le.stop=function(Mu){Le.stop=Le.continue=Le.continuePrimaryKey=Le.advance=kn,Kt(Mu)}});return ce.onsuccess=ut(function(Kt){ce.onsuccess=jt,jt()}),Le.continue=Oe,Le.continuePrimaryKey=ze,Le.advance=Fe,jt(),Ka},ee(Le)):ee(null)},le)})},count:function(H){var j=H.query,W=H.trans,Y=j.index,Z=j.range;return new Promise(function(J,ee){var le=W.objectStore(z),ie=Y.isPrimaryKey?le:le.index(Y.name),le=w(Z),ie=le?ie.count(le):ie.count();ie.onsuccess=ut(function(ue){return J(ue.target.result)}),ie.onerror=Vn(ee)})}}}var $,C,B,V=(C=F,B=ff(($=c).objectStoreNames),{schema:{name:$.name,tables:B.map(function(q){return C.objectStore(q)}).map(function(q){var N=q.keyPath,j=q.autoIncrement,z=h(N),H={},j={name:q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N==null,compound:z,keyPath:N,autoIncrement:j,unique:!0,extractKey:yu(N)},indexes:ff(q.indexNames).map(function(W){return q.index(W)}).map(function(J){var Y=J.name,Z=J.unique,ee=J.multiEntry,J=J.keyPath,ee={name:Y,compound:h(J),keyPath:J,unique:Z,multiEntry:ee,extractKey:yu(J)};return H[rs(J)]=ee}),getIndexByKeyPath:function(W){return H[rs(W)]}};return H[":id"]=j.primaryKey,N!=null&&(H[rs(N)]=j.primaryKey),j})},hasGetAll:0<B.length&&"getAll"in C.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),F=V.schema,D=V.hasGetAll,V=F.tables.map(x),M={};return V.forEach(function(q){return M[q.name]=q}),{stack:"dbcore",transaction:c.transaction.bind(c),table:function(q){if(!M[q])throw new Error("Table '".concat(q,"' not found"));return M[q]},MIN_KEY:-1/0,MAX_KEY:ns(d),schema:F}}function yb(c,d,y,w){var x=y.IDBKeyRange;return y.indexedDB,{dbcore:(w=mb(d,x,w),c.dbcore.reduce(function($,C){return C=C.create,i(i({},$),C($))},w))}}function Da(c,w){var y=w.db,w=yb(c._middlewares,y,c._deps,w);c.core=w.dbcore,c.tables.forEach(function(x){var $=x.name;c.core.schema.tables.some(function(C){return C.name===$})&&(x.core=c.core.table($),c[$]instanceof c.Table&&(c[$].core=x.core))})}function Na(c,d,y,w){y.forEach(function(x){var $=w[x];d.forEach(function(C){var B=function F(D,V){return I(D,V)||(D=m(D))&&F(D,V)}(C,x);(!B||"value"in B&&B.value===void 0)&&(C===c.Transaction.prototype||C instanceof c.Transaction?S(C,x,{get:function(){return this.table(x)},set:function(F){E(this,x,{value:F,writable:!0,configurable:!0,enumerable:!0})}}):C[x]=new c.Table(x,$))})})}function gu(c,d){d.forEach(function(y){for(var w in y)y[w]instanceof c.Table&&delete y[w]})}function gb(c,d){return c._cfg.version-d._cfg.version}function bb(c,d,y,w){var x=c._dbSchema;y.objectStoreNames.contains("$meta")&&!x.$meta&&(x.$meta=mu("$meta",mf("")[0],[]),c._storeNames.push("$meta"));var $=c._createTransaction("readwrite",c._storeNames,x);$.create(y),$._completion.catch(w);var C=$._reject.bind($),B=re.transless||re;Ir(function(){return re.trans=$,re.transless=B,d!==0?(Da(c,y),D=d,((F=$).storeNames.includes("$meta")?F.table("$meta").get("version").then(function(V){return V??D}):fe.resolve(D)).then(function(V){return q=V,N=$,z=y,H=[],V=(M=c)._versions,j=M._dbSchema=La(0,M.idbdb,z),(V=V.filter(function(W){return W._cfg.version>=q})).length!==0?(V.forEach(function(W){H.push(function(){var Y=j,Z=W._cfg.dbschema;ja(M,Y,z),ja(M,Z,z),j=M._dbSchema=Z;var J=bu(Y,Z);J.add.forEach(function(he){wu(z,he[0],he[1].primKey,he[1].indexes)}),J.change.forEach(function(he){if(he.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var ce=z.objectStore(he.name);he.add.forEach(function(Te){return Fa(ce,Te)}),he.change.forEach(function(Te){ce.deleteIndex(Te.name),Fa(ce,Te)}),he.del.forEach(function(Te){return ce.deleteIndex(Te)})});var ee=W._cfg.contentUpgrade;if(ee&&W._cfg.version>q){Da(M,z),N._memoizedTables={};var le=de(Z);J.del.forEach(function(he){le[he]=Y[he]}),gu(M,[M.Transaction.prototype]),Na(M,[M.Transaction.prototype],l(le),le),N.schema=le;var ie,ue=tt(ee);return ue&&to(),J=fe.follow(function(){var he;(ie=ee(N))&&ue&&(he=Tr.bind(null,null),ie.then(he,he))}),ie&&typeof ie.then=="function"?fe.resolve(ie):J.then(function(){return ie})}}),H.push(function(Y){var Z,J,ee=W._cfg.dbschema;Z=ee,J=Y,[].slice.call(J.db.objectStoreNames).forEach(function(le){return Z[le]==null&&J.db.deleteObjectStore(le)}),gu(M,[M.Transaction.prototype]),Na(M,[M.Transaction.prototype],M._storeNames,M._dbSchema),N.schema=M._dbSchema}),H.push(function(Y){M.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(M.idbdb.version/10)===W._cfg.version?(M.idbdb.deleteObjectStore("$meta"),delete M._dbSchema.$meta,M._storeNames=M._storeNames.filter(function(Z){return Z!=="$meta"})):Y.objectStore("$meta").put(W._cfg.version,"version"))})}),function W(){return H.length?fe.resolve(H.shift()(N.idbtrans)).then(W):fe.resolve()}().then(function(){pf(j,z)})):fe.resolve();var M,q,N,z,H,j}).catch(C)):(l(x).forEach(function(V){wu(y,V,x[V].primKey,x[V].indexes)}),Da(c,y),void fe.follow(function(){return c.on.populate.fire($)}).catch(C));var F,D})}function wb(c,d){pf(c._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var y=La(0,c.idbdb,d);ja(c,c._dbSchema,d);for(var w=0,x=bu(y,c._dbSchema).change;w<x.length;w++){var $=function(C){if(C.change.length||C.recreate)return console.warn("Unable to patch indexes of table ".concat(C.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=d.objectStore(C.name);C.add.forEach(function(F){At&&console.debug("Dexie upgrade patch: Creating missing index ".concat(C.name,".").concat(F.src)),Fa(B,F)})}(x[w]);if(typeof $=="object")return $.value}}function bu(c,d){var y,w={del:[],add:[],change:[]};for(y in c)d[y]||w.del.push(y);for(y in d){var x=c[y],$=d[y];if(x){var C={name:y,def:$,recreate:!1,del:[],add:[],change:[]};if(""+(x.primKey.keyPath||"")!=""+($.primKey.keyPath||"")||x.primKey.auto!==$.primKey.auto)C.recreate=!0,w.change.push(C);else{var B=x.idxByName,F=$.idxByName,D=void 0;for(D in B)F[D]||C.del.push(D);for(D in F){var V=B[D],M=F[D];V?V.src!==M.src&&C.change.push(M):C.add.push(M)}(0<C.del.length||0<C.add.length||0<C.change.length)&&w.change.push(C)}}else w.add.push([y,$])}return w}function wu(c,d,y,w){var x=c.db.createObjectStore(d,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return w.forEach(function($){return Fa(x,$)}),x}function pf(c,d){l(c).forEach(function(y){d.db.objectStoreNames.contains(y)||(At&&console.debug("Dexie: Creating missing table",y),wu(d,y,c[y].primKey,c[y].indexes))})}function Fa(c,d){c.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function La(c,d,y){var w={};return L(d.objectStoreNames,0).forEach(function(x){for(var $=y.objectStore(x),C=pu(df(D=$.keyPath),D||"",!0,!1,!!$.autoIncrement,D&&typeof D!="string",!0),B=[],F=0;F<$.indexNames.length;++F){var V=$.index($.indexNames[F]),D=V.keyPath,V=pu(V.name,D,!!V.unique,!!V.multiEntry,!1,D&&typeof D!="string",!1);B.push(V)}w[x]=mu(x,C,B)}),w}function ja(c,d,y){for(var w=y.db.objectStoreNames,x=0;x<w.length;++x){var $=w[x],C=y.objectStore($);c._hasGetAll="getAll"in C;for(var B=0;B<C.indexNames.length;++B){var F=C.indexNames[B],D=C.index(F).keyPath,V=typeof D=="string"?D:"["+L(D).join("+")+"]";!d[$]||(D=d[$].idxByName[V])&&(D.name=F,delete d[$].idxByName[V],d[$].idxByName[F]=D)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c._hasGetAll=!1)}function mf(c){return c.split(",").map(function(d,y){var w=(d=d.trim()).replace(/([&*]|\+\+)/g,""),x=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return pu(w,x||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),h(x),y===0)})}var vb=(za.prototype._parseStoresSpec=function(c,d){l(c).forEach(function(y){if(c[y]!==null){var w=mf(c[y]),x=w.shift();if(x.unique=!0,x.multi)throw new ye.Schema("Primary key cannot be multi-valued");w.forEach(function($){if($.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!$.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),d[y]=mu(y,x,w)}})},za.prototype.stores=function(y){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,y):y;var y=d._versions,w={},x={};return y.forEach(function($){p(w,$._cfg.storesSource),x=$._cfg.dbschema={},$._parseStoresSpec(w,x)}),d._dbSchema=x,gu(d,[d._allTables,d,d.Transaction.prototype]),Na(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],l(x),x),d._storeNames=l(x),this},za.prototype.upgrade=function(c){return this._cfg.contentUpgrade=st(this._cfg.contentUpgrade||Ae,c),this},za);function za(){}function vu(c,d){var y=c._dbNamesDB;return y||(y=c._dbNamesDB=new sr(Ta,{addons:[],indexedDB:c,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function xu(c){return c&&typeof c.databases=="function"}function _u(c){return Ir(function(){return re.letThrough=!0,c()})}function Eu(c){return!("from"in c)}var Ft=function(c,d){if(!this){var y=new Ft;return c&&"d"in c&&p(y,c),y}p(this,arguments.length?{d:1,from:c,to:1<arguments.length?d:c}:{d:0})};function is(c,d,y){var w=Ye(d,y);if(!isNaN(w)){if(0<w)throw RangeError();if(Eu(c))return p(c,{from:d,to:y,d:1});var x=c.l,w=c.r;if(Ye(y,c.from)<0)return x?is(x,d,y):c.l={from:d,to:y,d:1,l:null,r:null},yf(c);if(0<Ye(d,c.to))return w?is(w,d,y):c.r={from:d,to:y,d:1,l:null,r:null},yf(c);Ye(d,c.from)<0&&(c.from=d,c.l=null,c.d=w?w.d+1:1),0<Ye(y,c.to)&&(c.to=y,c.r=null,c.d=c.l?c.l.d+1:1),y=!c.r,x&&!c.l&&os(c,x),w&&y&&os(c,w)}}function os(c,d){Eu(d)||function y(w,F){var $=F.from,C=F.to,B=F.l,F=F.r;is(w,$,C),B&&y(w,B),F&&y(w,F)}(c,d)}function Ua(c,d){var y=Su(d),w=y.next();if(w.done)return!1;for(var x=w.value,$=Su(c),C=$.next(x.from),B=C.value;!w.done&&!C.done;){if(Ye(B.from,x.to)<=0&&0<=Ye(B.to,x.from))return!0;Ye(x.from,B.from)<0?x=(w=y.next(B.from)).value:B=(C=$.next(x.from)).value}return!1}function Su(c){var d=Eu(c)?null:{s:0,n:c};return{next:function(y){for(var w=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,w)for(;d.n.l&&Ye(y,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!w||Ye(y,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function yf(c){var d,y,w=(((d=c.r)===null||d===void 0?void 0:d.d)||0)-(((y=c.l)===null||y===void 0?void 0:y.d)||0),x=1<w?"r":w<-1?"l":"";x&&(d=x=="r"?"l":"r",y=i({},c),w=c[x],c.from=w.from,c.to=w.to,c[x]=w[x],y[x]=w[d],(c[d]=y).d=gf(y)),c.d=gf(c)}function gf(y){var d=y.r,y=y.l;return(d?y?Math.max(d.d,y.d):d.d:y?y.d:0)+1}function Va(c,d){return l(d).forEach(function(y){c[y]?os(c[y],d[y]):c[y]=function w(x){var $,C,B={};for($ in x)v(x,$)&&(C=x[$],B[$]=!C||typeof C!="object"||Ne.has(C.constructor)?C:w(C));return B}(d[y])}),c}function Au(c,d){return c.all||d.all||Object.keys(c).some(function(y){return d[y]&&Ua(d[y],c[y])})}_(Ft.prototype,((yn={add:function(c){return os(this,c),this},addKey:function(c){return is(this,c,c),this},addKeys:function(c){var d=this;return c.forEach(function(y){return is(d,y,y)}),this}})[$e]=function(){return Su(this)},yn));var pi={},$u={},ku=!1;function qa(c){Va($u,c),ku||(ku=!0,setTimeout(function(){ku=!1,Cu($u,!($u={}))},0))}function Cu(c,d){d===void 0&&(d=!1);var y=new Set;if(c.all)for(var w=0,x=Object.values(pi);w<x.length;w++)bf(C=x[w],c,y,d);else for(var $ in c){var C,B=/^idb\:\/\/(.*)\/(.*)\//.exec($);B&&($=B[1],B=B[2],(C=pi["idb://".concat($,"/").concat(B)])&&bf(C,c,y,d))}y.forEach(function(F){return F()})}function bf(c,d,y,w){for(var x=[],$=0,C=Object.entries(c.queries.query);$<C.length;$++){for(var B=C[$],F=B[0],D=[],V=0,M=B[1];V<M.length;V++){var q=M[V];Au(d,q.obsSet)?q.subscribers.forEach(function(j){return y.add(j)}):w&&D.push(q)}w&&x.push([F,D])}if(w)for(var N=0,z=x;N<z.length;N++){var H=z[N],F=H[0],D=H[1];c.queries.query[F]=D}}function xb(c){var d=c._state,y=c._deps.indexedDB;if(d.isBeingOpened||c.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?yt(d.dbOpenError):c});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var w=d.openCanceller,x=Math.round(10*c.verno),$=!1;function C(){if(d.openCanceller!==w)throw new ye.DatabaseClosed("db.open() was cancelled")}function B(){return new fe(function(q,N){if(C(),!y)throw new ye.MissingAPI;var z=c.name,H=d.autoSchema||!x?y.open(z):y.open(z,x);if(!H)throw new ye.MissingAPI;H.onerror=Vn(N),H.onblocked=ut(c._fireOnBlocked),H.onupgradeneeded=ut(function(j){var W;V=H.transaction,d.autoSchema&&!c._options.allowEmptyDB?(H.onerror=es,V.abort(),H.result.close(),(W=y.deleteDatabase(z)).onsuccess=W.onerror=ut(function(){N(new ye.NoSuchDatabase("Database ".concat(z," doesnt exist")))})):(V.onerror=Vn(N),j=j.oldVersion>Math.pow(2,62)?0:j.oldVersion,M=j<1,c.idbdb=H.result,$&&wb(c,V),bb(c,j/10,V,N))},N),H.onsuccess=ut(function(){V=null;var j,W,Y,Z,J,ee=c.idbdb=H.result,le=L(ee.objectStoreNames);if(0<le.length)try{var ie=ee.transaction((Z=le).length===1?Z[0]:Z,"readonly");if(d.autoSchema)W=ee,Y=ie,(j=c).verno=W.version/10,Y=j._dbSchema=La(0,W,Y),j._storeNames=L(W.objectStoreNames,0),Na(j,[j._allTables],l(Y),Y);else if(ja(c,c._dbSchema,ie),((J=bu(La(0,(J=c).idbdb,ie),J._dbSchema)).add.length||J.change.some(function(ue){return ue.add.length||ue.change.length}))&&!$)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ee.close(),x=ee.version+1,$=!0,q(B());Da(c,ie)}catch{}no.push(c),ee.onversionchange=ut(function(ue){d.vcFired=!0,c.on("versionchange").fire(ue)}),ee.onclose=ut(function(ue){c.on("close").fire(ue)}),M&&(J=c._deps,ie=z,ee=J.indexedDB,J=J.IDBKeyRange,xu(ee)||ie===Ta||vu(ee,J).put({name:ie}).catch(Ae)),q()},N)}).catch(function(q){switch(q==null?void 0:q.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<x)return x=0,B()}return fe.reject(q)})}var F,D=d.dbReadyResolve,V=null,M=!1;return fe.race([w,(typeof navigator>"u"?fe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function N(){return indexedDB.databases().finally(q)}F=setInterval(N,100),N()}).finally(function(){return clearInterval(F)}):Promise.resolve()).then(B)]).then(function(){return C(),d.onReadyBeingFired=[],fe.resolve(_u(function(){return c.on.ready.fire(c.vip)})).then(function q(){if(0<d.onReadyBeingFired.length){var N=d.onReadyBeingFired.reduce(st,Ae);return d.onReadyBeingFired=[],fe.resolve(_u(function(){return N(c.vip)})).then(q)}})}).finally(function(){d.openCanceller===w&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(q){d.dbOpenError=q;try{V&&V.abort()}catch{}return w===d.openCanceller&&c._close(),yt(q)}).finally(function(){d.openComplete=!0,D()}).then(function(){var q;return M&&(q={},c.tables.forEach(function(N){N.schema.indexes.forEach(function(z){z.name&&(q["idb://".concat(c.name,"/").concat(N.name,"/").concat(z.name)]=new Ft(-1/0,[[[]]]))}),q["idb://".concat(c.name,"/").concat(N.name,"/")]=q["idb://".concat(c.name,"/").concat(N.name,"/:dels")]=new Ft(-1/0,[[[]]])}),Rr(ts).fire(q),Cu(q,!0)),c})}function Pu(c){function d($){return c.next($)}var y=x(d),w=x(function($){return c.throw($)});function x($){return function(F){var B=$(F),F=B.value;return B.done?F:F&&typeof F.then=="function"?F.then(y,w):h(F)?Promise.all(F).then(y,w):y(F)}}return x(d)()}function Ha(c,d,y){for(var w=h(c)?c.slice():[c],x=0;x<y;++x)w.push(d);return w}var _b={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(c){return i(i({},c),{table:function(d){var y=c.table(d),w=y.schema,x={},$=[];function C(M,q,N){var z=rs(M),H=x[z]=x[z]||[],j=M==null?0:typeof M=="string"?1:M.length,W=0<q,W=i(i({},N),{name:W?"".concat(z,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:W,keyTail:q,keyLength:j,extractKey:yu(M),unique:!W&&N.unique});return H.push(W),W.isPrimaryKey||$.push(W),1<j&&C(j===2?M[0]:M.slice(0,j-1),q+1,N),H.sort(function(Y,Z){return Y.keyTail-Z.keyTail}),W}d=C(w.primaryKey.keyPath,0,w.primaryKey),x[":id"]=[d];for(var B=0,F=w.indexes;B<F.length;B++){var D=F[B];C(D.keyPath,0,D)}function V(M){var q,N=M.query.index;return N.isVirtual?i(i({},M),{query:{index:N.lowLevelIndex,range:(q=M.query.range,N=N.keyTail,{type:q.type===1?2:q.type,lower:Ha(q.lower,q.lowerOpen?c.MAX_KEY:c.MIN_KEY,N),lowerOpen:!0,upper:Ha(q.upper,q.upperOpen?c.MIN_KEY:c.MAX_KEY,N),upperOpen:!0})}}):M}return i(i({},y),{schema:i(i({},w),{primaryKey:d,indexes:$,getIndexByKeyPath:function(M){return(M=x[rs(M)])&&M[0]}}),count:function(M){return y.count(V(M))},query:function(M){return y.query(V(M))},openCursor:function(M){var q=M.query.index,N=q.keyTail,z=q.isVirtual,H=q.keyLength;return z?y.openCursor(V(M)).then(function(W){return W&&j(W)}):y.openCursor(M);function j(W){return Object.create(W,{continue:{value:function(Y){Y!=null?W.continue(Ha(Y,M.reverse?c.MAX_KEY:c.MIN_KEY,N)):M.unique?W.continue(W.key.slice(0,H).concat(M.reverse?c.MIN_KEY:c.MAX_KEY,N)):W.continue()}},continuePrimaryKey:{value:function(Y,Z){W.continuePrimaryKey(Ha(Y,c.MAX_KEY,N),Z)}},primaryKey:{get:function(){return W.primaryKey}},key:{get:function(){var Y=W.key;return H===1?Y[0]:Y.slice(0,H)}},value:{get:function(){return W.value}}})}}})}})}};function Iu(c,d,y,w){return y=y||{},w=w||"",l(c).forEach(function(x){var $,C,B;v(d,x)?($=c[x],C=d[x],typeof $=="object"&&typeof C=="object"&&$&&C?(B=ae($))!==ae(C)?y[w+x]=d[x]:B==="Object"?Iu($,C,y,w+x+"."):$!==C&&(y[w+x]=d[x]):$!==C&&(y[w+x]=d[x])):y[w+x]=void 0}),l(d).forEach(function(x){v(c,x)||(y[w+x]=d[x])}),y}function Tu(c,d){return d.type==="delete"?d.keys:d.keys||d.values.map(c.extractKey)}var Eb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(c){return i(i({},c),{table:function(d){var y=c.table(d),w=y.schema.primaryKey;return i(i({},y),{mutate:function(x){var $=re.trans,C=$.table(d).hook,B=C.deleting,F=C.creating,D=C.updating;switch(x.type){case"add":if(F.fire===Ae)break;return $._promise("readwrite",function(){return V(x)},!0);case"put":if(F.fire===Ae&&D.fire===Ae)break;return $._promise("readwrite",function(){return V(x)},!0);case"delete":if(B.fire===Ae)break;return $._promise("readwrite",function(){return V(x)},!0);case"deleteRange":if(B.fire===Ae)break;return $._promise("readwrite",function(){return function M(q,N,z){return y.query({trans:q,values:!1,query:{index:w,range:N},limit:z}).then(function(H){var j=H.result;return V({type:"delete",keys:j,trans:q}).then(function(W){return 0<W.numFailures?Promise.reject(W.failures[0]):j.length<z?{failures:[],numFailures:0,lastResult:void 0}:M(q,i(i({},N),{lower:j[j.length-1],lowerOpen:!0}),z)})})}(x.trans,x.range,1e4)},!0)}return y.mutate(x);function V(M){var q,N,z,H=re.trans,j=M.keys||Tu(w,M);if(!j)throw new Error("Keys missing");return(M=M.type==="add"||M.type==="put"?i(i({},M),{keys:j}):i({},M)).type!=="delete"&&(M.values=o([],M.values)),M.keys&&(M.keys=o([],M.keys)),q=y,z=j,((N=M).type==="add"?Promise.resolve([]):q.getMany({trans:N.trans,keys:z,cache:"immutable"})).then(function(W){var Y=j.map(function(Z,J){var ee,le,ie,ue=W[J],he={onerror:null,onsuccess:null};return M.type==="delete"?B.fire.call(he,Z,ue,H):M.type==="add"||ue===void 0?(ee=F.fire.call(he,Z,M.values[J],H),Z==null&&ee!=null&&(M.keys[J]=Z=ee,w.outbound||ne(M.values[J],w.keyPath,Z))):(ee=Iu(ue,M.values[J]),(le=D.fire.call(he,ee,Z,ue,H))&&(ie=M.values[J],Object.keys(le).forEach(function(ce){v(ie,ce)?ie[ce]=le[ce]:ne(ie,ce,le[ce])}))),he});return y.mutate(M).then(function(Z){for(var J=Z.failures,ee=Z.results,le=Z.numFailures,Z=Z.lastResult,ie=0;ie<j.length;++ie){var ue=(ee||j)[ie],he=Y[ie];ue==null?he.onerror&&he.onerror(J[ie]):he.onsuccess&&he.onsuccess(M.type==="put"&&W[ie]?M.values[ie]:ue)}return{failures:J,results:ee,numFailures:le,lastResult:Z}}).catch(function(Z){return Y.forEach(function(J){return J.onerror&&J.onerror(Z)}),Promise.reject(Z)})})}}})}})}};function wf(c,d,y){try{if(!d||d.keys.length<c.length)return null;for(var w=[],x=0,$=0;x<d.keys.length&&$<c.length;++x)Ye(d.keys[x],c[$])===0&&(w.push(y?et(d.values[x]):d.values[x]),++$);return w.length===c.length?w:null}catch{return null}}var Sb={stack:"dbcore",level:-1,create:function(c){return{table:function(d){var y=c.table(d);return i(i({},y),{getMany:function(w){if(!w.cache)return y.getMany(w);var x=wf(w.keys,w.trans._cache,w.cache==="clone");return x?fe.resolve(x):y.getMany(w).then(function($){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?et($):$},$})},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),y.mutate(w)}})}}}};function vf(c,d){return c.trans.mode==="readonly"&&!!c.subscr&&!c.trans.explicit&&c.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function xf(c,d){switch(c){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ab={stack:"dbcore",level:0,name:"Observability",create:function(c){var d=c.schema.name,y=new Ft(c.MIN_KEY,c.MAX_KEY);return i(i({},c),{transaction:function(w,x,$){if(re.subscr&&x!=="readonly")throw new ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(re.querier));return c.transaction(w,x,$)},table:function(w){var x=c.table(w),$=x.schema,C=$.primaryKey,M=$.indexes,B=C.extractKey,F=C.outbound,D=C.autoIncrement&&M.filter(function(N){return N.compound&&N.keyPath.includes(C.keyPath)}),V=i(i({},x),{mutate:function(N){function z(ce){return ce="idb://".concat(d,"/").concat(w,"/").concat(ce),Z[ce]||(Z[ce]=new Ft)}var H,j,W,Y=N.trans,Z=N.mutatedParts||(N.mutatedParts={}),J=z(""),ee=z(":dels"),le=N.type,he=N.type==="deleteRange"?[N.range]:N.type==="delete"?[N.keys]:N.values.length<50?[Tu(C,N).filter(function(ce){return ce}),N.values]:[],ie=he[0],ue=he[1],he=N.trans._cache;return h(ie)?(J.addKeys(ie),(he=le==="delete"||ie.length===ue.length?wf(ie,he):null)||ee.addKeys(ie),(he||ue)&&(H=z,j=he,W=ue,$.indexes.forEach(function(ce){var Te=H(ce.name||"");function Oe(Fe){return Fe!=null?ce.extractKey(Fe):null}function ze(Fe){return ce.multiEntry&&h(Fe)?Fe.forEach(function(kn){return Te.addKey(kn)}):Te.addKey(Fe)}(j||W).forEach(function(Fe,Lt){var Le=j&&Oe(j[Lt]),Lt=W&&Oe(W[Lt]);Ye(Le,Lt)!==0&&(Le!=null&&ze(Le),Lt!=null&&ze(Lt))})}))):ie?(ue={from:ie.lower,to:ie.upper},ee.add(ue),J.add(ue)):(J.add(y),ee.add(y),$.indexes.forEach(function(ce){return z(ce.name).add(y)})),x.mutate(N).then(function(ce){return!ie||N.type!=="add"&&N.type!=="put"||(J.addKeys(ce.results),D&&D.forEach(function(Te){var Oe=N.values.map(function(Fe){return Te.extractKey(Fe)}),ze=Te.keyPath.findIndex(function(Fe){return Fe===C.keyPath});ce.results.forEach(function(Fe){return Oe[ze]=Fe}),z(Te.name).addKeys(Oe)})),Y.mutatedParts=Va(Y.mutatedParts||{},Z),ce})}}),M=function(z){var H=z.query,z=H.index,H=H.range;return[z,new Ft((z=H.lower)!==null&&z!==void 0?z:c.MIN_KEY,(H=H.upper)!==null&&H!==void 0?H:c.MAX_KEY)]},q={get:function(N){return[C,new Ft(N.key)]},getMany:function(N){return[C,new Ft().addKeys(N.keys)]},count:M,query:M,openCursor:M};return l(q).forEach(function(N){V[N]=function(z){var H=re.subscr,j=!!H,W=vf(re,x)&&xf(N,z)?z.obsSet={}:H;if(j){var Y=function(ue){return ue="idb://".concat(d,"/").concat(w,"/").concat(ue),W[ue]||(W[ue]=new Ft)},Z=Y(""),J=Y(":dels"),H=q[N](z),j=H[0],H=H[1];if((N==="query"&&j.isPrimaryKey&&!z.values?J:Y(j.name||"")).add(H),!j.isPrimaryKey){if(N!=="count"){var ee=N==="query"&&F&&z.values&&x.query(i(i({},z),{values:!1}));return x[N].apply(this,arguments).then(function(ue){if(N==="query"){if(F&&z.values)return ee.then(function(Oe){return Oe=Oe.result,Z.addKeys(Oe),ue});var he=z.values?ue.result.map(B):ue.result;(z.values?Z:J).addKeys(he)}else if(N==="openCursor"){var ce=ue,Te=z.values;return ce&&Object.create(ce,{key:{get:function(){return J.addKey(ce.primaryKey),ce.key}},primaryKey:{get:function(){var Oe=ce.primaryKey;return J.addKey(Oe),Oe}},value:{get:function(){return Te&&Z.addKey(ce.primaryKey),ce.value}}})}return ue})}J.add(y)}}return x[N].apply(this,arguments)}}),V}})}};function _f(c,d,y){if(y.numFailures===0)return d;if(d.type==="deleteRange")return null;var w=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return y.numFailures===w?null:(d=i({},d),h(d.keys)&&(d.keys=d.keys.filter(function(x,$){return!($ in y.failures)})),"values"in d&&h(d.values)&&(d.values=d.values.filter(function(x,$){return!($ in y.failures)})),d)}function Bu(c,d){return y=c,((w=d).lower===void 0||(w.lowerOpen?0<Ye(y,w.lower):0<=Ye(y,w.lower)))&&(c=c,(d=d).upper===void 0||(d.upperOpen?Ye(c,d.upper)<0:Ye(c,d.upper)<=0));var y,w}function Ef(c,d,q,w,x,$){if(!q||q.length===0)return c;var C=d.query.index,B=C.multiEntry,F=d.query.range,D=w.schema.primaryKey.extractKey,V=C.extractKey,M=(C.lowLevelIndex||C).extractKey,q=q.reduce(function(N,z){var H=N,j=z.type==="add"||z.type==="put"?z.values.filter(function(J){return J=V(J),B&&h(J)?J.some(function(ee){return Bu(ee,F)}):Bu(J,F)}).map(function(J){return J=et(J),$&&Object.freeze(J),J}):[];switch(z.type){case"add":H=N.concat(d.values?j:j.map(function(ee){return D(ee)}));break;case"put":var W=new Ft().addKeys(z.values.map(function(ee){return D(ee)})),H=N.filter(function(ee){return ee=d.values?D(ee):ee,!Ua(new Ft(ee),W)}).concat(d.values?j:j.map(function(ee){return D(ee)}));break;case"delete":var Y=new Ft().addKeys(z.keys);H=N.filter(function(ee){return ee=d.values?D(ee):ee,!Ua(new Ft(ee),Y)});break;case"deleteRange":var Z=z.range;H=N.filter(function(ee){return!Bu(D(ee),Z)})}return H},c);return q===c?c:(q.sort(function(N,z){return Ye(M(N),M(z))||Ye(D(N),D(z))}),d.limit&&d.limit<1/0&&(q.length>d.limit?q.length=d.limit:c.length===d.limit&&q.length<d.limit&&(x.dirty=!0)),$?Object.freeze(q):q)}function Sf(c,d){return Ye(c.lower,d.lower)===0&&Ye(c.upper,d.upper)===0&&!!c.lowerOpen==!!d.lowerOpen&&!!c.upperOpen==!!d.upperOpen}function $b(c,d){return function(y,w,x,$){if(y===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((w=Ye(y,w))===0){if(x&&$)return 0;if(x)return 1;if($)return-1}return w}(c.lower,d.lower,c.lowerOpen,d.lowerOpen)<=0&&0<=function(y,w,x,$){if(y===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((w=Ye(y,w))===0){if(x&&$)return 0;if(x)return-1;if($)return 1}return w}(c.upper,d.upper,c.upperOpen,d.upperOpen)}function kb(c,d,y,w){c.subscribers.add(y),w.addEventListener("abort",function(){var x,$;c.subscribers.delete(y),c.subscribers.size===0&&(x=c,$=d,setTimeout(function(){x.subscribers.size===0&&Be($,x)},3e3))})}var Cb={stack:"dbcore",level:0,name:"Cache",create:function(c){var d=c.schema.name;return i(i({},c),{transaction:function(y,w,x){var $,C,B=c.transaction(y,w,x);return w==="readwrite"&&(C=($=new AbortController).signal,x=function(F){return function(){if($.abort(),w==="readwrite"){for(var D=new Set,V=0,M=y;V<M.length;V++){var q=M[V],N=pi["idb://".concat(d,"/").concat(q)];if(N){var z=c.table(q),H=N.optimisticOps.filter(function(Te){return Te.trans===B});if(B._explicit&&F&&B.mutatedParts)for(var j=0,W=Object.values(N.queries.query);j<W.length;j++)for(var Y=0,Z=(le=W[j]).slice();Y<Z.length;Y++)Au((ie=Z[Y]).obsSet,B.mutatedParts)&&(Be(le,ie),ie.subscribers.forEach(function(Te){return D.add(Te)}));else if(0<H.length){N.optimisticOps=N.optimisticOps.filter(function(Te){return Te.trans!==B});for(var J=0,ee=Object.values(N.queries.query);J<ee.length;J++)for(var le,ie,ue,he=0,ce=(le=ee[J]).slice();he<ce.length;he++)(ie=ce[he]).res!=null&&B.mutatedParts&&(F&&!ie.dirty?(ue=Object.isFrozen(ie.res),ue=Ef(ie.res,ie.req,H,z,ie,ue),ie.dirty?(Be(le,ie),ie.subscribers.forEach(function(Te){return D.add(Te)})):ue!==ie.res&&(ie.res=ue,ie.promise=fe.resolve({result:ue}))):(ie.dirty&&Be(le,ie),ie.subscribers.forEach(function(Te){return D.add(Te)})))}}}D.forEach(function(Te){return Te()})}}},B.addEventListener("abort",x(!1),{signal:C}),B.addEventListener("error",x(!1),{signal:C}),B.addEventListener("complete",x(!0),{signal:C})),B},table:function(y){var w=c.table(y),x=w.schema.primaryKey;return i(i({},w),{mutate:function($){var C=re.trans;if(x.outbound||C.db._options.cache==="disabled"||C.explicit)return w.mutate($);var B=pi["idb://".concat(d,"/").concat(y)];return B?(C=w.mutate($),$.type!=="add"&&$.type!=="put"||!(50<=$.values.length||Tu(x,$).some(function(F){return F==null}))?(B.optimisticOps.push($),$.mutatedParts&&qa($.mutatedParts),C.then(function(F){0<F.numFailures&&(Be(B.optimisticOps,$),(F=_f(0,$,F))&&B.optimisticOps.push(F),$.mutatedParts&&qa($.mutatedParts))}),C.catch(function(){Be(B.optimisticOps,$),$.mutatedParts&&qa($.mutatedParts)})):C.then(function(F){var D=_f(0,i(i({},$),{values:$.values.map(function(N,M){var q,N=(q=x.keyPath)!==null&&q!==void 0&&q.includes(".")?et(N):i({},N);return ne(N,x.keyPath,F.results[M]),N})}),F);B.optimisticOps.push(D),queueMicrotask(function(){return $.mutatedParts&&qa($.mutatedParts)})}),C):w.mutate($)},query:function($){if(!vf(re,w)||!xf("query",$))return w.query($);var C=((D=re.trans)===null||D===void 0?void 0:D.db._options.cache)==="immutable",M=re,B=M.requery,F=M.signal,D=function(z,H,j,W){var Y=pi["idb://".concat(z,"/").concat(H)];if(!Y)return[];if(!(H=Y.queries[j]))return[null,!1,Y,null];var Z=H[(W.query?W.query.index.name:null)||""];if(!Z)return[null,!1,Y,null];switch(j){case"query":var J=Z.find(function(ee){return ee.req.limit===W.limit&&ee.req.values===W.values&&Sf(ee.req.query.range,W.query.range)});return J?[J,!0,Y,Z]:[Z.find(function(ee){return("limit"in ee.req?ee.req.limit:1/0)>=W.limit&&(!W.values||ee.req.values)&&$b(ee.req.query.range,W.query.range)}),!1,Y,Z];case"count":return J=Z.find(function(ee){return Sf(ee.req.query.range,W.query.range)}),[J,!!J,Y,Z]}}(d,y,"query",$),V=D[0],M=D[1],q=D[2],N=D[3];return V&&M?V.obsSet=$.obsSet:(M=w.query($).then(function(z){var H=z.result;if(V&&(V.res=H),C){for(var j=0,W=H.length;j<W;++j)Object.freeze(H[j]);Object.freeze(H)}else z.result=et(H);return z}).catch(function(z){return N&&V&&Be(N,V),Promise.reject(z)}),V={obsSet:$.obsSet,promise:M,subscribers:new Set,type:"query",req:$,dirty:!1},N?N.push(V):(N=[V],(q=q||(pi["idb://".concat(d,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[$.query.index.name||""]=N)),kb(V,N,B,F),V.promise.then(function(z){return{result:Ef(z.result,$,q==null?void 0:q.optimisticOps,w,V,C)}})}})}})}};function Wa(c,d){return new Proxy(c,{get:function(y,w,x){return w==="db"?d:Reflect.get(y,w,x)}})}var sr=(gt.prototype.version=function(c){if(isNaN(c)||c<.1)throw new ye.Type("Given version is not a positive number");if(c=Math.round(10*c)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,c);var d=this._versions,y=d.filter(function(w){return w._cfg.version===c})[0];return y||(y=new this.Version(c),d.push(y),d.sort(gb),y.stores({}),this._state.autoSchema=!1,y)},gt.prototype._whenReady=function(c){var d=this;return this.idbdb&&(this._state.openComplete||re.letThrough||this._vip)?c():new fe(function(y,w){if(d._state.openComplete)return w(new ye.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void w(new ye.DatabaseClosed);d.open().catch(Ae)}d._state.dbReadyPromise.then(y,w)}).then(c)},gt.prototype.use=function(c){var d=c.stack,y=c.create,w=c.level,x=c.name;return x&&this.unuse({stack:d,name:x}),c=this._middlewares[d]||(this._middlewares[d]=[]),c.push({stack:d,create:y,level:w??10,name:x}),c.sort(function($,C){return $.level-C.level}),this},gt.prototype.unuse=function(c){var d=c.stack,y=c.name,w=c.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(x){return w?x.create!==w:!!y&&x.name!==y})),this},gt.prototype.open=function(){var c=this;return hi(xe,function(){return xb(c)})},gt.prototype._close=function(){var c=this._state,d=no.indexOf(this);if(0<=d&&no.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}c.isBeingOpened||(c.dbReadyPromise=new fe(function(y){c.dbReadyResolve=y}),c.openCanceller=new fe(function(y,w){c.cancelOpen=w}))},gt.prototype.close=function(y){var d=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;d?(y.isBeingOpened&&y.cancelOpen(new ye.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new ye.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},gt.prototype.delete=function(c){var d=this;c===void 0&&(c={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",w=this._state;return new fe(function(x,$){function C(){d.close(c);var B=d._deps.indexedDB.deleteDatabase(d.name);B.onsuccess=ut(function(){var F,D,V;F=d._deps,D=d.name,V=F.indexedDB,F=F.IDBKeyRange,xu(V)||D===Ta||vu(V,F).delete(D).catch(Ae),x()}),B.onerror=Vn($),B.onblocked=d._fireOnBlocked}if(y)throw new ye.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then(C):C()})},gt.prototype.backendDB=function(){return this.idbdb},gt.prototype.isOpen=function(){return this.idbdb!==null},gt.prototype.hasBeenClosed=function(){var c=this._state.dbOpenError;return c&&c.name==="DatabaseClosed"},gt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},gt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(gt.prototype,"tables",{get:function(){var c=this;return l(this._allTables).map(function(d){return c._allTables[d]})},enumerable:!1,configurable:!0}),gt.prototype.transaction=function(){var c=(function(d,y,w){var x=arguments.length;if(x<2)throw new ye.InvalidArgument("Too few arguments");for(var $=new Array(x-1);--x;)$[x-1]=arguments[x];return w=$.pop(),[d,ve($),w]}).apply(this,arguments);return this._transaction.apply(this,c)},gt.prototype._transaction=function(c,d,y){var w=this,x=re.trans;x&&x.db===this&&c.indexOf("!")===-1||(x=null);var $,C,B=c.indexOf("?")!==-1;c=c.replace("!","").replace("?","");try{if(C=d.map(function(D){if(D=D instanceof w.Table?D.name:D,typeof D!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return D}),c=="r"||c===cu)$=cu;else{if(c!="rw"&&c!=uu)throw new ye.InvalidArgument("Invalid transaction mode: "+c);$=uu}if(x){if(x.mode===cu&&$===uu){if(!B)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&C.forEach(function(D){if(x&&x.storeNames.indexOf(D)===-1){if(!B)throw new ye.SubTransaction("Table "+D+" not included in parent transaction.");x=null}}),B&&x&&!x.active&&(x=null)}}catch(D){return x?x._promise(null,function(V,M){M(D)}):yt(D)}var F=(function D(V,M,q,N,z){return fe.resolve().then(function(){var H=re.transless||re,j=V._createTransaction(M,q,V._dbSchema,N);if(j.explicit=!0,H={trans:j,transless:H},N)j.idbtrans=N.idbtrans;else try{j.create(),j.idbtrans._explicit=!0,V._state.PR1398_maxLoop=3}catch(Z){return Z.name===Wt.InvalidState&&V.isOpen()&&0<--V._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),V.close({disableAutoOpen:!1}),V.open().then(function(){return D(V,M,q,null,z)})):yt(Z)}var W,Y=tt(z);return Y&&to(),H=fe.follow(function(){var Z;(W=z.call(j,j))&&(Y?(Z=Tr.bind(null,null),W.then(Z,Z)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=Pu(W)))},H),(W&&typeof W.then=="function"?fe.resolve(W).then(function(Z){return j.active?Z:yt(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):H.then(function(){return W})).then(function(Z){return N&&j._resolve(),j._completion.then(function(){return Z})}).catch(function(Z){return j._reject(Z),yt(Z)})})}).bind(null,this,$,C,x,y);return x?x._promise($,F,"lock"):re.trans?hi(re.transless,function(){return w._whenReady(F)}):this._whenReady(F)},gt.prototype.table=function(c){if(!v(this._allTables,c))throw new ye.InvalidTable("Table ".concat(c," does not exist"));return this._allTables[c]},gt);function gt(c,d){var y=this;this._middlewares={},this.verno=0;var w=gt.dependencies;this._options=d=i({addons:gt.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},w=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var x,$,C,B,F,D={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ae,dbReadyPromise:null,cancelOpen:Ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};D.dbReadyPromise=new fe(function(M){D.dbReadyResolve=M}),D.openCanceller=new fe(function(M,q){D.cancelOpen=q}),this._state=D,this.name=c,this.on=Xo(this,"populate","blocked","versionchange","close",{ready:[st,Ae]}),this.on.ready.subscribe=U(this.on.ready.subscribe,function(M){return function(q,N){gt.vip(function(){var z,H=y._state;H.openComplete?(H.dbOpenError||fe.resolve().then(q),N&&M(q)):H.onReadyBeingFired?(H.onReadyBeingFired.push(q),N&&M(q)):(M(q),z=y,N||M(function j(){z.on.ready.unsubscribe(q),z.on.ready.unsubscribe(j)}))})}}),this.Collection=(x=this,Jo(lb.prototype,function(W,j){this.db=x;var N=tf,z=null;if(j)try{N=j()}catch(Y){z=Y}var H=W._ctx,j=H.table,W=j.hook.reading.fire;this._ctx={table:j,index:H.index,isPrimKey:!H.index||j.schema.primKey.keyPath&&H.index===j.schema.primKey.name,range:N,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:z,or:H.or,valueMapper:W!==Nt?W:null}})),this.Table=($=this,Jo(sf.prototype,function(M,q,N){this.db=$,this._tx=N,this.name=M,this.schema=q,this.hook=$._allTables[M]?$._allTables[M].hook:Xo(null,{creating:[Yo,Ae],reading:[Pr,Nt],updating:[ui,Ae],deleting:[Zo,Ae]})})),this.Transaction=(C=this,Jo(fb.prototype,function(M,q,N,z,H){var j=this;this.db=C,this.mode=M,this.storeNames=q,this.schema=N,this.chromeTransactionDurability=z,this.idbtrans=null,this.on=Xo(this,"complete","error","abort"),this.parent=H||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe(function(W,Y){j._resolve=W,j._reject=Y}),this._completion.then(function(){j.active=!1,j.on.complete.fire()},function(W){var Y=j.active;return j.active=!1,j.on.error.fire(W),j.parent?j.parent._reject(W):Y&&j.idbtrans&&j.idbtrans.abort(),yt(W)})})),this.Version=(B=this,Jo(vb.prototype,function(M){this.db=B,this._cfg={version:M,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(F=this,Jo(hf.prototype,function(M,q,N){if(this.db=F,this._ctx={table:M,index:q===":id"?null:q,or:N},this._cmp=this._ascending=Ye,this._descending=function(z,H){return Ye(H,z)},this._max=function(z,H){return 0<Ye(z,H)?z:H},this._min=function(z,H){return Ye(z,H)<0?z:H},this._IDBKeyRange=F._deps.IDBKeyRange,!this._IDBKeyRange)throw new ye.MissingAPI})),this.on("versionchange",function(M){0<M.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(M){!M.newVersion||M.newVersion<M.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(M.oldVersion/10))}),this._maxKey=ns(d.IDBKeyRange),this._createTransaction=function(M,q,N,z){return new y.Transaction(M,q,N,y._options.chromeTransactionDurability,z)},this._fireOnBlocked=function(M){y.on("blocked").fire(M),no.filter(function(q){return q.name===y.name&&q!==y&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(M)})},this.use(Sb),this.use(Cb),this.use(Ab),this.use(_b),this.use(Eb);var V=new Proxy(this,{get:function(M,q,N){if(q==="_vip")return!0;if(q==="table")return function(H){return Wa(y.table(H),V)};var z=Reflect.get(M,q,N);return z instanceof sf?Wa(z,V):q==="tables"?z.map(function(H){return Wa(H,V)}):q==="_createTransaction"?function(){return Wa(z.apply(this,arguments),V)}:z}});this.vip=V,w.forEach(function(M){return M(y)})}var Ga,yn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Pb=(Ou.prototype.subscribe=function(c,d,y){return this._subscribe(c&&typeof c!="function"?c:{next:c,error:d,complete:y})},Ou.prototype[yn]=function(){return this},Ou);function Ou(c){this._subscribe=c}try{Ga={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Ga={indexedDB:null,IDBKeyRange:null}}function Af(c){var d,y=!1,w=new Pb(function(x){var $=tt(c),C,B=!1,F={},D={},V={get closed(){return B},unsubscribe:function(){B||(B=!0,C&&C.abort(),M&&Rr.storagemutated.unsubscribe(N))}};x.start&&x.start(V);var M=!1,q=function(){return au(z)},N=function(H){Va(F,H),Au(D,F)&&q()},z=function(){var H,j,W;!B&&Ga.indexedDB&&(F={},H={},C&&C.abort(),C=new AbortController,W=function(Y){var Z=Qi();try{$&&to();var J=Ir(c,Y);return J=$?J.finally(Tr):J}finally{Z&&eo()}}(j={subscr:H,signal:C.signal,requery:q,querier:c,trans:null}),Promise.resolve(W).then(function(Y){y=!0,d=Y,B||j.signal.aborted||(F={},function(Z){for(var J in Z)if(v(Z,J))return;return 1}(D=H)||M||(Rr(ts,N),M=!0),au(function(){return!B&&x.next&&x.next(Y)}))},function(Y){y=!1,["DatabaseClosedError","AbortError"].includes(Y==null?void 0:Y.name)||B||au(function(){B||x.error&&x.error(Y)})}))};return setTimeout(q,0),V});return w.hasValue=function(){return y},w.getValue=function(){return d},w}var mi=sr;function Ru(c){var d=Mr;try{Mr=!0,Rr.storagemutated.fire(c),Cu(c,!0)}finally{Mr=d}}_(mi,i(i({},ot),{delete:function(c){return new mi(c,{addons:[]}).delete()},exists:function(c){return new mi(c,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(c){try{return d=mi.dependencies,y=d.indexedDB,d=d.IDBKeyRange,(xu(y)?Promise.resolve(y.databases()).then(function(w){return w.map(function(x){return x.name}).filter(function(x){return x!==Ta})}):vu(y,d).toCollection().primaryKeys()).then(c)}catch{return yt(new ye.MissingAPI)}var d,y},defineClass:function(){return function(c){p(this,c)}},ignoreTransaction:function(c){return re.trans?hi(re.transless,c):c()},vip:_u,async:function(c){return function(){try{var d=Pu(c.apply(this,arguments));return d&&typeof d.then=="function"?d:fe.resolve(d)}catch(y){return yt(y)}}},spawn:function(c,d,y){try{var w=Pu(c.apply(y,d||[]));return w&&typeof w.then=="function"?w:fe.resolve(w)}catch(x){return yt(x)}},currentTransaction:{get:function(){return re.trans||null}},waitFor:function(c,d){return d=fe.resolve(typeof c=="function"?mi.ignoreTransaction(c):c).timeout(d||6e4),re.trans?re.trans.waitFor(d):d},Promise:fe,debug:{get:function(){return At},set:function(c){Xi(c)}},derive:P,extend:p,props:_,override:U,Events:Xo,on:Rr,liveQuery:Af,extendObservabilitySet:Va,getByKeyPath:te,setByKeyPath:ne,delByKeyPath:function(c,d){typeof d=="string"?ne(c,d,void 0):"length"in d&&[].map.call(d,function(y){ne(c,y,void 0)})},shallowClone:de,deepClone:et,getObjectDiff:Iu,cmp:Ye,asap:X,minKey:-1/0,addons:[],connections:no,errnames:Wt,dependencies:Ga,cache:pi,semVer:"4.0.7",version:"4.0.7".split(".").map(function(c){return parseInt(c)}).reduce(function(c,d,y){return c+d/Math.pow(10,2*y)})})),mi.maxKey=ns(mi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rr(ts,function(c){Mr||(c=new CustomEvent(fu,{detail:c}),Mr=!0,dispatchEvent(c),Mr=!1)}),addEventListener(fu,function(c){c=c.detail,Mr||Ru(c)}));var oo,Mr=!1,$f=function(){};return typeof BroadcastChannel<"u"&&(($f=function(){(oo=new BroadcastChannel(fu)).onmessage=function(c){return c.data&&Ru(c.data)}})(),typeof oo.unref=="function"&&oo.unref(),Rr(ts,function(c){Mr||oo.postMessage(c)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(c){if(!sr.disableBfCache&&c.persisted){At&&console.debug("Dexie: handling persisted pagehide"),oo!=null&&oo.close();for(var d=0,y=no;d<y.length;d++)y[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(c){!sr.disableBfCache&&c.persisted&&(At&&console.debug("Dexie: handling persisted pageshow"),$f(),Ru({all:new Ft(-1/0,[[]])}))})),fe.rejectionMapper=function(c,d){return!c||c instanceof ct||c instanceof TypeError||c instanceof SyntaxError||!c.name||!An[c.name]?c:(d=new An[c.name](d||c.message,c),"stack"in c&&S(d,"stack",{get:function(){return this.inner.stack}}),d)},Xi(At),i(sr,Object.freeze({__proto__:null,Dexie:sr,liveQuery:Af,Entity:nf,cmp:Ye,PropModSymbol:or,PropModification:Qo,replacePrefix:function(c,d){return new Qo({replacePrefix:[c,d]})},add:function(c){return new Qo({add:c})},remove:function(c){return new Qo({remove:c})},default:sr,RangeSet:Ft,mergeRanges:os,rangesOverlap:Ua}),{default:sr}),sr})})(vg);var f$=vg.exports;const lh=d$(f$),jp=Symbol.for("Dexie"),gc=globalThis[jp]||(globalThis[jp]=lh);if(lh.semVer!==gc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${lh.semVer} and ${gc.semVer}`);const{liveQuery:p$,mergeRanges:fI,rangesOverlap:pI,RangeSet:mI,cmp:yI,Entity:gI,PropModSymbol:bI,PropModification:wI,replacePrefix:vI,add:xI,remove:_I}=gc;var m$=Object.defineProperty,y$=Object.getOwnPropertyDescriptor,wa=(e,t,n,r)=>{for(var i=y$(t,n),o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=s(t,n,i)||i);return i&&m$(t,n,i),i},zp=new Kc(1e4),ll=new Kc(5e3),Up=new Kc(5e3),Zi=class{constructor(){this.host=Yc("oneInchDevPortalHost")}async getWhiteListedTokens(e){return(await(await fetch(`${this.host}/token/v1.2/${e}/token-list`)).json()).tokens}async getBalancesByWalletAddress(e,t){return await(await fetch(`${this.host}/balance/v1.2/${e}/balances/${t}`)).json()}async getTokenPrices(e){const t=zp.get(e);if(t)return t;const n=new URLSearchParams({currency:"USD"}),i=await(await fetch(`${this.host}/price/v1.1/${e}?${n}`)).json();return zp.set(e,i),i}async getFusionQuoteReceive(e,t,n,r,i,o,s=!1){const{auctionDuration:l,auctionEndAmount:h,auctionStartAmount:p,points:m}=o??{},g=[e,t,n,r,i,s,l,h,p,m==null?void 0:m.join(",")].filter(Boolean).join(":"),v=ll.get(g);if(v)return v;const _=new URLSearchParams({fromTokenAddress:t,toTokenAddress:n,walletAddress:i,amount:r.toString(),enableEstimate:s.toString(),isLedgerLive:"false"}),E=await fetch(`${this.host}/fusion/quoter/v2.0/${e}/quote/receive?${_}`,{method:o?"POST":"GET",body:o&&JSON.stringify(o)});if(!E.ok)return ll.set(g,null),null;const S=await E.json();return ll.set(g,S),{...S,chainId:e}}async getGasPrice(e){const t=Up.get(e);if(t)return t;const n=await fetch(`${this.host}/gas-price/v1.5/${e}`);if(!n.ok)return null;const r=await n.json();return Up.set(e,r),r}};wa([Sn()],Zi.prototype,"getWhiteListedTokens");wa([Sn()],Zi.prototype,"getBalancesByWalletAddress");wa([Sn()],Zi.prototype,"getTokenPrices");wa([Sn()],Zi.prototype,"getFusionQuoteReceive");wa([Sn()],Zi.prototype,"getGasPrice");var g$=Object.defineProperty,b$=Object.getOwnPropertyDescriptor,Od=(e,t,n,r)=>{for(var i=b$(t,n),o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=s(t,n,i)||i);return i&&g$(t,n,i),i},Vp=cn(["function getPair(address tokenA, address tokenB) external view returns (address pair)"]),qp=cn(["function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)","function token0() external view returns (address)","function token1() external view returns (address)"]),Rd=class{constructor(e,t,n){this.name=e,this.factoryContractGetter=t,this.supportedChain=n,this.pools=new Pd(`${this.name}_pools`,7)}isSupportedChain(e){return this.supportedChain.includes(e)}async getRate(e,t,n){try{const r=Vr(t.address),i=Vr(n.address),[o,s]=await this.getPool(e,r,i);if(o===Wn)return null;const l=await this.getReserves(e,o),h=l[2];if(Date.now()-h*1e3>36e5)return null;const p=!er(t.address,s),m=Rn.div(p?l[0]:l[1],p?l[1]:l[0],n.decimals,t.decimals,t.decimals),g=Rn.div(p?l[1]:l[0],p?l[0]:l[1],t.decimals,n.decimals,n.decimals);return{chainId:e,rate:m,revertedRate:g,isReverted:p,sourceToken:t,destinationToken:n}}catch(r){return console.error(`Error in UniswapV2BaseAdapter adapter name ${this.name}`,r),null}}async getPool(e,t,n){const r=[e,t,n].join(":");if(this.pools.has(r))return this.pools.get(r);const i=[e,n,t].join(":");if(this.pools.has(i))return this.pools.get(i);const o=pn(e);let s=await o.readContract({address:Vr(this.factoryContractGetter(e)),functionName:"getPair",args:[t,n],abi:Vp});s!==Wn&&(s=await o.readContract({address:Vr(this.factoryContractGetter(e)),functionName:"getPair",args:[n,t],abi:Vp}));let l=Wn;return s!==Wn&&(l=await o.readContract({address:s,abi:qp,functionName:"token0"})),this.pools.set(r,[s,l]),this.pools.set(i,[s,l]),[s,l]}async getReserves(e,t){return await pn(e).readContract({address:t,abi:qp,functionName:"getReserves"})}},w$=new Rd("UniswapV2",()=>"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",[R.eth,R.bnb,R.matic,R.op,R.arbitrum,R.avalanche]),v$={[R.eth]:"0xC0AeE478e3658e2610c5F7A4A2E1777cE9e4f2Ac",[R.bnb]:"0xc35dadb65012ec5796536bd9864ed8773abc74c4",[R.matic]:"0xc35dadb65012ec5796536bd9864ed8773abc74c4",[R.gnosis]:"0xc35dadb65012ec5796536bd9864ed8773abc74c4",[R.fantom]:"0xc35dadb65012ec5796536bd9864ed8773abc74c4",[R.avalanche]:"0xc35dadb65012ec5796536bd9864ed8773abc74c4",[R.arbitrum]:"0xc35dadb65012ec5796536bd9864ed8773abc74c4"},x$=new Rd("SushiSwapV2",e=>v$[e],[R.eth,R.bnb,R.matic,R.gnosis,R.fantom,R.arbitrum,R.avalanche]),_$={[R.eth]:"0x1097053Fd2ea711dad45caCcc45EfF7548fCB362",[R.bnb]:"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73",[R.arbitrum]:"0x02a84c1b3BBD7401a5f7fa98a384EBC70bB5749E"},E$=new Rd("PancakeSwapV2",e=>_$[e],[R.eth,R.bnb,R.arbitrum]),S$=cn(["function getPool(address tokenA, address tokenB, uint24 fee) external view returns (address pool)"]),hl=cn(["function liquidity() external view returns (uint128)","function slot0() external view returns (uint160 sqrtPriceX96, int24 tick, uint16 observationIndex, uint16 observationCardinality, uint16 observationCardinalityNext, uint8 feeProtocol, bool unlocked)","function token0() external view returns (address)","function token1() external view returns (address)"]),Xc=class{constructor(e,t,n,r){this.name=e,this.factoryContractGetter=t,this.supportedChain=n,this.feeTiers=r,this.pools=new Pd(`${this.name}_pools`,7),this.liquidityCache=new Zc}isSupportedChain(e){return this.supportedChain.includes(e)}async getRate(e,t,n){try{const r=Vr(t.address),i=Vr(n.address),[o,s]=await this.getPool(e,r,i);if(o===Wn)return null;const l=!er(t.address,s),[h,p]=await Promise.all([this.getSqrtPriceX96(e,o),this.getLiquidity(e,o)]),[m,g]=this.calculatePrice(h,t,n,p,l);return{chainId:e,rate:m,revertedRate:g,sourceToken:t,destinationToken:n,isReverted:l}}catch(r){return console.error(`Error in UniswapV3BaseRateAdapter adapter name ${this.name}`,r),null}}async getPool(e,t,n){const r=[e,t,n].join(":");if(this.pools.has(r))return this.pools.get(r);const i=[e,n,t].join(":");if(this.pools.has(i))return this.pools.get(i);const o=pn(e);let s=Wn,l=0n;for(const h of this.feeTiers){const p=await o.readContract({address:Vr(this.factoryContractGetter(e)),functionName:"getPool",args:[t,n,h],abi:S$});if(p===Wn)continue;const m=await this.getLiquidity(e,p);m>l&&(l=m,s=p)}if(s!==Wn){const h=await o.readContract({address:s,abi:hl,functionName:"token0"});return this.pools.set(r,[s,h]),this.pools.set(i,[s,h]),[s,h]}return[Wn,Wn]}async getSqrtPriceX96(e,t){const n=pn(e),[r]=await n.readContract({address:t,abi:hl,functionName:"slot0"});return r}async getLiquidity(e,t){const n=this.liquidityCache.get(e,t);if(n)return n;const i=await pn(e).readContract({address:t,functionName:"liquidity",abi:hl});return this.liquidityCache.set(e,t,i),i}calculatePrice(e,t,n,r,i){const o=2n**96n,s=r*o/e,l=r*e/o;return[Rn.div(i?s:l,i?l:s,n.decimals,t.decimals,t.decimals),Rn.div(i?l:s,i?s:l,t.decimals,n.decimals,n.decimals)]}};function A$(e){return e===R.bnb?"0xdB1d10011AD0Ff90774D0C6Bb92e5C5c8b4461F7":e===R.avalanche?"0x740b1c1de25031C31FF4fC9A62f554A55cdC1baD":"0x1F98431c8aD98523631AE4a59f267346ea31F984"}var $$=new Xc("UniswapV3",A$,[R.eth,R.bnb,R.matic,R.op,R.arbitrum,R.avalanche],[100,500,3e3,1e4]);function k$(e){return e===R.zkSyncEra?"0x1BB72E0CbbEA93c08f535fc7856E0338D7F7a8aB":"0x0BFbCF9fa4f9C56B0F40a671Ad40E0805A091865"}var C$=new Xc("PancakeSwapV3",k$,[R.eth,R.bnb,R.arbitrum,R.zkSyncEra],[100,500,2500,1e4]),P$={[R.eth]:"0xbACEB8eC6b9355Dfc0269C18bac9d6E2Bdc29C4F",[R.bnb]:"0x126555dd55a39328F69400d6aE4F782Bd4C34ABb",[R.matic]:"0x917933899c6a5F8E37F31E19f92CdBFF7e8FF0e2",[R.gnosis]:"0xf78031CBCA409F2FB6876BDFDBc1b2df24cF9bEf",[R.fantom]:"0x7770978eED668a3ba661d51a773d3a992Fc9DDCB",[R.avalanche]:"0x3e603C14aF37EBdaD31709C4f848Fc6aD5BEc715",[R.arbitrum]:"0x1af415a1EbA07a4986a52B6f2e7dE7003D82231e",[R.op]:"0x9c6522117e2ed1fE5bdb72bb0eD5E3f2bdE7DBe0"},I$=new Xc("SushiSwapV3",e=>P$[e],[R.eth,R.bnb,R.op,R.matic,R.gnosis,R.fantom,R.arbitrum,R.avalanche],[100,500,3e3,1e4]),T$=new Xc("SpookySwapV3",()=>"0x7928a2c48754501f3a8064765ECaE541daE5c3E6",[R.fantom],[100,500,3e3,1e4]),xg=class{constructor(e){this.onChainAdapters=e,this.rateCache=new Zc}async getOnChainRate(e,t,n){const r=await this.getOnChainRawRate(e,t,n);if(r.length===0)return null;const i=s=>s.isReverted?s.revertedRate:s.rate;let o=r[0];for(const s of r)i(s)>i(o)&&(o=s);return o}listenOnChainRate(e,t,n){return ba(e).pipe(Ot(null),He(()=>this.getOnChainRate(e,t,n)))}async getOnChainRawRate(e,t,n){let r=t,i=n;if(_r(t.address)){const m=Js(e);if(!m)return[];r=m}if(_r(n.address)){const m=Js(e);if(!m)return[];i=m}const o=[r.address,i.address].join(":"),s=this.rateCache.get(e,o);if(s!==null)return s;const l=this.onChainAdapters.filter(m=>m.isSupportedChain(e)),p=(await Promise.all(l.map(m=>m.getRate(e,r,i)))).filter(m=>m!==null);return this.rateCache.set(e,o,p),p}};Od([Sn((e,t,n,r)=>[t,n.address,r.address].join(":"))],xg.prototype,"getOnChainRate");function _g(){return new xg([$$,C$,I$,T$,w$,x$,E$])}var B$={[R.eth]:"0xdac17f958d2ee523a2206206994597c13d831ec7",[R.bnb]:"0x55d398326f99059ff775485246999027b3197955",[R.matic]:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",[R.op]:"0x94b008aa00579c1307b0ef2c499ad98a8ce58e58",[R.arbitrum]:"0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9",[R.gnosis]:"0x4ecaba5870353805a9f068101a40e0f32ed605c6",[R.avalanche]:"0xc7198437980c041c805a1edcba50c1ce5db95118",[R.fantom]:"0xcc1b99ddac1a33c201a742a1851662e87bc7f22c",[R.aurora]:"0x4988a896b1227218e4a686fde5eabdcabd91571f",[R.klaytn]:"0x754288077d0ff82af7a5317c7cb8c444d421d103",[R.zkSyncEra]:"0x493257fd37edb34451f62edf8d2a0c418852ba4c"},O$=6,R$=class{constructor(){this.rateProvider=_g()}async getPrice(e,t){const n=B$[e];if(er(t.address,n))return"1";const r=await this.rateProvider.getOnChainRate(e,{address:n,chainId:e,decimals:O$,name:"USDT",symbol:"USDT"},t);return r?Vt(r.rate,t.decimals):"0"}},Hp={native:1e3,USDT:100,USDC:100,WETH:62,"1INCH":61,"PEG:ETH":60,"PEG:USD":50,"PEG:BTC":40,"PEG:EUR":30,staking:20,savings:10,tokens:0},Ri,Md=(Ri=class extends gc{constructor(){super("one-inch-token"),this.tokenCache=new og(50),this.version(Ri.databaseVersion).stores({tokens:["id","address","decimals","chainId","name","symbol","*tags","eip2612","logoURL","isFavorite","priority"].join(", "),balances:["id","chainId","tokenAddress","walletAddress","amount"].join(", ")})}async getToken(t,n){const r=co(t,n);if(this.tokenCache.has(r))return this.tokenCache.get(r);const i=await this.tokens.where("id").equals(r).toArray();return this.tokenCache.set(r,i[0]),i[0]??null}async getNativeToken(t){return this.getToken(t,Td)}getTokenBySymbol(t,n){return this.tokens.where("chainId").equals(t).filter(r=>r.symbol===n).toArray()}async getTokenMap(t,n){const r=new Set(n),i={};return await this.tokens.each(o=>{o.chainId===t&&r.has(o.address)&&(i[o.address]=o)}),i}getTokenList(t,n){const r=new Set(n);return this.tokens.filter(i=>i.chainId===t&&r.has(i.address)).toArray()}async getTokenBalanceMap(t,n,r){const i=new Set(r),o={};return await this.balances.each(s=>{s.chainId===t&&s.walletAddress===n&&i.has(s.tokenAddress)&&(o[s.tokenAddress]=BigInt(s.amount))}),o}async getTokens(t,n){const r=new Set(n);return this.tokens.filter(i=>i.chainId===t&&r.has(i.address)).toArray()}async getAllTokenAddresses(t){const n=[];return await this.tokens.where("chainId").equals(t).each(r=>n.push(r.address)),n}async getTokenBalance(t,n,r){const i=co(t,r,n);return(await this.balances.where("id").equals(i).toArray())[0]??null}async isEmptyTokenBalanceStorage(t,n){return this.balances.filter(r=>r.chainId===t&&er(r.walletAddress,n)).toArray().then(r=>r.length===0)}async setTokens(t,n){var i;const r=[];for(const o of n)r.push({id:co(t,o.address),address:o.address,decimals:o.decimals,eip2612:((i=o.extensions)==null?void 0:i.eip2612)??null,name:o.name,symbol:o.symbol,tags:o.tags,logoURL:o.logoURI,isFavorite:!1,chainId:t,priority:M$(o)});this.tokenCache.clear(),await this.tokens.bulkPut(r)}async setBalances(t,n,r){const i=[];for(const o in r){const s=o;i.push({id:co(t,n,s),chainId:t,tokenAddress:s,walletAddress:n,amount:r[s]})}await this.balances.bulkPut(i)}async getAllFavoriteTokenAddresses(t){const n=[];return await this.tokens.where("chainId").equals(t).each(r=>{r.isFavorite&&n.push(r.address)}),n}async getSortedForViewTokenAddresses(t,n,r){const i={},o={},s=new Set,l=[],h=[],p=n.toLowerCase();return r&&await this.balances.where("chainId").equals(t).and(m=>er(m.walletAddress,r)).each(m=>i[m.tokenAddress]=BigInt(m.amount)),await this.tokens.where("chainId").equals(t).each(m=>{if(!(p!==""&&!m.address.toLowerCase().includes(p)&&!m.name.toLowerCase().startsWith(p)&&!m.symbol.toLowerCase().startsWith(p))){if(i[m.address]&&i[m.address]>0n){l.push(m.address);return}o[m.address]=m.priority,h.push(m.address),m.isFavorite&&s.add(m.address)}}),{notZero:l,zero:h.sort((m,g)=>{const v=o[m],_=o[g],E=s.has(m),S=s.has(g);return E===S?v<_?1:v>_?-1:0:E?-1:S?1:0})}}async setFavoriteState(t,n,r){const i=co(t,n);this.tokenCache.delete(i),await this.tokens.update(i,{isFavorite:r})}async setEip2612Support(t,n,r){const i=co(t,n);await this.tokens.update(i,{eip2612:r})}},Ri.databaseVersion=4,Ri);function co(...e){return e.join(":")}function M$(e){var n;let t=((n=e.providers)==null?void 0:n.length)??0;t+=Hp[e.symbol]??0;for(const r of e.tags)t+=Hp[r]??0;return t}var D$={[R.eth]:11e3,[R.bnb]:3e3,[R.matic]:3e3,[R.op]:3e3,[R.arbitrum]:3e3,[R.gnosis]:5e3,[R.avalanche]:3e3,[R.fantom]:3e3,[R.aurora]:3e3,[R.klaytn]:3e3,[R.zkSyncEra]:3e3},dl=`last-update-token-database-timestamp-v${Md.databaseVersion}`,fl=`last-update-token-balance-database-timestamp-v${Md.databaseVersion}`,N$=6048e5,F$=D$,Dd=class{constructor(){this.schema=new Md,this.tokenUsdPriceProvider=new R$,this.oneInchApiAdapter=new Zi,this.lastUpdateTokenDatabaseTimestampStorage=nt.get(dl,Gn),this.lastUpdateTokenBalanceDatabaseTimestampStorage=nt.get(fl,Gn)}async getSortedForViewTokenAddresses(e,t,n){await this.updateTokenDatabase(e),n&&await this.updateBalanceDatabase(e,n);const r=await this.schema.getSortedForViewTokenAddresses(e,t,n);if(n){const i=await this.getTokenUSDPrices(e,r.notZero),o=await this.getTokenMap(e,r.notZero),s=await this.getTokenBalanceMap(e,n,r.notZero),l=await this.getAllFavoriteTokenAddresses(e),h=new Set(l),p={};for(const m of r.notZero){const g=o[m],v=i[m],_=Vt(s[m],g.decimals);p[m]=Number(_)*Number(v)}return[...r.notZero.sort((m,g)=>{const v=h.has(m),_=h.has(g);return v===_?p[g]-p[m]:v?-1:1}),...r.zero]}return[...r.notZero,...r.zero]}async getToken(e,t){return await this.updateTokenDatabase(e),await this.schema.getToken(e,t)}async getNativeToken(e){return await this.updateTokenDatabase(e),await this.schema.getNativeToken(e)}async getTokenBySymbol(e,t){return await this.updateTokenDatabase(e),this.schema.getTokenBySymbol(e,t)}async getTokenList(e,t){return await this.updateTokenDatabase(e),await this.schema.getTokenList(e,t)}async getTokenMap(e,t){return await this.schema.getTokenMap(e,t)}async getTokenBalanceMap(e,t,n){return await this.updateBalanceDatabase(e,t),await this.schema.getTokenBalanceMap(e,t,n)}async getTokenBalance(e,t,n){return await this.updateBalanceDatabase(e,n,t),await this.schema.getTokenBalance(e,t,n)}async getTokenUSDPrice(e,t){return(await this.getTokenUSDPrices(e,[t]))[t]}async getPriorityToken(e,t){const n=await this.getTokenList(e,t),r=i=>i.tags.includes("PEG:USD")||i.tags.includes("PEG:EUR");return n.sort((i,o)=>{const s=r(i),l=r(o);return s&&l?i.priority-o.priority:s&&!l?-1:!s&&l?1:i.priority-o.priority})[0]}async setFavoriteState(e,t,n){await this.schema.setFavoriteState(e,t,n)}async getAllFavoriteTokenAddresses(e){return await this.schema.getAllFavoriteTokenAddresses(e)}async getTokenUSDPrices(e,t){const n={},r=await this.oneInchApiAdapter.getTokenPrices(e).catch(()=>null);if(r===null){const i=await this.schema.getTokens(e,t);return await Promise.all(i.map(o=>this.tokenUsdPriceProvider.getPrice(e,o).catch(()=>"0").then(s=>n[o.address]=s))),n}for(const i of t)n[i]=r[i]??"0";return n}async isSupportedTokenPermit(e,t){const n=await this.schema.getToken(e,t);if(!n)return!1;if(n.eip2612===null){const r=await GA(e,t);return await this.schema.setEip2612Support(e,t,r),r}return n.eip2612}async updateTokenDatabase(e){var r;const t=(r=this.lastUpdateTokenDatabaseTimestampStorage)==null?void 0:r[e];if(t&&Date.now()-t<N$)return;const n=await this.oneInchApiAdapter.getWhiteListedTokens(e);await this.schema.setTokens(e,n),nt.updateEntity(dl,e.toString(),Date.now()),this.lastUpdateTokenDatabaseTimestampStorage=nt.get(dl,Gn)}async updateBalanceDatabase(e,t,n){var s;const r=[e,t].join(":"),i=(s=this.lastUpdateTokenBalanceDatabaseTimestampStorage)==null?void 0:s[r];if(i&&Date.now()-i<F$[e])return;const o=async()=>{let l=await this.oneInchApiAdapter.getBalancesByWalletAddress(e,t).catch(()=>null);l===null&&(l=await this.getBalancesOnChain(e,t)),await this.schema.setBalances(e,t,l),nt.updateEntity(fl,r,Date.now()),this.lastUpdateTokenBalanceDatabaseTimestampStorage=nt.get(fl,Gn)};if(n){if(await this.schema.getTokenBalance(e,n,t)===null)return await o()}else if(await this.schema.isEmptyTokenBalanceStorage(e,t))return await o();o().catch(l=>console.error(l))}liveQuery(e){return p$(e)}async getBalancesOnChain(e,t){const n=await this.schema.getAllTokenAddresses(e);return TA(e,t,n)}};Od([Sn()],Dd.prototype,"updateTokenDatabase");Od([Sn()],Dd.prototype,"updateBalanceDatabase");var rn=new Dd;function Zn(e,t){const n=er(e.address,t.address),r=e.chainId===t.chainId;return n&&r}function L$(e,t){return e.rate===t.rate&&e.chainId===t.chainId&&e.revertedRate===t.revertedRate&&Zn(e.sourceToken,t.sourceToken)&&Zn(e.destinationToken,t.destinationToken)}var j$=Object.defineProperty,z$=Object.getOwnPropertyDescriptor,zn=(e,t,n,r)=>{for(var i=r>1?void 0:r?z$(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&j$(t,n,i),i};const pr=()=>new U$;class U${}const pl=new WeakMap,In=tr(class extends zo{render(e){return bt}update(e,[t]){var r;const n=t!==this.Y;return n&&this.Y!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.Y=t,this.ht=(r=e.options)==null?void 0:r.host,this.rt(this.ct=e.element)),bt}rt(e){if(typeof this.Y=="function"){const t=this.ht??globalThis;let n=pl.get(t);n===void 0&&(n=new WeakMap,pl.set(t,n)),n.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),n.set(this.Y,e),e!==void 0&&this.Y.call(this.ht,e)}else this.Y.value=e}get lt(){var e,t;return typeof this.Y=="function"?(e=pl.get(this.ht??globalThis))==null?void 0:e.get(this.Y):(t=this.Y)==null?void 0:t.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});function V$(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}var hh=["#FF0000","#FF7F00","#ffd500","#40ff00","#0000FF","#37009e","#8B00FF"],EI=V$(hh),Wp=W$(hh,hh.length/2),q$=[...Wp,...Wp.reverse()];function Lo(e){const t=parseInt(e.slice(1),16),n=t>>16&255,r=t>>8&255,i=t&255;return[n,r,i]}function va(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}function go(e,t,n){return Math.round(e+(t-e)*n)}function H$(e,t,n){const[r,i,o]=Lo(e),[s,l,h]=Lo(t),p=[];for(let m=0;m<=n;m++){const g=m/n,v=go(r,s,g),_=go(i,l,g),E=go(o,h,g);p.push(va(v,_,E))}return p}function W$(e,t){const n=[];for(let r=0;r<e.length-1;r++){const i=H$(e[r],e[r+1],t);n.push(...i.slice(0,-1))}return n.push(e[e.length-1]),n}function G$(e,t,n,r,i){const o=Lo(e),s=Lo(t),l=(i-n)/(r-n),h=go(o[0],s[0],l),p=go(o[1],s[1],l),m=go(o[2],s[2],l);return va(h,p,m)}function Gp(e,t=100){const[n,r,i]=Lo(e);return Xe(`rgba(${n}, ${r}, ${i}, ${t}%)`)}function K$(e){e=e.replace(/^#/,"");const t=parseInt(e,16);let n=t>>16&255,r=t>>8&255,i=t&255;const o=-32,s=-32,l=-32,h=p=>Math.max(0,Math.min(255,p));return n=h(n+o),r=h(r+s),i=h(i+l),Xe(va(n,r,i))}function SI(){const n=[Math.floor(Math.random()*168+32),Math.floor(Math.random()*168+32),200];return n.sort(()=>Math.random()-.5),va(n[0],n[1],n[2])}function Y$(e,t){let[n,r,i]=Lo(e);return n=Math.min(255,Math.max(0,n*t)),r=Math.min(255,Math.max(0,r*t)),i=Math.min(255,Math.max(0,i*t)),va(Math.round(n),Math.round(r),Math.round(i))}function AI(e){return be`
      :root {
          --primary: ${Xe(e)};
          --primary-50: ${Gp(e,50)};
          --primary-12: ${Gp(e,12)};
          --primary-hover: ${K$(e)};
          --secondary: ${Xe(e)}1f;
          --secondary-hover: ${Xe(e)}3d;
      }
  `}var Z$=new RegExp("(?<=var\\().*?(?=\\))");function Kp(e){const t=e.match(Z$),n=t?t[0]:e;return getComputedStyle(document.documentElement).getPropertyValue(n).trim()}var Eg=document.createElement("style"),Sg=document.createElement("style"),X$=be`

    @font-face { font-family: "Inter"; font-style: normal; font-weight: 500; font-display: swap; src: url("fonts/Inter/Inter-Medium.woff2") format("woff2"); }
    @font-face { font-family: "Inter"; font-style: normal; font-weight: 600; font-display: swap; src: url("fonts/Inter/Inter-SemiBold.woff2") format("woff2"); }
    @font-face { font-family: "Inter"; font-style: normal; font-weight: 400; font-display: swap; src: url("fonts/Inter/Inter-Regular.woff2") format("woff2"); }

    * {
        font-family: 'Inter', sans-serif;
        font-style: normal;
    }

`,J$=be`
    
    html {
        background-color: var(--color-background-bg-body);
        position: fixed;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }

    body {
        margin: 0;
        background-color: var(--color-background-bg-body);
        box-sizing: border-box;
    }

    ::view-transition-old(root),
    ::view-transition-new(root) {
        animation: none;
        mix-blend-mode: normal;
    }
    
    * {
        user-select: none;
        outline: none;
        -webkit-user-select: none;
        -webkit-touch-callout: none;
        -webkit-tap-highlight-color: transparent;
    }

`,Ag=(e=>(e[e.systemSync=0]="systemSync",e[e.dark=1]="dark",e[e.darkBlue=2]="darkBlue",e[e.light=3]="light",e[e.lightBlue=4]="lightBlue",e))(Ag||{}),xa=(e=>(e[e.community=0]="community",e[e.random=1]="random",e[e.rainbow=2]="rainbow",e[e.orange=3]="orange",e[e.violet=4]="violet",e))(xa||{}),ys={0:()=>ek(),1:()=>me(()=>import("./dark.style-RDRVTWPL-mLChQE0b.js"),[]).then(e=>e.themeDark),2:()=>me(()=>import("./dark-blue.style-2PB6BUXY-DQcXI6M8.js"),[]).then(e=>e.themeDarkBlue),3:()=>me(()=>import("./light.style-55EXDB3H-BX8r0d9Y.js"),[]).then(e=>e.themeLight),4:()=>me(()=>import("./light-blue.style-OHBMKLEV-lr3CKq9y.js"),[]).then(e=>e.themeLightBlue)},Q$={0:()=>me(()=>import("./community.style-CIS6CBXM-Bi1DpZ60.js"),[]).then(e=>e.communityStyle),2:()=>me(()=>import("./rainbow.style-LHFWPEFX-BdqSSAwm.js"),[]).then(e=>e.rainbowStyle),1:()=>me(()=>import("./random.style-YBA3AO4N-CYIX2ecO.js"),[]).then(e=>e.randomStyle),3:()=>me(()=>import("./orange.style-JBOLVSHH-X1IZkAK_.js"),[]).then(e=>e.orangeStyle),4:()=>me(()=>import("./violet.style-3IXA5FI4-WY0ai5ZW.js"),[]).then(e=>e.violetStyle)};function ek(){var e,t;return window.matchMedia("(prefers-color-scheme: dark)").matches?(e=window==null?void 0:window.ethereum)!=null&&e.isOneInchIOSWallet?ys[2]():ys[1]():(t=window==null?void 0:window.ethereum)!=null&&t.isOneInchIOSWallet?ys[4]():ys[3]()}var $g,kg,dh={0:()=>Pg(),3:()=>"#f1f1f1",4:()=>"#f1f1f1",1:()=>"#0e0e0e",2:()=>"#0e0e0e"},Nd=window.matchMedia("(prefers-color-scheme: dark)"),Cg=new Dm(1);function Pg(){return Nd.matches?dh[1]():dh[3]()}function Ig(){return Cg}Nd.onchange=async()=>{$g===0&&await Tg(0,kg)};function tk(e){return e===0?Nd.matches:e===1||e===2}async function Tg(e,t,n){await(async()=>{const i=await ys[e](),o=await Q$[t]();$l(Eg,i),$l(Sg,o),r0(dh[e]()),$g=e,kg=t,document.documentElement.setAttribute("theme",tk(e)?"dark":"light"),document.documentElement.setAttribute("brand-color",xa[t]),Cg.next({mainColor:e,brandColor:t})})()}var nk=(e,t)=>be`
    
    ${Xe(e)} {
        overflow: auto;
        touch-action: pan-y;
        overscroll-behavior: none;
        scrollbar-color: var(--primary) transparent;
        scrollbar-width: ${Xe("thin")};
        scrollbar-gutter: stable;
    }

    /* width */
    ${Xe(e)}::-webkit-scrollbar {
        width: 4px;
        height: 4px;
    }

    /* Track */
    ${Xe(e)}::-webkit-scrollbar-track {
        background: transparent;
    }

    /* Handle */
    ${Xe(e)}::-webkit-scrollbar-thumb {
        background: var(--primary);
        border-radius: 4px;
    }

    /* Handle on hover */
    ${Xe(e)}::-webkit-scrollbar-thumb:hover {
        background: var(--primary-hover);
    }
    
    ${Ht(be`
        ${Xe(e)}::-webkit-scrollbar {
            display: none;
        }
    `)}
    
    ${Xe("")}
`,Jc=nk(":host");async function rk(e=3,t=0){document.head.appendChild(Eg),document.head.appendChild(Sg),Hu(X$),Hu(J$),Hu(Jc),await Tg(e,t)}function Bg(){return Xe(`linear-gradient(90deg, ${Xe(q$.join(","))})`)}const Yp=(e,t,n)=>{const r=new Map;for(let i=t;i<=n;i++)r.set(e[i],i);return r},ik=tr(class extends ta{constructor(e){if(super(e),e.type!==ea.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,n){let r;n===void 0?n=t:t!==void 0&&(r=t);const i=[],o=[];let s=0;for(const l of e)i[s]=r?r(l,s):s,o[s]=n(l,s),s++;return{values:o,keys:i}}render(e,t,n){return this.dt(e,t,n).values}update(e,[t,n,r]){const i=Kb(e),{values:o,keys:s}=this.dt(t,n,r);if(!Array.isArray(i))return this.ut=s,o;const l=this.ut??(this.ut=[]),h=[];let p,m,g=0,v=i.length-1,_=0,E=o.length-1;for(;g<=v&&_<=E;)if(i[g]===null)g++;else if(i[v]===null)v--;else if(l[g]===s[_])h[_]=bi(i[g],o[_]),g++,_++;else if(l[v]===s[E])h[E]=bi(i[v],o[E]),v--,E--;else if(l[g]===s[E])h[E]=bi(i[g],o[E]),as(e,h[E+1],i[g]),g++,E--;else if(l[v]===s[_])h[_]=bi(i[v],o[_]),as(e,i[g],i[v]),v--,_++;else if(p===void 0&&(p=Yp(s,_,E),m=Yp(l,g,v)),p.has(l[g]))if(p.has(l[v])){const S=m.get(s[_]),P=S!==void 0?i[S]:null;if(P===null){const I=as(e,i[g]);bi(I,o[_]),h[_]=I}else h[_]=bi(P,o[_]),as(e,i[g],P),i[S]=null;_++}else ju(i[v]),v--;else ju(i[g]),g++;for(;_<=E;){const S=as(e,h[E+1]);bi(S,o[_]),h[_++]=S}for(;g<=v;){const S=i[g++];S!==null&&ju(S)}return this.ut=s,Gb(e,h),Xn}});var Fd=Symbol("scrollContext"),Gr=class extends Ue{constructor(){super(...arguments),this.context=new kc(this,{context:Fd})}setScrollTopFromConsumer(e){this.scrollTopFromConsumer=e}firstUpdated(){this.context.setValue(this)}updated(){Re(this,{maxHeight:this.maxHeight?`${this.maxHeight}px`:""})}render(){return G`<slot></slot>`}};Gr.tagName="inch-scroll-view-provider";zn([_e({type:Number,attribute:!1})],Gr.prototype,"maxHeight",2);Gr=zn([Ge(Gr.tagName)],Gr);var bo=class extends Ue{constructor(){super(...arguments),this.contentRef=pr(),this.scrollContainerRef=pr(),this.globalOffsetY=0}get contentHeight(){var e;return((e=this.contentRef.value)==null?void 0:e.clientHeight)??0}get scrollContainer(){if(!this.scrollContainerRef.value)throw new Error("");return this.scrollContainerRef.value}firstUpdated(){if(!this.context)throw new Error("inch-scroll-view-consumer must be used inside inch-scroll-view-provider");this.globalOffsetY=this.context.clientHeight-this.clientHeight,Qt(this,[gr(Ei(this.context),Ei(this.contentRef.value)).pipe(We(()=>this.updateView())),rt(this.scrollContainer,"scroll",{passive:!0}).pipe(We(()=>{var e;this.context.setScrollTopFromConsumer(((e=this.scrollContainer)==null?void 0:e.scrollTop)??0)}))],{requestUpdate:!1})}render(){return G`
      <div class="scroll-container" ${In(this.scrollContainerRef)}>
        <div ${In(this.contentRef)}>
          <slot></slot>
        </div>
      </div>
    `}updateView(){this.contentHeight>(this.context.maxHeight??0)?(this.scrollContainer.style.height=`${(this.context.maxHeight??0)-this.globalOffsetY}px`,!this.scrollContainer.classList.contains("overflow")&&this.scrollContainer.classList.add("overflow")):(this.scrollContainer.style.height=`${this.contentHeight}px`,this.scrollContainer.classList.contains("overflow")&&this.scrollContainer.classList.remove("overflow"))}};bo.tagName="inch-scroll-view-consumer";bo.styles=[Jc,be`
        .scroll-container {
            display: block;
            flex-direction: column;
            transition: height .1s;
        }
        .overflow {
            overflow: auto;
            overscroll-behavior: none;
            touch-action: pan-y;
            display: block;
            position: relative;
            contain: size layout;
        }
    `];zn([xn({context:Fd,subscribe:!0})],bo.prototype,"context",2);bo=zn([Ge(bo.tagName)],bo);var Og=class Rg extends Event{constructor(t){super(Rg.eventName,{bubbles:!1}),this.first=t.first,this.last=t.last}};Og.eventName="rangeChanged";var Mg=class Dg extends Event{constructor(t){super(Dg.eventName,{bubbles:!1}),this.first=t.first,this.last=t.last}};Mg.eventName="visibilityChanged";var Ng=class Fg extends Event{constructor(){super(Fg.eventName,{bubbles:!1})}};Ng.eventName="unpinned";var ok=class{constructor(e){this._element=null;const t=e??window;this._node=t,e&&(this._element=e)}get element(){return this._element||document.scrollingElement||document.documentElement}get scrollTop(){return this.element.scrollTop||window.scrollY}get scrollLeft(){return this.element.scrollLeft||window.scrollX}get scrollHeight(){return this.element.scrollHeight}get scrollWidth(){return this.element.scrollWidth}get viewportHeight(){return this._element?this._element.getBoundingClientRect().height:window.innerHeight}get viewportWidth(){return this._element?this._element.getBoundingClientRect().width:window.innerWidth}get maxScrollTop(){return this.scrollHeight-this.viewportHeight}get maxScrollLeft(){return this.scrollWidth-this.viewportWidth}},sk=class extends ok{constructor(e,t){super(t),this._clients=new Set,this._retarget=null,this._end=null,this.__destination=null,this.correctingScrollError=!1,this._checkForArrival=this._checkForArrival.bind(this),this._updateManagedScrollTo=this._updateManagedScrollTo.bind(this),this.scrollTo=this.scrollTo.bind(this),this.scrollBy=this.scrollBy.bind(this);const n=this._node;this._originalScrollTo=n.scrollTo,this._originalScrollBy=n.scrollBy,this._originalScroll=n.scroll,this._attach(e)}get _destination(){return this.__destination}get scrolling(){return this._destination!==null}scrollTo(e,t){const n=typeof e=="number"&&typeof t=="number"?{left:e,top:t}:e;this._scrollTo(n)}scrollBy(e,t){const n=typeof e=="number"&&typeof t=="number"?{left:e,top:t}:e;n.top!==void 0&&(n.top+=this.scrollTop),n.left!==void 0&&(n.left+=this.scrollLeft),this._scrollTo(n)}_nativeScrollTo(e){this._originalScrollTo.bind(this._element||window)(e)}_scrollTo(e,t=null,n=null){this._end!==null&&this._end(),e.behavior==="smooth"?(this._setDestination(e),this._retarget=t,this._end=n):this._resetScrollState(),this._nativeScrollTo(e)}_setDestination(e){let{top:t,left:n}=e;return t=t===void 0?void 0:Math.max(0,Math.min(t,this.maxScrollTop)),n=n===void 0?void 0:Math.max(0,Math.min(n,this.maxScrollLeft)),this._destination!==null&&n===this._destination.left&&t===this._destination.top?!1:(this.__destination={top:t,left:n,behavior:"smooth"},!0)}_resetScrollState(){this.__destination=null,this._retarget=null,this._end=null}_updateManagedScrollTo(e){this._destination&&this._setDestination(e)&&this._nativeScrollTo(this._destination)}managedScrollTo(e,t,n){return this._scrollTo(e,t,n),this._updateManagedScrollTo}correctScrollError(e){this.correctingScrollError=!0,requestAnimationFrame(()=>requestAnimationFrame(()=>this.correctingScrollError=!1)),this._nativeScrollTo(e),this._retarget&&this._setDestination(this._retarget()),this._destination&&this._nativeScrollTo(this._destination)}_checkForArrival(){if(this._destination!==null){const{scrollTop:e,scrollLeft:t}=this;let{top:n,left:r}=this._destination;n=Math.min(n||0,this.maxScrollTop),r=Math.min(r||0,this.maxScrollLeft);const i=Math.abs(n-e),o=Math.abs(r-t);i<1&&o<1&&(this._end&&this._end(),this._resetScrollState())}}detach(e){return this._clients.delete(e),this._clients.size===0&&(this._node.scrollTo=this._originalScrollTo,this._node.scrollBy=this._originalScrollBy,this._node.scroll=this._originalScroll,this._node.removeEventListener("scroll",this._checkForArrival)),null}_attach(e){this._clients.add(e),this._clients.size===1&&(this._node.scrollTo=this.scrollTo,this._node.scrollBy=this.scrollBy,this._node.scroll=this.scrollTo,this._node.addEventListener("scroll",this._checkForArrival))}},Zp=typeof window<"u"?window.ResizeObserver:void 0,fh=Symbol("virtualizerRef"),ec="virtualizer-sizer",Xp,ak=class{constructor(e){if(this._benchmarkStart=null,this._layout=null,this._clippingAncestors=[],this._scrollSize=null,this._scrollError=null,this._childrenPos=null,this._childMeasurements=null,this._toBeMeasured=new Map,this._rangeChanged=!0,this._itemsChanged=!0,this._visibilityChanged=!0,this._scrollerController=null,this._isScroller=!1,this._sizer=null,this._hostElementRO=null,this._childrenRO=null,this._mutationObserver=null,this._scrollEventListeners=[],this._scrollEventListenerOptions={passive:!0},this._loadListener=this._childLoaded.bind(this),this._scrollIntoViewTarget=null,this._updateScrollIntoViewCoordinates=null,this._items=[],this._first=-1,this._last=-1,this._firstVisible=-1,this._lastVisible=-1,this._scheduled=new WeakSet,this._measureCallback=null,this._measureChildOverride=null,this._layoutCompletePromise=null,this._layoutCompleteResolver=null,this._layoutCompleteRejecter=null,this._pendingLayoutComplete=null,this._layoutInitialized=null,!e)throw new Error("Virtualizer constructor requires a configuration object");if(e.hostElement)this._init(e);else throw new Error('Virtualizer configuration requires the "hostElement" property')}set items(e){Array.isArray(e)&&e!==this._items&&(this._itemsChanged=!0,this._items=e,this._schedule(this._updateLayout))}_init(e){this._isScroller=!!e.scroller,this._initHostElement(e);const t=e.layout||{};this._layoutInitialized=this._initLayout(t)}_initObservers(){this._mutationObserver=new MutationObserver(this._finishDOMUpdate.bind(this)),this._hostElementRO=new Zp(()=>this._hostElementSizeChanged()),this._childrenRO=new Zp(this._childrenSizeChanged.bind(this))}_initHostElement(e){const t=this._hostElement=e.hostElement;this._applyVirtualizerStyles(),t[fh]=this}connected(){this._initObservers();const e=this._isScroller;this._clippingAncestors=lk(this._hostElement,e),this._scrollerController=new sk(this,this._clippingAncestors[0]),this._schedule(this._updateLayout),this._observeAndListen()}_observeAndListen(){this._mutationObserver.observe(this._hostElement,{childList:!0}),this._hostElementRO.observe(this._hostElement),this._scrollEventListeners.push(window),window.addEventListener("scroll",this,this._scrollEventListenerOptions),this._clippingAncestors.forEach(e=>{e.addEventListener("scroll",this,this._scrollEventListenerOptions),this._scrollEventListeners.push(e),this._hostElementRO.observe(e)}),this._hostElementRO.observe(this._scrollerController.element),this._children.forEach(e=>this._childrenRO.observe(e)),this._scrollEventListeners.forEach(e=>e.addEventListener("scroll",this,this._scrollEventListenerOptions))}disconnected(){var e,t,n,r;this._scrollEventListeners.forEach(i=>i.removeEventListener("scroll",this,this._scrollEventListenerOptions)),this._scrollEventListeners=[],this._clippingAncestors=[],(e=this._scrollerController)==null||e.detach(this),this._scrollerController=null,(t=this._mutationObserver)==null||t.disconnect(),this._mutationObserver=null,(n=this._hostElementRO)==null||n.disconnect(),this._hostElementRO=null,(r=this._childrenRO)==null||r.disconnect(),this._childrenRO=null,this._rejectLayoutCompletePromise("disconnected")}_applyVirtualizerStyles(){const t=this._hostElement.style;t.display=t.display||"block",t.position=t.position||"relative",t.contain=t.contain||"size layout",this._isScroller&&(t.overflow=t.overflow||"auto",t.minHeight=t.minHeight||"150px")}_getSizer(){const e=this._hostElement;if(!this._sizer){let t=e.querySelector(`[${ec}]`);t||(t=document.createElement("div"),t.setAttribute(ec,""),e.appendChild(t)),Object.assign(t.style,{position:"absolute",margin:"-2px 0 0 0",padding:0,visibility:"hidden",fontSize:"2px"}),t.textContent="&nbsp;",t.setAttribute(ec,""),this._sizer=t}return this._sizer}async updateLayoutConfig(e){await this._layoutInitialized;const t=e.type||Xp;if(typeof t=="function"&&this._layout instanceof t){const n={...e};return delete n.type,this._layout.config=n,!0}return!1}async _initLayout(e){let t,n;if(typeof e.type=="function"){n=e.type;const r={...e};delete r.type,t=r}else t=e;n===void 0&&(Xp=n=(await me(async()=>{const{FlowLayout:r}=await import("./flow-MWNAY6JH-L9ck0Z9u.js");return{FlowLayout:r}},[])).FlowLayout),this._layout=new n(r=>this._handleLayoutMessage(r),t),this._layout.measureChildren&&typeof this._layout.updateItemSizes=="function"&&(typeof this._layout.measureChildren=="function"&&(this._measureChildOverride=this._layout.measureChildren),this._measureCallback=this._layout.updateItemSizes.bind(this._layout)),this._layout.listenForChildLoadEvents&&this._hostElement.addEventListener("load",this._loadListener,!0),this._schedule(this._updateLayout)}startBenchmarking(){this._benchmarkStart===null&&(this._benchmarkStart=window.performance.now())}stopBenchmarking(){if(this._benchmarkStart!==null){const e=window.performance.now(),t=e-this._benchmarkStart,r=performance.getEntriesByName("uv-virtualizing","measure").filter(i=>i.startTime>=this._benchmarkStart&&i.startTime<e).reduce((i,o)=>i+o.duration,0);return this._benchmarkStart=null,{timeElapsed:t,virtualizationTime:r}}return null}_measureChildren(){const e={},t=this._children,n=this._measureChildOverride||this._measureChild;for(let r=0;r<t.length;r++){const i=t[r],o=this._first+r;(this._itemsChanged||this._toBeMeasured.has(i))&&(e[o]=n.call(this,i,this._items[o]))}this._childMeasurements=e,this._schedule(this._updateLayout),this._toBeMeasured.clear()}_measureChild(e){const{width:t,height:n}=e.getBoundingClientRect();return Object.assign({width:t,height:n},ck(e))}async _schedule(e){this._scheduled.has(e)||(this._scheduled.add(e),await Promise.resolve(),this._scheduled.delete(e),e.call(this))}async _updateDOM(e){this._scrollSize=e.scrollSize,this._adjustRange(e.range),this._childrenPos=e.childPositions,this._scrollError=e.scrollError||null;const{_rangeChanged:t,_itemsChanged:n}=this;this._visibilityChanged&&(this._notifyVisibility(),this._visibilityChanged=!1),(t||n)&&(this._notifyRange(),this._rangeChanged=!1),this._finishDOMUpdate()}_finishDOMUpdate(){this._children.forEach(e=>this._childrenRO.observe(e)),this._checkScrollIntoViewTarget(this._childrenPos),this._positionChildren(this._childrenPos),this._sizeHostElement(this._scrollSize),this._correctScrollError(),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end")}_updateLayout(){this._layout&&this._scrollerController&&(this._layout.items=this._items,this._updateView(),this._childMeasurements!==null&&(this._measureCallback&&this._measureCallback(this._childMeasurements),this._childMeasurements=null),this._layout.reflowIfNeeded(),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end"))}_handleScrollEvent(){var e;if(this._benchmarkStart&&"mark"in window.performance){try{window.performance.measure("uv-virtualizing","uv-start","uv-end")}catch(t){console.warn("Error measuring performance data: ",t)}window.performance.mark("uv-start")}this._scrollerController.correctingScrollError===!1&&((e=this._layout)==null||e.unpin()),this._schedule(this._updateLayout)}handleEvent(e){switch(e.type){case"scroll":(e.currentTarget===window||this._clippingAncestors.includes(e.currentTarget))&&this._handleScrollEvent();break;default:console.warn("event not handled",e)}}_handleLayoutMessage(e){e.type==="stateChanged"?this._updateDOM(e):e.type==="visibilityChanged"?(this._firstVisible=e.firstVisible,this._lastVisible=e.lastVisible,this._notifyVisibility()):e.type==="unpinned"&&this._hostElement.dispatchEvent(new Ng)}get _children(){const e=[];let t=this._hostElement.firstElementChild;for(;t;)t.hasAttribute(ec)||e.push(t),t=t.nextElementSibling;return e}_updateView(){var r;const e=this._hostElement,t=(r=this._scrollerController)==null?void 0:r.element,n=this._layout;if(e&&t&&n){let i,o,s,l;const h=e.getBoundingClientRect();i=0,o=0,s=window.innerHeight,l=window.innerWidth;const p=this._clippingAncestors.map(I=>I.getBoundingClientRect());p.unshift(h);for(const I of p)i=Math.max(i,I.top),o=Math.max(o,I.left),s=Math.min(s,I.bottom),l=Math.min(l,I.right);const m=t.getBoundingClientRect(),g={left:h.left-m.left,top:h.top-m.top},v={width:t.scrollWidth,height:t.scrollHeight},_=i-h.top+e.scrollTop,E=o-h.left+e.scrollLeft,S=s-i,P=l-o;n.viewportSize={width:P,height:S},n.viewportScroll={top:_,left:E},n.totalScrollSize=v,n.offsetWithinScroller=g}}_sizeHostElement(e){const n=e&&e.width!==null?Math.min(82e5,e.width):0,r=e&&e.height!==null?Math.min(82e5,e.height):0;if(this._isScroller)this._getSizer().style.transform=`translate(${n}px, ${r}px)`;else{const i=this._hostElement.style;i.minWidth=n?`${n}px`:"100%",i.minHeight=r?`${r}px`:"100%"}}_positionChildren(e){e&&e.forEach(({top:t,left:n,width:r,height:i,xOffset:o,yOffset:s},l)=>{const h=this._children[l-this._first];h&&(h.style.position="absolute",h.style.boxSizing="border-box",h.style.transform=`translate(${n}px, ${t}px)`,r!==void 0&&(h.style.width=r+"px"),i!==void 0&&(h.style.height=i+"px"),h.style.left=o===void 0?null:o+"px",h.style.top=s===void 0?null:s+"px")})}async _adjustRange(e){const{_first:t,_last:n,_firstVisible:r,_lastVisible:i}=this;this._first=e.first,this._last=e.last,this._firstVisible=e.firstVisible,this._lastVisible=e.lastVisible,this._rangeChanged=this._rangeChanged||this._first!==t||this._last!==n,this._visibilityChanged=this._visibilityChanged||this._firstVisible!==r||this._lastVisible!==i}_correctScrollError(){if(this._scrollError){const{scrollTop:e,scrollLeft:t}=this._scrollerController,{top:n,left:r}=this._scrollError;this._scrollError=null,this._scrollerController.correctScrollError({top:e-n,left:t-r})}}element(e){var t;return e===1/0&&(e=this._items.length-1),((t=this._items)==null?void 0:t[e])===void 0?void 0:{scrollIntoView:(n={})=>this._scrollElementIntoView({...n,index:e})}}_scrollElementIntoView(e){if(e.index>=this._first&&e.index<=this._last)this._children[e.index-this._first].scrollIntoView(e);else if(e.index=Math.min(e.index,this._items.length-1),e.behavior==="smooth"){const t=this._layout.getScrollIntoViewCoordinates(e),{behavior:n}=e;this._updateScrollIntoViewCoordinates=this._scrollerController.managedScrollTo(Object.assign(t,{behavior:n}),()=>this._layout.getScrollIntoViewCoordinates(e),()=>this._scrollIntoViewTarget=null),this._scrollIntoViewTarget=e}else this._layout.pin=e}_checkScrollIntoViewTarget(e){const{index:t}=this._scrollIntoViewTarget||{};t&&(e!=null&&e.has(t))&&this._updateScrollIntoViewCoordinates(this._layout.getScrollIntoViewCoordinates(this._scrollIntoViewTarget))}_notifyRange(){this._hostElement.dispatchEvent(new Og({first:this._first,last:this._last}))}_notifyVisibility(){this._hostElement.dispatchEvent(new Mg({first:this._firstVisible,last:this._lastVisible}))}get layoutComplete(){return this._layoutCompletePromise||(this._layoutCompletePromise=new Promise((e,t)=>{this._layoutCompleteResolver=e,this._layoutCompleteRejecter=t})),this._layoutCompletePromise}_rejectLayoutCompletePromise(e){this._layoutCompleteRejecter!==null&&this._layoutCompleteRejecter(e),this._resetLayoutCompleteState()}_scheduleLayoutComplete(){this._layoutCompletePromise&&this._pendingLayoutComplete===null&&(this._pendingLayoutComplete=requestAnimationFrame(()=>requestAnimationFrame(()=>this._resolveLayoutCompletePromise())))}_resolveLayoutCompletePromise(){this._layoutCompleteResolver!==null&&this._layoutCompleteResolver(),this._resetLayoutCompleteState()}_resetLayoutCompleteState(){this._layoutCompletePromise=null,this._layoutCompleteResolver=null,this._layoutCompleteRejecter=null,this._pendingLayoutComplete=null}_hostElementSizeChanged(){this._schedule(this._updateLayout)}_childLoaded(){}_childrenSizeChanged(e){var t;if((t=this._layout)!=null&&t.measureChildren){for(const n of e)this._toBeMeasured.set(n.target,n.contentRect);this._measureChildren()}this._scheduleLayoutComplete(),this._itemsChanged=!1,this._rangeChanged=!1}};function ck(e){const t=window.getComputedStyle(e);return{marginTop:tc(t.marginTop),marginRight:tc(t.marginRight),marginBottom:tc(t.marginBottom),marginLeft:tc(t.marginLeft)}}function tc(e){const t=e?parseFloat(e):NaN;return Number.isNaN(t)?0:t}function Jp(e){if(e.assignedSlot!==null)return e.assignedSlot;if(e.parentElement!==null)return e.parentElement;const t=e.parentNode;return t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host||null}function uk(e,t=!1){const n=[];let r=t?e:Jp(e);for(;r!==null;)n.push(r),r=Jp(r);return n}function lk(e,t=!1){let n=!1;return uk(e,t).filter(r=>{if(n)return!1;const i=getComputedStyle(r);return n=i.position==="fixed",i.overflow!=="visible"})}var Lg=e=>e,jg=(e,t)=>G`${t}: ${JSON.stringify(e,null,2)}`,hk=class extends zo{constructor(e){if(super(e),this._virtualizer=null,this._first=0,this._last=-1,this._renderItem=(t,n)=>jg(t,n+this._first),this._keyFunction=(t,n)=>Lg(t,n+this._first),this._items=[],e.type!==ea.CHILD)throw new Error("The virtualize directive can only be used in child expressions")}render(e){e&&this._setFunctions(e);const t=[];if(this._first>=0&&this._last>=this._first)for(let n=this._first;n<=this._last;n++)t.push(this._items[n]);return ik(t,this._keyFunction,this._renderItem)}update(e,[t]){this._setFunctions(t);const n=this._items!==t.items;return this._items=t.items||[],this._virtualizer?this._updateVirtualizerConfig(e,t):this._initialize(e,t),n?Xn:this.render()}async _updateVirtualizerConfig(e,t){if(!await this._virtualizer.updateLayoutConfig(t.layout||{})){const r=e.parentNode;this._makeVirtualizer(r,t)}this._virtualizer.items=this._items}_setFunctions(e){const{renderItem:t,keyFunction:n}=e;t&&(this._renderItem=(r,i)=>t(r,i+this._first)),n&&(this._keyFunction=(r,i)=>n(r,i+this._first))}_makeVirtualizer(e,t){this._virtualizer&&this._virtualizer.disconnected();const{layout:n,scroller:r,items:i}=t;this._virtualizer=new ak({hostElement:e,layout:n,scroller:r}),this._virtualizer.items=i,this._virtualizer.connected()}_initialize(e,t){const n=e.parentNode;n&&n.nodeType===1&&(n.addEventListener("rangeChanged",r=>{this._first=r.first,this._last=r.last,this.setValue(this.render())}),this._makeVirtualizer(n,t))}disconnected(){var e;(e=this._virtualizer)==null||e.disconnected()}reconnected(){var e;(e=this._virtualizer)==null||e.connected()}},dk=tr(hk),Go=class extends Ue{constructor(){super(...arguments),this.items=[],this.renderItem=jg,this.keyFunction=Lg,this.layout={},this.scroller=!1}createRenderRoot(){return this}render(){const{items:e,renderItem:t,keyFunction:n,layout:r,scroller:i}=this;return G`${dk({items:e,renderItem:t,keyFunction:n,layout:r,scroller:i})}`}element(e){var t;return(t=this[fh])==null?void 0:t.element(e)}get layoutComplete(){var e;return(e=this[fh])==null?void 0:e.layoutComplete}scrollToIndex(e,t="start"){var n;(n=this.element(e))==null||n.scrollIntoView({block:t})}};na([_e({attribute:!1})],Go.prototype,"items",void 0);na([_e()],Go.prototype,"renderItem",void 0);na([_e()],Go.prototype,"keyFunction",void 0);na([_e({attribute:!1})],Go.prototype,"layout",void 0);na([_e({reflect:!0,type:Boolean})],Go.prototype,"scroller",void 0);customElements.define("lit-virtualizer",Go);var fk=Symbol("mainViewportContext"),zg=(e,t)=>be`
    
    ${Xe(e)} {
        overflow: auto;
        touch-action: pan-y;
        overscroll-behavior: none;
        scrollbar-color: var(--primary) transparent;
        scrollbar-width: ${Xe(t?"none":"thin")};
        scrollbar-gutter: stable;
    }

    /* width */
    ${Xe(e)}::-webkit-scrollbar {
        width: 4px;
        height: 4px;
    }

    /* Track */
    ${Xe(e)}::-webkit-scrollbar-track {
        background: transparent;
    }

    /* Handle */
    ${Xe(e)}::-webkit-scrollbar-thumb {
        background: var(--primary);
        border-radius: 4px;
    }

    /* Handle on hover */
    ${Xe(e)}::-webkit-scrollbar-thumb:hover {
        background: var(--primary-hover);
    }
    
    ${Ht(be`
        ${Xe(e)}::-webkit-scrollbar {
            display: none;
        }
    `)}
    
    ${Xe(t?be`
          ${Xe(e)}::-webkit-scrollbar {
              display: none;
          }
    `:"")}
`;zg(":host");var Mn=class extends Ue{constructor(){super(...arguments),this.items=[],this.globalOffsetY=null,this.virtualizerRef=pr(),this.headerRef=pr(),this.headerStub=document.createElement("div"),this.mobileMedia=nr(this)}get virtualizer(){if(!this.virtualizerRef.value)throw new Error("");return this.virtualizerRef.value}firstUpdated(){var t;if(!this.context||!this.virtualizerRef.value)return;const e=document.createElement("style");e.textContent=Jc.cssText,(t=this.virtualizerRef.value.shadowRoot)==null||t.appendChild(e),this.updateView(),this.updateHeaderSize(),Qt(this,[gr(a0(),Ei(this.context),Ei(this.virtualizer),this.mainViewportContext?Ei(this.mainViewportContext):Yt()).pipe(We(()=>this.updateView()))],{requestUpdate:!1}),this.headerRef.value&&Qt(this,[Ei(this.headerRef.value).pipe(We(()=>this.updateHeaderSize())),rt(this.virtualizerRef.value,"scroll",{passive:!0}).pipe(We(()=>{var n;this.context.setScrollTopFromConsumer(((n=this.virtualizerRef.value)==null?void 0:n.scrollTop)??0),this.updateHeaderBackground()}))],{requestUpdate:!1})}render(){return this.updateView(),this.updateHeaderSize(),G`
      ${je(this.header,e=>G`
        <div ${In(this.headerRef)} class="scroll-header">
          ${e()}
        </div>
      `)}
      <lit-virtualizer
        ${In(this.virtualizerRef)}
        scroller
        .items=${this.getItems()}
        .keyFunction="${this.keyFunction??((e,t)=>t)}"
        .renderItem=${(e,t)=>this.renderItemInternal(e,t)}
      ></lit-virtualizer>
    `}updateView(){this.mobileMedia.matches?this.updateViewMobile():this.updateViewDesktop()}updateViewMobile(){if(!this.context||!this.virtualizerRef.value)return;const e=this.getViewPortBoundingClientRect(),t=this.virtualizer.getBoundingClientRect();this.globalOffsetY=t.top-e.top+8*2,this.virtualizer.style.minHeight=`${(this.context.maxHeight??0)-this.globalOffsetY}px`}updateViewDesktop(){if(!this.context||!this.virtualizerRef.value||!this.headerRef.value)return;const e=this.getViewPortBoundingClientRect();this.virtualizer.style.minHeight=`${e.height}px`}getViewPortBoundingClientRect(){return this.mainViewportContext?this.mainViewportContext.getBoundingClientRect():this.context.getBoundingClientRect()}getItems(){return this.header?[null,...this.items]:this.items}renderItemInternal(e,t){var n;return this.header&&t===0?G`${this.headerStub}`:((n=this.renderItem)==null?void 0:n.call(this,e,t))??G``}updateHeaderSize(){if(this.headerRef.value){const e=this.headerRef.value.getBoundingClientRect();Re(this.headerStub,{height:`${e.height}px`})}}updateHeaderBackground(){var t;const e=((t=this.virtualizerRef.value)==null?void 0:t.scrollTop)??0;e>10&&this.headerRef.value&&!this.headerRef.value.classList.contains("scroll-header-background-color-blur")&&this.headerRef.value.classList.add("scroll-header-background-color-blur"),e<10&&this.headerRef.value&&this.headerRef.value.classList.contains("scroll-header-background-color-blur")&&this.headerRef.value.classList.remove("scroll-header-background-color-blur")}};Mn.tagName="inch-scroll-view-virtualizer-consumer";Mn.styles=[zg("lit-virtualizer",!0),be`
        :host {
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .scroll-header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: fit-content;
            z-index: 9;
            overflow: hidden;
            box-sizing: border-box;
            background-color: var(--color-background-bg-primary);
        }

        ${Ht(be`
            .scroll-header {
                background-color: transparent;
                -webkit-backdrop-filter: blur(20px);
                backdrop-filter: blur(20px);
                padding: 8px 8px 0 8px;
                top: -8px;
                left: -8px;
                width: 100vw;
                transition: background-color .2s;
            }

            .scroll-header-background-color-blur {
                background: var(--primary-12);
                background: linear-gradient(to bottom, var(--color-background-bg-primary), var(--primary-12));
            }
        `)}

    `];zn([_e({type:Array})],Mn.prototype,"items",2);zn([_e({type:Object})],Mn.prototype,"keyFunction",2);zn([_e({type:Object})],Mn.prototype,"renderItem",2);zn([_e({type:Object})],Mn.prototype,"header",2);zn([xn({context:Fd,subscribe:!0})],Mn.prototype,"context",2);zn([xn({context:fk,subscribe:!1})],Mn.prototype,"mainViewportContext",2);Mn=zn([Ge(Mn.tagName)],Mn);function pk(){return new Promise(e=>requestAnimationFrame(e))}var ml=document.createElement("div");function Ug(){return document.body.contains(ml)||document.body.appendChild(ml),ml}var mk=1;function Vg(){return mk++}var qg=class{constructor(e){this.rootNodeName=e,this.borderRadius="8px",this.brightnessHalfView=".7",this.scale=".9",this.topOffsetPercent=-5,this.backgroundColor="var(--color-background-bg-active)",this.backgroundColorDefault="var(--color-background-bg-body)",this.container=Ug(),this.activeOverlayMap=new Map,this.subscriptions=new Map}get isOpen(){return this.activeOverlayMap.size>0}isOpenOverlay(e){return this.activeOverlayMap.has(e)}async open(e){const t=document.querySelector(this.rootNodeName),n=this.createOverlayContainer(e);await pk();const r=this.calculateIsHalfView(n);this.appendStyleBeforeTransition(t),await this.transition(n,t,!1,r),this.appendStyleAfterTransition(t,!1,r);const i=Vg();return this.activeOverlayMap.set(i,n),this.subscribeOnEvents(i),i}async close(e){if(!this.activeOverlayMap.has(e))return;const t=this.activeOverlayMap.get(e),n=document.querySelector(this.rootNodeName),r=this.calculateIsHalfView(t);await this.transition(t,n,!0,r),this.appendStyleAfterTransition(n,!0,r),this.unsubscribeOnResize(e),t.remove(),this.activeOverlayMap.delete(e)}createOverlayContainer(e){const t=document.createElement(Gr.tagName),n=this.activeOverlayMap.size+1,r=2,i=Ts()&&kl()?window.innerHeight-10:window.innerHeight;return t.maxHeight=(100-n*r)*i/100,t.setAttribute("overlay-index",n.toString()),Re(t,{position:"fixed",display:"flex",width:"100vw",overflow:"hidden",alignItems:"flex-end",bottom:"0",left:"0",boxSizing:"border-box",borderTopLeftRadius:"24px",borderTopRightRadius:"24px"}),Ts()&&kl()&&Re(t,{bottom:"10px"}),Ao(G`${e}`,t),this.container.appendChild(t),t}subscribeOnEvents(e){const t=this.activeOverlayMap.get(e),n=document.querySelector(this.rootNodeName),r=gr(a0().pipe(We(()=>this.updatePosition(e))),Ei(t).pipe(Ut(()=>Number(t.getAttribute("overlay-index"))===this.activeOverlayMap.size),Pe(()=>this.calculateIsHalfView(t)),zt(),e0(1),He(i=>{const o=document.querySelector(this.rootNodeName);return this.transitionHalfView(o,i)})),rt(this.container,"click").pipe(Ut(()=>Number(t.getAttribute("overlay-index"))===this.activeOverlayMap.size),Ut(i=>i.target===this.container),We(()=>this.updatePosition(e))),rt(t,"touchstart",{passive:!0}).pipe(Ut(()=>(t.scrollTopFromConsumer??0)===0),He(i=>{const o=this.calculateIsHalfView(t),s=t.clientHeight,l=30,h=i.touches[0].clientY,p=Kp(this.backgroundColor),m=Kp(this.backgroundColorDefault);let g=0,v=0,_=!1,E=Number(this.scale),S=this.topOffsetPercent,P=this.backgroundColor;return rt(t,"touchmove",{passive:!0}).pipe(Ut(()=>!_),We(I=>{const L=I.touches[0].clientY-h,U=L*100/s;U<0||(U>l&&(_=!0,this.updatePosition(e)),g=U,v=L,t.setAttribute("offset",U.toString()),Re(t,{transform:`translateY(${L}px)`}),o||(E=U*(1-Number(this.scale))/l+Number(this.scale),S=this.topOffsetPercent-U*this.topOffsetPercent/l,P=G$(p,m,0,100,U),n.setAttribute("scale",E.toString()),n.setAttribute("offset",S.toString()),n.setAttribute("bgColor",P.toString()),Re(n,{transform:`scale(${E}) translate3d(0, ${S}%, 0)`,backgroundColor:P})))}),Sc(gr(rt(t,"touchend",{passive:!0}),rt(t,"touchcancel",{passive:!0})).pipe(He(async I=>{if(v!==0){if(I.timeStamp-i.timeStamp<300&&g>l/2){this.updatePosition(e);return}_||(await Promise.all([t.animate([{transform:`translateY(${v}px)`},{transform:"translateY(0px)"}],this.getDefaultAnimationOptions()).finished,o?Promise.resolve():n.animate([{transform:`scale(${E}) translate3d(0, ${S}%, 0)`,backgroundColor:P},{transform:`scale(${this.scale}) translate3d(0, ${this.topOffsetPercent}%, 0)`,backgroundColor:this.backgroundColor}],this.getDefaultAnimationOptions()).finished]),t.removeAttribute("offset"),Re(t,{transform:""}),o||(n.removeAttribute("scale"),n.removeAttribute("offset"),n.removeAttribute("bgColor"),Re(n,{transform:`scale(${this.scale}) translate3d(0, ${this.topOffsetPercent}%, 0)`,backgroundColor:this.backgroundColor})))}}))))}))).subscribe();this.subscriptions.set(e,r)}unsubscribeOnResize(e){if(!this.subscriptions.has(e))return;const t=this.subscriptions.get(e);t.closed||t.unsubscribe()}updatePosition(e){this.subscriptions.has(e)&&this.close(e).catch()}calculateIsHalfView(e){const t=e.clientHeight,n=e.maxHeight??0;return t*100/n<90}getDefaultAnimationOptions(){return{duration:500,easing:"cubic-bezier(.2, .8, .2, 1)"}}async transition(e,t,n,r){const i=t.getAttribute("scale")??this.scale,o=this.brightnessHalfView,s=Number(t.getAttribute("offset")??this.topOffsetPercent),l=t.getAttribute("bgColor")??this.backgroundColor,h=e.getAttribute("offset")??"0",p=()=>({transform:`translate3d(0, ${n?h:"100"}%, 0)`}),m=()=>({transform:`translate3d(0, ${n?"100":h}%, 0)`}),g=()=>({filter:r?`brightness(${n?o:"1"})`:"",transform:r?"":`scale(${n?i:"1"}) translate3d(0, ${n?s:"0"}%, 0)`,borderRadius:r?"":n?this.borderRadius:"0",backgroundColor:r?"":n?l:this.backgroundColorDefault}),v=()=>({filter:r?`brightness(${n?"1":o})`:"",transform:r?"":`scale(${n?"1":i}) translate3d(0, ${n?"0":s}%, 0)`,borderRadius:r?"":n?"0":this.borderRadius,backgroundColor:r?"":n?this.backgroundColorDefault:l});return this.changeBrowserMetaColor(r,n),await Promise.all([e.animate([p(),m()],this.getDefaultAnimationOptions()).finished,t.animate([g(),v()],this.getDefaultAnimationOptions()).finished])}async transitionHalfView(e,t){const n=this.scale,r=this.brightnessHalfView,i=this.topOffsetPercent,o=()=>({filter:`brightness(${t?"1":r})`,transform:`scale(${t?n:"1"}) translate3d(0, ${t?i:"0"}%, 0)`,borderRadius:t?this.borderRadius:"0",backgroundColor:t?this.backgroundColor:this.backgroundColorDefault}),s=()=>({filter:`brightness(${t?r:"1"})`,transform:`scale(${t?"1":n}) translate3d(0, ${t?"0":i}%, 0)`,borderRadius:t?"0":this.borderRadius,backgroundColor:t?this.backgroundColorDefault:this.backgroundColor});this.changeBrowserMetaColor(t,!1),await e.animate([o(),s()],this.getDefaultAnimationOptions()).finished,Re(e,s())}appendStyleBeforeTransition(e){Re(e,{willChange:"filter, transform",overflow:"hidden",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"}),e.removeAttribute("scale"),e.removeAttribute("offset"),e.removeAttribute("bgColor")}appendStyleAfterTransition(e,t,n){if(t)return this.resetRootNodeStyle(e);Re(e,{filter:n?`brightness(${this.brightnessHalfView})`:"",transform:n?"":`scale(${this.scale}) translate3d(0, ${this.topOffsetPercent}%, 0)`,borderRadius:n?"":this.borderRadius,backgroundColor:n?"":this.backgroundColor})}changeBrowserMetaColor(e,t){let n=Pg();e&&!t&&(n=Y$(n,parseFloat(this.brightnessHalfView))),r0(n)}resetRootNodeStyle(e){Re(e,{filter:"",transform:"",position:"",willChange:"",overflow:"",top:"",left:"",right:"",bottom:"",zIndex:"",pointerEvents:"",backgroundColor:"",borderRadius:""})}},yk=class{constructor(e,t){this.target=e,this.rootNodeName=t,this.activeOverlayMap=new Map,this.subscriptions=new Map,this.container=Ug()}get isOpen(){return this.activeOverlayMap.size>0}isOpenOverlay(e){return this.activeOverlayMap.has(e)}async open(e){const t=await this.getPosition(e),n=this.createOverlayContainer(e);n.maxHeight=t[2],this.target==="center"?Re(n,{top:"0px",left:"0px",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}):Re(n,{top:`${t[1]}px`,left:`${t[0]}px`,borderRadius:"24px",boxShadow:"0 -3px 4px 0 var(--primary-12), 0 6px 12px 0 var(--primary-12)"}),await this.animateEnter(n,t[3]);const r=Vg();return this.activeOverlayMap.set(r,n),this.subscribe(r),r}async close(e){if(!this.activeOverlayMap.has(e))return;const t=this.activeOverlayMap.get(e);await this.animateLeave(t),this.unsubscribe(e),t.remove(),this.activeOverlayMap.delete(e)}async getPosition(e){if(this.target==="center")return[0,0,window.innerHeight-8*2,null];const n=this.target.getBoundingClientRect(),r=await this.getRect(e);let i=n.right-r.width;i<=0&&(i=n.left);const o=n.top+n.height+8,s=window.innerHeight-o-8;return[i,o,s,n]}async getRect(e){const t=this.createOverlayContainer(e);Re(t,{visibility:"hidden"}),document.body.appendChild(t),await new Promise(r=>requestAnimationFrame(r));const n=t.getBoundingClientRect();return t.remove(),n}createOverlayContainer(e){const t=document.createElement(Gr.tagName);return Re(t,{position:"absolute",display:"flex",overflow:"hidden",alignItems:"flex-end",width:"fit-content",height:"fit-content",zIndex:"1000"}),Ao(G`${e}`,t),this.container.appendChild(t),t}subscribe(e){const t=new ii,n=this.activeOverlayMap.get(e);if(!n)return;if(this.target==="center"){t.add(rt(n,"click").subscribe(i=>{i.target===n&&this.close(e).catch()}));return}t.add(rt(window,"resize").subscribe(()=>this.close(e).catch()));const r=document.querySelector(this.rootNodeName);t.add(rt(r,"scroll").subscribe(()=>this.updatePosition(e))),t.add(rt(n,"click").subscribe(i=>{i.stopPropagation(),i.preventDefault()})),t.add(rt(document,"click").subscribe(()=>{this.close(e).catch()})),this.subscriptions.set(e,t)}unsubscribe(e){if(!this.subscriptions.has(e))return;const t=this.subscriptions.get(e);t.closed||t.unsubscribe()}updatePosition(e){if(this.target==="center"||!this.activeOverlayMap.has(e))return;const t=this.activeOverlayMap.get(e),n=this.target.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.top+n.height+8,o=n.right-r.width;Re(t,{top:`${i}px`,left:`${o}px`})}async animateEnter(e,t){const n={duration:500,easing:"cubic-bezier(.2, .8, .2, 1)"};if(this.target==="center"){const r=document.querySelector(this.rootNodeName);await Promise.all([r.animate([{filter:"blur(0)"},{filter:"blur(3px)"}],n),e.animate([{transform:"scale(.3)",opacity:.3},{transform:"scale(1)",opacity:1}],n).finished]),Re(r,{filter:"blur(3px)"});return}if(!t)throw new Error("");await e.animate([{transform:`translate3d(${Po()?-5:5}%, -5%, 0)`,opacity:.3},{transform:"translate3d(0, 0, 0)",opacity:1}],n).finished}async animateLeave(e){const t={duration:500,easing:"cubic-bezier(.2, .8, .2, 1)"};if(this.target==="center"){const n=document.querySelector(this.rootNodeName);await Promise.all([n.animate([{filter:"blur(3px)"},{filter:"blur(0)"}],t),e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(0)",opacity:0}],{...t,duration:300}).finished]),Re(n,{filter:""});return}await e.animate([{transform:"translate3d(0, 0, 0)",opacity:1},{transform:`translate3d(${Po()?-5:5}%, -5%, 0)`,opacity:0}],t).finished}},Ld=class{constructor(e,t){this.mobileMedia=Er(),this.mobileOverlay=new qg(e),this.desktopOverlay=new yk(t,e)}get isOpen(){return this.mobileMedia.matches?this.mobileOverlay.isOpen:this.desktopOverlay.isOpen}isOpenOverlay(e){return this.mobileMedia.matches?this.mobileOverlay.isOpenOverlay(e):this.desktopOverlay.isOpenOverlay(e)}async open(e){return this.mobileMedia.matches?await this.mobileOverlay.open(e):await this.desktopOverlay.open(e)}async close(e){return this.mobileMedia.matches?await this.mobileOverlay.close(e):await this.desktopOverlay.close(e)}},gk=Object.create,Qc=Object.defineProperty,bk=Object.getOwnPropertyDescriptor,jd=Object.getOwnPropertyNames,wk=Object.getPrototypeOf,vk=Object.prototype.hasOwnProperty,Ko=(e,t)=>function(){return e&&(t=(0,e[jd(e)[0]])(e=0)),t},$I=(e,t)=>function(){return t||(0,e[jd(e)[0]])((t={exports:{}}).exports,t),t.exports},kI=(e,t)=>{for(var n in t)Qc(e,n,{get:t[n],enumerable:!0})},Hg=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of jd(t))!vk.call(e,i)&&i!==n&&Qc(e,i,{get:()=>t[i],enumerable:!(r=bk(t,i))||r.enumerable});return e},CI=(e,t,n)=>(n=e!=null?gk(wk(e)):{},Hg(!e||!e.__esModule?Qc(n,"default",{value:e,enumerable:!0}):n,e)),PI=e=>Hg(Qc({},"__esModule",{value:!0}),e),Ar=Ko({"<define:__environment__>"(){}}),$r=Ko({"node_modules/.pnpm/esbuild-plugin-polyfill-node@0.3.0_esbuild@0.23.0/node_modules/esbuild-plugin-polyfill-node/polyfills/__dirname.js"(){}});function xk(){if(ph)return fo;ph=!0,fo.byteLength=l,fo.toByteArray=p,fo.fromByteArray=v;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(_){var E=_.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=_.indexOf("=");S===-1&&(S=E);var P=S===E?0:4-S%4;return[S,P]}function l(_){var E=s(_),S=E[0],P=E[1];return(S+P)*3/4-P}function h(_,E,S){return(E+S)*3/4-S}function p(_){var E,S=s(_),P=S[0],I=S[1],O=new n(h(_,P,I)),L=0,U=I>0?P-4:P,K;for(K=0;K<U;K+=4)E=t[_.charCodeAt(K)]<<18|t[_.charCodeAt(K+1)]<<12|t[_.charCodeAt(K+2)]<<6|t[_.charCodeAt(K+3)],O[L++]=E>>16&255,O[L++]=E>>8&255,O[L++]=E&255;return I===2&&(E=t[_.charCodeAt(K)]<<2|t[_.charCodeAt(K+1)]>>4,O[L++]=E&255),I===1&&(E=t[_.charCodeAt(K)]<<10|t[_.charCodeAt(K+1)]<<4|t[_.charCodeAt(K+2)]>>2,O[L++]=E>>8&255,O[L++]=E&255),O}function m(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function g(_,E,S){for(var P,I=[],O=E;O<S;O+=3)P=(_[O]<<16&16711680)+(_[O+1]<<8&65280)+(_[O+2]&255),I.push(m(P));return I.join("")}function v(_){for(var E,S=_.length,P=S%3,I=[],O=16383,L=0,U=S-P;L<U;L+=O)I.push(g(_,L,L+O>U?U:L+O));return P===1?(E=_[S-1],I.push(e[E>>2]+e[E<<4&63]+"==")):P===2&&(E=(_[S-2]<<8)+_[S-1],I.push(e[E>>10]+e[E>>4&63]+e[E<<2&63]+"=")),I.join("")}return fo}function _k(){return mh||(mh=!0,gs.read=function(e,t,n,r,i){var o,s,l=i*8-r-1,h=(1<<l)-1,p=h>>1,m=-7,g=n?i-1:0,v=n?-1:1,_=e[t+g];for(g+=v,o=_&(1<<-m)-1,_>>=-m,m+=l;m>0;o=o*256+e[t+g],g+=v,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=r;m>0;s=s*256+e[t+g],g+=v,m-=8);if(o===0)o=1-p;else{if(o===h)return s?NaN:(_?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-p}return(_?-1:1)*s*Math.pow(2,o-r)},gs.write=function(e,t,n,r,i,o){var s,l,h,p=o*8-i-1,m=(1<<p)-1,g=m>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=r?0:o-1,E=r?1:-1,S=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,s=m):(s=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+g>=1?t+=v/h:t+=v*Math.pow(2,1-g),t*h>=2&&(s++,h/=2),s+g>=m?(l=0,s=m):s+g>=1?(l=(t*h-1)*Math.pow(2,i),s=s+g):(l=t*Math.pow(2,g-1)*Math.pow(2,i),s=0));i>=8;e[n+_]=l&255,_+=E,l/=256,i-=8);for(s=s<<i|l,p+=i;p>0;e[n+_]=s&255,_+=E,s/=256,p-=8);e[n+_-E]|=S*128}),gs}function Ek(){if(yh)return zr;yh=!0;const e=xk(),t=_k(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;zr.Buffer=s,zr.SlowBuffer=I,zr.INSPECT_MAX_BYTES=50;const r=2147483647;zr.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const f=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(f,a),f.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(f){if(f>r)throw new RangeError('The value "'+f+'" is invalid for option "size"');const a=new Uint8Array(f);return Object.setPrototypeOf(a,s.prototype),a}function s(f,a,u){if(typeof f=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(f)}return l(f,a,u)}s.poolSize=8192;function l(f,a,u){if(typeof f=="string")return g(f,a);if(ArrayBuffer.isView(f))return _(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(st(f,ArrayBuffer)||f&&st(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(st(f,SharedArrayBuffer)||f&&st(f.buffer,SharedArrayBuffer)))return E(f,a,u);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=f.valueOf&&f.valueOf();if(b!=null&&b!==f)return s.from(b,a,u);const A=S(f);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return s.from(f[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}s.from=function(f,a,u){return l(f,a,u)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function h(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function p(f,a,u){return h(f),f<=0?o(f):a!==void 0?typeof u=="string"?o(f).fill(a,u):o(f).fill(a):o(f)}s.alloc=function(f,a,u){return p(f,a,u)};function m(f){return h(f),o(f<0?0:P(f)|0)}s.allocUnsafe=function(f){return m(f)},s.allocUnsafeSlow=function(f){return m(f)};function g(f,a){if((typeof a!="string"||a==="")&&(a="utf8"),!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const u=O(f,a)|0;let b=o(u);const A=b.write(f,a);return A!==u&&(b=b.slice(0,A)),b}function v(f){const a=f.length<0?0:P(f.length)|0,u=o(a);for(let b=0;b<a;b+=1)u[b]=f[b]&255;return u}function _(f){if(st(f,Uint8Array)){const a=new Uint8Array(f);return E(a.buffer,a.byteOffset,a.byteLength)}return v(f)}function E(f,a,u){if(a<0||f.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');let b;return a===void 0&&u===void 0?b=new Uint8Array(f):u===void 0?b=new Uint8Array(f,a):b=new Uint8Array(f,a,u),Object.setPrototypeOf(b,s.prototype),b}function S(f){if(s.isBuffer(f)){const a=P(f.length)|0,u=o(a);return u.length===0||f.copy(u,0,0,a),u}if(f.length!==void 0)return typeof f.length!="number"||At(f.length)?o(0):v(f);if(f.type==="Buffer"&&Array.isArray(f.data))return v(f.data)}function P(f){if(f>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return f|0}function I(f){return+f!=f&&(f=0),s.alloc(+f)}s.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==s.prototype},s.compare=function(a,u){if(st(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),st(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),!s.isBuffer(a)||!s.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;let b=a.length,A=u.length;for(let k=0,T=Math.min(b,A);k<T;++k)if(a[k]!==u[k]){b=a[k],A=u[k];break}return b<A?-1:A<b?1:0},s.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return s.alloc(0);let b;if(u===void 0)for(u=0,b=0;b<a.length;++b)u+=a[b].length;const A=s.allocUnsafe(u);let k=0;for(b=0;b<a.length;++b){let T=a[b];if(st(T,Uint8Array))k+T.length>A.length?(s.isBuffer(T)||(T=s.from(T)),T.copy(A,k)):Uint8Array.prototype.set.call(A,T,k);else if(s.isBuffer(T))T.copy(A,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=T.length}return A};function O(f,a){if(s.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||st(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const u=f.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&u===0)return 0;let A=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return St(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return ui(f).length;default:if(A)return b?-1:St(f).length;a=(""+a).toLowerCase(),A=!0}}s.byteLength=O;function L(f,a,u){let b=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,a>>>=0,u<=a))return"";for(f||(f="utf8");;)switch(f){case"hex":return Ve(this,a,u);case"utf8":case"utf-8":return Me(this,a,u);case"ascii":return ae(this,a,u);case"latin1":case"binary":return $e(this,a,u);case"base64":return Ne(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,a,u);default:if(b)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),b=!0}}s.prototype._isBuffer=!0;function U(f,a,u){const b=f[a];f[a]=f[u],f[u]=b}s.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<a;u+=2)U(this,u,u+1);return this},s.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<a;u+=4)U(this,u,u+3),U(this,u+1,u+2);return this},s.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<a;u+=8)U(this,u,u+7),U(this,u+1,u+6),U(this,u+2,u+5),U(this,u+3,u+4);return this},s.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?Me(this,0,a):L.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(a){if(!s.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:s.compare(this,a)===0},s.prototype.inspect=function(){let a="";const u=zr.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(a,u,b,A,k){if(st(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(u===void 0&&(u=0),b===void 0&&(b=a?a.length:0),A===void 0&&(A=0),k===void 0&&(k=this.length),u<0||b>a.length||A<0||k>this.length)throw new RangeError("out of range index");if(A>=k&&u>=b)return 0;if(A>=k)return-1;if(u>=b)return 1;if(u>>>=0,b>>>=0,A>>>=0,k>>>=0,this===a)return 0;let T=k-A,se=b-u;const Ce=Math.min(T,se),xe=this.slice(A,k),re=a.slice(u,b);for(let ge=0;ge<Ce;++ge)if(xe[ge]!==re[ge]){T=xe[ge],se=re[ge];break}return T<se?-1:se<T?1:0};function K(f,a,u,b,A){if(f.length===0)return-1;if(typeof u=="string"?(b=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,At(u)&&(u=A?0:f.length-1),u<0&&(u=f.length+u),u>=f.length){if(A)return-1;u=f.length-1}else if(u<0)if(A)u=0;else return-1;if(typeof a=="string"&&(a=s.from(a,b)),s.isBuffer(a))return a.length===0?-1:X(f,a,u,b,A);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(f,a,u):Uint8Array.prototype.lastIndexOf.call(f,a,u):X(f,[a],u,b,A);throw new TypeError("val must be string, number or Buffer")}function X(f,a,u,b,A){let k=1,T=f.length,se=a.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(f.length<2||a.length<2)return-1;k=2,T/=2,se/=2,u/=2}function Ce(re,ge){return k===1?re[ge]:re.readUInt16BE(ge*k)}let xe;if(A){let re=-1;for(xe=u;xe<T;xe++)if(Ce(f,xe)===Ce(a,re===-1?0:xe-re)){if(re===-1&&(re=xe),xe-re+1===se)return re*k}else re!==-1&&(xe-=xe-re),re=-1}else for(u+se>T&&(u=T-se),xe=u;xe>=0;xe--){let re=!0;for(let ge=0;ge<se;ge++)if(Ce(f,xe+ge)!==Ce(a,ge)){re=!1;break}if(re)return xe}return-1}s.prototype.includes=function(a,u,b){return this.indexOf(a,u,b)!==-1},s.prototype.indexOf=function(a,u,b){return K(this,a,u,b,!0)},s.prototype.lastIndexOf=function(a,u,b){return K(this,a,u,b,!1)};function te(f,a,u,b){u=Number(u)||0;const A=f.length-u;b?(b=Number(b),b>A&&(b=A)):b=A;const k=a.length;b>k/2&&(b=k/2);let T;for(T=0;T<b;++T){const se=parseInt(a.substr(T*2,2),16);if(At(se))return T;f[u+T]=se}return T}function ne(f,a,u,b){return $n(St(a,f.length-u),f,u,b)}function de(f,a,u,b){return $n(Yo(a),f,u,b)}function we(f,a,u,b){return $n(ui(a),f,u,b)}function ve(f,a,u,b){return $n(Zo(a,f.length-u),f,u,b)}s.prototype.write=function(a,u,b,A){if(u===void 0)A="utf8",b=this.length,u=0;else if(b===void 0&&typeof u=="string")A=u,b=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(b)?(b=b>>>0,A===void 0&&(A="utf8")):(A=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-u;if((b===void 0||b>k)&&(b=k),a.length>0&&(b<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let T=!1;for(;;)switch(A){case"hex":return te(this,a,u,b);case"utf8":case"utf-8":return ne(this,a,u,b);case"ascii":case"latin1":case"binary":return de(this,a,u,b);case"base64":return we(this,a,u,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,a,u,b);default:if(T)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),T=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ne(f,a,u){return a===0&&u===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(a,u))}function Me(f,a,u){u=Math.min(f.length,u);const b=[];let A=a;for(;A<u;){const k=f[A];let T=null,se=k>239?4:k>223?3:k>191?2:1;if(A+se<=u){let Ce,xe,re,ge;switch(se){case 1:k<128&&(T=k);break;case 2:Ce=f[A+1],(Ce&192)===128&&(ge=(k&31)<<6|Ce&63,ge>127&&(T=ge));break;case 3:Ce=f[A+1],xe=f[A+2],(Ce&192)===128&&(xe&192)===128&&(ge=(k&15)<<12|(Ce&63)<<6|xe&63,ge>2047&&(ge<55296||ge>57343)&&(T=ge));break;case 4:Ce=f[A+1],xe=f[A+2],re=f[A+3],(Ce&192)===128&&(xe&192)===128&&(re&192)===128&&(ge=(k&15)<<18|(Ce&63)<<12|(xe&63)<<6|re&63,ge>65535&&ge<1114112&&(T=ge))}}T===null?(T=65533,se=1):T>65535&&(T-=65536,b.push(T>>>10&1023|55296),T=56320|T&1023),b.push(T),A+=se}return oe(b)}const et=4096;function oe(f){const a=f.length;if(a<=et)return String.fromCharCode.apply(String,f);let u="",b=0;for(;b<a;)u+=String.fromCharCode.apply(String,f.slice(b,b+=et));return u}function ae(f,a,u){let b="";u=Math.min(f.length,u);for(let A=a;A<u;++A)b+=String.fromCharCode(f[A]&127);return b}function $e(f,a,u){let b="";u=Math.min(f.length,u);for(let A=a;A<u;++A)b+=String.fromCharCode(f[A]);return b}function Ve(f,a,u){const b=f.length;(!a||a<0)&&(a=0),(!u||u<0||u>b)&&(u=b);let A="";for(let k=a;k<u;++k)A+=Xi[f[k]];return A}function Be(f,a,u){const b=f.slice(a,u);let A="";for(let k=0;k<b.length-1;k+=2)A+=String.fromCharCode(b[k]+b[k+1]*256);return A}s.prototype.slice=function(a,u){const b=this.length;a=~~a,u=u===void 0?b:~~u,a<0?(a+=b,a<0&&(a=0)):a>b&&(a=b),u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),u<a&&(u=a);const A=this.subarray(a,u);return Object.setPrototypeOf(A,s.prototype),A};function pe(f,a,u){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+a>u)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=this[a],k=1,T=0;for(;++T<u&&(k*=256);)A+=this[a+T]*k;return A},s.prototype.readUintBE=s.prototype.readUIntBE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=this[a+--u],k=1;for(;u>0&&(k*=256);)A+=this[a+--u]*k;return A},s.prototype.readUint8=s.prototype.readUInt8=function(a,u){return a=a>>>0,u||pe(a,1,this.length),this[a]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(a,u){return a=a>>>0,u||pe(a,2,this.length),this[a]|this[a+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(a,u){return a=a>>>0,u||pe(a,2,this.length),this[a]<<8|this[a+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},s.prototype.readBigUInt64LE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,k=this[++a]+this[++a]*2**8+this[++a]*2**16+b*2**24;return BigInt(A)+(BigInt(k)<<BigInt(32))}),s.prototype.readBigUInt64BE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=u*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],k=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+b;return(BigInt(A)<<BigInt(32))+BigInt(k)}),s.prototype.readIntLE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=this[a],k=1,T=0;for(;++T<u&&(k*=256);)A+=this[a+T]*k;return k*=128,A>=k&&(A-=Math.pow(2,8*u)),A},s.prototype.readIntBE=function(a,u,b){a=a>>>0,u=u>>>0,b||pe(a,u,this.length);let A=u,k=1,T=this[a+--A];for(;A>0&&(k*=256);)T+=this[a+--A]*k;return k*=128,T>=k&&(T-=Math.pow(2,8*u)),T},s.prototype.readInt8=function(a,u){return a=a>>>0,u||pe(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},s.prototype.readInt16LE=function(a,u){a=a>>>0,u||pe(a,2,this.length);const b=this[a]|this[a+1]<<8;return b&32768?b|4294901760:b},s.prototype.readInt16BE=function(a,u){a=a>>>0,u||pe(a,2,this.length);const b=this[a+1]|this[a]<<8;return b&32768?b|4294901760:b},s.prototype.readInt32LE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},s.prototype.readInt32BE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},s.prototype.readBigInt64LE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(b<<24);return(BigInt(A)<<BigInt(32))+BigInt(u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),s.prototype.readBigInt64BE=lt(function(a){a=a>>>0,ot(a,"offset");const u=this[a],b=this[a+7];(u===void 0||b===void 0)&&Ae(a,this.length-8);const A=(u<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(A)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+b)}),s.prototype.readFloatLE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),t.read(this,a,!0,23,4)},s.prototype.readFloatBE=function(a,u){return a=a>>>0,u||pe(a,4,this.length),t.read(this,a,!1,23,4)},s.prototype.readDoubleLE=function(a,u){return a=a>>>0,u||pe(a,8,this.length),t.read(this,a,!0,52,8)},s.prototype.readDoubleBE=function(a,u){return a=a>>>0,u||pe(a,8,this.length),t.read(this,a,!1,52,8)};function Ee(f,a,u,b,A,k){if(!s.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>A||a<k)throw new RangeError('"value" argument is out of bounds');if(u+b>f.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(a,u,b,A){if(a=+a,u=u>>>0,b=b>>>0,!A){const se=Math.pow(2,8*b)-1;Ee(this,a,u,b,se,0)}let k=1,T=0;for(this[u]=a&255;++T<b&&(k*=256);)this[u+T]=a/k&255;return u+b},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(a,u,b,A){if(a=+a,u=u>>>0,b=b>>>0,!A){const se=Math.pow(2,8*b)-1;Ee(this,a,u,b,se,0)}let k=b-1,T=1;for(this[u+k]=a&255;--k>=0&&(T*=256);)this[u+k]=a/T&255;return u+b},s.prototype.writeUint8=s.prototype.writeUInt8=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,1,255,0),this[u]=a&255,u+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,65535,0),this[u]=a&255,this[u+1]=a>>>8,u+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=a&255,u+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=a&255,u+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4};function tt(f,a,u,b,A){An(a,b,A,f,u,7);let k=Number(a&BigInt(4294967295));f[u++]=k,k=k>>8,f[u++]=k,k=k>>8,f[u++]=k,k=k>>8,f[u++]=k;let T=Number(a>>BigInt(32)&BigInt(4294967295));return f[u++]=T,T=T>>8,f[u++]=T,T=T>>8,f[u++]=T,T=T>>8,f[u++]=T,u}function Mt(f,a,u,b,A){An(a,b,A,f,u,7);let k=Number(a&BigInt(4294967295));f[u+7]=k,k=k>>8,f[u+6]=k,k=k>>8,f[u+5]=k,k=k>>8,f[u+4]=k;let T=Number(a>>BigInt(32)&BigInt(4294967295));return f[u+3]=T,T=T>>8,f[u+2]=T,T=T>>8,f[u+1]=T,T=T>>8,f[u]=T,u+8}s.prototype.writeBigUInt64LE=lt(function(a,u=0){return tt(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=lt(function(a,u=0){return Mt(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(a,u,b,A){if(a=+a,u=u>>>0,!A){const Ce=Math.pow(2,8*b-1);Ee(this,a,u,b,Ce-1,-Ce)}let k=0,T=1,se=0;for(this[u]=a&255;++k<b&&(T*=256);)a<0&&se===0&&this[u+k-1]!==0&&(se=1),this[u+k]=(a/T>>0)-se&255;return u+b},s.prototype.writeIntBE=function(a,u,b,A){if(a=+a,u=u>>>0,!A){const Ce=Math.pow(2,8*b-1);Ee(this,a,u,b,Ce-1,-Ce)}let k=b-1,T=1,se=0;for(this[u+k]=a&255;--k>=0&&(T*=256);)a<0&&se===0&&this[u+k+1]!==0&&(se=1),this[u+k]=(a/T>>0)-se&255;return u+b},s.prototype.writeInt8=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=a&255,u+1},s.prototype.writeInt16LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,32767,-32768),this[u]=a&255,this[u+1]=a>>>8,u+2},s.prototype.writeInt16BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=a&255,u+2},s.prototype.writeInt32LE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,2147483647,-2147483648),this[u]=a&255,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},s.prototype.writeInt32BE=function(a,u,b){return a=+a,u=u>>>0,b||Ee(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4},s.prototype.writeBigInt64LE=lt(function(a,u=0){return tt(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=lt(function(a,u=0){return Mt(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ct(f,a,u,b,A,k){if(u+b>f.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Tt(f,a,u,b,A){return a=+a,u=u>>>0,A||ct(f,a,u,4),t.write(f,a,u,b,23,4),u+4}s.prototype.writeFloatLE=function(a,u,b){return Tt(this,a,u,!0,b)},s.prototype.writeFloatBE=function(a,u,b){return Tt(this,a,u,!1,b)};function Dt(f,a,u,b,A){return a=+a,u=u>>>0,A||ct(f,a,u,8),t.write(f,a,u,b,52,8),u+8}s.prototype.writeDoubleLE=function(a,u,b){return Dt(this,a,u,!0,b)},s.prototype.writeDoubleBE=function(a,u,b){return Dt(this,a,u,!1,b)},s.prototype.copy=function(a,u,b,A){if(!s.isBuffer(a))throw new TypeError("argument should be a Buffer");if(b||(b=0),!A&&A!==0&&(A=this.length),u>=a.length&&(u=a.length),u||(u=0),A>0&&A<b&&(A=b),A===b||a.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),a.length-u<A-b&&(A=a.length-u+b);const k=A-b;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,b,A):Uint8Array.prototype.set.call(a,this.subarray(b,A),u),k},s.prototype.fill=function(a,u,b,A){if(typeof a=="string"){if(typeof u=="string"?(A=u,u=0,b=this.length):typeof b=="string"&&(A=b,b=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!s.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(a.length===1){const T=a.charCodeAt(0);(A==="utf8"&&T<128||A==="latin1")&&(a=T)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(u<0||this.length<u||this.length<b)throw new RangeError("Out of range index");if(b<=u)return this;u=u>>>0,b=b===void 0?this.length:b>>>0,a||(a=0);let k;if(typeof a=="number")for(k=u;k<b;++k)this[k]=a;else{const T=s.isBuffer(a)?a:s.from(a,A),se=T.length;if(se===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(k=0;k<b-u;++k)this[k+u]=T[k%se]}return this};const Je={};function Wt(f,a,u){Je[f]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Wt("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Wt("ERR_INVALID_ARG_TYPE",function(f,a){return`The "${f}" argument must be of type number. Received type ${typeof a}`},TypeError),Wt("ERR_OUT_OF_RANGE",function(f,a,u){let b=`The value of "${f}" is out of range.`,A=u;return Number.isInteger(u)&&Math.abs(u)>2**32?A=Gt(String(u)):typeof u=="bigint"&&(A=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(A=Gt(A)),A+="n"),b+=` It must be ${a}. Received ${A}`,b},RangeError);function Gt(f){let a="",u=f.length;const b=f[0]==="-"?1:0;for(;u>=b+4;u-=3)a=`_${f.slice(u-3,u)}${a}`;return`${f.slice(0,u)}${a}`}function ye(f,a,u){ot(a,"offset"),(f[a]===void 0||f[a+u]===void 0)&&Ae(a,f.length-(u+1))}function An(f,a,u,b,A,k){if(f>u||f<a){const T=typeof a=="bigint"?"n":"";let se;throw a===0||a===BigInt(0)?se=`>= 0${T} and < 2${T} ** ${(k+1)*8}${T}`:se=`>= -(2${T} ** ${(k+1)*8-1}${T}) and < 2 ** ${(k+1)*8-1}${T}`,new Je.ERR_OUT_OF_RANGE("value",se,f)}ye(b,A,k)}function ot(f,a){if(typeof f!="number")throw new Je.ERR_INVALID_ARG_TYPE(a,"number",f)}function Ae(f,a,u){throw Math.floor(f)!==f?(ot(f,u),new Je.ERR_OUT_OF_RANGE("offset","an integer",f)):a<0?new Je.ERR_BUFFER_OUT_OF_BOUNDS:new Je.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${a}`,f)}const Nt=/[^+/0-9A-Za-z-_]/g;function Pr(f){if(f=f.split("=")[0],f=f.trim().replace(Nt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function St(f,a){a=a||1/0;let u;const b=f.length;let A=null;const k=[];for(let T=0;T<b;++T){if(u=f.charCodeAt(T),u>55295&&u<57344){if(!A){if(u>56319){(a-=3)>-1&&k.push(239,191,189);continue}else if(T+1===b){(a-=3)>-1&&k.push(239,191,189);continue}A=u;continue}if(u<56320){(a-=3)>-1&&k.push(239,191,189),A=u;continue}u=(A-55296<<10|u-56320)+65536}else A&&(a-=3)>-1&&k.push(239,191,189);if(A=null,u<128){if((a-=1)<0)break;k.push(u)}else if(u<2048){if((a-=2)<0)break;k.push(u>>6|192,u&63|128)}else if(u<65536){if((a-=3)<0)break;k.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((a-=4)<0)break;k.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return k}function Yo(f){const a=[];for(let u=0;u<f.length;++u)a.push(f.charCodeAt(u)&255);return a}function Zo(f,a){let u,b,A;const k=[];for(let T=0;T<f.length&&!((a-=2)<0);++T)u=f.charCodeAt(T),b=u>>8,A=u%256,k.push(A),k.push(b);return k}function ui(f){return e.toByteArray(Pr(f))}function $n(f,a,u,b){let A;for(A=0;A<b&&!(A+u>=a.length||A>=f.length);++A)a[A+u]=f[A];return A}function st(f,a){return f instanceof a||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===a.name}function At(f){return f!==f}const Xi=function(){const f="0123456789abcdef",a=new Array(256);for(let u=0;u<16;++u){const b=u*16;for(let A=0;A<16;++A)a[b+A]=f[u]+f[A]}return a}();function lt(f){return typeof BigInt>"u"?Ji:f}function Ji(){throw new Error("BigInt not supported")}return zr}var fo,ph,gs,mh,zr,yh,Lr,Sk,Ak=Ko({"node_modules/.pnpm/@jspm+core@2.0.1/node_modules/@jspm/core/nodelibs/browser/buffer.js"(){Ar(),$r(),kr(),Cr(),fo={},ph=!1,gs={},mh=!1,zr={},yh=!1,Lr=Ek(),Lr.Buffer,Lr.SlowBuffer,Lr.INSPECT_MAX_BYTES,Lr.kMaxLength,Sk=Lr.Buffer,Lr.INSPECT_MAX_BYTES,Lr.kMaxLength}}),kr=Ko({"node_modules/.pnpm/esbuild-plugin-polyfill-node@0.3.0_esbuild@0.23.0/node_modules/esbuild-plugin-polyfill-node/polyfills/buffer.js"(){Ak()}}),uo,yl,$k=Ko({"node_modules/.pnpm/@jspm+core@2.0.1/node_modules/@jspm/core/nodelibs/browser/process.js"(){Ar(),$r(),kr(),Cr(),uo={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},uo.now===void 0&&(yl=Date.now(),uo.timing&&uo.timing.navigationStart&&(yl=uo.timing.navigationStart),uo.now=()=>Date.now()-yl)}}),Cr=Ko({"node_modules/.pnpm/esbuild-plugin-polyfill-node@0.3.0_esbuild@0.23.0/node_modules/esbuild-plugin-polyfill-node/polyfills/process.js"(){$k()}}),Qp=class{constructor(e,t=null){this.name=e,this.initValue=t,this.valueState$=new Co(kk(this.name)??this.initValue),this.value$=this.valueState$,this.originalValue=null}get value(){return this.valueState$.value}setValue(e){this.valueState$.next(e),gl(this.name,e)}resetValue(){this.valueState$.next(this.originalValue),gl(this.name,this.originalValue)}cleanValue(){this.valueState$.next(null),gl(this.name,null)}startChangingValue(){if(this.originalValue!==null)throw new Error("value changing in progress");this.originalValue=this.value}endChangingValue(){this.originalValue=null}},gh="one-inch-settings";function gl(e,t){const n=nt.get(gh,Gn)??{};nt.set(gh,{...n,[e]:t})}function kk(e){const t=nt.get(gh,Gn);return t===null?null:Reflect.get(t,e)}Ar();$r();kr();Cr();Ar();$r();kr();Cr();Ar();$r();kr();Cr();Ar();$r();kr();Cr();var em=class{constructor(){this.lastSnapshot={token:null,amount:null},this.signalChange$=new tn}setToken(e){const{token:t}=this.lastSnapshot;t&&e&&Zn(t,e)||(this.lastSnapshot={...this.lastSnapshot,token:e,amount:0n},this.signalChange$.next())}setAmount(e){const{amount:t}=this.lastSnapshot;t!==e&&(this.lastSnapshot={...this.lastSnapshot,amount:e},this.signalChange$.next())}getSnapshot(){return this.lastSnapshot}streamSnapshot(){return this.signalChange$.pipe(Pe(()=>this.lastSnapshot),Ot(this.lastSnapshot),zt(),ft({bufferSize:1,refCount:!0}))}},Ck=class{constructor(){this.source=new em,this.destination=new em,this.pairChance$=new tn}switchPair(){const{source:e,destination:t}=this;this.source=t,this.destination=e,this.pairChance$.next()}setPair(e){this.setToken(e.srcToken,"source"),this.setToken(e.dstToken,"destination"),this.pairChance$.next()}setAmount(e,t){this.getTokenContext(e).setAmount(t)}streamSnapshot(e){return this.pairChance$.pipe(Ot(null),He(()=>this.getTokenContext(e).streamSnapshot()))}getSnapshot(e){return this.getTokenContext(e).getSnapshot()}setToken(e,t){this.getTokenContext(t).setToken(e)}getTokenContext(e){if(e==="source")return this.source;if(e==="destination")return this.destination;throw new Error(`invalid token type ${e}`)}};Ar();$r();kr();Cr();var Pk=class{constructor(e,t,n=_g()){this.pairHolder=e,this.walletController=t,this.rateProvider=n}async getDataSnapshot(){const e=this.pairHolder.getSnapshot("source"),t=this.pairHolder.getSnapshot("destination"),{token:n,amount:r}=e,{token:i}=t,o=await this.walletController.data.getChainId(),s=await this.walletController.data.getActiveAddress();if(o===null||n===null||i===null||r===null||s===null)throw new Error("");const l=await this.rateProvider.getOnChainRate(o,n,i);if(l===null)throw new Error("");let h;return l.revertedRate?h=Rn.div(r,l.revertedRate,n.decimals,i.decimals,i.decimals):h=Rn.mul(r,l.rate,n.decimals,n.decimals,i.decimals),{chainId:o,sourceToken:n,destinationToken:i,sourceTokenAmount:r,destinationTokenAmount:h,rate:l,minReceive:h,autoAuctionTime:null,autoSlippage:null,rawResponseData:null}}};Ar();$r();kr();Cr();var Ik=class{constructor(e,t,n,r,i){this.swapContext=e,this.pairHolder=t,this.walletController=n,this.settings=r,this.devPortalAdapter=i}async getDataSnapshot(){const e=this.pairHolder.getSnapshot("source"),t=this.pairHolder.getSnapshot("destination");let{token:n}=e;const{amount:r}=e,{token:i}=t,o=await this.walletController.data.getChainId(),s=await this.walletController.data.getActiveAddress();if(o===null||n===null||i===null||r===null||s===null||r===0n)throw new Error("");if(await this.swapContext.getMaxAmount()<r)throw new Error("");_r(n.address)&&(n=Js(o));const h=await this.devPortalAdapter.getFusionQuoteReceive(o,n.address,i.address,r,s);if(h===null)throw new Error("");const{toTokenAmount:p,recommended_preset:m,presets:g,autoK:v}=h,_=g[m],E=BigInt(p),S=Rn.div(E,r,i.decimals,n.decimals),P=Rn.div(r,E,n.decimals,i.decimals),I={chainId:o,rate:S,revertedRate:P,isReverted:!1,sourceToken:n,destinationToken:i},O=this.settings.slippage;let L=BigInt(_.auctionEndAmount);if(O.value!==null){const[U]=O.value,K=Rn.calculatePercentage(E,U);L=E-K}return{chainId:o,sourceToken:n,destinationToken:i,sourceTokenAmount:r,minReceive:L,destinationTokenAmount:E,autoAuctionTime:_.auctionDuration,autoSlippage:v,rate:I,rawResponseData:h}}},Wg=class{constructor(e){this.walletController=e,this.pairHolder=new Ck,this.subscription=new ii,this.oneInchApiAdapter=new Zi,this.settings={slippage:new Qp("slippage"),auctionTime:new Qp("auctionTime")},this.contextStrategy={onChain:new Pk(this.pairHolder,this.walletController),fusion:new Ik(this,this.pairHolder,this.walletController,this.settings,this.oneInchApiAdapter)},this.loading$=new Co(!1),this.chainId$=qe(()=>this.walletController.data.chainId$).pipe(zt()),this.connectedWalletAddress$=qe(()=>this.walletController.data.activeAddress$).pipe(zt()),this.block$=this.chainId$.pipe(He(t=>t?ba(t):Yt(null))),this.updateData$=new tn,this.updateDataComplete$=new tn,this.dataUpdateEmitter$=gr(this.block$,this.chainId$,this.connectedWalletAddress$,this.pairHolder.streamSnapshot("source"),this.pairHolder.streamSnapshot("destination"),this.updateData$).pipe(Uo(500),Pe(()=>{}),Ot(void 0),ft({bufferSize:1,refCount:!0})),this.dataSnapshot$=this.dataUpdateEmitter$.pipe(Fh(this.connectedWalletAddress$),He(([t,n])=>(this.loading$.next(!0),this.getDataSnapshot(n===null))),We(()=>{this.loading$.next(!1),this.updateDataComplete$.next()}),ft({bufferSize:1,refCount:!0})),this.rate$=this.dataSnapshot$.pipe(Pe(t=>(t==null?void 0:t.rate)??null)),this.minReceive$=this.dataSnapshot$.pipe(Pe(t=>(t==null?void 0:t.minReceive)??0n)),this.destinationTokenAmount$=this.dataSnapshot$.pipe(Pe(t=>(t==null?void 0:t.destinationTokenAmount)??0n)),this.autoSlippage$=this.dataSnapshot$.pipe(Pe(t=>(t==null?void 0:t.autoSlippage)??null)),this.autoAuctionTime$=this.dataSnapshot$.pipe(Pe(t=>(t==null?void 0:t.autoAuctionTime)??null)),this.slippage$=Xt([this.autoSlippage$,this.settings.slippage.value$]).pipe(Pe(([t,n])=>n?{type:n[1],value:n[0]}:{type:"auto",value:t}),ft({bufferSize:1,refCount:!0})),this.auctionTime$=Xt([this.autoAuctionTime$,this.settings.auctionTime.value$]).pipe(Pe(([t,n])=>n?{type:n[1],value:n[0]}:{type:"auto",value:t}),ft({bufferSize:1,refCount:!0})),this.subscription.add(gr(this.destinationTokenAmount$.pipe(zt(),We(t=>{this.setTokenAmountByType("destination",t)}))).subscribe())}wrapNativeToken(e){throw new Error("Method not implemented.")}getApprove(){throw new Error("Method not implemented.")}getSettingsController(e){const t=this.settings[e];if(!t)throw new Error("");return t}async getPermit(){const e=await this.walletController.data.getChainId(),t=await this.walletController.data.getActiveAddress(),n=this.pairHolder.getSnapshot("source");if(!e||!t||!Tk(n))throw new Error("");if(await uh(e,n.token.address,t,ms(e))!==null)return;const i=await YA(e,n.token.address,t,ms(e)),o=await this.walletController.signTypedData(i);await XA(e,n.token.address,t,ms(e),o,i.message)}destroy(){this.subscription.unsubscribe()}setPair(e){this.pairHolder.setPair(e)}switchPair(){this.pairHolder.switchPair()}async getSnapshot(){this.updateData$.next(),await dn(this.updateDataComplete$);const[e,t,n]=await Promise.all([dn(this.dataSnapshot$),dn(this.slippage$),dn(this.auctionTime$)]);return{...e,slippage:t,auctionTime:n}}async fusionSwap(e){const{chainId:t,sourceToken:n,destinationToken:r,sourceTokenAmount:i,destinationTokenAmount:o,slippage:s,auctionTime:l,rawResponseData:h}=e,p=await this.walletController.data.getActiveAddress();if(p===null)throw new Error("");if(!h)throw new Error("");const m=await this.getFusionSDKInstance(t),g=await uh(t,n.address,p,ms(t)),v={walletAddress:p,fromTokenAddress:n.address,toTokenAddress:r.address,amount:i.toString(),preset:h.recommended_preset};g&&(v.permit=await QA(t,p,g.signature,g.permitSingle),v.isPermit2=!0);const{type:_,value:E}=s,{type:S,value:P}=l;if(_!=="auto"||S!=="auto"){const O=h.presets[h.recommended_preset],L=o-Rn.calculatePercentage(o,E??h.autoK);v.customPreset={auctionEndAmount:L.toString(),auctionDuration:P??O.auctionDuration,auctionStartAmount:O.auctionStartAmount},v.preset="custom"}const I=await m.createOrder(v);await m.submitOrder(I.order,I.quoteId)}async getMaxAmount(){const t=this.pairHolder.getSnapshot("source").token,n=await this.walletController.data.getActiveAddress();if(!t||!n)return 0n;const r=await rn.getTokenBalance(t.chainId,t.address,n);let i=BigInt((r==null?void 0:r.amount)??0);if(_r(t.address)){const o=await this.walletController.data.getChainId();if(!o)return 0n;const[s,l]=await Promise.all([u$(o,i),this.oneInchApiAdapter.getGasPrice(o)]);if(!l)return 0n;const h=l.high,p=s*(BigInt(h.maxFeePerGas)+BigInt(h.maxPriorityFeePerGas));i=i-p,i<0n&&(i=0n)}return i}async setMaxAmount(){const e=await this.getMaxAmount();this.setTokenAmountByType("source",e)}getTokenByType(e){return this.pairHolder.streamSnapshot(e).pipe(Pe(t=>t.token),zt())}getTokenAmountByType(e){return this.pairHolder.streamSnapshot(e).pipe(Pe(t=>t.amount),zt())}getTokenRawAmountByType(e){return this.pairHolder.streamSnapshot(e).pipe(Pe(t=>t.amount),zt())}setTokenAmountByType(e,t){this.pairHolder.setAmount(e,t)}async getFusionSDKInstance(e){const{FusionSDK:t}=await me(async()=>{const{FusionSDK:n}=await import("./esm-WMGHUIL7-DvSfxsjG.js");return{FusionSDK:n}},[]);return new t({url:Yc("oneInchDevPortalHost")+"/fusion",network:e,blockchainProvider:new Bk(e,this.walletController),httpProvider:new Ok})}async getDataSnapshot(e){if(!e)try{return await this.contextStrategy.fusion.getDataSnapshot()}catch{return this.getDataSnapshot(!0)}try{return await this.contextStrategy.onChain.getDataSnapshot()}catch{return null}}};function Tk(e){return e.token!==null&&e.amount!==null}var Bk=class{constructor(e,t){this.chainId=e,this.walletController=t,this.client=pn(this.chainId)}async signTypedData(e,t){return await this.walletController.signTypedData(t)}async ethCall(e,t){return(await this.client.call({to:e,data:t})).data??""}},Ok=class{async get(e){return(await fetch(e)).json()}async post(e,t){return(await fetch(e,{method:"POST",body:JSON.stringify(t)})).json().catch(()=>{})}};Ar();$r();kr();Cr();var Rk=[R.eth,R.bnb,R.matic,R.arbitrum,R.avalanche,R.op,R.gnosis,R.fantom];function Mk(e){return Rk.includes(e)}var Dk=Object.defineProperty,Nk=Object.getOwnPropertyDescriptor,Ze=(e,t,n,r)=>{for(var i=r>1?void 0:r?Nk(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&Dk(t,n,i),i},Fk=be``,Lk=be`:host{display:block;transition:height .2s;overflow:hidden}.wallet-view-container{display:flex;align-content:center;justify-content:space-between;padding:20px 16px;border-radius:16px;transition:background-color .2s,height .2s;position:relative;overflow:hidden;color:var(--color-content-content-primary)}.wallet-icon{width:24px;height:24px}.wallet-name{color:var(--color-content-content-primary);font-size:16px;font-style:normal;font-weight:400;line-height:24px}.connect-icon{color:var(--color-content-content-primary);margin-left:auto;transform:scale(0);transition:transform .2s}.connect-icon__connected{transform:scale(1);transition:color .2s;color:var(--color-content-content-primary)}.connect-icon__active{transform:scale(1);transition:color .2s;color:var(--primary)}.data-container{display:flex;align-items:center;gap:8px}.loader-icon{height:24px;width:24px;margin-left:auto}.address-list{display:flex;flex-direction:column}inch-wallet-view-address-balance{transform:translate3d(24px,0,0);transition:transform .2s;will-change:transform}.add-connection{transition:transform .2s;transform:scale(0)}.address-container__active inch-wallet-view-address-balance{transform:translate3d(0,0,0)}.wallet-view-container__wc.wallet-view-container__connected:not(.wallet-view-container__loading) .right-data{transform:translate3d(36px,0,0);transition:transform .2s}.sub-wallet-icon:dir(rtl){transform:scale(-1,1)}@media (hover:hover){.wallet-view-container:hover{background-color:var(--color-background-bg-secondary)}.wallet-view-container:hover .connect-icon{transform:scale(1)}.wallet-view-container:hover inch-wallet-view-address-balance{transform:translate3d(0,0,0)}.wallet-view-container:hover .add-connection{transform:scale(1)}.wallet-view-container:hover.wallet-view-container__wc.wallet-view-container__connected .right-data{transform:translate3d(0,0,0)}}@media (hover:none){.wallet-view-container__wc.wallet-view-container__connected:not(.wallet-view-container__loading) .right-data{transform:translate3d(0,0,0)}.add-connection{transform:scale(1)}}@keyframes rainbow{0%{background-position:0}100%{background-position:100%}}`,zd=Symbol("controller context"),jk=be`:host{color:var(--color-content-content-primary);text-align:right;font-size:16px;font-style:normal;font-weight:500;line-height:24px}.loader{will-change:filter;height:20px;width:60px;background-color:var(--color-background-bg-secondary);border-radius:4px;animation:stub-loader-animation 3s ease-in-out infinite}@keyframes stub-loader-animation{0%,100%{filter:opacity(1)}50%{filter:opacity(.5)}}`,tm=new Pd("inch-wallet-view-address-balance",7),Ii=class extends Ue{constructor(){super(...arguments),this.task=new $c(this,async([e,t])=>{if(!e||!t)throw new Error("");const n=await rn.getTokenBalance(e,Td,t),r=Si(Vt(BigInt((n==null?void 0:n.amount)??0),18),6);return tm.set([this.chainId,this.address].join(":"),r),r},()=>[this.chainId,this.address])}render(){return this.task.render({pending:()=>this.getLoader(),error:()=>this.getLoader(),complete:e=>{if(this.chainId===void 0)throw new Error("");const t=Fo(this.chainId);return G`<span>${e} ${t.nativeCurrency.symbol}</span>`}})}getLoader(){const e=()=>G`<div class="loader"></div>`;if(!this.chainId||!this.address)return e();const t=tm.get([this.chainId,this.address].join(":")),n=Fo(this.chainId);return t?G`<span>${t} ${n.nativeCurrency.symbol}</span>`:e()}};Ii.tagName="inch-wallet-view-address-balance";Ii.styles=jk;Ze([_e({type:Number})],Ii.prototype,"chainId",2);Ze([_e({type:String})],Ii.prototype,"address",2);Ii=Ze([Ge(Ii.tagName)],Ii);var on=class extends Ue{constructor(){super(...arguments),this.showLoader=!1,this.isWalletConnected=!1,this.addressList=null,this.activeAddress=null,this.showAddresses=!1,this.isActiveWallet=!1}firstUpdated(){if(!this.info)throw new Error("");const e=this.getController().getDataAdapter(this.info),t=this.getController().data;Qt(this,[e.isConnected$.pipe(We(n=>this.isWalletConnected=n)),e.activeAddress$.pipe(We(n=>this.activeAddress=n)),e.addresses$.pipe(We(n=>this.addressList=n.length?n:null)),t.chainId$.pipe(We(n=>this.chainId=n??void 0)),t.isActiveWallet$(this.info).pipe(We(n=>this.isActiveWallet=n))],{requestUpdate:!1})}render(){var i;if(!this.info)throw new Error("");const e=((i=this.addressList)==null?void 0:i.length)??0,t=(this.showAddresses&&e>1?e*64:0)+64;Re(this,{height:`${t}px`});const n=this.info.uuid==="walletConnect",r={"wallet-view-container":!0,"wallet-view-container__wc":n,"wallet-view-container__connected":this.isWalletConnected,"wallet-view-container__loading":this.showLoader};return G`<div class="${fn(r)}" @click="${()=>this.onClick()}"><div class="data-container left-data"><img class="wallet-icon" alt="${this.info.name}" src="${this.info.icon}"> <span class="wallet-name">${this.info.name}</span></div><div class="data-container right-data">${je(this.activeAddress,o=>G`<span>${Pl(o)}</span>`)} ${je(this.showLoader,()=>G`<inch-icon class="loader-icon" icon="fire48"></inch-icon>`,()=>{const o={"connect-icon":!0,"connect-icon__connected":this.isWalletConnected,"connect-icon__active":this.isActiveWallet};return G`<inch-icon class="${fn(o)}" icon="connect16"></inch-icon>${je(n&&this.activeAddress,()=>G`<inch-button @click="${s=>this.onConnect(s)}" class="add-connection" size="l" type="tertiary"><inch-icon icon="plusCircle16"></inch-icon></inch-button>`)}`})}</div></div>${je(this.addressList&&this.addressList.length>1,()=>G`<div class="address-list">${Uh(this.addressList,o=>G`<div @click="${()=>this.setActiveAddress(o)}" class="wallet-view-container address-container ${Al(this.isActiveAddress(o).then(s=>s?"address-container__active":""))}"><div class="data-container left-data"><inch-icon class="sub-wallet-icon" icon="cornerDownRight16"></inch-icon><span>${Pl(o,{width:this.offsetWidth})}</span></div><div class="data-container right-data"><inch-wallet-view-address-balance chainId="${dr(this.chainId)}" address="${o}"></inch-wallet-view-address-balance><inch-icon class="connect-icon ${Al(this.isActiveAddress(o).then(s=>s?"connect-icon__active":""))}" icon="link16"></inch-icon></div></div>`)}</div>`)}`}async onClick(){if(this.isWalletConnected){if(this.addressList&&this.addressList.length===1){await this.setActiveAddress(this.addressList[0]);return}this.showAddresses=!this.showAddresses;return}await this.onConnect()}async onConnect(e){if(!this.info||this.showLoader)return;e==null||e.preventDefault(),e==null||e.stopPropagation(),this.showLoader=!0;const t=this.info.uuid==="walletConnect";this.isWalletConnected&&t?this.showAddresses=await this.getController().addConnection(this.info):this.showAddresses=await this.getController().connect(this.info),this.showLoader=!1}async setActiveAddress(e){this.info&&await this.getController().setActiveAddress(this.info,e)}getController(){if(!this.controller)throw new Error("");return this.controller}isActiveAddress(e){if(!this.info)throw new Error("");return this.getController().data.isActiveAddress(this.info,e)}};on.tagName="inch-wallet-view";on.styles=Lk;Ze([_e({type:Object})],on.prototype,"info",2);Ze([_t()],on.prototype,"showLoader",2);Ze([_t()],on.prototype,"isWalletConnected",2);Ze([_t()],on.prototype,"addressList",2);Ze([_t()],on.prototype,"activeAddress",2);Ze([_t()],on.prototype,"showAddresses",2);Ze([_t()],on.prototype,"isActiveWallet",2);Ze([_t()],on.prototype,"chainId",2);Ze([xn({context:zd})],on.prototype,"controller",2);on=Ze([Ge(on.tagName)],on);var _s=class extends Ue{constructor(){super(...arguments),this.task=new $c(this,async()=>await this.getController().getSupportedWallets(),()=>[])}render(){return this.task.render({pending:()=>G`<inch-icon icon="unicornRun"></inch-icon>`,complete:e=>G`<inch-scroll-view-consumer>${Uh(e,t=>G`<inch-wallet-view .info="${t}"></inch-wallet-view>`)}</inch-scroll-view-consumer>`})}getController(){if(!this.controller)throw new Error("");return this.controller}};_s.tagName="inch-wallet-list";Ze([xn({context:zd})],_s.prototype,"controller",2);_s=Ze([Ge(_s.tagName)],_s);var Kr=class extends Ue{constructor(){super(...arguments),this.mobileMedia=Er(),this.context=new kc(this,{context:zd})}firstUpdated(){Ac(this)}render(){if(!this.controller)throw new Error("For the inch-wallet-manage widget to work, you need to pass the controller corresponding to the interface in the controller field");this.context.value||this.context.setValue(this.controller);const e=this.controller.isConnected?"Wallet management":"Connect wallet";return G`<inch-card showShadow="${dr(this.showShadow)}" forMobileView="${dr(this.mobileMedia.matches?"":void 0)}"><inch-card-header closeButton headerText="${e}"></inch-card-header><inch-wallet-list></inch-wallet-list></inch-card>`}};Kr.tagName="inch-wallet-manage";Kr.styles=Fk;Ze([_e({type:Object,attribute:!1})],Kr.prototype,"controller",2);Ze([_e({type:Boolean})],Kr.prototype,"showShadow",2);Kr=Ze([Ge(Kr.tagName)],Kr);var zk=be`.connect-wallet-view-container{padding:8px 5px 8px 8px;display:flex;align-items:center;gap:8px;border-radius:12px;background:var(--color-background-bg-primary);height:40px;box-sizing:border-box}.connect-wallet-view-icon{width:24px;height:24px}`,Yr=class extends Ue{constructor(){super(...arguments),this.mobileMatchMedia=nr(this),this.overlay=new Ld("#app-root",this),this.overlayId=null,this.chainId$=qe(()=>this.getController().data.chainId$),this.activeAddress$=qe(()=>this.getController().data.activeAddress$),this.info$=qe(()=>this.getController().data.info$),this.icon$=this.info$.pipe(Pe(e=>e.icon)),this.name$=this.info$.pipe(Pe(e=>e.name)),this.activeAddressView$=this.activeAddress$.pipe(Pe(e=>e&&Pl(e))),this.view$=qe(()=>this.getController().data.isConnected$).pipe(Pe(e=>e?this.getConnectedView():this.getConnectWalletButton()))}render(){return G`${dt(this.view$)}`}getConnectedView(){return G`<div class="connect-wallet-view-container"><img class="connect-wallet-view-icon" alt="${dt(this.name$)}" src="${dt(this.icon$)}"> ${je(!this.mobileMatchMedia.matches,()=>G`<inch-wallet-view-address-balance address="${dt(this.activeAddress$)}" chainId="${dt(this.chainId$)}"></inch-wallet-view-address-balance>`)}<inch-button @click="${()=>this.onOpenConnectView()}" type="secondary" size="m">${dt(this.activeAddressView$)}</inch-button></div>`}getConnectWalletButton(){return G`<inch-button @click="${()=>this.onOpenConnectView()}" type="secondary">Connect wallet</inch-button>`}getController(){if(!this.controller)throw new Error("");return this.controller}async onOpenConnectView(){if(this.overlay.isOpen){await this.overlay.close(this.overlayId??0),this.overlayId=null;return}this.overlayId=await this.overlay.open(G`<inch-wallet-manage @closeCard="${()=>{this.overlayId&&(this.overlay.close(this.overlayId),this.overlayId=null)}}" .controller="${this.controller}"></inch-wallet-manage>`)}};Yr.tagName="inch-connect-wallet-view";Yr.styles=zk;Ze([_e({type:Object,attribute:!1})],Yr.prototype,"controller",2);Ze([Sn()],Yr.prototype,"onOpenConnectView",1);Yr=Ze([Ge(Yr.tagName)],Yr);var Uk=be`.unsupported{color:var(--color-core-red-critical)}`,xi={[R.eth]:{name:"Ethereum",iconName:"eth24"},[R.arbitrum]:{name:"Arbitrum",iconName:"arbitrum24"},[R.op]:{name:"Optimism",iconName:"op24"},[R.zkSyncEra]:{name:"zkSync Era",iconName:"zkSyncEra24"},[R.bnb]:{name:"BNB Smart Chain",iconName:"bnb24",priority:1},[R.matic]:{name:"Polygon",iconName:"matic24",priority:1},[R.gnosis]:{name:"Gnosis",iconName:"gnosis24"},[R.avalanche]:{name:"Avalanche",iconName:"avalanche24"},[R.fantom]:{name:"Fantom",iconName:"fantom24"},[R.aurora]:{name:"Aurora",iconName:"aurora24"},[R.klaytn]:{name:"Klaytn",iconName:"klaytn24"}},Vk=Object.keys(xi).filter(e=>Mk(+e)).map(e=>({...xi[e],chainId:Number(e)})).sort((e,t)=>e.chainId==R.eth?-1:t.chainId==R.eth?1:ch(e.chainId)?-1:ch(t.chainId)?1:(t.priority??0)-(e.priority??0)),qk=be`.card{height:100%}.scroll-container{position:relative;height:100%;overflow-y:auto}.scroll-overlay{position:absolute;top:0;left:0;height:100%;width:100%}`,Hk=be`:host{width:100%;height:100%}.container{display:flex;align-items:center;gap:8px;height:40px;padding:0 8px;border-radius:12px;background-color:transparent;transition:background-color .2s;color:var(--color-content-content-primary);font-size:14px}.active .list-icon{transform:scale(1);color:var(--primary)}.list-icon{margin-left:auto;transition:transform .2s;transform:scale(0)}@media (hover:hover){.container:hover{background-color:var(--color-background-bg-secondary)}.container:hover .list-icon{transform:scale(1)}}.container:active{background-color:var(--color-background-bg-secondary)}${Ht(be`.container{height:50px;font-size:16px}`)}`,Zr=class extends Ue{constructor(){super(...arguments),this.mobileMedia=nr(this)}render(){if(!this.info)return;const e=ch(this.info.chainId),n={container:!0,active:Number(this.info.chainId)===this.activeChainId},r=this.mobileMedia.matches?26:24;return G`<div class="${fn(n)}" @click="${()=>this.setChainId()}">${je(e,()=>G`<inch-icon icon="${Po()?"l2ChainRTL24":"l2Chain24"}"></inch-icon>`)}<inch-icon width="${r}px" height="${r}px" icon="${this.info.iconName}"></inch-icon><span>${this.info.name}</span><inch-icon class="list-icon" icon="link16"></inch-icon></div>`}async setChainId(){var e;if(!this.info)throw new Error("");await((e=this.controller)==null?void 0:e.changeChain(this.info.chainId)),pt(this,"closeCard",null)}};Zr.tagName="inch-chain-selector-list-item";Zr.styles=Hk;Ze([_e({type:Object})],Zr.prototype,"info",2);Ze([_e({type:Number})],Zr.prototype,"activeChainId",2);Ze([_e({type:Object,attribute:!1})],Zr.prototype,"controller",2);Zr=Ze([Ge(Zr.tagName)],Zr);var Xr=class extends Ue{constructor(){super(...arguments),this.mobileMedia=nr(this)}firstUpdated(){if(!this.controller)throw new Error("");Qt(this,[this.controller.data.chainId$.pipe(We(e=>this.activeChainId=e??void 0))],{requestUpdate:!1})}render(){return this.mobileMedia.matches?this.getMobileList():this.getDesktopList()}getList(){return Vk.map(e=>G`<inch-chain-selector-list-item .info="${e}" .controller="${this.controller}" activeChainId="${dr(this.activeChainId)}"></inch-chain-selector-list-item>`)}getMobileList(){return G`<inch-card class="card" forMobileView><inch-card-header closeButton headerText="Select chain"></inch-card-header><inch-scroll-view-consumer>${this.getList()}</inch-scroll-view-consumer></inch-card>`}getDesktopList(){return G`<inch-card>${this.getList()}</inch-card>`}};Xr.tagName="inch-chain-selector-list";Xr.styles=[qk];Ze([_e({type:Object,attribute:!1})],Xr.prototype,"controller",2);Ze([_t()],Xr.prototype,"activeChainId",2);Xr=Ze([Ge(Xr.tagName)],Xr);var Jr=class extends Ue{constructor(){super(...arguments),this.mobileMedia=nr(this),this.overlay=new Ld("#app-root",this),this.overlayId=null,this.chainId$=qe(()=>this.getController().data.chainId$),this.unsupportedChainId$=this.chainId$.pipe(Pe(e=>e&&xi[e]?"":"unsupported")),this.chainIdIconName$=this.chainId$.pipe(Ut(Boolean),Pe(e=>xi[e]?xi[e].iconName:"alert24")),this.chainIdName$=this.chainId$.pipe(Ut(Boolean),Pe(e=>xi[e]?xi[e].name:"Unsupported chain"))}render(){return G`<inch-button @click="${()=>this.onClick()}" size="l" type="primary-gray"><inch-icon class="${dt(this.unsupportedChainId$)}" icon="${dt(this.chainIdIconName$)}"></inch-icon>${je(!this.mobileMedia.matches,()=>G`<span>${dt(this.chainIdName$)}</span><inch-icon icon="chevronDown16"></inch-icon>`)}</inch-button>`}async onClick(){if(this.overlay.isOpenOverlay(this.overlayId??0)){this.closeOverlay();return}this.overlayId=await this.overlay.open(G`<inch-chain-selector-list .controller="${this.controller}" @closeCard="${()=>this.closeOverlay()}"></inch-chain-selector-list>`)}closeOverlay(){this.overlayId&&(this.overlay.close(this.overlayId),this.overlayId=null)}getController(){if(!this.controller)throw new Error("");return this.controller}};Jr.tagName="inch-chain-selector";Jr.styles=Uk;Ze([_e({type:Object,attribute:!1})],Jr.prototype,"controller",2);Ze([Sn()],Jr.prototype,"onClick",1);Jr=Ze([Ge(Jr.tagName)],Jr);const Wk=Object.freeze(Object.defineProperty({__proto__:null,get ChainSelectorElement(){return Jr},get ChainSelectorListElement(){return Xr},get ConnectWalletViewElement(){return Yr},get WalletManageElement(){return Kr}},Symbol.toStringTag,{value:"Module"}));function Gk(){return Er().matches?56:72}function Kk(){return Er().matches?56:72}async function bh(e,t,n){const r=Gg(e,t,n);await r.requestAddresses().catch(o=>{var s,l;if(o.core===4001||(l=(s=o.message)==null?void 0:s.toLowerCase())!=null&&l.includes("user reject")||o.details==="Cancelled")throw o});const i=await r.getChainId();return e!==i&&await r.switchChain(Fo(e)),r}function Gg(e,t,n){return w6({chain:Fo(e),transport:lE(t),account:n})}function bl(e,t){return new xt(n=>{const r=i=>{n.next(i)};return e.on(t,r),()=>{if("removeListener"in e)return e.removeListener(t,r);console.warn("unable to unsubscribe from provider",e,t)}})}var Kg=class{constructor(e){this.info=e,this.provider$=new Co(null),this.activeAddressInner$=new Co(null),this.providerOrDisconnect$=gr(this.provider$,qe(()=>this.disconnect$).pipe(Pe(()=>null))),this.addresses$=this.providerOrDisconnect$.pipe(He(t=>t?ti(this.getAddresses()).pipe(He(n=>bl(t,"accountsChanged").pipe(Ot(n)))):Yt([])),ft({bufferSize:1,refCount:!0})),this.activeAddress$=Xt([this.addresses$,this.activeAddressInner$]).pipe(Pe(([t,n])=>n||t[0]),ft({bufferSize:1,refCount:!0})),this.chainId$=this.providerOrDisconnect$.pipe(He(t=>t?ti(this.getChainId()).pipe(He(n=>bl(t,"chainChanged").pipe(Pe(r=>nm(r)),Ot(n)))):Yt(null)),ft({bufferSize:1,refCount:!0})),this.disconnect$=this.provider$.pipe(Ut(Boolean),He(t=>bl(t,"disconnect"))),this.isConnected$=this.activeAddress$.pipe(Pe(t=>!!t)),this.info$=Yt(e)}getInfo(){return this.info}setProvider(e){this.provider$.next(e)}async getAddresses(){const e=this.provider$.value;return e?await e.request({method:"eth_accounts"}):[]}async getActiveAddress(){const e=this.activeAddressInner$.value;return e||((await this.getAddresses())[0]??null)}async getChainId(){const e=this.provider$.value;if(!e)return null;const t=await e.request({method:"eth_chainId"}).catch(()=>null);return t?nm(t):null}async isConnected(){return!!await this.getActiveAddress()}setActiveAddress(e){this.activeAddressInner$.next(e)}};function nm(e){return typeof e=="number"?e:parseInt(e,16)}function Yk(e){const{code:t,message:n}=e;return t===4001||(n==null?void 0:n.toLowerCase().includes("user rejected"))}var rm=class{constructor(e){this.providerDetail=e,this.client=null,this.data=new Kg(this.providerDetail.info)}async connect(e){return this.client=await bh(e,this.providerDetail.provider),this.data.setProvider(this.providerDetail.provider),!0}async restoreConnect(e,t){this.data.setProvider(this.providerDetail.provider);const r=(await this.data.getAddresses()).length>0&&e!==null;return r?this.client=Gg(e,this.providerDetail.provider):this.data.setProvider(null),!r&&t?this.connect(e):r}async disconnect(){return this.client=null,this.data.setProvider(null),!0}async changeChain(e){return this.client?(await this.client.switchChain({id:e}),!0):!1}async isConnected(){var t;return(await((t=this.client)==null?void 0:t.getAddresses())??[]).length>0}setActiveAddress(e){this.data.setActiveAddress(e)}async writeContract(e){if(!await this.isConnected()||!this.client)throw new Error("Wallet not connected");const t=await this.data.getActiveAddress();return await this.client.writeContract({...e,account:t})}async signTypedData(e){if(!await this.isConnected()||!this.client)throw new Error("Wallet not connected");const t=await this.data.getActiveAddress();try{return await this.client.signTypedData({...e,account:t})}catch(r){if(Yk(r))throw new r;console.log(r)}const n=JSON.stringify(e,Zk);return await this.providerDetail.provider.request({method:"eth_signTypedData_v3",params:[t,n]})}};function Zk(e,t){return typeof t=="bigint"?t.toString():t}function Xk(e){nt.set("chainId",Number(e))}function Yg(){return nt.get("chainId",Number)}function Jk(e){nt.set("activeAddress",e)}function Qk(){return nt.get("activeAddress",String)}function im(e){nt.set("activeWallet",e)}function om(){return nt.get("activeWallet",String)}function eC(e){const t=nt.get("connectedWallet",JSON.parse),n=new Set(t);n.has(e)||(n.add(e),nt.set("connectedWallet",[...n.keys()]))}function tC(){return nt.get("connectedWallet",JSON.parse)}function sm(e){const t=nt.get("connectedWallet",JSON.parse),n=new Set(t);n.has(e)&&(n.delete(e),nt.set("connectedWallet",[...n.keys()]))}var wl=new WeakMap;function Bt(e){if(wl.has(e))return wl.get(e);const t=YE(["string","string","string"],[e.name,e.rdns??"",e.icon]).slice(0,10);return wl.set(e,t),t}var nC=class{constructor(e){this.dataProvider=e,this.chainIdInner$=new Co(Yg()??R.eth),this.currentActiveAdapter$=qe(()=>this.dataProvider.update$).pipe(Ot(null),Pe(()=>this.dataProvider.currentActiveAdapter),zt(),ft({bufferSize:1,refCount:!0})),this.currentActiveAdapterData$=this.currentActiveAdapter$.pipe(Pe(t=>(t==null?void 0:t.data)??null),ft({bufferSize:1,refCount:!0})),this.info$=this.currentActiveAdapterData$.pipe(Ut(Boolean),He(t=>t.info$)),this.addresses$=this.currentActiveAdapterData$.pipe(He(t=>(t==null?void 0:t.addresses$)??Yt([])),We(t=>console.log(t)),ft({bufferSize:1,refCount:!0})),this.activeAddress$=this.currentActiveAdapterData$.pipe(He(t=>(t==null?void 0:t.activeAddress$)??Yt(null)),We(t=>t&&Jk(t)),ft({bufferSize:1,refCount:!0})),this.chainId$=Xt([this.currentActiveAdapterData$,this.chainIdInner$]).pipe(He(([t,n])=>(t==null?void 0:t.chainId$)??Yt(n)),We(t=>t&&Xk(t)),ft({bufferSize:1,refCount:!0})),this.disconnect$=this.currentActiveAdapterData$.pipe(He(t=>(t==null?void 0:t.disconnect$)??Yt()),ft({bufferSize:1,refCount:!0})),this.isConnected$=this.currentActiveAdapterData$.pipe(He(t=>(t==null?void 0:t.isConnected$)??Yt(!1)),ft({bufferSize:1,refCount:!0})),Xt([this.activeAddress$,this.chainId$]).pipe(Ec(Bh)).subscribe()}getInfo(){if(!this.dataProvider.currentActiveAdapter)throw new Error("");return this.dataProvider.currentActiveAdapter.data.getInfo()}async getAddresses(){const e=await this.getProviderDataAdapter();return e?await e.getAddresses():[]}async getActiveAddress(){if(!this.dataProvider.currentActiveAdapter)return null;const e=await this.getProviderDataAdapter();return e?await e.getActiveAddress():null}async getChainId(){if(!this.dataProvider.currentActiveAdapter)return this.chainIdInner$.value;const e=await this.getProviderDataAdapter();if(!e)return this.chainIdInner$.value;const t=await e.getChainId();return t||this.chainIdInner$.value}async isConnected(){if(!this.dataProvider.currentActiveAdapter)return!1;const e=await this.getProviderDataAdapter();return e?await e.isConnected():!1}async isActiveAddress(e,t){var s,l;const n=Bt(e),r=await((s=this.dataProvider.currentActiveAdapter)==null?void 0:s.data.getActiveAddress())??null,i=((l=this.dataProvider.currentActiveAdapter)==null?void 0:l.data.getInfo())??null,o=i?Bt(i):null;return!!r&&!!o&&n===o&&er(r,t)}isActiveWallet(e){var i;const t=Bt(e),n=((i=this.dataProvider.currentActiveAdapter)==null?void 0:i.data.getInfo())??null,r=n?Bt(n):null;return!!r&&r===t}isActiveAddress$(e,t){const n=Bt(e);return Xt([this.currentActiveAdapter$,this.activeAddress$]).pipe(Pe(([r,i])=>{const o=r?Bt(r.data.getInfo()):null;return!!i&&!!o&&n===o&&er(i,t)}))}isActiveWallet$(e){const t=Bt(e);return this.currentActiveAdapter$.pipe(Pe(n=>{const r=n?Bt(n.data.getInfo()):null;return!!r&&r===t}))}setChainId(e){this.chainIdInner$.next(e)}getProviderDataAdapter(){return dn(this.currentActiveAdapterData$.pipe(Sc(Is(0)),Qm(null)))}};function rC(){return!!window.ethereum}async function iC(){if(!window.ethereum)throw new Error("injected provider not supported");return{provider:window.ethereum,info:{walletId:"injectedWalletId",uuid:"injectedWallet",name:sC(),icon:await oC()}}}var am={default:()=>me(()=>import("./default-icon-UF676TO4-57bNFlKZ.js"),[]).then(e=>e.icon),oneInchWallet:()=>me(()=>import("./one-inch-wallet-icon-5SPUNDFK-BHMg-Ox7.js"),[]).then(e=>e.icon)};function oC(){var e;return(e=window.ethereum)!=null&&e.isOneInchWallet?am.oneInchWallet():am.default()}function sC(){var e;return(e=window.ethereum)!=null&&e.isOneInchWallet?"1inch wallet":"Browser wallet"}var aC=class{constructor(e){this.providerDetail=e,this.provider=null,this.client=null,this.data=new Kg(this.providerDetail.info)}async isConnected(){var e;return((e=this.provider)==null?void 0:e.isConnected())??!1}async connect(e){if(this.provider)await this.provider.connect();else{const t=await me(()=>import("./multi-connect-provider-SEFLIENX-BKcBKaZx.js"),[]).then(n=>n.MultiConnectProvider.connect());this.client=await bh(e,t),this.data.setProvider(t),this.provider=t}return!0}async restoreConnect(){if(this.provider)await this.provider.restoreConnect();else{const e=await me(()=>import("./multi-connect-provider-SEFLIENX-BKcBKaZx.js"),[]).then(t=>t.MultiConnectProvider.restoreConnect());this.client=await bh(e.chainId,e),this.data.setProvider(e),this.provider=e}return!0}async disconnect(){var e;return(e=this.provider)==null||e.disconnect(),!0}async changeChain(e){var t;return await((t=this.client)==null?void 0:t.switchChain({id:e})),!0}setActiveAddress(e){var t;(t=this.provider)==null||t.setActiveAddress(e)}async writeContract(e){if(!await this.isConnected()||!this.client)throw new Error("Wallet not connected");const t=await this.data.getActiveAddress();return await Promise.any([this.client.writeContract({...e,account:t}),dn(Is(60*1e3*3).pipe(He(()=>qf(()=>new Error("wallet connect request timed out")))))])}async signTypedData(e){if(!await this.isConnected()||!this.client)throw new Error("Wallet not connected");const t=await this.data.getActiveAddress();return await Promise.race([this.client.signTypedData({...e,account:t}),dn(Is(60*1e3*3).pipe(He(()=>qf(()=>new Error("wallet connect request timed out")))))])}};async function cC(){return{info:{walletId:"walletConnectId",uuid:"walletConnect",name:"Wallet Connect",icon:await lC()}}}var uC={default:()=>me(()=>import("./wallet-connect-icon-NJ76IV67-lPk-W8Bs.js"),[]).then(e=>e.icon)};function lC(){return uC.default()}var hC=class{constructor(){this.data=new nC(this),this.activeAdapters=new Map,this.update$=new tn,this.currentActiveAdapterId=null,this.adapters=new Map}get isConnected(){return this.currentActiveAdapter!==null}get currentActiveAdapter(){return this.currentActiveAdapterId?this.activeAdapters.get(this.currentActiveAdapterId)??null:null}async init(){await this.initWallets(),await this.restoreChainId(),await this.restoreWalletConnection(),this.update$.next()}async getSupportedWallets(){const e=[];return this.adapters.forEach(t=>e.push(t.data.getInfo())),e.sort((t,n)=>{const r=Bt(t),i=Bt(n);return r===this.currentActiveAdapterId&&i!==this.currentActiveAdapterId?-1:r!==this.currentActiveAdapterId&&i===this.currentActiveAdapterId?1:this.activeAdapters.has(r)&&this.activeAdapters.has(i)?0:this.activeAdapters.has(r)&&!this.activeAdapters.has(i)?-1:!this.activeAdapters.has(r)&&this.activeAdapters.has(i)?1:0})}async connect(e){const t=await this.data.getChainId(),n=Bt(e);if(!this.adapters.has(n))throw new Error(`Invalid wallet info ${e.name} not exist`);const r=await this.connectSafe(t,n);return this.afterConnectWallet(r,n),this.update$.next(),r}async addConnection(e){const t=await this.data.getChainId(),n=Bt(e);if(!this.adapters.has(n))throw new Error(`Invalid wallet info ${e.name} not exist`);const r=this.adapters.get(n);if(!r)throw new Error("Invalid wallet id");if(!this.activeAdapters.has(n))throw new Error(`Wallet adapter ${e.name} not connected`);let i;try{i=await r.connect(t)}catch{i=!1}return this.update$.next(),i}async disconnect(){if(this.currentActiveAdapter===null)return!0;try{const e=await this.currentActiveAdapter.disconnect();return this.currentActiveAdapterId&&this.activeAdapters.delete(this.currentActiveAdapterId),this.currentActiveAdapterId&&sm(this.currentActiveAdapterId),this.currentActiveAdapterId=null,this.update$.next(),e}catch(e){return console.error(e),!1}}async changeChain(e){let t=!0;if(this.currentActiveAdapter)try{t=await this.currentActiveAdapter.changeChain(e)}catch{t=!1}return t&&this.data.setChainId(e),t}getDataAdapter(e){const t=Bt(e),n=this.adapters.get(t);if(!n)throw new Error(`Invalid wallet info ${e.name} not exist`);return n.data}async setActiveAddress(e,t){const n=Bt(e);return await this.setActiveAddressInner(n,t)}async writeContract(e){if(!this.currentActiveAdapter||!this.currentActiveAdapter.client)throw new Error("Wallet not connected");return await this.currentActiveAdapter.writeContract(e)}async signTypedData(e){if(!this.currentActiveAdapter||!this.currentActiveAdapter.client)throw new Error("Wallet not connected");return await this.currentActiveAdapter.signTypedData(e)}async setActiveAddressInner(e,t){var r;let n=!0;if(this.currentActiveAdapterId!==e){const i=await this.data.getChainId();if(!this.adapters.has(e))throw new Error("Invalid wallet not exist");n=await this.connectSafe(i,e),this.afterConnectWallet(n,e)}n&&((r=this.currentActiveAdapter)==null||r.setActiveAddress(t)),this.update$.next()}async connectSafe(e,t,n=!1){const r=this.adapters.get(t);if(!r)throw new Error("Invalid wallet id");let i;if(!this.activeAdapters.has(t)||n){try{i=await r.connect(e)}catch{i=!1}i&&this.activeAdapters.set(t,r)}else i=await r.isConnected(),!n&&!i&&(i=await this.connectSafe(e,t,!0));return i}async restoreConnectSafe(e,t,n){const r=this.adapters.get(t);if(!r)throw new Error("Invalid wallet id");let i;if(this.activeAdapters.has(t))i=await r.isConnected();else{try{i=await r.restoreConnect(e,n)}catch{i=!1}i&&this.activeAdapters.set(t,r)}return i}async restoreChainId(){const e=Yg();e&&await this.changeChain(e)}async restoreWalletConnection(){const e=om(),t=tC();if(!t)return;await this.getSupportedWallets();const n=await this.data.getChainId();for(const s of t){if(s===e||!this.adapters.has(s))continue;const l=await this.restoreConnectSafe(n,s).catch(()=>!1);this.afterConnectWallet(l,s)}if(!e||!this.adapters.has(e))return;const r=await this.restoreConnectSafe(n,e,!0);if(this.afterConnectWallet(r,e),!r)return;const i=Qk();!i||!this.currentActiveAdapter||!(await this.currentActiveAdapter.data.getAddresses()).includes(i)||await this.setActiveAddressInner(e,i)}initWallets(){return new Promise(e=>{let t=!1;rt(window,"eip6963:announceProvider").pipe(We(n=>{t=dC(window.ethereum,n.detail.provider);const r=Bt(n.detail.info);this.adapters.has(r)||this.adapters.set(r,new rm(n.detail))}),Uo(100),nv(1),Sc(Is(100)),Qm(null),We(async()=>{if(!t&&rC()){const i=await iC(),o=Bt(i.info);this.adapters.has(o)||this.adapters.set(o,new rm(i))}const n=await cC(),r=Bt(n.info);this.adapters.set(r,new aC(n)),e()})).subscribe(),window.dispatchEvent(new Event("eip6963:requestProvider"))})}afterConnectWallet(e,t){e?(this.currentActiveAdapterId=t,eC(t),im(t)):(sm(t),om()===t&&im(null),this.currentActiveAdapterId===t&&(this.currentActiveAdapterId=null),this.activeAdapters.has(t)&&(this.adapters.get(t).disconnect().catch(),this.activeAdapters.delete(t)))}};function dC(e,t){if(e===t)return!0;const n=Object.keys(e??{}),r=Object.keys(t??{});if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function fC(){return new hC}const hn=fC(),pC=Object.freeze(Object.defineProperty({__proto__:null,connectWalletController:hn},Symbol.toStringTag,{value:"Module"}));var mC=Object.defineProperty,yC=Object.getOwnPropertyDescriptor,gC=(e,t,n,r)=>{for(var i=r>1?void 0:r?yC(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&mC(t,n,i),i};let Es=class extends Ue{constructor(){super(...arguments),this.mobileMedia=Er()}connectedCallback(){super.connectedCallback(),Ac(this)}render(){return this.mobileMedia.matches?this.getMobileHeader():this.getDesktopHeader()}getDesktopHeader(){const e={height:`${Gk()}px`};return G`<div class="header-container" style="${zh(e)}"><div class="left-content"><inch-icon icon="logoFull"></inch-icon></div><div class="right-content"><inch-chain-selector .controller="${hn}"></inch-chain-selector><inch-connect-wallet-view .controller="${hn}"></inch-connect-wallet-view></div></div>`}getMobileHeader(){return G`<div class="header-container mobile-header"><inch-icon icon="logoFull"></inch-icon></div>`}};Es.tagName="inch-header";Es.styles=vv;Es=gC([Ge(Es.tagName)],Es);const bC=be`.footer-container{width:100%;box-sizing:border-box;display:flex;align-items:center;position:relative;border-top:1px solid var(--color-border-border-tertiary);padding:0 72px;background-color:var(--color-background-bg-body);gap:8px;margin-top:32px}.mobile-footer{height:72px;width:100vw;position:sticky;padding:16px 8px;bottom:0;z-index:9;justify-content:space-between}.power-by{color:var(--color-content-content-secondary);font-size:13px;font-style:normal;font-weight:400;line-height:16px}.version{color:var(--color-content-content-secondary);font-size:13px;font-style:normal;font-weight:400;line-height:16px;transform:translateX(-100%);opacity:0;transition:transform .2s,opacity .2s}.version:dir(rtl){transform:translateX(100%)}@media (hover:hover){.footer-container:hover .version{transform:translateX(0);opacity:1}}`;var wC=Object.defineProperty,vC=Object.getOwnPropertyDescriptor,xC=(e,t,n,r)=>{for(var i=r>1?void 0:r?vC(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&wC(t,n,i),i};let Ss=class extends Ue{constructor(){super(...arguments),this.mobileMedia=Er()}connectedCallback(){super.connectedCallback(),Ac(this)}render(){return this.mobileMedia.matches?this.getMobileFooter():this.getDesktopFooter()}getDesktopFooter(){const e={height:`${Kk()}px`};return G`<div class="footer-container" style="${zh(e)}"><span class="power-by"> ${new Date().getFullYear()} Powered by 1inch</span> <span class="version">version: ${Yc("appVersion")}</span></div>`}getMobileFooter(){return G`<div class="footer-container mobile-footer"><inch-chain-selector .controller="${hn}"></inch-chain-selector><inch-connect-wallet-view .controller="${hn}"></inch-connect-wallet-view></div>`}};Ss.tagName="inch-footer";Ss.styles=bC;Ss=xC([Ge(Ss.tagName)],Ss);var _C=Object.defineProperty,EC=Object.getOwnPropertyDescriptor,De=(e,t,n,r)=>{for(var i=r>1?void 0:r?EC(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&_C(t,n,i),i},SC=Object.defineProperty,AC=Object.getOwnPropertyDescriptor,_a=(e,t,n,r)=>{for(var i=r>1?void 0:r?AC(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&SC(t,n,i),i},$C=[()=>me(()=>import("./one-inch.repository-AF3TE4XT-BmtwSuEs.js"),[]).then(e=>e.oneInchRepository),()=>me(()=>import("./uniswap.repository-MXTOGC4T-1rI-wxsR.js"),[]).then(e=>e.uniSwapRepository),()=>me(()=>import("./trustwallet.repository-P6G45YEI-DUxV8hx9.js"),[]).then(e=>e.trustWalletRepository),()=>me(()=>import("./pancakeswap.repository-LI7PUPCX-BaMnU5k5.js"),[]).then(e=>e.pancakeSwapRepository)],mr=class extends Ue{constructor(){super(...arguments),this.size=24,this.task=new $c(this,{task:([e,t,n],{signal:r})=>kC(r,n,e,t),args:()=>[this.symbol,this.address,this.chainId]})}render(){return this.task.render({error:()=>vl(this.size,this.symbol),pending:()=>vl(this.size,this.symbol,!0),initial:()=>vl(this.size,this.symbol,!0),complete:e=>(e.width=this.size,e.height=this.size,e.ondragstart=()=>!1,G`${e}`)})}updated(){this.style.width=`${this.size}px`,this.style.height=`${this.size}px`}};mr.tagName="inch-token-icon";mr.styles=be`

      :host {
          user-select: none;
          outline: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: transparent;
      }

      .stub {
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: var(--color-background-bg-secondary);
          border-radius: 50%;
          color: var(--color-content-content-secondary);
          position: relative;
      }
      .stub-loader {
          position: absolute;
          width: 100%;
          height: 100%;
          border-radius: 50%;
          border: 1px solid;
          border-bottom-color: var(--secondary);
          border-top-color: var(--secondary);
          animation: spin 1s linear infinite;
      }
      
      img {
          user-select: none;
          outline: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: transparent;
      }

      @keyframes spin {
          0% {
              transform: rotate(0deg);
          }

          100% {
              transform: rotate(360deg);
          }
      }
  
  `;_a([_e({type:String,attribute:!0})],mr.prototype,"symbol",2);_a([_e({type:String,attribute:!0})],mr.prototype,"address",2);_a([_e({type:Number,attribute:!0})],mr.prototype,"chainId",2);_a([_e({type:Number,attribute:!0})],mr.prototype,"size",2);mr=_a([Ge(mr.tagName)],mr);function vl(e,t,n){return G`
    <div style="width: ${e}px; height: ${e}px; font-size: ${e<40?13:16}px" class="stub">
      <span>${(t==null?void 0:t.slice(0,e<40?1:2))??""}</span>
      ${n?G`<span class="stub-loader"></span>`:""}
    </div>
  `}async function kC(e,t,n,r){let i=await CC({chainId:t,symbol:n,address:r,signal:e});if(i===null&&(i=await Ud({chainId:t,symbol:n,address:r,signal:e})),i===null&&(i=await PC({chainId:t,symbol:n,address:r,signal:e})),i===null)throw new Error("token icon not fount");return i}async function CC(e){if(!e.chainId||!e.address)return null;const t=await rn.getToken(e.chainId,e.address);return!t||!t.logoURL?null:await new Promise(n=>{const r=new Image;r.onerror=()=>n(null),r.onload=()=>n(r),r.src=t.logoURL})}async function Ud(e,t=0){const n=$C[t];if(!n)return null;try{return await(await n())(e)}catch{return await Ud(e,t+1)}}async function PC(e){if(e.chainId===R.eth||!e.symbol)return null;const t=await rn.getTokenBySymbol(R.eth,e.symbol);if(e.chainId&&e.address&&_r(e.address)){const n=Js(e.chainId);t.push(n)}for(const n of t){const r=await Ud({...e,chainId:n.chainId,address:n.address});if(r)return r}return null}const Zg=(e,t,n)=>{for(const r of t)if(r[0]===e)return(0,r[1])();return n==null?void 0:n()};var IC=Object.defineProperty,TC=Object.getOwnPropertyDescriptor,eu=(e,t,n,r)=>{for(var i=r>1?void 0:r?TC(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&IC(t,n,i),i},BC=be`:host{display:block}.container{position:relative;background-color:var(--color-background-bg-secondary);padding:2px;display:flex;align-items:center;cursor:pointer;user-select:none;outline:0;box-sizing:border-box;width:100%}.container-m{border-radius:10px;height:36px}.container-l{border-radius:12px;height:48px}.caret{position:absolute;background-color:var(--color-background-bg-active);height:32px;border-radius:8px;box-shadow:0 4px 12px 0 rgba(0,0,0,.12),0 1px 4px 0 rgba(0,0,0,.12);color:var(--primary);width:30px;z-index:0}.caret-transition{transition:transform .2s}`,OC=be`.item{box-sizing:border-box;display:flex;align-items:center;justify-items:center;padding:6px 16px;z-index:1;width:100%;font-size:16px;justify-content:center;text-wrap:nowrap;transition:color .2s,background-color .2s;color:var(--color-content-content-primary)}.select{color:var(--primary)}.item-input{user-select:none;outline:0;border:none;background-color:transparent}${Ht(be`.item{font-size:13px;padding:6px 12px}`)}`,Qr=class extends Ue{constructor(){super(...arguments),this.size="m",this.items=[],this.itemRefList=[],this.caretRef=null}render(){const e={[`container-${this.size}`]:!0};return G`<div class="container ${fn(e)}">${Uh(this.items||[],t=>this.getItemView(t))}<div class="caret"></div></div>`}async firstUpdated(){var e;this.itemRefList=Array.from(this.renderRoot.querySelectorAll("div.item")),this.caretRef=this.renderRoot.querySelector(".caret"),await this.updateComplete,this.requestUpdate(),await new Promise(t=>setTimeout(t,60)),(e=this.caretRef)==null||e.classList.add("caret-transition"),this.requestUpdate(),Qt(this,[l0.pipe(We(()=>this.updated()))])}updated(){if(!this.caretRef)return;let e=0,t=0;for(const n of this.itemRefList){if(n.classList.contains("select")){t=n.offsetWidth;break}e+=n.offsetWidth}this.caretRef.style.width=`${t}px`,this.caretRef.style.transform=`translateX(${e*(Po()?-1:1)}px)`}getItemView(e){var r,i;const t={[`item-${this.size}`]:!0,select:e.value===((r=this.select)==null?void 0:r.value)};let n=G`${e.label}`;return e.template&&(n=e.template(e,e.value===((i=this.select)==null?void 0:i.value),this.caretRef)),G`<div @click="${o=>this.onSelect(e,o)}" class="item ${fn(t)}">${n}</div>`}onSelect(e,t){this.select=e,this.requestUpdate(),this.dispatchEvent(n0("change",e.value,t))}};Qr.tagName="inch-segmented-control";Qr.styles=[BC,OC];eu([_e({type:String})],Qr.prototype,"size",2);eu([_e({type:Array,attribute:!1})],Qr.prototype,"items",2);eu([_e({type:Object,attribute:!1})],Qr.prototype,"select",2);Qr=eu([Ge(Qr.tagName)],Qr);var RC=Object.defineProperty,MC=Object.getOwnPropertyDescriptor,DC=(e,t,n,r)=>{for(var i=r>1?void 0:r?MC(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&RC(t,n,i),i},NC={sceneBackgroundColor:"var(--color-background-bg-primary)"},FC=e=>{const t={...NC,...e};return be`:host{display:flex;--scene-background-color:${Xe(t.sceneBackgroundColor)}}.scene-container{min-height:50px;min-width:50px;position:relative;overflow:hidden;border-radius:16px;will-change:width,height,transform,filter}`},LC=Symbol("scene context"),jC=class{constructor(){this.animationInProgress=!1,this.animationInStart$=new tn,this.animationInEnd$=new tn,this.animationOutStart$=new tn,this.animationOutEnd$=new tn}get animationInStart(){return dn(this.animationInStart$)}get animationInEnd(){return dn(this.animationInEnd$)}get animationOutStart(){return dn(this.animationOutStart$)}get animationOutEnd(){return dn(this.animationOutEnd$)}animationInStartNext(){this.animationInProgress=!0,this.animationInStart$.next()}animationInEndNext(){this.animationInProgress=!1,this.animationInEnd$.next()}animationOutStartNext(){this.animationInProgress=!0,this.animationOutStart$.next()}animationOutEndNext(){this.animationInProgress=!1,this.animationOutEnd$.next()}},wo=class extends Ue{constructor(){super(),this.context=new kc(this,{context:LC}),this.context.setValue(new jC)}animationInStart(){this.context.value.animationInStartNext()}animationInEnd(){this.context.value.animationInEndNext()}animationOutStart(){this.context.value.animationOutStartNext()}animationOutEnd(){this.context.value.animationOutEndNext()}render(){return G`<slot></slot>`}};wo.tagName="inch-scene-wrapper";wo.styles=be`:host{background-color:var(--scene-background-color);will-change:transform;transform:translate3d(0,0,0);padding:1px;height:fit-content;box-sizing:border-box;position:relative;display:block}`;wo=DC([Ge(wo.tagName)],wo);function zC(){const e={position:"absolute",top:"0",left:"0",bottom:"0",right:"0",zIndex:"9",backfaceVisibility:"hidden",height:Ts()?"100%":""},t={position:"",top:"",left:"",bottom:"",right:"",zIndex:"",transform:"",filter:"",backfaceVisibility:"",height:""},n={duration:500,easing:"cubic-bezier(.2, .8, .2, 1)"};return{preparation:async(r,i,o)=>{Re(r,{...e,zIndex:"9",transform:o?"translate3d(0, 0, 0)":"translate3d(100%, 0, 0)"}),Re(i,{...e,zIndex:"8",transform:o?"translate3d(-100%, 0, 0)":"translate3d(0, 0, 0)"})},transition:async(r,i,o)=>{await Promise.all([r.animate([{transform:o?"translate3d(0, 0, 0)":"translate3d(100%, 0, 0)"},{transform:o?"translate3d(100%, 0, 0)":"translate3d(0, 0, 0)"}],n),i.animate([{transform:o?"translate3d(-100%, 0, 0)":"translate3d(0, 0, 0)"},{transform:o?"translate3d(0, 0, 0)":"translate3d(-100%, 0, 0)"}],n).finished]),Re(r,{...t}),Re(i,{...t})}}}function UC(){const e={position:"absolute",top:"0",left:"0",bottom:"0",right:"0",zIndex:"9",backfaceVisibility:"hidden",height:Ts()?"100%":""},t={position:"",top:"",left:"",bottom:"",right:"",zIndex:"",transform:"",filter:"",backfaceVisibility:"",willChange:"",height:""},n={duration:800,easing:"cubic-bezier(.2, .8, .2, 1)"};return{preparation:async(r,i,o)=>{Re(r,{...e,zIndex:"9",transform:o?"translate3d(0, 0, 0)":"translate3d(100%, 0, 0)"}),Re(i,{...e,zIndex:"8",willChange:"transform, filter",transform:o?"translate3d(-50%, 0, 0) scale(.9)":"translate3d(0, 0, 0) scale(1)",filter:o?"blur(3px)":"blur(0)"})},transition:async(r,i,o)=>{await Promise.all([r.animate([{transform:o?"translate3d(0, 0, 0)":"translate3d(105%, 0, 0)"},{transform:o?"translate3d(105%, 0, 0)":"translate3d(0, 0, 0)"}],n),i.animate([{transform:o?"translate3d(-50%, 0, 0) scale(.9)":"translate3d(0, 0, 0) scale(1)",filter:o?"blur(3px)":"blur(0)"},{transform:o?"translate3d(0, 0, 0) scale(1)":"translate3d(-50%, 0, 0) scale(.9)",filter:o?"blur(0)":"blur(3px)"}],n).finished]),Re(r,{...t}),Re(i,{...t})}}}function VC(){return new Promise(e=>requestAnimationFrame(e))}var So,tu=(So=class{constructor(t,n,r=UC()){this.rootSceneName=t,this.config=n,this.animation=r,this.sceneStack=[],this.sceneContainer=qC(),this.transitionInProgress=!1}render(t){if(this.transitionInProgress)return G`${this.sceneContainer}`;const n=!this.currentScenes;this.currentScenes=t;const r=this.getCurrentSceneName();if(!(this.config[r].lazyRender??!1)||n){const s=this.getScene(r);if(!s)throw new Error("Scene not exist");const l=this.buildSceneWrapper(s(),r);this.clearContainer(),this.sceneContainerAppendChild(r,l)}return G`${this.sceneContainer}`}async nextTo(t){this.transitionInProgress||(await this.transition(t),this.sceneStack.push(t))}async back(){if(this.transitionInProgress)return;const t=this.sceneStack[this.sceneStack.length-2]??this.rootSceneName;await this.transition(t,!0),this.sceneStack.pop()}resetScene(){this.sceneStack=[]}getCurrentSceneName(){let t=this.rootSceneName;return this.sceneContainer.firstChild&&(t=this.sceneContainer.firstChild.id),t}getCurrentScene(){if(!this.currentScenes)return null;const t=this.getCurrentSceneName();return this.getScene(t)}async transition(t,n){this.transitionInProgress=!0;try{if(this.getCurrentSceneName()===t)return;const i=this.getScene(t);if(!i)throw new Error(`Scene ${t} not exist`);const o=this.buildSceneWrapper(i(),t),s=this.sceneContainer.firstChild,l=n?s:o,h=n?o:s;n?l.animationOutStart():l.animationInStart(),n?h.animationOutStart():h.animationInStart(),this.sceneContainerAppendChild(t,o),await VC();const p=o.getBoundingClientRect(),m=s.getBoundingClientRect();await this.animation.preparation(l,h,n??!1),await Promise.all([this.animation.transition(l,h,n??!1),this.resizeContainer(p,m)]),Re(this.sceneContainer,{width:"",height:""}),this.sceneContainer.firstChild&&this.sceneContainer.removeChild(this.sceneContainer.firstChild),n?l.animationOutEnd():l.animationInEnd(),n?h.animationOutEnd():h.animationInEnd()}finally{this.transitionInProgress=!1}}getScene(t){return this.currentScenes?this.currentScenes[t]??null:null}clearContainer(){for(;this.sceneContainer.firstChild;)this.sceneContainer.removeChild(this.sceneContainer.firstChild)}buildSceneWrapper(t,n){const r=document.createElement(wo.tagName);return r.id=n,r.classList.add("scene-wrapper",n),Ao(t,r),r}sceneContainerAppendChild(t,n){this.sceneContainer.appendChild(n);const r=this.config[t];this.applySceneConfig(r)}applySceneConfig(t){const n=r=>r?typeof r=="number"?`${r}px`:r:"";t.maxHeight&&(this.sceneContainer.maxHeight=parseInt(t.maxHeight.toString())),Re(this.sceneContainer,{minWidth:n(t.minWidth),maxWidth:n(t.maxWidth)})}async resizeContainer(t,n){await this.sceneContainer.animate([{height:`${n.height}px`,width:`${n.width}px`},{height:`${t.height}px`,width:`${t.width}px`}],{duration:200,easing:"cubic-bezier(.2, .8, .2, 1)"}).finished,Re(this.sceneContainer,{width:`${t.width}px`,height:`${t.height}px`})}},So.styles=FC,So);function qC(){const e=document.createElement(Gr.tagName);return e.id="scene-container",e.classList.add("scene-container"),e}var HC=class extends zo{render(e,t){return this.controller||(this.controller=new WC(t,n=>this.setValue(n)),e.addController(this.controller)),t()}},WC=class{constructor(e,t){this.valueFactory=e,this.update=t}hostUpdate(){const e=this.valueFactory();e!==this.lastValue&&(this.lastValue=e,this.update(e))}},cm=tr(HC);fv({[Cl.en]:()=>me(()=>import("./en-POX22CDX-DnJbssUv.js"),[]).then(e=>e.default),[Cl.ar]:()=>me(()=>import("./ar-EHVYY5BX-C_gxvB5t.js"),[]).then(e=>e.default)});var GC=be`.swap-form-container{display:flex;flex-direction:column;gap:8px;height:fit-content;width:100%;min-width:300px}.input-container{width:100%;display:flex;flex-direction:column}.input-header{height:68px;padding:16px 0 16px 8px;box-sizing:border-box;color:var(--color-content-content-primary);font-size:20px;font-weight:600;line-height:28px;margin-top:-16px;letter-spacing:0;text-align:center;display:flex;align-items:center;justify-content:space-between}`,ci="swap context",Vd={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},KC=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){const e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}const t=this.now.value!==e.value,n=this.now.selection.some((r,i)=>r!==e.selection[i]);!t&&!n||(t&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,t){this.now=e,this.updateElementState(e,{inputType:t,data:null})}};function YC(e,...t){return t.every(({value:n})=>n===e.value)}function ZC(e,...t){return t.every(({value:n,selection:r})=>n===e.value&&r[0]===e.selection[0]&&r[1]===e.selection[1])}function XC({value:e,selection:t},n,r){const[i,o]=t,s=typeof r=="function"?r({value:e,selection:t}):r;return{value:e,selection:s==="replace"?[i,i+n.length]:[i,o]}}function nu(e){return typeof e=="string"}function um(e,t,n,r){let i="";for(let o=t.length;o<e.length;o++){const s=e[o],l=(r==null?void 0:r.value[o])===s;if(!nu(s)||s===n&&!l)return i;i+=s}return i}function Xg(e,t){return Array.isArray(t)?e.length===t.length&&Array.from(e).every((n,r)=>{const i=t[r];return nu(i)?n===i:n.match(i)}):t.test(e)}function JC(e,t,n){let r=null,i=null;const o=Array.from(e.value).reduce((l,h,p)=>{const m=um(t,l,h,n),g=l+m,v=t[g.length];return nu(v)?g+v:h.match(v)?(r===null&&p>=e.selection[0]&&(r=g.length),i===null&&p>=e.selection[1]&&(i=g.length),g+h):g},""),s=um(t,o,"",n);return{value:Xg(o+s,t)?o+s:o,selection:[r??o.length,i??o.length]}}function QC({value:e,selection:t},n){const[r,i]=t;let o=r,s=i;return{value:Array.from(e).reduce((h,p,m)=>{const g=h+p;return r===m&&(o=h.length),i===m&&(s=h.length),g.match(n)?g:h},""),selection:[o,s]}}function nc(e,t,n=null){if(Xg(e.value,t))return e;const{value:r,selection:i}=Array.isArray(t)?JC(e,t,n):QC(e,t);return{selection:i,value:Array.isArray(t)?r.slice(0,t.length):r}}function lm(e,t){if(!Array.isArray(t))return e;const[n,r]=e.selection,i=[],o=Array.from(e.value).reduce((s,l,h)=>{const p=t[h];return h===n&&i.push(s.length),h===r&&i.push(s.length),nu(p)&&p===l?s:s+l},"");return i.length<2&&i.push(...new Array(2-i.length).fill(o.length)),{value:o,selection:[i[0],i[1]]}}var wh=class{constructor(e,t){this.initialElementState=e,this.maskOptions=t,this.value="",this.selection=[0,0];const{value:n,selection:r}=nc(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=n,this.selection=r}addCharacters([e,t],n){const{value:r}=this,i=this.getMaskExpression({value:r.slice(0,e)+n+r.slice(t),selection:[e+n.length,e+n.length]}),o={value:r,selection:[e,t]},s=lm(o,i),[l,h]=XC(s,n,this.maskOptions.overwriteMode).selection,p=s.value.slice(0,l)+n,m=p.length,g=nc({value:p+s.value.slice(h),selection:[m,m]},i,o);if(r.slice(0,l)===nc({value:p,selection:[m,m]},i,o).value||ZC(this,g))throw new Error("Invalid mask value");this.value=g.value,this.selection=g.selection}deleteCharacters([e,t]){if(e===t||!t)return;const{value:n}=this,r=this.getMaskExpression({value:n.slice(0,e)+n.slice(t),selection:[e,e]}),i={value:n,selection:[e,t]},o=lm(i,r),[s,l]=o.selection,h=o.value.slice(0,s)+o.value.slice(l),p=nc({value:h,selection:[s,s]},r,i);this.value=p.value,this.selection=p.selection}getMaskExpression(e){const{mask:t}=this.maskOptions;return typeof t=="function"?t(e):t}},eP=class{constructor(e){this.element=e,this.listeners=[]}listen(e,t,n){const r=t;this.element.addEventListener(e,r,n),this.listeners.push(()=>this.element.removeEventListener(e,r))}destroy(){this.listeners.forEach(e=>e())}},Tn={CTRL:1,ALT:2,SHIFT:4,META:8},As={Y:89,Z:90};function $s(e,t,n){return e.ctrlKey===!!(t&Tn.CTRL)&&e.altKey===!!(t&Tn.ALT)&&e.shiftKey===!!(t&Tn.SHIFT)&&e.metaKey===!!(t&Tn.META)&&e.keyCode===n}function tP(e){return $s(e,Tn.CTRL,As.Y)||$s(e,Tn.CTRL|Tn.SHIFT,As.Z)||$s(e,Tn.META|Tn.SHIFT,As.Z)}function nP(e){return $s(e,Tn.CTRL,As.Z)||$s(e,Tn.META,As.Z)}function qd(e,t){var n;const r=e.value;if(typeof t=="string")e.value=t;else{const[i,o]=t.selection;e.value=t.value,e.matches(":focus")&&((n=e.setSelectionRange)===null||n===void 0||n.call(e,i,o))}e.value!==r&&e.dispatchEvent(new Event("input",{bubbles:!0}))}function rP({value:e,selection:t},n){const[r,i]=t;if(r!==i)return[r,i];const o=n?e.slice(r).indexOf(`
`)+1||e.length:e.slice(0,i).lastIndexOf(`
`)+1;return[n?r:o,n?o:i]}function iP({value:e,selection:t},n){const[r,i]=t;return r!==i?[r,i]:(n?[r,i+1]:[r-1,i]).map(s=>Math.min(Math.max(s,0),e.length))}var oP=/\s+$/g,sP=/^\s+/g,hm=/\s/;function aP({value:e,selection:t},n){const[r,i]=t;if(r!==i)return[r,i];if(n){const h=e.slice(r),[p]=h.match(sP)||[""],m=h.trimStart().search(hm);return[r,m!==-1?r+p.length+m:e.length]}const o=e.slice(0,i),[s]=o.match(oP)||[""],l=o.trimEnd().split("").reverse().findIndex(h=>h.match(hm));return[l!==-1?i-s.length-l:0,i]}function bc(e=[]){return(t,...n)=>e.reduce((r,i)=>Object.assign(Object.assign({},r),i(r,...n)),t)}function Hd(e,t){const n=Object.assign(Object.assign({},Vd),t),r=bc(n.preprocessors),i=bc(n.postprocessors),o=typeof e=="string"?{value:e,selection:[0,0]}:e,{elementState:s}=r({elementState:o,data:""},"validation"),l=new wh(s,n),{value:h,selection:p}=i(l,o);return typeof e=="string"?h:{value:h,selection:p}}var Wd=class extends KC{constructor(e,t){super(),this.element=e,this.maskitoOptions=t,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new eP(this.element),this.options=Object.assign(Object.assign({},Vd),this.maskitoOptions),this.preprocessor=bc(this.options.preprocessors),this.postprocessor=bc(this.options.postprocessors),this.teardowns=this.options.plugins.map(n=>n(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",n=>{if(tP(n))return n.preventDefault(),this.redo();if(nP(n))return n.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",n=>{var r;const i=n.inputType.includes("Forward");switch(this.updateHistory(this.elementState),n.inputType){case"historyUndo":return n.preventDefault(),this.undo();case"historyRedo":return n.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:n,isForward:i,selection:iP(this.elementState,i)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:n,isForward:i,selection:aP(this.elementState,i),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:n,isForward:i,selection:rP(this.elementState,i),force:!0});case"insertCompositionText":return;case"insertReplacementText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(n);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(n,n.data||((r=n.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"))||"")}}),this.eventListener.listen("input",({inputType:n})=>{n!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:e,selectionStart:t,selectionEnd:n}=this.element;return{value:e,selection:[t||0,n||0]}}get maxLength(){const{maxLength:e}=this.element;return e===-1?1/0:e}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e==null?void 0:e())}updateElementState({value:e,selection:t},n={inputType:"insertText",data:null}){const r=this.elementState.value;this.updateValue(e),this.updateSelectionRange(t),r!==e&&this.dispatchInputEvent(n)}updateSelectionRange([e,t]){var n;const{element:r}=this;r.matches(":focus")&&(r.selectionStart!==e||r.selectionEnd!==t)&&((n=r.setSelectionRange)===null||n===void 0||n.call(r,e,t))}updateValue(e){this.element.value=e}ensureValueFitsMask(){this.updateElementState(Hd(this.elementState,this.options))}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:t,isForward:n,force:r=!1}){const i={value:this.elementState.value,selection:t},[o,s]=i.selection,{elementState:l}=this.preprocessor({elementState:i,data:""},n?"deleteForward":"deleteBackward"),h=new wh(l,this.options),[p,m]=l.selection;h.deleteCharacters([p,m]);const g=this.postprocessor(h,i);if(!(i.value.slice(0,o)+i.value.slice(s)===g.value&&!r&&!this.element.isContentEditable)){if(e.preventDefault(),YC(i,l,h,g))return this.updateSelectionRange(n?[m,m]:[p,p]);this.updateElementState(g,{inputType:e.inputType,data:null}),this.updateHistory(g)}}handleInsert(e,t){const n=this.elementState,{elementState:r,data:i=t}=this.preprocessor({data:t,elementState:n},"insert"),o=new wh(r,this.options);try{o.addCharacters(r.selection,i)}catch{return e.preventDefault()}const[s,l]=r.selection,h=n.value.slice(0,s)+t+n.value.slice(l),p=this.postprocessor(o,n);if(p.value.length>this.maxLength)return e.preventDefault();(h!==p.value||this.element.isContentEditable)&&(e.preventDefault(),this.updateElementState(p,{data:t,inputType:e.inputType}),this.updateHistory(p))}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}};function wc(e,t,n){const r=Math.min(Number(n),Math.max(Number(t),Number(e)));return e instanceof Date?new Date(r):r}var cP=[".",",","",""],uP=[":","."],lP="",hP="",Jg="",Qg="",vc="-",vh="",eb="",tb=/[\\^$.*+?()[\]{}|]/g,dP=new RegExp(tb.source);function Jt(e){return e&&dP.test(e)?e.replaceAll(tb,"\\$&"):e}function Un(e,{prefix:t,postfix:n}){var r,i;const o=new RegExp(`^${Jt(t)}`),s=new RegExp(`${Jt(n)}$`),[l=""]=(r=e.match(o))!==null&&r!==void 0?r:[],[h=""]=(i=e.match(s))!==null&&i!==void 0?i:[],p=e.replace(o,"").replace(s,"");return{extractedPrefix:l,extractedPostfix:h,cleanValue:p}}function fP(e,t){let n="";for(let r=0;r<e.length;r++){if(e[r]!==t[r])return n;n+=e[r]}return n}function Ea(e){return e}function dm(e){return e.replaceAll(/[-]/g,t=>String.fromCharCode(t.charCodeAt(0)-65248))}function pP(){return({elementState:e,data:t})=>{const{value:n,selection:r}=e;return{elementState:{selection:r,value:dm(n)},data:dm(t)}}}function mP(e){const t=new RegExp(`${Jt(e)}$`);return e?({value:n,selection:r},i)=>{if(!n&&!i.value.endsWith(e))return{value:n,selection:r};if(!n.endsWith(e)&&!i.value.endsWith(e))return{selection:r,value:n+e};const o=i.value.replace(t,""),s=i.selection[1]>=o.length,l=fP(o,n);return{selection:r,value:Array.from(e).reverse().reduce((h,p,m)=>{const g=h.length-1-m,v=l[g]===p&&s;return h[g]!==p||v?h.slice(0,g+1)+p+h.slice(g+1):h},n)}}:Ea}function yP(e){return e?({value:t,selection:n},r)=>{if(t.startsWith(e)||!t&&!r.value.startsWith(e))return{value:t,selection:n};const[i,o]=n,s=Array.from(e).reduce((h,p,m)=>h[m]===p?h:h.slice(0,m)+p+h.slice(m),t),l=s.length-t.length;return{selection:[i+l,o+l],value:s}}:Ea}function Gd(e,t,n){return(r,i)=>{const o=()=>t(r,i);return r.addEventListener(e,o,n),()=>r.removeEventListener(e,o,n)}}new RegExp(`[${uP.map(Jt).join("")}]$`);function gP({prefix:e,postfix:t}){return({elementState:n,data:r})=>{const{cleanValue:i}=Un(r,{prefix:e,postfix:t});return{elementState:n,data:i}}}function nb({decimalSeparator:e,isNegativeAllowed:t,precision:n,thousandSeparator:r,prefix:i,postfix:o,decimalPseudoSeparators:s=[],pseudoMinuses:l=[],minusSign:h}){const p=fm(i),m="\\d",g=t?`[${h}${l.map(S=>`\\${S}`).join("")}]?`:"",v=r?`[${m}${Jt(r).replaceAll(/\s/g,"\\s")}]*`:`[${m}]*`,_=n>0?`([${Jt(e)}${s.map(Jt).join("")}]${m}{0,${Number.isFinite(n)?n:""}})?`:"",E=fm(o);return new RegExp(`^${p}${g}${v}${_}${E}$`)}function fm(e){return e?`${e.split("").map(t=>`${Jt(t)}?`).join("")}`:""}function Kd(e,t="."){const n=!!e.match(new RegExp(`^\\D*[${vh}\\${vc}${Jg}${Qg}${eb}]`)),r=Jt(t),i=e.replaceAll(new RegExp(`${r}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${r}]`,"g"),"").replace(t,".");return i?Number((n?vc:"")+i):NaN}function bP(e){const t=String(e),[n,r]=t.split("e-");let i=t;if(r){const[,o]=n.split("."),s=Number(r)+((o==null?void 0:o.length)||0);i=e.toFixed(s)}return i}function rb(e,{decimalSeparator:t,thousandSeparator:n}){const[r="",i=""]=e.split(t),[,o="",s=""]=r.match(new RegExp(`([^\\d${Jt(n)}]+)?(.*)`))||[];return{minus:o,integerPart:s,decimalPart:i}}function wP({decimalSeparator:e,thousandSeparator:t,decimalPseudoSeparators:n=cP}){return n.filter(r=>r!==t&&r!==e)}function vP({decimalSeparator:e,precision:t,decimalZeroPadding:n,prefix:r,postfix:i}){return t<=0||!n?Ea:({value:o,selection:s})=>{const{cleanValue:l,extractedPrefix:h,extractedPostfix:p}=Un(o,{prefix:r,postfix:i});if(Number.isNaN(Kd(l,e)))return{value:o,selection:s};const[m,g=""]=l.split(e);return{value:h+m+e+g.padEnd(t,"0")+p,selection:s}}}function xP({prefix:e,postfix:t,decimalSeparator:n,thousandSeparator:r}){return({value:i,selection:o})=>{const[s]=o,{cleanValue:l,extractedPrefix:h,extractedPostfix:p}=Un(i,{prefix:e,postfix:t}),{minus:m,integerPart:g,decimalPart:v}=rb(l,{decimalSeparator:n,thousandSeparator:r}),_=!g&&!v&&l.includes(n);return!g&&!Number(v)&&s===(m+h).length||_?{selection:o,value:h+m+p}:{value:i,selection:o}}}function _P({decimalSeparator:e,decimalPseudoSeparators:t,pseudoMinuses:n,prefix:r,postfix:i,minusSign:o}){let s=!0;const l=nb({decimalSeparator:e,decimalPseudoSeparators:t,pseudoMinuses:n,prefix:"",postfix:"",thousandSeparator:"",precision:1/0,isNegativeAllowed:!0,minusSign:o});return({elementState:h,data:p})=>{if(!s)return{elementState:h,data:p};s=!1;const{value:m,selection:g}=h,[v,_]=g,{extractedPrefix:E,cleanValue:S,extractedPostfix:P}=Un(m,{prefix:r,postfix:i}),I=Hd({selection:[Math.max(v-E.length,0),wc(_-E.length,0,S.length)],value:S},{mask:l}),[O,L]=I.selection;return{elementState:{selection:[O+E.length,L+E.length],value:E+I.value+P},data:p}}}function EP({decimalSeparator:e,thousandSeparator:t,prefix:n,postfix:r}){const i=s=>{const l=Jt(t);return s.replace(new RegExp(`^(\\D+)?[0${l}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${l}]+(?=[1-9])`),"$1")},o=(s,l)=>{const h=s.slice(0,l),p=s.slice(l).startsWith("0");return h.length-i(h).length+(p?1:0)};return({value:s,selection:l})=>{const[h,p]=l,{cleanValue:m,extractedPrefix:g,extractedPostfix:v}=Un(s,{prefix:n,postfix:r}),_=m.includes(e),[E,S=""]=m.split(e),P=i(E);if(E===P)return{value:s,selection:l};const I=h-o(s,h),O=p-o(s,p);return{value:g+P+(_?e:"")+S+v,selection:[Math.max(I,0),Math.max(O,0)]}}}function SP({min:e,max:t,decimalSeparator:n,minusSign:r}){return({value:i,selection:o})=>{const s=Kd(i,n),l=s>0?Math.min(s,t):Math.max(s,e);if(s&&l!==s){const h=`${l}`.replace(".",n).replace(vc,r);return{value:h,selection:[h.length,h.length]}}return{value:i,selection:o}}}function AP({decimalSeparator:e,thousandSeparator:t,decimalZeroPadding:n}){return({elementState:r,data:i},o)=>{const{value:s,selection:l}=r,[h,p]=l,m=s.slice(h,p),g=n?[e,t]:[t],v=n&&h>s.indexOf(e)&&!!m.match(/^0+$/gi);return o!=="deleteBackward"&&o!=="deleteForward"||!g.includes(m)&&!v?{elementState:r,data:i}:{elementState:{value:s,selection:o==="deleteForward"?[p,p]:[h,h]},data:i}}}function $P({decimalSeparator:e,precision:t,prefix:n,postfix:r}){const i=new RegExp(`^\\D*${Jt(e)}`);return({elementState:o,data:s})=>{const{value:l,selection:h}=o,{cleanValue:p,extractedPrefix:m}=Un(l,{prefix:n,postfix:r}),[g,v]=h,_=wc(g-m.length,0,p.length),E=wc(v-m.length,0,p.length);if(t<=0||p.slice(0,_).includes(e)||p.slice(E).includes(e)||!s.match(i))return{elementState:o,data:s};const S=p.slice(0,_).match(/\d+/);return{elementState:o,data:S?s:`0${s}`}}}function pm({validCharacter:e,pseudoCharacters:t,prefix:n,postfix:r}){const i=new RegExp(`[${t.join("")}]`,"gi");return({elementState:o,data:s})=>{const{value:l,selection:h}=o,{cleanValue:p,extractedPostfix:m,extractedPrefix:g}=Un(l,{prefix:n,postfix:r});return{elementState:{selection:h,value:g+p.replace(i,e)+m},data:s.replace(i,e)}}}function kP({decimalSeparator:e,prefix:t,postfix:n}){return({elementState:r,data:i})=>{const{value:o,selection:s}=r,[l,h]=s,{cleanValue:p}=Un(o,{prefix:t,postfix:n});return{elementState:r,data:!p.includes(e)||o.slice(l,h+1).includes(e)?i:i.replaceAll(new RegExp(Jt(e),"gi"),"")}}}function CP({thousandSeparator:e,decimalSeparator:t,prefix:n,postfix:r}){if(!e)return Ea;const i=(...o)=>o.every(s=>/\s/.test(s));return({value:o,selection:s})=>{const{cleanValue:l,extractedPostfix:h,extractedPrefix:p}=Un(o,{prefix:n,postfix:r}),{minus:m,integerPart:g,decimalPart:v}=rb(l,{decimalSeparator:t,thousandSeparator:e}),[_,E]=s;let[S,P]=s;const I=Array.from(g).reduceRight((O,L,U)=>{const X=!(!U&&L===e)&&O.length&&(O.length+1)%4===0;return X&&(L===e||i(L,e))?e+O:L===e&&!X?(U&&U<=_&&S--,U&&U<=E&&P--,O):X?(U<=_&&S++,U<=E&&P++,L+e+O):L+O},"");return{value:p+m+I+(l.includes(t)?t:"")+v+h,selection:[S,P]}}}function PP({precision:e,decimalSeparator:t,prefix:n,postfix:r}){if(e>0)return Ea;const i=new RegExp(`${Jt(t)}.*$`,"g");return({elementState:o,data:s})=>{const{value:l,selection:h}=o,{cleanValue:p,extractedPrefix:m,extractedPostfix:g}=Un(l,{prefix:n,postfix:r}),[v,_]=h,E=m+p.replace(i,"")+g;return{elementState:{selection:[Math.min(v,E.length),Math.min(_,E.length)],value:E},data:s.replace(i,"")}}}var mm=[0,0];function IP({decimalSeparator:e,thousandSeparator:t,prefix:n,postfix:r}){const i=EP({decimalSeparator:e,thousandSeparator:t,prefix:n,postfix:r});return Gd("blur",o=>{const s=i({value:o.value,selection:mm},{value:"",selection:mm}).value;qd(o,s)},{capture:!0})}function TP({min:e,max:t,decimalSeparator:n}){return Gd("blur",(r,i)=>{const o=Kd(r.value,n),s=wc(o,e,t);!Number.isNaN(o)&&o!==s&&qd(r,Hd(bP(s),i))},{capture:!0})}function BP({decimalSeparator:e,prefix:t,postfix:n}){return Gd("blur",r=>{const{cleanValue:i,extractedPostfix:o,extractedPrefix:s}=Un(r.value,{prefix:t,postfix:n}),l=s+i.replace(new RegExp(`^(\\D+)?${Jt(e)}`),`$10${e}`)+o;qd(r,l)},{capture:!0})}function Yd({max:e=Number.MAX_SAFE_INTEGER,min:t=Number.MIN_SAFE_INTEGER,precision:n=0,thousandSeparator:r=lP,decimalSeparator:i=".",decimalPseudoSeparators:o,decimalZeroPadding:s=!1,prefix:l="",postfix:h="",minusSign:p=vh}={}){const m=[vc,Jg,Qg,eb,vh].filter(_=>_!==r&&_!==i&&_!==p),g=wP({decimalSeparator:i,thousandSeparator:r,decimalPseudoSeparators:o}),v=l.endsWith(i)&&n>0?`${l}${hP}`:l;return Object.assign(Object.assign({},Vd),{mask:nb({decimalSeparator:i,precision:n,thousandSeparator:r,prefix:v,postfix:h,isNegativeAllowed:t<0,minusSign:p}),preprocessors:[pP(),_P({decimalSeparator:i,decimalPseudoSeparators:g,pseudoMinuses:m,prefix:v,postfix:h,minusSign:p}),gP({prefix:v,postfix:h}),pm({validCharacter:p,pseudoCharacters:m,prefix:v,postfix:h}),pm({validCharacter:i,pseudoCharacters:g,prefix:v,postfix:h}),$P({decimalSeparator:i,precision:n,prefix:v,postfix:h}),AP({decimalSeparator:i,decimalZeroPadding:s,thousandSeparator:r}),PP({precision:n,decimalSeparator:i,prefix:v,postfix:h}),kP({decimalSeparator:i,prefix:v,postfix:h})],postprocessors:[SP({decimalSeparator:i,min:t,max:e,minusSign:p}),yP(v),mP(h),CP({decimalSeparator:i,thousandSeparator:r,prefix:v,postfix:h}),vP({decimalSeparator:i,decimalZeroPadding:s,precision:n,prefix:v,postfix:h}),xP({prefix:v,postfix:h,decimalSeparator:i,thousandSeparator:r})],plugins:[IP({decimalSeparator:i,thousandSeparator:r,prefix:v,postfix:h}),BP({decimalSeparator:i,prefix:v,postfix:h}),TP({min:t,max:e,decimalSeparator:i})],overwriteMode:s?({value:_,selection:[E]})=>E<=_.indexOf(i)?"shift":"replace":"shift"})}var OP=be`:host{font-size:16px;font-weight:400;line-height:24px;letter-spacing:0;text-align:right;width:fit-content;color:var(--color-content-content-secondary)}${Ht(be`:host{font-size:13px}`)}`,Ti=class extends Ue{constructor(){super(...arguments),this.balance$=qe(()=>{if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return Xt([this.context.connectedWalletAddress$,this.context.getTokenByType(this.tokenType),this.context.chainId$,this.context.chainId$.pipe(He(e=>e?ba(e):[]),Ot(null))])}).pipe(Ut(([e])=>!!e),He(([e,t,n])=>!e||!t||!n?[G`<br>`]:qe(()=>rn.liveQuery(()=>rn.getTokenBalance(n,t.address,e))).pipe(Ut(Boolean),Pe(r=>Si(Vt(BigInt(r.amount),t.decimals),6)),Pe(r=>this.getBalanceView(r)),Nh(()=>[G`<br>`]))))}render(){return G`${dt(this.balance$,G`<br>`)}`}getBalanceView(e){return G`<span>${it("widgets.swap-form.input.balance.balance")}: ${e}</span>`}};Ti.tagName="inch-swap-balance";Ti.styles=OP;De([_e({type:String,attribute:!0})],Ti.prototype,"tokenType",2);De([xn({context:ci})],Ti.prototype,"context",2);Ti=De([Ge(Ti.tagName)],Ti);var RP=be`:host{font-size:16px;font-weight:400;line-height:24px;letter-spacing:0;text-align:right;color:var(--color-content-content-secondary);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}${Ht(be`:host{font-size:13px}`)}`,Bi=class extends Ue{constructor(){super(...arguments),this.balance$=qe(()=>{if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return Xt([this.context.connectedWalletAddress$,this.context.getTokenByType(this.tokenType),this.context.chainId$])}).pipe(Ut(([e])=>!!e),He(([e,t,n])=>!e||!t||!n?[G`<br>`]:Xt([rn.liveQuery(()=>rn.getTokenUSDPrice(n,t.address)),this.context.getTokenRawAmountByType(this.tokenType)]).pipe(Pe(([r,i])=>{if(!i)return G`<br>`;const o=Vt(BigInt(i),t.decimals),s=Number(o)*Number(r);return this.getBalanceView(Ur(s.toString(),1))}),Nh(()=>[G`<br>`]))))}render(){return G`${dt(this.balance$,G`<br>`)}`}getBalanceView(e){return G`<span>~$${e}</span>`}};Bi.tagName="inch-fiat-balance";Bi.styles=RP;De([_e({type:String,attribute:!0})],Bi.prototype,"tokenType",2);De([xn({context:ci})],Bi.prototype,"context",2);Bi=De([Ge(Bi.tagName)],Bi);var MP=be`.input-container{height:128px;border-radius:16px;background-color:var(--color-background-bg-secondary);transition:box-shadow .2s;padding:16px;box-sizing:border-box;display:grid;grid-template-columns:minmax(40%,auto) minmax(auto,70%);justify-content:space-between}.input-container.disabled{background-color:var(--color-background-bg-primary);border:1px solid var(--color-border-border-tertiary)}.flex-container{display:flex;flex-direction:column;justify-content:space-between;height:fit-content}.input-title{font-size:16px;font-weight:500;line-height:24px;letter-spacing:0;text-align:left;color:var(--color-content-content-secondary);width:fit-content}.symbol-container{border:none;background-color:transparent;display:flex;align-items:center;gap:8px;cursor:pointer;color:var(--color-content-content-primary);border-radius:16px;padding:8px;margin-left:-8px;transition:background-color .2s;outline:0;user-select:none;width:fit-content;-webkit-tap-highlight-color:transparent}.symbol{font-size:24px;font-weight:600;line-height:32px;letter-spacing:0;text-align:left;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.token-name{font-size:16px;font-weight:400;line-height:24px;letter-spacing:0;text-align:left;color:var(--color-content-content-secondary);font-style:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.token-name:dir(rtl){text-align:right}.amount-input{height:48px;padding:0;color:var(--color-content-content-primary);box-sizing:border-box;font-size:24px;font-weight:600;line-height:32px;letter-spacing:0;text-align:right;border:none;background-color:transparent;outline:0;user-select:none;width:100%}.input-rtl{text-align:left}.amount-input[type=number]::-webkit-inner-spin-button,.amount-input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.amount-input[type=number]{-moz-appearance:textfield}.amount-input:disabled{opacity:1;color:var(--color-content-content-primary)}.balance-amount-fiat{align-items:flex-end}.focus:not(.disabled){box-shadow:0 0 0 1px var(--color-background-bg-positive-hover)}.balance-and-max{display:flex;gap:8px;align-items:center}.loading{will-change:opacity;animation:stub-loader-animation 2s ease-in-out infinite}.input-rtl{text-align:end}@keyframes stub-loader-animation{0%,100%{opacity:1}50%{opacity:.5}}@media (hover:hover){.input-container:not(.disabled):hover{box-shadow:0 0 0 1px var(--color-background-bg-positive-hover)}.symbol-container:hover{background-color:var(--color-background-bg-positive-hover)}}${Ht(be`.amount-input{height:40px}.amount-input,.symbol{font-size:20px}.input-title,.token-name{font-size:13px}.input-container{height:116px}.symbol-container{padding:4px 8px}`)}.symbol-container:active{transform:scale(.98);background-color:var(--color-background-bg-positive-hover)}.select-token-text{word-wrap:break-word;white-space:nowrap}`,Dn=class extends Ue{constructor(){super(...arguments),this.disabled=!1,this.isFocus=!1,this.connectedAddress=null,this.setMaxInProgress=!1,this.token=null,this.token$=qe(()=>this.getTokenEventEmitter()).pipe(ft({bufferSize:1,refCount:!0})),this.chainId$=qe(()=>this.getChainEventEmitter()),this.connectedAddress$=qe(()=>this.getConnectedWalletAddress()),this.amount$=qe(()=>this.getTokenAmountStream()),this.loading$=qe(()=>this.getLoadingStream()),this.loaderView$=qe(()=>this.loading$.pipe(Pe(e=>this.tokenType==="source"?G`${this.input}`:e?G`<span class="loader"></span>`:G`${this.input}`),Ot(G`${this.input}`))),this.input=document.createElement("input"),this.maskedInput=this.buildMask(6),this.tokenView$=this.token$.pipe(Pe(e=>e?this.tokenView(e):this.selectTokenView()))}connectedCallback(){super.connectedCallback(),this.input.classList.add("amount-input"),this.input.inputMode="decimal",this.input.autocomplete="off",this.input.placeholder=this.tokenType==="source"?"0":"",this.input.onfocus=()=>this.onFocus(),this.input.onblur=()=>this.onBlur(),this.input.oninput=r=>this.onInput(r);const e=this.token$.pipe(We(r=>{r&&(this.maskedInput.destroy(),this.maskedInput=this.buildMask(r.decimals))})),t=this.loading$.pipe(He(r=>this.tokenType==="source"?Yt(void 0):r&&!this.input.classList.contains("loading")?(this.input.classList.add("loading"),Yt(void 0)):!r&&this.input.classList.contains("loading")?ti(this.input.animate([{},{opacity:1}],{duration:2e3}).finished.then(()=>{this.input.classList.remove("loading")})):Yt(void 0))),n=Xt([this.amount$,this.token$]).pipe(Pe(([r,i])=>!r||!i?"0":Vt(r,i.decimals)),Ut((r,i)=>i===0&&r==="0"?!1:r!==this.input.value),We(r=>this.input.value=Si(r,6)));Qt(this,[e,n,t,this.token$.pipe(We(r=>this.token=r)),this.connectedAddress$.pipe(We(r=>this.connectedAddress=r))],{requestUpdate:!1}),Qt(this,[l0])}disconnectedCallback(){super.disconnectedCallback(),this.maskedInput.destroy()}render(){const e={disabled:this.disabled,focus:this.isFocus};return this.input.disabled=this.tokenType==="destination",this.updateInputRtl(),G`<div class="input-container ${fn(e)}"><div class="flex-container symbol-title-name"><div class="input-title">${Zg(this.tokenType,[["source",()=>G`${it("widgets.swap-form.input.title.you_pay")}`],["destination",()=>G`${it("widgets.swap-form.input.title.you_receive")}`]])}</div>${dt(this.tokenView$)}</div><div class="flex-container balance-amount-fiat"><div class="balance-and-max"><inch-swap-balance tokenType="${dr(this.tokenType)}"></inch-swap-balance>${je(this.connectedAddress&&this.token&&this.tokenType==="source",()=>G`<inch-button @click="${async()=>{var t;this.setMaxInProgress=!0,await((t=this.context)==null?void 0:t.setMaxAmount()),this.setMaxInProgress=!1}}" type="secondary" size="xs" loader="${dr(this.setMaxInProgress?"":void 0)}">MAX</inch-button>`)}</div>${this.input}<inch-fiat-balance tokenType="${dr(this.tokenType)}"></inch-fiat-balance></div></div>`}selectTokenView(){return G`<inch-button disabledSlotPointerEvent type="secondary" size="l" @click="${e=>pt(this,"openTokenSelector",this.tokenType,e)}"><span class="select-token-text">Select token</span><inch-icon icon="chevronDown16"></inch-icon></inch-button><br>`}onFocus(){this.isFocus=!0,pt(this,"focusTokenInput",this.tokenType)}onBlur(){this.isFocus=!1,pt(this,"blurTokenInput",this.tokenType)}tokenView(e){const{name:t,symbol:n,address:r}=e;return G`<button @click="${i=>pt(this,"openTokenSelector",this.tokenType,i)}" class="symbol-container"><inch-token-icon symbol="${n}" address="${r}" chainId="${dt(this.chainId$)}"></inch-token-icon><span class="symbol">${n}</span><inch-icon icon="chevronDown16"></inch-icon></button><div class="token-name">${t}</div>`}updateInputRtl(){Po()&&!this.input.classList.contains("input-rtl")&&this.input.classList.add("input-rtl"),!Po()&&this.input.classList.contains("input-rtl")&&this.input.classList.remove("input-rtl")}getTokenEventEmitter(){if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return this.context.getTokenByType(this.tokenType)}getTokenAmountStream(){if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return this.context.getTokenAmountByType(this.tokenType)}getLoadingStream(){if(!this.context)throw new Error("");if(!this.tokenType)throw new Error("");return this.context.loading$}getChainEventEmitter(){if(!this.context)throw new Error("");return this.context.chainId$}getConnectedWalletAddress(){if(!this.context)throw new Error("");return this.context.connectedWalletAddress$}onInput(e){var o;if(!this.tokenType)return;const t=e.target,n=(t==null?void 0:t.value)??"",r=this.token;if(!r)return;const i=Jl(n.replaceAll("",""),r.decimals);(o=this.context)==null||o.setTokenAmountByType(this.tokenType,i)}buildMask(e){return new Wd(this.input,Yd({precision:e,max:9*10**15,min:0}))}};Dn.tagName="inch-swap-form-input";Dn.styles=MP;De([_e({type:Boolean,attribute:!0,reflect:!0})],Dn.prototype,"disabled",2);De([_e({type:String,attribute:!0,reflect:!0})],Dn.prototype,"tokenType",2);De([_t()],Dn.prototype,"isFocus",2);De([_t()],Dn.prototype,"connectedAddress",2);De([_t()],Dn.prototype,"setMaxInProgress",2);De([xn({context:ci,subscribe:!0})],Dn.prototype,"context",2);Dn=De([Ge(Dn.tagName)],Dn);var DP=be`:host{height:4px;position:relative;outline:0;user-select:none;display:flex;align-items:center;justify-content:center;-webkit-tap-highlight-color:transparent}.switcher{position:absolute;border-radius:50%;border:none;background-color:var(--color-background-bg-primary);color:var(--color-content-content-primary);box-shadow:0 4px 12px 0 rgba(0,0,0,.12),0 1px 4px 0 rgba(0,0,0,.12);width:32px;height:32px;display:flex;justify-content:center;align-items:center;top:-13px;cursor:pointer;will-change:transform}.switcher:disabled{cursor:not-allowed;pointer-events:none;color:var(--color-content-content-disabled);box-shadow:0 4px 12px 0 rgba(0,0,0,.12),0 1px 4px 0 rgba(0,0,0,.12)}@media (hover:hover){.switcher:not(:disabled):hover{color:var(--color-content-content-secondary)}}`,vo=class extends Ue{constructor(){super(...arguments),this.iconRef=pr(),this.buttonRef=pr(),this.mobileMedia=Er(),this.isUp=!1,this.isDisabled$=qe(()=>{if(!this.context)throw new Error("");return Xt([this.context.getTokenByType("source"),this.context.getTokenByType("destination")])}).pipe(Pe(([e,t])=>!e||!t))}firstUpdated(){if(this.buttonRef.value&&!this.mobileMedia.matches){const e={duration:200,easing:"cubic-bezier(.1, .3, .6, 1)"};Qt(this,[rt(this.buttonRef.value,"mouseenter").pipe(He(async()=>{!this.iconRef.value||this.isUp||(this.isUp=!0,await this.iconRef.value.animate([{transform:"rotate(0deg)"},{transform:"rotate(180deg)"}],e).finished,Re(this.iconRef.value,{transform:"rotate(180deg)"}))})),rt(this.buttonRef.value,"mouseleave").pipe(He(async()=>{!this.iconRef.value||!this.isUp||(this.isUp=!1,await this.iconRef.value.animate([{transform:"rotate(180deg)"},{transform:"rotate(360deg)"}],e).finished,Re(this.iconRef.value,{transform:""}))}))])}}render(){return G`<button ${In(this.buttonRef)} @click="${()=>this.onClick()}" ?disabled="${dt(this.isDisabled$,!1)}" class="switcher"><inch-icon ${In(this.iconRef)} class="switcher-icon" icon="arrowDown24"></inch-icon></button>`}async onClick(){var t;if(!this.iconRef.value||!this.isUp&&!this.mobileMedia.matches)return;(t=this.context)==null||t.switchPair(),pt(this,"switchPair",null);const e={duration:200,easing:"cubic-bezier(.1, .3, .6, 1)"};this.mobileMedia.matches||(await this.iconRef.value.animate([{transform:"rotate(180deg)"},{transform:"rotate(360deg)"}],e).finished,Re(this.iconRef.value,{transform:""}),this.isUp=!1)}};vo.tagName="inch-token-pair-switch";vo.styles=DP;De([xn({context:ci,subscribe:!0})],vo.prototype,"context",2);vo=De([Ge(vo.tagName)],vo);var NP=be`:host{height:57px}${Ht(be`:host{height:44px}`)}.smart-hover{position:relative;overflow:hidden}.off-hover,.on-hover{position:absolute;transition:transform .2s}.on-hover{transform:translateY(-200%)}.rainbow{--button-text-color-ext:#ffffff;--button-text-color-ext-hover:#ffffff;position:relative}.rainbow:after,.rainbow:before{content:'';position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0;background:${Bg()};background-size:1000%;animation:bg-rainbow 300s cubic-bezier(.4,0,1,1) infinite;z-index:-1}@keyframes bg-rainbow{0%{border-radius:24px;background-position:0 0}50%{border-radius:24px;background-size:800%;background-position:400% 0}100%{border-radius:24px;background-position:0 0}}@media (hover:hover){.smart-hover:hover .on-hover{transform:translateY(0)}.smart-hover:hover .off-hover{transform:translateY(200%)}}@media (hover:none){.smart-hover .on-hover{transform:translateY(0)}.smart-hover .off-hover{transform:translateY(200%)}}`,FP=[1,9,13,14],Nn=class extends Ue{constructor(){super(...arguments),this.isRainbowTheme=!1,this.buttonState=nt.get("fusion_swap_button_state",Gn)??0,this.chainId=null,this.srcToken=null,this.mobileMedia=nr(this),this.connectedWalletAddress$=qe(()=>this.getConnectedWalletAddress()),this.sourceToken$=qe(()=>this.getSourceToken()),this.destinationToken$=qe(()=>this.getDestinationToken()),this.chainId$=qe(()=>this.getChainId()),this.sourceTokenAmount$=qe(()=>this.getSourceTokenAmount()),this.rate$=qe(()=>this.getRate()),this.block$=this.chainId$.pipe(He(e=>e?ba(e):[])),this.updateView$=new tn,this.exceedingMaximumAmount$=Xt([this.connectedWalletAddress$,this.sourceToken$,this.sourceTokenAmount$.pipe(Ot(0n)),gr(this.chainId$,this.block$)]).pipe(He(([e,t,n])=>!e||!t||n===0n||!this.context?Yt(!1):this.context.getMaxAmount().then(r=>r===0n?!0:!n||n>r)),ft({bufferSize:1,refCount:!0})),this.calculateStatus$=Xt([this.connectedWalletAddress$,this.sourceToken$,this.destinationToken$,this.exceedingMaximumAmount$,this.sourceTokenAmount$.pipe(Ot(0n)),this.chainId$,this.rate$.pipe(Ot(null)),this.block$.pipe(Ot(null)),this.updateView$.pipe(Ot(null))]).pipe(Pe(e=>{const[t,n,r,i,o,s,l]=e;return this.chainId=s,this.srcToken=n,dg(s)?t===null?3:n===null?4:r===null?5:!o||o===0n?6:i?7:l===null?8:_r(n.address)?12:0:2}),zt(),Uo(0),Fh(this.chainId$,this.connectedWalletAddress$,this.sourceToken$),He(async([e,t,n,r])=>{if(e!==0)return e;if(!t||!n||!r)throw new Error("");this.buttonState=9;const i=ms(t),o=await OA(t,r.address,n,i),s=await dn(this.sourceTokenAmount$);return s&&o<s?Bd(t)?await JA(t,r.address,n,i)?e:11:10:e}),We(e=>{this.buttonState=e,nt.set("fusion_swap_button_state",this.buttonState)}))}connectedCallback(){super.connectedCallback(),Qt(this,[Ig().pipe(Pe(({brandColor:e})=>e),zt(),We(e=>this.isRainbowTheme=e===xa.rainbow)),this.calculateStatus$]),this.updateView$.next()}render(){const e=this.mobileMedia.matches?"xl":"xxl";return G`<inch-button class="smart-hover" @click="${t=>this.onClickSwapButton(t)}" type="${this.getButtonType()}" size="${e}" loader="${dr(this.getLoaderState())}" fullSize>${je(this.buttonState===2,()=>G`<span class="off-hover">Chain ${this.chainId} not supported</span> <span class="on-hover">Change chain</span><br>`)} ${je(this.buttonState===0,()=>G`<span>${it("widgets.swap-form.swap-button.confirm-swap")}</span>`)} ${je(this.buttonState===1,()=>G`<span>${it("widgets.swap-form.swap-button.confirm-swap")}</span>`)} ${je(this.buttonState===9,()=>G`<span>${it("widgets.swap-form.swap-button.check-allowance")}</span>`)} ${je(this.buttonState===12,()=>G`<span>${it("widgets.swap-form.swap-button.native-token-not-supported")}</span>`)} ${je(this.buttonState===10,()=>G`<span>${it("widgets.swap-form.swap-button.approve-and-swap")}</span>`)} ${je(this.buttonState===11,()=>G`<span>${it("widgets.swap-form.swap-button.permit-and-swap")}</span>`)} ${je(this.buttonState===3,()=>G`<span>${it("widgets.swap-form.swap-button.connect-wallet")}</span>`)} ${je(this.buttonState===4,()=>G`<span>${it("widgets.swap-form.swap-button.select-source-token")}</span>`)} ${je(this.buttonState===5,()=>G`<span>${it("widgets.swap-form.swap-button.select-destination-token")}</span>`)} ${je(this.buttonState===6,()=>G`<span>${it("widgets.swap-form.swap-button.enter-amount-to-swap")}</span>`)} ${je(this.buttonState===8,()=>G`<span>${it("widgets.swap-form.swap-button.no-liquidity-for-swap")}</span>`)} ${je(this.buttonState===7,()=>{var t,n;return G`<span class="off-hover">${it("widgets.swap-form.swap-button.insufficient-balance",{symbol:(t=this.srcToken)==null?void 0:t.symbol})}</span> <span class="on-hover">${it("widgets.swap-form.swap-button.set-max",{symbol:(n=this.srcToken)==null?void 0:n.symbol})}</span><br>`})} ${je(this.buttonState===13,()=>G`<span class="off-hover">${it("widgets.swap-form.swap-button.wait-wallet-response")}</span> <span class="on-hover">${it("widgets.swap-form.swap-button.permit-swap-in-wallet")}</span><br>`)} ${je(this.buttonState===14,()=>G`<span class="off-hover">${it("widgets.swap-form.swap-button.wait-wallet-response")}</span> <span class="on-hover">${it("widgets.swap-form.swap-button.allow-swap-in-wallet")}</span><br>`)}</inch-button>`}async onClickSwapButton(e){if(!this.context)throw new Error("");const t=this.buttonState;try{if(this.buttonState===2)return pt(this,"changeChain",null);if(this.buttonState===3)return pt(this,"connectWallet",null);if(this.buttonState===4)return pt(this,"openTokenSelector","source",e);if(this.buttonState===5)return pt(this,"openTokenSelector","destination",e);if(this.buttonState===7)return await this.context.setMaxAmount();if(this.buttonState===10&&(this.buttonState=14,await this.context.getApprove(),this.buttonState=0),this.buttonState===11&&(this.buttonState=13,await this.context.getPermit(),this.buttonState=0),this.buttonState===0){this.buttonState=1;const n=await this.context.getSnapshot();n&&pt(this,"confirmSwap",n,e),this.buttonState=0,this.updateView$.next()}}catch{this.buttonState=t}}getButtonType(){return this.buttonState===0||this.buttonState===10||this.buttonState===11?"primary":"secondary"}getLoaderState(){if(FP.includes(this.buttonState))return!0}async onSwap(){}getConnectedWalletAddress(){if(!this.context)throw new Error("");return this.context.connectedWalletAddress$}getChainId(){if(!this.context)throw new Error("");return this.context.chainId$}getSourceToken(){if(!this.context)throw new Error("");return this.context.getTokenByType("source")}getDestinationToken(){if(!this.context)throw new Error("");return this.context.getTokenByType("destination")}getSourceTokenAmount(){if(!this.context)throw new Error("");return this.context.getTokenRawAmountByType("source")}getRate(){if(!this.context)throw new Error("");return this.context.rate$}};Nn.tagName="inch-swap-button";Nn.styles=NP;De([xn({context:ci,subscribe:!0})],Nn.prototype,"context",2);De([_t()],Nn.prototype,"isRainbowTheme",2);De([_t()],Nn.prototype,"buttonState",2);De([_t()],Nn.prototype,"chainId",2);De([_t()],Nn.prototype,"srcToken",2);De([Sn()],Nn.prototype,"onClickSwapButton",1);Nn=De([Ge(Nn.tagName)],Nn);var LP=be`:host{display:flex;flex-direction:column}`,jP=be`.slippage-title{display:flex;padding:8px;gap:8px;color:var(--color-content-content-primary);align-items:center;margin-bottom:8px;cursor:pointer;font-size:16px}.back-icon{transform:rotate(90deg)}${Ht(be`.slippage-title{font-size:13px}`)}`,xo=class extends Ue{constructor(){super(...arguments),this.mobileMedia=nr(this),this.segmentsCustom={label:"Custom",value:"custom",template:()=>G`${this.customSlippageInput}`},this.segments=[{label:"Auto",value:"auto"},{label:"0.1%",value:.1},{label:"0.5%",value:.5},{label:"1%",value:1},this.segmentsCustom],this.postfix="%",this.customSlippageInput=document.createElement("input")}connectedCallback(){var e;super.connectedCallback(),this.buildMask(),(e=this.settings)==null||e.startChangingValue(),this.customSlippageInput.placeholder="Custom %",this.customSlippageInput.inputMode="decimal",this.customSlippageInput.autocomplete="off",Re(this.customSlippageInput,{backgroundColor:"transparent",border:"none",outline:"none",padding:"0",color:"var(--color-content-content-primary)",width:"80px",fontSize:"16px",textAlign:"center"}),Qt(this,[rt(this.customSlippageInput,"input").pipe(We(()=>{var n;this.customSlippageInput.value.length===1&&(this.customSlippageInput.value="");const t=parseFloat(this.customSlippageInput.value.replace(this.postfix,""));(n=this.settings)==null||n.setValue([t,"custom"])}))],{requestUpdate:!1})}render(){return Re(this.customSlippageInput,{fontSize:this.mobileMedia.matches?"13px":"16px"}),G`<div @click="${()=>this.onBack()}" class="slippage-title"><inch-icon class="back-icon" icon="chevronDown16"></inch-icon><span>${it("widgets.swap-form.fusion-info.slippage-tolerance")}</span></div><inch-segmented-control .items="${this.segments}" .select="${this.getStartSection()}" @change="${e=>this.onChange(e)}"></inch-segmented-control>`}buildMask(){return new Wd(this.customSlippageInput,Yd({max:99,min:1,precision:2,postfix:this.postfix}))}onBack(){var t,n,r;const e=((t=this.settings)==null?void 0:t.value)??null;e&&e[1]==="custom"&&(e[0]===null||isNaN(e[0]))&&((n=this.settings)==null||n.resetValue()),(r=this.settings)==null||r.endChangingValue(),pt(this,"back",null)}onChange({detail:e}){var n,r,i;const t=e.value;if(t==="auto"){(n=this.settings)==null||n.cleanValue();return}if(t==="custom"){const o=parseFloat(this.customSlippageInput.value.replace(this.postfix,""));(r=this.settings)==null||r.setValue([o,"custom"]);return}(i=this.settings)==null||i.setValue([e.value,"preset"])}getStartSection(){if(!this.settings||this.settings.value===null)return this.segments[0];const[e,t]=this.settings.value;if(t==="custom")return isNaN(parseFloat(e))?this.segments[0]:(this.customSlippageInput.value=`${e}%`,this.segmentsCustom);if(t==="preset"){const n=this.segments.find(r=>r.value===e);return n||this.segments[0]}throw new Error("Invalid slippage type")}};xo.tagName="inch-fusion-swap-info-slippage";xo.styles=jP;De([_e({type:Object})],xo.prototype,"settings",2);xo=De([Ge(xo.tagName)],xo);var zP=be`.slippage-title{display:flex;padding:8px;gap:8px;color:var(--color-content-content-primary);align-items:center;margin-bottom:8px;cursor:pointer;font-size:16px}.back-icon{transform:rotate(90deg)}${Ht(be`.slippage-title{font-size:13px}`)}`,_o=class extends Ue{constructor(){super(...arguments),this.mobileMedia=nr(this),this.segmentsCustom={label:"Custom",value:"custom",template:()=>G`${this.customAuctionTimeInput}`},this.segments=[{label:"Auto",value:"auto"},{label:"3m",value:60*3},{label:"5m",value:60*5},{label:"10m",value:60*10},{label:"30m",value:60*30},this.mobileMedia.matches?null:{label:"1H",value:60*60},this.mobileMedia.matches?null:{label:"2H",value:60*60*2},this.segmentsCustom].filter(Boolean),this.postfix="s",this.customAuctionTimeInput=document.createElement("input")}connectedCallback(){var e;super.connectedCallback(),this.buildMask(),(e=this.settings)==null||e.startChangingValue(),this.customAuctionTimeInput.placeholder="Custom s",this.customAuctionTimeInput.inputMode="decimal",this.customAuctionTimeInput.autocomplete="off",Re(this.customAuctionTimeInput,{backgroundColor:"transparent",border:"none",outline:"none",padding:"0",color:"var(--color-content-content-primary)",width:"80px",fontSize:"16px",textAlign:"center"}),Qt(this,[rt(this.customAuctionTimeInput,"input").pipe(We(()=>{var n;this.customAuctionTimeInput.value.length===1&&(this.customAuctionTimeInput.value="");const t=this.getValue();(n=this.settings)==null||n.setValue([t,"custom"])}))],{requestUpdate:!1})}render(){return Re(this.customAuctionTimeInput,{fontSize:this.mobileMedia.matches?"13px":"16px"}),G`<div @click="${()=>this.onBack()}" class="slippage-title"><inch-icon class="back-icon" icon="chevronDown16"></inch-icon><span>Auction time</span></div><inch-segmented-control .items="${this.segments}" .select="${this.getStartSection()}" @change="${e=>this.onChange(e)}"></inch-segmented-control>`}buildMask(){return new Wd(this.customAuctionTimeInput,Yd({max:60*60*30,min:60*3,postfix:this.postfix}))}onBack(){var t,n,r;const e=((t=this.settings)==null?void 0:t.value)??null;e&&e[1]==="custom"&&(e[0]===null||isNaN(e[0]))&&((n=this.settings)==null||n.resetValue()),(r=this.settings)==null||r.endChangingValue(),pt(this,"back",null)}onChange({detail:e}){var n,r,i;const t=e.value;if(t==="auto"){(n=this.settings)==null||n.cleanValue();return}if(t==="custom"){const o=this.getValue();(r=this.settings)==null||r.setValue([o,"custom"]);return}(i=this.settings)==null||i.setValue([e.value,"preset"])}getStartSection(){if(!this.settings||this.settings.value===null)return this.segments[0];const[e,t]=this.settings.value;if(t==="custom")return isNaN(parseFloat(e))?this.segments[0]:(this.customAuctionTimeInput.value=`${e}s`,this.segmentsCustom);if(t==="preset"){const n=this.segments.find(r=>r.value===e);return n||this.segments[0]}throw new Error("Invalid auction time type")}getValue(){const e=this.customAuctionTimeInput.value.replaceAll("","").replace(this.postfix,"");return parseInt(e,10)}};_o.tagName="inch-fusion-swap-info-auction-time";_o.styles=zP;De([_e({type:Object})],_o.prototype,"settings",2);_o=De([Ge(_o.tagName)],_o);var UP=be`:host{--font-size:16px}.container{height:56px;padding:16px;box-sizing:border-box;transition:height .2s,background-color .2s;display:grid;grid-template-columns:1fr auto;align-items:flex-start;justify-content:space-between;border-radius:16px;color:var(--color-content-content-primary);cursor:pointer}.open{height:236px;grid-template-rows:min-content 1fr;grid-row-gap:16px;cursor:auto}.icon{transition:transform .2s;will-change:transform}.open-icon{transform:rotate(180deg)}.fusion-info{display:flex;align-items:center;gap:4px}.fusion-icon{display:flex;align-items:center;gap:4px;color:var(--primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px;transition:opacity .2s,transform .2s;will-change:opacity}.fusion-icon-open{opacity:0;transform:translate3d(20px,0,0)}.fusion-icon-open:dir(rtl){transform:translate3d(-20px,0,0)}.rate-container{width:100%;display:flex;align-content:flex-start}.rate-view{font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.rate-view:dir(rtl){direction:ltr}.rate-loader{background-color:var(--color-background-bg-secondary);height:24px;width:50%;border-radius:8px;will-change:filter;transition:background-color .2s;animation:stub-loader-animation 3s ease-in-out infinite}@keyframes stub-loader-animation{0%,100%{filter:opacity(1)}50%{filter:opacity(.5)}}.dst-token-rate-usd-price{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px;margin-left:4px}.content-container{display:flex;grid-row-start:2;grid-row-end:3;height:100%;grid-column-start:1;grid-column-end:3;flex-direction:column;visibility:hidden;transform:translate3d(0,-15px,0);transition:transform .2s,opacity .2s}.open .content-container{visibility:visible;transform:translate3d(0,0,0)}.content-row{height:40px;padding:8px 0;box-sizing:border-box;display:flex;align-items:center;justify-content:space-between}.row-slippage{color:var(--primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:500;line-height:24px;cursor:pointer;transition:color .2s}.row-title{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.row-content{display:flex;align-items:center;gap:4px;color:var(--primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px;transition:opacity .2s,transform .2s;will-change:opacity}.min-receive{color:var(--color-content-content-primary)}@media (hover:hover){.container:not(.open):hover{background-color:var(--color-background-bg-secondary)}.container:not(.open):hover .rate-loader{background-color:var(--color-background-bg-positive-hover)}.row-slippage:hover{color:var(--primary-hover)}}${Ht(be`:host{--font-size:13px}.container{padding:16px 8px}.open{grid-row-gap:0;height:180px}.content-row{height:30px}`)}`,Oi=class extends Ue{constructor(){super(...arguments),this.isOpen=!1,this.rate$=qe(()=>this.getContext().rate$),this.minReceive$=qe(()=>this.getContext().minReceive$),this.chainId$=qe(()=>this.getContext().chainId$),this.destinationToken$=qe(()=>this.getContext().getTokenByType("destination")),this.slippage$=qe(()=>this.getContext().slippage$).pipe(Pe(e=>G`${e.value===null?"":G`<span>${e.value}% </span>`} <span>${je(e.type==="auto",()=>"Auto")} ${je(e.type==="custom",()=>"Custom")} ${je(e.type==="preset",()=>"Manual")}</span>`)),this.auctionTime$=qe(()=>this.getContext().auctionTime$).pipe(Pe(e=>G`${e.value===null?"":G`<span>${d0(e.value)} </span>`} <span>${je(e.type==="auto",()=>"Auto")} ${je(e.type==="custom",()=>"Custom")} ${je(e.type==="preset",()=>"Manual")}</span>`)),this.rateView$=this.rate$.pipe(Uo(0),zt(VP),He(async e=>{if(e===null)return this.getLoadRateView();const{chainId:t,rate:n,revertedRate:r,sourceToken:i,destinationToken:o}=e,s=await rn.getPriorityToken(t,[i.address,o.address]),l=Zn(s,i)?o:i,p=Zn(s,i)?r:n,m=Ur(Vt(p,l.decimals),2),g=await rn.getTokenUSDPrice(t,l.address),v=Jl(g,l.decimals),_=Ur(Vt(v,l.decimals),2);return G`<span class="rate-view">1 ${wg(l)} = ${m} ${s.symbol} <span class="dst-token-rate-usd-price">~$${_}</span></span>`}),Ot(this.getLoadRateView()),ft({bufferSize:1,refCount:!0})),this.minReceiveView$=this.minReceive$.pipe(Fh(this.destinationToken$,this.chainId$),He(async([e,t,n])=>{if(!t||!n)return G``;const r=await rn.getTokenUSDPrice(n,t.address),i=Jl(r,t.decimals),o=Rn.mul(e,i,t.decimals,t.decimals),s=Xf(Vt(o,t.decimals),2);return G`<span>~$${s}</span> <span class="min-receive">${Xf(Vt(e,t.decimals),6)} ${t.symbol}</span>`}))}connectedCallback(){super.connectedCallback(),pt(this,"changeFusionInfoOpenState",this.isOpen)}disconnectedCallback(){super.disconnectedCallback(),pt(this,"changeFusionInfoOpenState",!1)}render(){const e={container:!0,open:this.isOpen},t={icon:!0,"open-icon":this.isOpen},n={"fusion-icon":!0,"fusion-icon-open":this.isOpen};return G`<div class="${fn(e)}" @click="${()=>{this.isOpen||(this.isOpen=!0,pt(this,"changeFusionInfoOpenState",this.isOpen))}}"><div class="rate-container">${dt(this.rateView$)}</div><div class="fusion-info"><div class="${fn(n)}"><inch-icon icon="fusion16"></inch-icon><span>Free</span></div><inch-button @click="${r=>this.onChangeOpen(r)}" size="l" type="tertiary"><inch-icon class="${fn(t)}" icon="chevronDown16"></inch-icon></inch-button></div><div class="content-container"><div class="content-row"><span class="row-title">${it("widgets.swap-form.fusion-info.slippage-tolerance")}</span><div @click="${()=>pt(this,"openSlippageSettings",null)}" class="row-content row-slippage">${dt(this.slippage$)}</div></div><div class="content-row"><span class="row-title">${it("widgets.swap-form.fusion-info.auction-time")}</span><div @click="${()=>pt(this,"openAuctionTimeSettings",null)}" class="row-content row-slippage">${dt(this.auctionTime$)}</div></div><div class="content-row"><span class="row-title">${it("widgets.swap-form.fusion-info.min-receive")}</span><div class="row-content">${dt(this.minReceiveView$)}</div></div><div class="content-row"><span class="row-title">${it("widgets.swap-form.fusion-info.net-fee")}</span><div class="row-content"><inch-icon icon="fusion16"></inch-icon><span>Free</span></div></div></div></div>`}getLoadRateView(){return G`<div class="rate-loader"></div>`}onChangeOpen(e){e.preventDefault(),e.stopPropagation(),this.isOpen=!this.isOpen,pt(this,"changeFusionInfoOpenState",this.isOpen)}getContext(){if(!this.context)throw new Error("");return this.context}};Oi.tagName="inch-fusion-swap-info-main";Oi.styles=UP;De([_e({type:Boolean})],Oi.prototype,"isOpen",2);De([xn({context:ci,subscribe:!0})],Oi.prototype,"context",2);Oi=De([Ge(Oi.tagName)],Oi);function VP(e,t){return e===null||t===null?!1:L$(e,t)}var Eo=class extends Ue{constructor(){super(...arguments),this.isOpenFusionInfo=!1,this.scene=new tu("main",{main:{lazyRender:!0,minHeight:178},slippage:{minHeight:79.5},auctionTime:{minHeight:79.5}},zC())}render(){return this.scene.render({main:()=>G`<inch-fusion-swap-info-main .isOpen="${this.isOpenFusionInfo}" @openSlippageSettings="${()=>this.scene.nextTo("slippage")}" @openAuctionTimeSettings="${()=>this.scene.nextTo("auctionTime")}"></inch-fusion-swap-info-main>`,slippage:()=>{var e;return G`<inch-fusion-swap-info-slippage .settings="${(e=this.context)==null?void 0:e.getSettingsController("slippage")}" @back="${()=>{this.isOpenFusionInfo=!0,this.scene.back()}}"></inch-fusion-swap-info-slippage>`},auctionTime:()=>{var e;return G`<inch-fusion-swap-info-auction-time .settings="${(e=this.context)==null?void 0:e.getSettingsController("auctionTime")}" @back="${()=>{this.isOpenFusionInfo=!0,this.scene.back()}}"></inch-fusion-swap-info-auction-time>`}})}};Eo.tagName="inch-fusion-swap-info";Eo.styles=[LP,tu.styles()];De([xn({context:ci})],Eo.prototype,"context",2);Eo=De([Ge(Eo.tagName)],Eo);var mn=class extends Ue{constructor(){super(...arguments),this.srcToken=null,this.dstToken=null,this.context=new kc(this,{context:ci}),this.fusionView$=Xt([qe(()=>this.getWalletController().data.activeAddress$),qe(()=>this.getContext().getTokenByType("source")),qe(()=>this.getContext().getTokenByType("destination"))]).pipe(Pe(([e,t,n])=>!e||!t||!n),Ot(mn.lastFusionRenderIsEmptyState),zt(),We(e=>{mn.lastFusionRenderIsEmptyState=e}))}connectedCallback(){super.connectedCallback(),Qt(this,[this.fusionView$])}disconnectedCallback(){var e;super.disconnectedCallback(),!this.swapContext&&((e=this.context.value)==null||e.destroy())}updated(e){const t=this.getContext();(e.has("srcToken")||e.has("dstToken"))&&(t.setPair({srcToken:this.srcToken,dstToken:this.dstToken}),this.requestUpdate())}render(){return this.context.value||this.getContext(),G`<div class="swap-form-container"><inch-card-header headerText="${it("widgets.swap-form.header.swap")}" headerTextPosition="left"></inch-card-header><div class="input-container"><inch-swap-form-input tokenType="source"></inch-swap-form-input><inch-token-pair-switch></inch-token-pair-switch><inch-swap-form-input disabled="disabled" tokenType="destination"></inch-swap-form-input></div>${je(!mn.lastFusionRenderIsEmptyState,()=>G`<inch-fusion-swap-info></inch-fusion-swap-info>`)}<inch-swap-button></inch-swap-button></div>`}getFusionInfoView(e){return e?G``:G`<inch-fusion-swap-info></inch-fusion-swap-info>`}getWalletController(){if(!this.walletController)throw new Error("");return this.walletController}getContext(){if(!this.context.value){if(this.swapContext)return this.context.setValue(this.swapContext),this.swapContext;const e=new Wg(this.getWalletController());e.setPair({srcToken:this.srcToken,dstToken:this.dstToken}),this.context.setValue(e)}return this.context.value}};mn.tagName="inch-swap-form";mn.styles=GC;mn.lastFusionRenderIsEmptyState=!0;De([_e({type:Object,attribute:!1})],mn.prototype,"srcToken",2);De([_e({type:Object,attribute:!1})],mn.prototype,"dstToken",2);De([_e({type:Object,attribute:!1})],mn.prototype,"walletController",2);De([_e({type:Object,attribute:!1})],mn.prototype,"swapContext",2);mn=De([Ge(mn.tagName)],mn);var qP=be`:host{--font-size:16px}.confirm-swap-view{display:flex;flex-direction:column;gap:8px}.token-view-container{background-color:var(--color-background-bg-secondary);border-radius:16px;padding:16px}.token-view{display:flex;flex-direction:column;gap:8px}.token-view-row{display:flex;justify-content:space-between;align-items:center}.token-view-top{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.primary-text{color:var(--color-content-content-primary);font-size:24px;font-style:normal;font-weight:600;line-height:32px}.symbol-view{display:flex;align-items:center;gap:8px}.separator{position:relative;color:var(--color-content-content-primary)}.separator-arrow-container{border-radius:50%;background-color:var(--color-background-bg-primary);width:32px;height:32px;margin-left:auto;margin-right:auto;position:relative;display:flex;justify-content:center;align-items:center;z-index:2}.separator-arrow-container-loader:before{content:"";position:absolute;width:100%;height:100%;border:1px solid transparent;border-radius:50%;border-bottom-color:var(--primary);border-top-color:var(--primary);animation:spin 2s linear infinite}.detail-info{padding:8px 0}.detail-info-row{padding:8px 16px;display:flex;justify-content:space-between}.detail-info-row-title{color:var(--color-content-content-secondary);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:24px}.detail-info-raw-value{color:var(--color-content-content-primary);text-align:right;font-size:var(--font-size);font-style:normal;font-weight:500;line-height:24px;transition:color .2s;display:flex;gap:8px;align-items:center}.detail-info-raw-settings-value{color:var(--primary)}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.separator-view{position:absolute;background-color:var(--color-background-bg-primary);height:2px;width:100%;border-radius:2px;top:50%;z-index:1}${Ht(be`:host{--font-size:13px}.primary-text{font-size:20px}.detail-info-row{padding:4px 8px}.token-view{gap:4px}.separator-arrow-container{width:28px;height:28px}.token-view-container{padding:8px 16px}`)}`,yr=class extends Ue{constructor(){super(...arguments),this.state=null,this.swapInProgress=!1,this.fiatAmountMap=new Map,this.mobileMedia=nr(this)}get needWrap(){return _r(this.swapSnapshot.sourceToken.address)}render(){const e=this.mobileMedia.matches?"xl":"xxl";return G`<div class="confirm-swap-view"><inch-card-header backButton headerTextPosition="center" headerText="Confirm swap" headerTextPosition="left"></inch-card-header>${this.getTokenViewContainer()} ${this.getDetailInfo()}<inch-button loader="${dr(this.swapInProgress?"":void 0)}" @click="${()=>this.onSwap()}" fullSize size="${e}" type="${this.swapInProgress?"secondary":"primary"}">${je(this.swapInProgress,()=>G`<span>Confirm swap in wallet</span>`,()=>G`<span>Swap</span>`)}</inch-button></div>`}async onSwap(){var e;if(!this.swapInProgress){try{this.swapInProgress=!0,await((e=this.swapContext)==null?void 0:e.fusionSwap(this.swapSnapshot)),pt(this,"backCard",null)}catch{}this.swapInProgress=!1}}getTokenViewContainer(){return G`<div class="token-view-container">${this.getTokenView(this.swapSnapshot.sourceToken,this.swapSnapshot.sourceTokenAmount,"source")} ${this.getSeparatorView(this.needWrap?"wrap":"swap")} ${this.getTokenWrapView()} ${this.getTokenView(this.swapSnapshot.destinationToken,this.swapSnapshot.destinationTokenAmount,"destination")}</div>`}getDetailInfo(){return G`<div class="detail-info">${this.getDetailInfoRow("Price",G`${Al(this.getRateView())}`)} ${this.getDetailInfoRow("Slippage tolerance",this.getSlippageView())} ${this.getDetailInfoRow("Auction time",this.getAuctionTimeView())} ${this.getDetailInfoRow("Minimum receive",this.getMinReceive())} ${this.getDetailInfoRow("Network Fee",G`<div class="detail-info-raw-value detail-info-raw-settings-value"><inch-icon icon="fusion16"></inch-icon><span>Free</span></div>`)}</div>`}async getRateView(){const{chainId:e,rate:t,revertedRate:n,sourceToken:r,destinationToken:i}=this.swapSnapshot.rate,o=await rn.getPriorityToken(e,[r.address,i.address]),s=Zn(o,r)?i:r,h=Zn(o,r)?n:t,p=Ur(Vt(h,s.decimals),2);return G`<div class="detail-info-raw-value"><span class="rate-view">1 ${wg(s)} = ${p} ${o.symbol}</span></div>`}getSlippageView(){const e=this.swapSnapshot.slippage;return G`<div class="detail-info-raw-value detail-info-raw-settings-value">${e.value===null?"":G`<span>${e.value}% </span>`} <span>${je(e.type==="auto",()=>"Auto")} ${je(e.type==="custom",()=>"Custom")} ${je(e.type==="preset",()=>"Manual")}</span></div>`}getAuctionTimeView(){const e=this.swapSnapshot.auctionTime;return G`<div class="detail-info-raw-value detail-info-raw-settings-value">${e.value===null?"":G`<span>${d0(e.value)} </span>`} <span>${je(e.type==="auto",()=>"Auto")} ${je(e.type==="custom",()=>"Custom")} ${je(e.type==="preset",()=>"Manual")}</span></div>`}getMinReceive(){const e=Vt(this.swapSnapshot.minReceive,this.swapSnapshot.destinationToken.decimals);return G`<div class="detail-info-raw-value">${Ur(e,6)} ${this.swapSnapshot.destinationToken.symbol}</div>`}getDetailInfoRow(e,t){return G`<div class="detail-info-row"><span class="detail-info-row-title">${e}</span> <span>${t}</span></div>`}getTokenView(e,t,n){const r=Vt(t,e.decimals);return G`<div class="token-view"><div class="token-view-row token-view-top"><span>${Zg(n,[["source",()=>G`You pay`],["wrap",()=>G`You wrap`],["destination",()=>G`You receive`]])} </span><span>${dt(this.getFiatAmountStream(e,t))}</span></div><div class="token-view-row"><div class="symbol-view"><inch-token-icon chainId="${this.swapSnapshot.chainId}" symbol="${e.symbol}" address="${e.address}"></inch-token-icon><span class="primary-text">${e.symbol}</span></div><span class="primary-text">${Ur(r,6)}</span></div></div>`}getTokenWrapView(){return this.needWrap?G`${this.getTokenView(Js(this.swapSnapshot.chainId),this.swapSnapshot.sourceTokenAmount,"wrap")} ${this.getSeparatorView("swap")}`:G``}getSeparatorView(e){return G`<div class="separator"><div class="separator-view"></div><div class="separator-arrow-container ${this.state===e&&this.needWrap?"separator-arrow-container-loader":""}"><inch-icon icon="arrowDown24"></inch-icon></div></div>`}getFiatAmountStream(e,t){if(this.fiatAmountMap.has(e.address))return this.fiatAmountMap.get(e.address);const n=ba(this.swapSnapshot.chainId).pipe(He(async()=>{const r=await rn.getTokenUSDPrice(this.swapSnapshot.chainId,e.address),i=Vt(t,e.decimals),o=Number(i)*Number(r);return`~$${Ur(o.toString(),2)}`}),ft({bufferSize:1,refCount:!0}));return this.fiatAmountMap.set(e.address,n),n}};yr.tagName="inch-confirm-swap";yr.styles=qP;De([_e({type:Object})],yr.prototype,"swapSnapshot",2);De([_e({type:Object,attribute:!1})],yr.prototype,"swapContext",2);De([_t()],yr.prototype,"state",2);De([_t()],yr.prototype,"swapInProgress",2);yr=De([Ge(yr.tagName)],yr);const HP=be`:host{display:flex;padding-top:48px;justify-content:center;position:relative;z-index:1}:host(.padding-top-transition){transition:padding-top .2s}.unicorn-loader{position:absolute;z-index:1;top:50px;transform:scale(0);will-change:transform;height:auto;transition:top .2s}.shadow-container{will-change:box-shadow,transform;transform:translate3d(0,0,0);box-shadow:0 5px 24px var(--primary-50);border-radius:24px;position:relative;z-index:2}.shadow-container-rainbow{box-shadow:none;position:relative}.shadow-container-rainbow:after,.shadow-container-rainbow:before{content:'';position:absolute;width:calc(100% + 2px);height:calc(100% + 2px);left:-1px;top:-1px;border-radius:24px;background:${Bg()};background-size:2000%;animation:bg-rainbow 90s cubic-bezier(.4,0,1,1) infinite;z-index:-1;will-change:background,width,height,left,top,background-position}.shadow-container-rainbow:after{filter:blur(30px)}@keyframes bg-rainbow{0%{width:calc(100% + 2px);height:calc(100% + 2px);left:-1px;top:-1px;background-position:0 0}50%{width:100%;height:100%;left:0;top:0;background-size:800%;background-position:400% 0}100%{width:calc(100% + 2px);height:calc(100% + 2px);left:-1px;top:-1px;background-position:0 0}}${Ht(be`:host{padding-top:24px}:host(.is-enlarged-form){padding-top:0}:host(.is-enlarged-form) .unicorn-loader{top:20px}`)}`;var WP=Object.defineProperty,GP=Object.getOwnPropertyDescriptor,Sa=(e,t,n,r)=>{for(var i=r>1?void 0:r?GP(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&WP(t,n,i),i};me(()=>Promise.resolve().then(()=>Wk),void 0);me(()=>import("./index.esm-CKQsE3v7.js"),[]);me(()=>Promise.resolve().then(()=>kv),void 0);let ei=class extends Ue{constructor(){super(...arguments),this.mobileMedia=nr(this),this.targetSelectToken=null,this.srcToken=null,this.dstToken=null,this.isRainbowTheme=!1,this.swapSnapshot=null,this.swapController=new Wg(hn),this.chainId$=hn.data.chainId$,this.activeAddress$=hn.data.activeAddress$,this.swapFormRef=pr(),this.swapFormContainerRef=pr(),this.unicornLoaderRef=pr(),this.desktopScene=new tu("swapForm",{swapForm:{minWidth:556,maxWidth:556,maxHeight:625,lazyRender:!0},selectToken:{minWidth:556,maxWidth:556,maxHeight:680},confirmSwap:{minWidth:556,maxWidth:556,maxHeight:680}}),this.mobileOverlay=new qg("app-root"),this.overlay=new Ld("app-root","center")}async connectedCallback(){await this.initTokens(),super.connectedCallback(),Qt(this,[this.chainId$.pipe(Ut(Boolean),zt(),e0(1),We(e=>this.syncTokens(e))),Ig().pipe(Pe(({brandColor:e})=>e),zt(),We(e=>this.isRainbowTheme=e===xa.rainbow)),this.mobileUpdate()],{requestUpdate:!1})}disconnectedCallback(){super.disconnectedCallback(),this.swapController.destroy()}firstUpdated(){setTimeout(()=>this.classList.add("padding-top-transition"),100)}render(){return this.mobileMedia.matches?this.getMobileSwapForm():this.getDesktopSwapForm()}async syncTokens(e){const t=await rn.getNativeToken(e);this.setSrcToken(t),this.setDstToken(null),this.requestUpdate()}async initTokens(){if(!await hn.data.getChainId())return;const t=nt.get("src-token-symbol",JSON.parse),n=nt.get("dst-token-symbol",JSON.parse);t&&this.setSrcToken(t),n&&this.setDstToken(n)}getMobileSwapForm(){const e={"shadow-container":!0,"shadow-container-rainbow":this.isRainbowTheme};return G`<inch-icon ${In(this.unicornLoaderRef)} class="unicorn-loader" icon="unicornRun"></inch-icon><div ${In(this.swapFormContainerRef)} class="${fn(e)}"><inch-card style="max-width:100vw"><inch-swap-form .srcToken="${this.srcToken}" .dstToken="${this.dstToken}" .swapContext="${this.swapController}" .walletController="${hn}" @switchPair="${()=>this.onSwitchPair()}" @confirmSwap="${t=>this.onOpenMobileConfirmSwap(t)}" @changeFusionInfoOpenState="${t=>this.onChangeFusionInfoOpenState(t)}" @openTokenSelector="${t=>this.onOpenMobileSelectToken(t)}" @changeChain="${()=>this.onOpenChangeChainView()}" @connectWallet="${()=>this.onOpenConnectWalletView()}"></inch-swap-form></inch-card></div>`}getDesktopSwapForm(){const e={"shadow-container":!0,"shadow-container-rainbow":this.isRainbowTheme};return G`<inch-icon ${In(this.unicornLoaderRef)} class="unicorn-loader" icon="unicornRun"></inch-icon><div ${In(this.swapFormContainerRef)} class="${fn(e)}"><inch-card>${this.desktopScene.render({swapForm:()=>G`<inch-swap-form ${In(this.swapFormRef)} .srcToken="${cm(this,()=>this.srcToken)}" .dstToken="${cm(this,()=>this.dstToken)}" .swapContext="${this.swapController}" .walletController="${hn}" @confirmSwap="${t=>this.onOpenConfirmSwap(t)}" @switchPair="${()=>this.onSwitchPair()}" @changeChain="${()=>this.onOpenChangeChainView()}" @openTokenSelector="${t=>this.onOpenSelectToken(t)}" @connectWallet="${()=>this.onOpenConnectWalletView()}"></inch-swap-form>`,selectToken:()=>G`<inch-select-token chainId="${dt(this.chainId$)}" connectedWalletAddress="${dt(this.activeAddress$)}" @backCard="${()=>this.desktopScene.back()}" @selectToken="${async t=>{this.onSelectToken(t),await this.desktopScene.back()}}"></inch-select-token>`,confirmSwap:()=>je(this.swapSnapshot,t=>G`<inch-confirm-swap .swapSnapshot="${t}" .swapContext="${this.swapController}" @backCard="${async()=>{await this.desktopScene.back(),this.swapSnapshot=null}}"></inch-confirm-swap>`)})}</inch-card></div>`}async onOpenSelectToken(e){await this.desktopScene.nextTo("selectToken"),this.targetSelectToken=e.detail.value}onOpenConfirmSwap(e){this.swapSnapshot=e.detail.value,this.desktopScene.nextTo("confirmSwap")}onSwitchPair(){const e=this.srcToken;this.setSrcToken(this.dstToken),this.setDstToken(e)}onChangeFusionInfoOpenState(e){e.detail.value&&!this.classList.contains("is-enlarged-form")&&this.classList.add("is-enlarged-form"),!e.detail.value&&this.classList.contains("is-enlarged-form")&&this.classList.remove("is-enlarged-form")}onSelectToken(e){const t=e.detail.value;if(this.targetSelectToken==="source"&&(this.dstToken&&Zn(t,this.dstToken)&&this.setDstToken(this.srcToken),this.setSrcToken(t)),this.targetSelectToken==="destination"){if(!this.dstToken&&this.srcToken&&Zn(t,this.srcToken))return;this.srcToken&&Zn(t,this.srcToken)&&this.setSrcToken(this.dstToken),this.setDstToken(t)}}setSrcToken(e){this.srcToken=e,nt.set("src-token-symbol",e)}setDstToken(e){this.dstToken=e,nt.set("dst-token-symbol",e)}async onOpenConnectWalletView(){const e=await this.overlay.open(G`<inch-wallet-manage showShadow @closeCard="${()=>this.overlay.close(e)}" .controller="${hn}"></inch-wallet-manage>`)}async onOpenChangeChainView(){const e=await this.overlay.open(G`<inch-chain-selector-list showShadow @closeCard="${()=>this.overlay.close(e)}" .controller="${hn}"></inch-chain-selector-list>`)}async onOpenMobileSelectToken(e){const t=await this.mobileOverlay.open(G`<inch-card forMobileView style="width:100%;height:100%;display:flex"><inch-select-token chainId="${dt(this.chainId$)}" connectedWalletAddress="${dt(this.activeAddress$)}" @backCard="${()=>this.mobileOverlay.close(t)}" @selectToken="${async n=>{this.onSelectToken(n),await this.mobileOverlay.close(t)}}"></inch-select-token></inch-card>`);this.targetSelectToken=e.detail.value}async onOpenMobileConfirmSwap(e){const t=e.detail.value,n=await this.mobileOverlay.open(G`<inch-card forMobileView style="width:100%;height:100%;display:flex"><inch-confirm-swap .swapSnapshot="${t}" .swapContext="${this.swapController}" @backCard="${async()=>{await this.mobileOverlay.close(n),this.swapSnapshot=null}}"></inch-confirm-swap></inch-card>`)}mobileUpdate(){let e=0,t=!1,n=!1;const r=new ib,i=60,o=5e5,s=3,l=4,h=()=>document.querySelector("#app-root"),p=()=>this.swapFormContainerRef.value,m=()=>this.unicornLoaderRef.value,g=_=>{if(_<0)return;let E;_>i?(t||(i0(50),r.play().then()),t=!0,_<=i+s?E=i+(_-i)/o:E=i+s/o+(_-i-s)/l):(t=!1,E=_);const S=(_>i?i:_)/i;Re(m(),{transform:`scale(${S})`}),Re(p(),{transform:`translate3d(0, ${E}px, 0)`}),e=E},v=async()=>{n=!0;let _=e;_>i&&r.isPlaying&&(await p().animate([{transform:`translate3d(0, ${_}px, 0)`},{transform:`translate3d(0, ${i}px, 0)`}],{duration:200,easing:"cubic-bezier(.2, .8, .2, 1)"}).finished,_=i,Re(p(),{transform:`translate3d(0, ${_}px, 0)`}),await r.onEnded()),await p().animate([{transform:`translate3d(0, ${_}px, 0)`},{transform:"translate3d(0, 0, 0)"}],{duration:800,easing:"cubic-bezier(.2, .8, .2, 1)"}).finished,g(0),Re(p(),{transform:""}),t=!1,n=!1};return qe(()=>{const _=p();return rt(_,"touchstart").pipe(Ut(()=>{var E;return!n&&(((E=h())==null?void 0:E.scrollTop)??0)===0}),He(E=>{r.load();const S=E.touches[0].clientY;return rt(_,"touchmove").pipe(Pe(P=>P.touches[0].clientY-S),We(P=>g(P)),Sc(rt(_,"touchend").pipe(We(()=>v()))))}))}).pipe(Ec(vw))}};ei.tagName="inch-swap-form-container";ei.styles=[HP,tu.styles()];Sa([_t()],ei.prototype,"srcToken",2);Sa([_t()],ei.prototype,"dstToken",2);Sa([_t()],ei.prototype,"isRainbowTheme",2);ei=Sa([Ge(ei.tagName)],ei);class ib{get isPlaying(){return!this.audio.paused}constructor(){this.audio=new Audio("audio/unicorn-run.mp3"),this.audio.preload="none",this.audio.volume=.4}load(){this.audio.load()}async play(){try{await this.audio.play()}catch(t){console.error("AudionController Error",t)}}onEnded(){return dn(rt(this.audio,"ended"))}}Sa([Sn()],ib.prototype,"play",1);var KP=Object.defineProperty,YP=Object.getOwnPropertyDescriptor,ZP=(e,t,n,r)=>{for(var i=r>1?void 0:r?YP(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&KP(t,n,i),i};let xh=class extends Ue{render(){return G`<inch-header></inch-header><div id="outlet" class="content"><inch-swap-form-container></inch-swap-form-container></div><inch-footer></inch-footer>`}};xh.styles=[wv,Jc];xh=ZP([Ge("app-root")],xh);Promise.all([mv(),rk(Ag.systemSync,xa.community),me(()=>Promise.resolve().then(()=>pC),void 0).then(e=>e.connectWalletController.init())]).then(()=>{const e=document.createElement("app-root");e.id="app-root",document.body.appendChild(e)});me(async()=>{const{registerSW:e}=await import("./virtual_pwa-register-DVfA7bWi.js");return{registerSW:e}},[]).then(({registerSW:e})=>{e({onRegisteredSW:(t,n)=>n.update(),onNeedRefresh:()=>console.log("update ready"),onOfflineReady:()=>console.log("offline ready")})});export{CI as $,Vt as A,Co as B,gr as C,Is as D,Si as E,Ut as F,qe as G,ft as H,dg as I,Fo as J,R as K,dt as L,dr as M,Pe as N,pt as O,er as P,nI as Q,Dm as R,tn as S,rn as T,QP as U,kI as V,Ar as W,$r as X,kr as Y,Cr as Z,me as _,_t as a,Ko as a0,$I as a1,PI as a2,Sk as a3,Wi as a4,Gi as a5,Ki as a6,Yi as a7,lI as a8,uI as a9,d$ as aa,dI as ab,h$ as ac,rt as ad,gc as ae,Vr as af,Q as ag,Pc as ah,It as ai,Gx as aj,Uc as ak,wr as al,qi as am,xs as an,Jn as ao,Yc as ap,Ht as b,xn as c,kc as d,fn as e,Qt as f,SI as g,We as h,be as i,oI as j,Dh as k,Xt as l,AI as m,_e as n,Uo as o,Ot as p,zt as q,EI as r,Ue as s,Ge as t,He as u,je as v,Yt as w,G as x,LC as y,$c as z};
//# sourceMappingURL=index-nOr_6YIU.js.map
