import{z as ve,i as me,r as g,x as E,j as k}from"./index-sLWOp1cP.js";import{d as pe,m as I,s as Ae,a as ge,L as w,f as $e,O as be,j as Q}from"./index.esm-DfotAdpM.js";import{S as we}from"./index.esm-CjXD2v0E.js";import{B as Me,c as _e}from"./combineLatest-Cx3jWXTV.js";import{a as G}from"./asap-BqWvnQ_m.js";const{I:Ce}=ve,xe=e=>e.strings===void 0,W=()=>document.createComment(""),ct=(e,t,s)=>{var a;const n=e._$AA.parentNode,i=t===void 0?e._$AB:t._$AA;if(s===void 0){const r=n.insertBefore(W(),i),c=n.insertBefore(W(),i);s=new Ce(r,c,e,e.options)}else{const r=s._$AB.nextSibling,c=s._$AM,h=c!==e;if(h){let u;(a=s._$AQ)==null||a.call(s,e),s._$AM=e,s._$AP!==void 0&&(u=e._$AU)!==c._$AU&&s._$AP(u)}if(r!==i||h){let u=s._$AA;for(;u!==r;){const f=u.nextSibling;n.insertBefore(u,i),u=f}}}return s},dt=(e,t,s=e)=>(e._$AI(t,s),e),Ee={},ut=(e,t=Ee)=>e._$AH=t,lt=e=>e._$AH,ht=e=>{var n;(n=e._$AP)==null||n.call(e,!1,!0);let t=e._$AA;const s=e._$AB.nextSibling;for(;t!==s;){const i=t.nextSibling;t.remove(),t=i}};const ye={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},M=e=>(...t)=>({_$litDirective$:e,values:t});class Y{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,s,n){this._$Ct=t,this._$AM=s,this._$Ci=n}_$AS(t,s){return this.update(t,s)}update(t,s){return this.render(...s)}}const v=(e,t)=>{var n;const s=e._$AN;if(s===void 0)return!1;for(const i of s)(n=i._$AO)==null||n.call(i,t,!1),v(i,t);return!0},$=e=>{let t,s;do{if((t=e._$AM)===void 0)break;s=t._$AN,s.delete(e),e=t}while((s==null?void 0:s.size)===0)},J=e=>{for(let t;t=e._$AM;e=t){let s=t._$AN;if(s===void 0)t._$AN=s=new Set;else if(s.has(e))break;s.add(e),Ie(t)}};function Se(e){this._$AN!==void 0?($(this),this._$AM=e,J(this)):this._$AM=e}function Re(e,t=!1,s=0){const n=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(t)if(Array.isArray(n))for(let a=s;a<n.length;a++)v(n[a],!1),$(n[a]);else n!=null&&(v(n,!1),$(n));else v(this,e)}const Ie=e=>{e.type==ye.CHILD&&(e._$AP??(e._$AP=Re),e._$AQ??(e._$AQ=Se))};class T extends Y{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,s,n){super._$AT(t,s,n),J(this),this.isConnected=t._$AU}_$AO(t,s=!0){var n,i;t!==this.isConnected&&(this.isConnected=t,t?(n=this.reconnected)==null||n.call(this):(i=this.disconnected)==null||i.call(this)),s&&(v(this,t),$(this))}setValue(t){if(xe(this._$Ct))this._$Ct._$AI(t,this);else{const s=[...this._$Ct._$AH];s[this._$Ci]=t,this._$Ct._$AI(s,this,0)}}disconnected(){}reconnected(){}}function Te(e,t){return Ne(e,t)}function Ne(e,t,s){if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const a of n)if(!i.includes(a)||e[a]!==t[a])return!1;return!0}var Be=class extends T{render(e,t){return this.subscription?this.lastValue??t??"":(this.subscription=e.pipe(Q(G)).subscribe(s=>{this.lastValue=s,this.setValue(s)}),t??"")}disconnected(){var e;(e=this.subscription)==null||e.unsubscribe()}},Le=M(Be),Pe=class extends T{constructor(){super(...arguments),this.isDisconnected=!1,this.handler=e=>{this.isDisconnected||this.setValue(e)}}render(e,t){return e.then(this.handler),t??""}disconnected(){this.isDisconnected=!0}},Oe=M(Pe);function R(e,t){for(const s in t)e.style[s]=t[s]??""}var X=class extends Y{constructor(e){super(e),this.view=document.createElement("div"),this.lock=!1,R(this.view,{display:"flex",gap:"8px",position:"relative"})}render(e,t){return this.applyDirection(t.direction),this.lock?E`${this.view}`:this.view.children.length?(this.transition(e,t).catch(console.error),E`${this.view}`):(this.addedElementsWithoutAnimation(e,t),E`${this.view}`)}async transition(e,t){var V,z,U,q;const[s,n]=this.getKeyMapAndIndexMap(e,t),i=this.getIndexMapFromView(),a=this.getAllRenderCandidate(i,n),r=this.getAllRemoveCandidate(i,n),c=this.getAllMoveCandidate(i,n),h=this.getAllRenderCandidateElements(a,s,t),u=this.getAllCandidateElements(r),f=this.getAllCandidateElements(c),_=new Map,C=new Map,x=new Map;h.forEach((d,o)=>{_.set(n.get(o),d)}),u.forEach((d,o)=>{C.set(i.get(o),d)}),f.forEach((d,o)=>{x.set([i.get(o),n.get(o)],d)});const O=[...h.entries()],D=[...u.entries()],H=[...f.entries()];await((V=t.onAnimationStart)==null?void 0:V.call(t));const[st,le,he,fe]=await Promise.all([(z=t.onBeforeAnimation)==null?void 0:z.call(t,this.view,_,C,x),this.executeHandlerAndReturnResultMap(O,(d,o)=>t.onBeforeRenderAnimateItem(d,n.get(o))),this.executeHandlerAndReturnResultMap(D,(d,o)=>t.onBeforeRemoveAnimateItem(d,i.get(o))),this.executeHandlerAndReturnResultMap(H,(d,o)=>{var l;return((l=t.onBeforeMoveAnimationItem)==null?void 0:l.call(t,d,i.get(o),n.get(o)))??Promise.resolve()})]);this.renderNode(h,n),this.removeNode(u),this.moveNode(f,i,n),await Promise.all([this.executeHandlerAndReturnResultMap(O,(d,o)=>{var l;return((l=t.onAfterRenderAnimateItem)==null?void 0:l.call(t,d,n.get(o),le.get(o)))??Promise.resolve()}),this.executeHandlerAndReturnResultMap(D,(d,o)=>{var l;return((l=t.onAfterRemoveAnimateItem)==null?void 0:l.call(t,d,i.get(o),he.get(o)))??Promise.resolve()}),this.executeHandlerAndReturnResultMap(H,(d,o)=>{var l;return((l=t.onAfterMoveAnimationItem)==null?void 0:l.call(t,d,fe.get(o)))??Promise.resolve()}),(U=t.onAfterAnimation)==null?void 0:U.call(t,this.view,_,C,x)]),await((q=t.onAnimationComplete)==null?void 0:q.call(t))}async executeHandlerAndReturnResultMap(e,t){const s=new Map;return await Promise.all(e.map(async([n,i])=>{const a=await t(i,n);s.set(n,a)})),s}getAllRenderCandidate(e,t){const s=new Set;return t.forEach((n,i)=>{e.has(i)||s.add(i)}),s}getAllRemoveCandidate(e,t){const s=new Set;return e.forEach((n,i)=>{t.has(i)||s.add(i)}),s}getAllMoveCandidate(e,t){const s=new Set;return new Set([...e.keys(),...t.keys()]).forEach(i=>{const a=e.get(i),r=t.get(i);a===void 0||r===void 0||a!==r&&s.add(i)}),s}getAllRenderCandidateElements(e,t,s){const n=new Map;let i=0;return e.forEach(a=>{const r=t.get(a);if(!r)return;const c=this.createItem(a),h=s.onTemplateBuilder(r,i);k(h,c),n.set(a,c),i++}),n}getAllCandidateElements(e){const t=new Map;return e.forEach(s=>{const n=this.view.querySelector(`#${s}`);n&&t.set(s,n)}),t}renderNode(e,t){e.forEach((s,n)=>{const i=t.get(n)??0,a=this.view.children[i];a?this.view.insertBefore(s,a):this.view.appendChild(s)})}removeNode(e){e.forEach(t=>{t.remove()})}moveNode(e,t,s){const n=this.getIndexMapFromView();e.forEach((i,a)=>{const r=t.get(a),c=s.get(a);if(n.get(a)===c)return;let u;r>c&&(u=this.view.children[c]),r<c&&(u=this.view.children[r]),u&&this.view.insertBefore(i,u)})}getKeyMapAndIndexMap(e,t){const s=new Map,n=new Map;let i=0;for(const a of e){const r=t.onKeyExtractor(a,i);s.set(r,a),n.set(r,i),i++}return[s,n]}getIndexMapFromView(){const e=new Map;let t=0;return this.view.childNodes.forEach(s=>{e.set(s.id,t++)}),e}addedElementsWithoutAnimation(e,t){let s=0;for(const n of e){const i=t.onKeyExtractor(n,s),a=this.createItem(i),r=t.onTemplateBuilder(n,s);k(r,a),this.view.appendChild(a),s++}}createItem(e){const t=document.createElement("div");return t.id=e.toString(),t}applyDirection(e){let t;e==="vertical"&&(t="column"),e==="horizontal"&&(t="row"),R(this.view,{flexDirection:t})}},De=M(X);function Z(e,t){const s=document.createElement(e);if(t&&typeof t=="function")try{t(s)}catch(n){console.error("call side effect error",n)}return document.head.appendChild(s),s}function He(e){Z("style",t=>ee(t,e))}function ee(e,t){e.textContent=t.cssText}function te(e,t,s){return new CustomEvent(e,{bubbles:!0,composed:!0,detail:{value:t,event:s}})}function Ve(e,t,s,n){e.dispatchEvent(te(t,s,n))}function ze(e=40){try{navigator.vibrate(e)}catch{}}var Ue={requestUpdate:!0},qe=class{constructor(e,t,s){this.host=e,this.observers=t,e.addController(this),this.config={...Ue,...s},this.subscribe()}hostDisconnected(){var e;(e=this.subscription)==null||e.unsubscribe()}subscribe(){const e=_e(Array.isArray(this.observers)?this.observers:[this.observers]);this.subscription=e.subscribe(()=>{this.config.requestUpdate&&this.host.requestUpdate()})}};function se(e,t,s){return new qe(e,t,s)}var ne="screen and (max-width: 610px)",y;function m(){return y||(y=matchMedia(ne)),y}function ke(e){return me`
      @media ${g(ne)} {
          ${g(e)}
      }
  `}var ie=pe(()=>$e(m(),"change")).pipe(I(()=>m()),Ae(m()),ge({bufferSize:0,refCount:!0}));function ae(e){se(e,[ie])}function We(){return ie}function je(e){return ae(e),m()}function re(){const e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")&&!e.includes("crios")}function oe(){var e;return((e=window==null?void 0:window.navigator)==null?void 0:e.standalone)??!1}function Fe(e){return re()&&oe()?g(e):g("")}var S=new WeakMap;function Ke(e){if(S.has(e))return S.get(e);const t=new be(s=>{const n=new ResizeObserver(i=>s.next(i[0]));return n.observe(e),()=>{n.unobserve(e)}});return S.set(e,t),t}var Qe=[w.ar];function N(e){return Qe.includes(e)}var p=w.en,b=new Map,B=new Me(null),j,A=w.en,F=0,K=0,ce=!1,Ge=B.pipe(I(()=>A));async function Ye(e){for(const t in e){const s=Reflect.get(e,t),n=b.get(t)??[];n.push(s),b.set(t,n)}await P(A)}async function L(e){await P(e)}async function de(){const e=localStorage.getItem("1inch_locale")??w.en;ce=!0,await P(e)}function ue(e,t){return B.pipe(I(s=>{if(!s)return"";const n=s[e]??"";return t&&n.includes("{{")&&n.includes("}}")?Je(n,t):n}))}function Je(e,t){let s=e;for(const n in t){const i=t[n],a=`{{${n}}}`;s=s.replaceAll(a,`${i}`)}return s}async function P(e){if(!ce)return;const t=document.querySelector("html");t.dir=N(e)?"rtl":"ltr";const s=b.get(p)??[],n=b.get(e)??[],i=a=>a.reduce((r,c)=>({...r,...c}),{});if(s.length!==F){const a=await Promise.all(s.map(r=>r()));j=i(a),F=s.length}if(A!==e||n.length!==K){const a=await Promise.all(n.map(c=>c())),r=i(a);B.next({...j,...r}),K=n.length}A=e}function Xe(){return N(A)}Reflect.set(window,"changeLocale",L);var Ze=class extends T{render(e,t){return this.subscription&&this.lastPath===e&&Te(this.lastContext,t)?this.lastValue??"":(this.disconnected(),this.subscription=ue(e,t).pipe(Q(G)).subscribe(s=>{this.setValue(s),this.lastValue=s,this.lastPath=e,this.lastContext=t}),"")}disconnected(){var e;(e=this.subscription)==null||e.unsubscribe()}},et=M(Ze),tt=class{constructor(){this.i18nSettings=new we("i18n",p)}async init(){await de();const e=this.i18nSettings.value??p;e!==p&&await this.changeLocale(e)}async changeLocale(e){return this.i18nSettings.setValue(e),await L(e)}};const ft=Object.freeze(Object.defineProperty({__proto__:null,AnimationMap:X,I18nController:tt,addTranslation:Ye,animationMap:De,appendStyle:R,applyStyle:ee,async:Oe,buildEvent:te,changeLocale:L,changeMobileMatchMedia:ae,createAndAppendInHeaderElement:Z,createAndApplyStyle:He,defaultLocaleCode:p,dispatchEvent:Ve,getMobileMatchMedia:m,getMobileMatchMediaAndSubscribe:je,getMobileMatchMediaEmitter:We,initLocale:de,isRTL:N,isRTLCurrentLocale:Xe,isSafari:re,isStandalone:oe,listenChangesByPath:ue,localeChange$:Ge,mobileMediaCSS:ke,observe:Le,resizeObserver:Ke,safariPWACss:Fe,subscribe:se,translate:et,vibrate:ze},Symbol.toStringTag,{value:"Module"}));export{ut as A,We as B,oe as C,De as D,ee as E,Z as F,He as G,ft as H,se as a,R as b,ae as c,Ve as d,je as e,Oe as f,m as g,te as h,Xe as i,re as j,Ye as k,Ge as l,ke as m,M as n,Le as o,Y as p,ye as q,Ke as r,Fe as s,et as t,T as u,ze as v,lt as w,dt as x,ct as y,ht as z};
//# sourceMappingURL=index.esm-CGEC4wRC.js.map
