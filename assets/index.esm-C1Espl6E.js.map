{"version":3,"mappings":"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","names":["__defProp","__getOwnPropDesc","__decorateClass","decorators","target","key","kind","result","i","decorator","repositories","__vitePreload","m","TokenIconElement","LitElement","Task","symbol","address","chainId","signal","symbolView","value","html","loadFromRepository","data","logoURL","resolve","img","ChainId","tokens","isNativeToken","wrapToken","getWrapperNativeToken","token","css","property","consume","ApplicationContextToken","customElement","size","showLoader","index","repositoryLoader"],"ignoreList":[],"sources":["../../../libs/widgets/token-icon/chunk-EUXUH3YW.js","../../../libs/widgets/token-icon/index.esm.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result) __defProp(target, key, result);\n  return result;\n};\n\nexport {\n  __decorateClass\n};\n//# sourceMappingURL=chunk-EUXUH3YW.js.map\n","import {\n  __decorateClass\n} from \"./chunk-EUXUH3YW.js\";\n\n// libs/widgets/src/lib/token-icon/token-icon.element.ts\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators.js\";\nimport { Task } from \"@lit/task\";\n\n// libs/widgets/src/lib/token-icon/repositories/index.ts\nvar repositories = [\n  () => import(\"./one-inch.repository-AF3TE4XT.js\").then((m) => m.oneInchRepository),\n  () => import(\"./uniswap.repository-MXTOGC4T.js\").then((m) => m.uniSwapRepository),\n  () => import(\"./trustwallet.repository-P6G45YEI.js\").then((m) => m.trustWalletRepository),\n  // () => import('./sushiswap.repository').then(m => m.sushiSwapRepository),\n  () => import(\"./pancakeswap.repository-LI7PUPCX.js\").then((m) => m.pancakeSwapRepository)\n];\n\n// libs/widgets/src/lib/token-icon/token-icon.element.ts\nimport { ChainId } from \"@one-inch-community/models\";\nimport { getWrapperNativeToken, isNativeToken } from \"@one-inch-community/sdk/chain\";\nimport { consume } from \"@lit/context\";\nimport { ApplicationContextToken } from \"@one-inch-community/core/application-context\";\nvar TokenIconElement = class extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.size = 24;\n    this.task = new Task(this, {\n      task: ([symbol, address, chainId], { signal }) => {\n        return this.iconLoader(signal, chainId, symbol, address);\n      },\n      args: () => [this.symbol, this.address, this.chainId]\n    });\n  }\n  render() {\n    return this.task.render({\n      error: () => symbolView(this.size, this.symbol),\n      pending: () => symbolView(this.size, this.symbol, true),\n      initial: () => symbolView(this.size, this.symbol, true),\n      complete: (value) => {\n        value.width = this.size;\n        value.height = this.size;\n        value.ondragstart = () => false;\n        return html`${value}`;\n      }\n    });\n  }\n  updated() {\n    this.style.width = `${this.size}px`;\n    this.style.height = `${this.size}px`;\n  }\n  async iconLoader(signal, chainId, symbol, address) {\n    let result = await this.loadFromDatabase({ chainId, symbol, address, signal });\n    if (result === null) {\n      result = await loadFromRepository({ chainId, symbol, address, signal });\n    }\n    if (result === null) {\n      result = await this.loadIconFromMultiChain({ chainId, symbol, address, signal });\n    }\n    if (result === null) {\n      throw new Error(\"token icon not fount\");\n    }\n    return result;\n  }\n  async loadFromDatabase(data) {\n    if (!data.chainId || !data.address) {\n      return null;\n    }\n    const logoURL = await this.applicationContext.tokenController.getTokenLogoURL(data.chainId, data.address);\n    if (!logoURL) {\n      return null;\n    }\n    return await new Promise((resolve) => {\n      const img = new Image();\n      img.onerror = () => resolve(null);\n      img.onload = () => resolve(img);\n      img.src = logoURL;\n    });\n  }\n  async loadIconFromMultiChain(data) {\n    if (data.chainId === ChainId.eth || !data.symbol) return null;\n    const tokens = await this.applicationContext.tokenController.getTokenBySymbol(ChainId.eth, data.symbol);\n    if (data.chainId && data.address && isNativeToken(data.address)) {\n      const wrapToken = getWrapperNativeToken(data.chainId);\n      tokens.push(wrapToken);\n    }\n    for (const token of tokens) {\n      const result = await loadFromRepository({ ...data, chainId: token.chainId, address: token.address });\n      if (result) return result;\n    }\n    return null;\n  }\n};\nTokenIconElement.tagName = \"inch-token-icon\";\nTokenIconElement.styles = css`\n\n      :host {\n          user-select: none;\n          outline: none;\n          -webkit-user-select: none;\n          -webkit-tap-highlight-color: transparent;\n      }\n\n      .stub {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background-color: var(--color-background-bg-secondary);\n          border-radius: 50%;\n          color: var(--color-content-content-secondary);\n          position: relative;\n      }\n      .stub-loader {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n          border: 1px solid;\n          border-bottom-color: var(--secondary);\n          border-top-color: var(--secondary);\n          animation: spin 1s linear infinite;\n      }\n      \n      img {\n          user-select: none;\n          outline: none;\n          -webkit-user-select: none;\n          -webkit-tap-highlight-color: transparent;\n      }\n\n      @keyframes spin {\n          0% {\n              transform: rotate(0deg);\n          }\n\n          100% {\n              transform: rotate(360deg);\n          }\n      }\n  \n  `;\n__decorateClass([\n  property({ type: String, attribute: true })\n], TokenIconElement.prototype, \"symbol\", 2);\n__decorateClass([\n  property({ type: String, attribute: true })\n], TokenIconElement.prototype, \"address\", 2);\n__decorateClass([\n  property({ type: Number, attribute: true })\n], TokenIconElement.prototype, \"chainId\", 2);\n__decorateClass([\n  property({ type: Number, attribute: true })\n], TokenIconElement.prototype, \"size\", 2);\n__decorateClass([\n  consume({ context: ApplicationContextToken })\n], TokenIconElement.prototype, \"applicationContext\", 2);\nTokenIconElement = __decorateClass([\n  customElement(TokenIconElement.tagName)\n], TokenIconElement);\nfunction symbolView(size, symbol, showLoader) {\n  return html`\n    <div style=\"width: ${size}px; height: ${size}px; font-size: ${size < 40 ? 13 : 16}px\" class=\"stub\">\n      <span>${symbol?.slice(0, size < 40 ? 1 : 2) ?? \"\"}</span>\n      ${showLoader ? html`<span class=\"stub-loader\"></span>` : \"\"}\n    </div>\n  `;\n}\nasync function loadFromRepository(data, index = 0) {\n  const repositoryLoader = repositories[index];\n  if (!repositoryLoader) return null;\n  try {\n    const repository = await repositoryLoader();\n    return await repository(data);\n  } catch (error) {\n    return await loadFromRepository(data, index + 1);\n  }\n}\nexport {\n  TokenIconElement\n};\n//# sourceMappingURL=index.esm.js.map\n"],"file":"assets/index.esm-C1Espl6E.js"}