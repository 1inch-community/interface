const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app.element-CeOOpwp6.js","assets/index-DyOQYfny.js","assets/index.esm-C8vTiRtz.js","assets/startWith-CUA0N737.js","assets/combineLatest-Cy55o5u3.js","assets/asap-D0uGzbkj.js","assets/index.esm-De_LfLUL.js","assets/index.esm-CKlGnVDd.js","assets/index.esm-BmGDGD-v.js","assets/index.esm-COc-PyqV.js","assets/tap-C5qX7kP3.js","assets/takeUntil-xlAw-b8w.js","assets/index.esm-DQpf5hpN.js","assets/index.esm-Dy_n7r5M.js","assets/import-wrapper-prod-mRNndFxq.js","assets/index.esm-CfgXj9n3.js","assets/firstValueFrom-vB9vMkgk.js","assets/index.esm-BweXAecL.js"])))=>i.map(i=>d[i]);
import{_ as b,s as L,x as d,A as k,t as V}from"./index-DyOQYfny.js";import{m as M,i as _,j as O,e as D,c as x,r as j}from"./index.esm-De_LfLUL.js";import{S as U}from"./index.esm-CfgXj9n3.js";import{s as W}from"./swap-form.style-B6_go88T.js";import{S as z}from"./app.element-CeOOpwp6.js";import{v as N,b as p,a as Y}from"./index.esm-C8vTiRtz.js";import{getThemeChange as B,BrandColors as G}from"./index.esm-CKlGnVDd.js";import{C as H}from"./index.esm-Dy_n7r5M.js";import{h as J,k as S,l as $,p as F,A as K,q as Q,d as X,f as m,m as P,g as Z}from"./startWith-CUA0N737.js";import{f as ee,t as te}from"./takeUntil-xlAw-b8w.js";import{s as ne,d as ae}from"./index.esm-BmGDGD-v.js";import{t as g}from"./tap-C5qX7kP3.js";import{f as ie}from"./firstValueFrom-vB9vMkgk.js";import"./index.esm-COc-PyqV.js";import"./index.esm-DQpf5hpN.js";import"./combineLatest-Cy55o5u3.js";import"./asap-D0uGzbkj.js";import"./import-wrapper-prod-mRNndFxq.js";var u={schedule:function(e){var n=requestAnimationFrame,t=cancelAnimationFrame,i=u.delegate;i&&(n=i.requestAnimationFrame,t=i.cancelAnimationFrame);var a=n(function(o){t=void 0,e(o)});return new J(function(){return t==null?void 0:t(a)})},requestAnimationFrame:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return requestAnimationFrame.apply(void 0,S([],$(e)))},cancelAnimationFrame:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=u.delegate;return((t==null?void 0:t.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,S([],$(e)))},delegate:void 0},oe=function(e){F(n,e);function n(t,i){var a=e.call(this,t,i)||this;return a.scheduler=t,a.work=i,a}return n.prototype.requestAsyncId=function(t,i,a){return a===void 0&&(a=0),a!==null&&a>0?e.prototype.requestAsyncId.call(this,t,i,a):(t.actions.push(this),t._scheduled||(t._scheduled=u.requestAnimationFrame(function(){return t.flush(void 0)})))},n.prototype.recycleAsyncId=function(t,i,a){var o;if(a===void 0&&(a=0),a!=null?a>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,i,a);var r=t.actions;i!=null&&((o=r[r.length-1])===null||o===void 0?void 0:o.id)!==i&&(u.cancelAnimationFrame(i),t._scheduled=void 0)},n}(K),re=function(e){F(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.flush=function(t){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var a=this.actions,o;t=t||a.shift();do if(o=t.execute(t.state,t.delay))break;while((t=a[0])&&t.id===i&&a.shift());if(this._active=!1,o){for(;(t=a[0])&&t.id===i&&a.shift();)t.unsubscribe();throw o}},n}(Q),se=new re(oe),le=Object.defineProperty,ce=Object.getOwnPropertyDescriptor,he=(e,n,t,i)=>{for(var a=ce(n,t),o=e.length-1,r;o>=0;o--)(r=e[o])&&(a=r(n,t,a)||a);return a&&le(n,t,a),a};function de(e,n){let t=0,i=!1,a=!1;const o=new T,r=60,C=5e5,v=3,R=4,q=()=>document.querySelector("#app-root"),h=()=>e.value,E=()=>n.value,A=s=>{if(s<0)return;let l;s>r?(i||(N(50),o.play().then()),i=!0,s<=r+v?l=r+(s-r)/C:l=r+v/C+(s-r-v)/R):(i=!1,l=s);const w=(s>r?r:s)/r;p(E(),{transform:`scale(${w})`}),p(h(),{transform:`translate3d(0, ${l}px, 0)`}),t=l},I=async()=>{a=!0;let s=t;s>r&&o.isPlaying&&(await h().animate([{transform:`translate3d(0, ${s}px, 0)`},{transform:`translate3d(0, ${r}px, 0)`}],{duration:200,easing:"cubic-bezier(.2, .8, .2, 1)"}).finished,s=r,p(h(),{transform:`translate3d(0, ${s}px, 0)`}),await o.onEnded()),await h().animate([{transform:`translate3d(0, ${s}px, 0)`},{transform:"translate3d(0, 0, 0)"}],{duration:800,easing:"cubic-bezier(.2, .8, .2, 1)"}).finished,A(0),p(h(),{transform:""}),i=!1,a=!1};return X(()=>{const s=h();return m(s,"touchstart").pipe(ee(()=>{var l;return!a&&(((l=q())==null?void 0:l.scrollTop)??0)===0}),ne(l=>{o.load();const w=l.touches[0].clientY;return m(s,"touchmove").pipe(P(y=>y.touches[0].clientY-w),g(y=>A(y)),te(m(s,"touchend").pipe(g(()=>I()))))}))}).pipe(Z(se))}class T{get isPlaying(){return!this.audio.paused}constructor(){this.audio=new Audio("audio/unicorn-run.mp3"),this.audio.preload="none",this.audio.volume=.4}load(){this.audio.load()}async play(){try{await this.audio.play()}catch(n){console.error("AudionController Error",n)}}onEnded(){return ie(m(this.audio,"ended"))}}he([H()],T.prototype,"play");var pe=Object.defineProperty,me=Object.getOwnPropertyDescriptor,f=(e,n,t,i)=>{for(var a=i>1?void 0:i?me(n,t):n,o=e.length-1,r;o>=0;o--)(r=e[o])&&(a=(i?r(n,t,a):r(a))||a);return i&&a&&pe(n,t,a),a};b(()=>import("./app.element-CeOOpwp6.js").then(e=>e.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]));b(()=>import("./index.esm-BweXAecL.js"),__vite__mapDeps([17,1,6,7,2,3,4,5,8,9,10,11,0,12,13,14,15,16]));b(()=>import("./index.esm-De_LfLUL.js").then(e=>e.q),__vite__mapDeps([6,1,7,2,3,4,5,8,9,10,11]));let c=class extends L{constructor(){super(...arguments),this.isRainbowTheme=!1,this.targetSelectToken=null,this.mobileOverlay=new M("app-root"),this.swapFormContainerRef=_(),this.unicornLoaderRef=_()}firstUpdated(){setTimeout(()=>this.classList.add("padding-top-transition"),100),Y(this,[B().pipe(P(({brandColor:e})=>e),ae(),g(e=>this.isRainbowTheme=e===G.rainbow)),de(this.swapFormContainerRef,this.unicornLoaderRef)],{requestUpdate:!1})}render(){const e={"shadow-container":!0,"shadow-container-rainbow":this.isRainbowTheme};return d`<inch-icon ${O(this.unicornLoaderRef)} class="unicorn-loader" icon="unicornRun"></inch-icon><div ${O(this.swapFormContainerRef)} class="${D(e)}"><inch-card style="max-width:100vw"><inch-swap-form @confirmSwap="${n=>this.onOpenMobileConfirmSwap(n)}" @changeFusionInfoOpenState="${n=>this.onChangeFusionInfoOpenState(n)}" @openTokenSelector="${n=>this.onOpenMobileSelectToken(n)}" @changeChain="${()=>this.onOpenChangeChainView()}" @connectWallet="${()=>this.onOpenConnectWalletView()}"></inch-swap-form></inch-card></div>`}onChangeFusionInfoOpenState(e){e.detail.value&&!this.classList.contains("is-enlarged-form")&&this.classList.add("is-enlarged-form"),!e.detail.value&&this.classList.contains("is-enlarged-form")&&this.classList.remove("is-enlarged-form")}async onOpenMobileConfirmSwap(e){const n=e.detail.value,t=await this.mobileOverlay.open(d`<inch-card forMobileView style="width:100%;height:100%;display:flex"><inch-confirm-swap .swapContext="${this.swapContext}" .swapSnapshot="${n}" @backCard="${async()=>{await this.mobileOverlay.close(t)}}"></inch-confirm-swap></inch-card>`)}async onOpenMobileSelectToken(e){this.targetSelectToken=e.detail.value;const n=await this.mobileOverlay.open(d`<inch-card forMobileView style="width:100%;height:100%;display:flex"><inch-select-token .swapContext="${this.swapContext}" tokenType="${this.targetSelectToken}" @backCard="${()=>this.mobileOverlay.close(n)}"></inch-select-token></inch-card>`)}async onOpenChangeChainView(){const e=await this.mobileOverlay.open(d`<inch-chain-selector-list showShadow @closeCard="${()=>this.mobileOverlay.close(e)}" .controller="${this.applicationContext.connectWalletController}"></inch-chain-selector-list>`)}async onOpenConnectWalletView(){const e=await this.mobileOverlay.open(d`<inch-wallet-manage showShadow @closeCard="${()=>this.mobileOverlay.close(e)}" .controller="${this.applicationContext.connectWalletController}"></inch-wallet-manage>`)}};c.tagName="inch-swap-form-mobile";c.styles=[W,z.styles()];f([x({context:U})],c.prototype,"swapContext",2);f([x({context:k})],c.prototype,"applicationContext",2);f([j()],c.prototype,"isRainbowTheme",2);c=f([V(c.tagName)],c);export{c as SwapFormMobileElement};
//# sourceMappingURL=swap-form-mobile.element-Lap3L5ip.js.map
